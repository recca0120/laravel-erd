/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@dineug/erd-editor@3.2.3/dist/erd-editor.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}var i=t,o=n;function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===t||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}"function"==typeof e.setTimeout&&(i=setTimeout),"function"==typeof e.clearTimeout&&(o=clearTimeout);var r,a=[],s=!1,c=-1;function u(){s&&r&&(s=!1,r.length?a=r.concat(a):c=-1,a.length&&d())}function d(){if(!s){var e=l(u);s=!0;for(var t=a.length;t;){for(r=a,a=[];++c<t;)r&&r[c].run();c=-1,t=a.length}r=null,s=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===n||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};function h(){}var m=h,b=h,f=h,y=h,g=h,v=h,Z=h;var x=e.performance||{},G=x.now||x.mozNow||x.msNow||x.oNow||x.webkitNow||function(){return(new Date).getTime()};var X=new Date;var I={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new p(e,t)),1!==a.length||s||l(d)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:m,addListener:b,once:f,off:y,removeListener:g,removeAllListeners:v,emit:Z,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*G.call(x),n=Math.floor(t),i=Math.floor(t%1*1e9);return e&&(n-=e[0],(i-=e[1])<0&&(n--,i+=1e9)),[n,i]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-X)/1e3}};
/*!
 * @dineug/erd-editor
 * @version 3.2.3 | Sat Apr 13 2024
 * @author SeungHwan-Lee <dineug2@gmail.com>
 * @license MIT
 */
/*!
 * @dineug/erd-editor-schema
 * @version 0.1.0 | Sat Apr 13 2024
 * @author SeungHwan-Lee <dineug2@gmail.com>
 * @license MIT
 */const W="object"==typeof e&&e&&e.Object===Object&&e;var k="object"==typeof self&&self&&self.Object===Object&&self;const V=W||k||Function("return this")();const S=V.Symbol;var C=Object.prototype,L=C.hasOwnProperty,R=C.toString,Y=S?S.toStringTag:void 0;var w=Object.prototype.toString;var T="[object Null]",N="[object Undefined]",K=S?S.toStringTag:void 0;function z(e){return null==e?void 0===e?N:T:K&&K in Object(e)?function(e){var t=L.call(e,Y),n=e[Y];try{e[Y]=void 0;var i=!0}catch{}var o=R.call(e);return i&&(t?e[Y]=n:delete e[Y]),o}(e):function(e){return w.call(e)}(e)}function H(e){return null!=e&&"object"==typeof e}var M="[object Symbol]";function J(e){return"symbol"==typeof e||H(e)&&z(e)==M}function j(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}const F=Array.isArray;var U=1/0,O=S?S.prototype:void 0,E=O?O.toString:void 0;function $(e){if("string"==typeof e)return e;if(F(e))return j(e,$)+"";if(J(e))return E?E.call(e):"";var t=e+"";return"0"==t&&1/e==-U?"-0":t}function P(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function B(e){return e}var A="[object AsyncFunction]",Q="[object Function]",D="[object GeneratorFunction]",_="[object Proxy]";function q(e){if(!P(e))return!1;var t=z(e);return t==Q||t==D||t==A||t==_}const ee=V["__core-js_shared__"];var te,ne=(te=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+te:"";var ie=Function.prototype.toString;var oe=/^\[object .+?Constructor\]$/,le=Function.prototype,re=Object.prototype,ae=le.toString,se=re.hasOwnProperty,ce=RegExp("^"+ae.call(se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ue(e){return!(!P(e)||function(e){return!!ne&&ne in e}(e))&&(q(e)?ce:oe).test(function(e){if(null!=e){try{return ie.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function de(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ue(n)?n:void 0}var pe=Date.now;function he(e){return function(){return e}}var me=function(){try{var e=de(Object,"defineProperty");return e({},"",{}),e}catch{}}();const be=me;var fe=be?function(e,t){return be(e,"toString",{configurable:!0,enumerable:!1,value:he(t),writable:!0})}:B;var ye=function(e){var t=0,n=0;return function(){var i=pe(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(fe);const ge=ye;function ve(e){return e!=e}function Ze(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}(e,t,n):function(e,t,n,i){for(var o=e.length,l=n+(i?1:-1);i?l--:++l<o;)if(t(e[l],l,e))return l;return-1}(e,ve,n)}(e,t,0)>-1}var xe=9007199254740991,Ge=/^(?:0|[1-9]\d*)$/;function Xe(e,t){var n=typeof e;return!!(t=t??xe)&&("number"==n||"symbol"!=n&&Ge.test(e))&&e>-1&&e%1==0&&e<t}function Ie(e,t){return e===t||e!=e&&t!=t}var We=Object.prototype.hasOwnProperty;function ke(e,t,n){var i=e[t];(!We.call(e,t)||!Ie(i,n)||void 0===n&&!(t in e))&&function(e,t,n){"__proto__"==t&&be?be(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}var Ve=Math.max;function Se(e,t,n){return t=Ve(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,l=Ve(i.length-t,0),r=Array(l);++o<l;)r[o]=i[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=i[o];return a[t]=n(r),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}var Ce=9007199254740991;function Le(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ce}function Re(e){return H(e)&&"[object Arguments]"==z(e)}var Ye=Object.prototype,we=Ye.hasOwnProperty,Te=Ye.propertyIsEnumerable,Ne=Re(function(){return arguments}())?Re:function(e){return H(e)&&we.call(e,"callee")&&!Te.call(e,"callee")};const Ke=Ne;var ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,He=/^\w*$/;const Me=de(Object,"create");var Je=Object.prototype.hasOwnProperty;var je=Object.prototype.hasOwnProperty;function Fe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ue(e,t){for(var n=e.length;n--;)if(Ie(e[n][0],t))return n;return-1}Fe.prototype.clear=function(){this.__data__=Me?Me(null):{},this.size=0},Fe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Fe.prototype.get=function(e){var t=this.__data__;if(Me){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Je.call(t,e)?t[e]:void 0},Fe.prototype.has=function(e){var t=this.__data__;return Me?void 0!==t[e]:je.call(t,e)},Fe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Me&&void 0===t?"__lodash_hash_undefined__":t,this};var Oe=Array.prototype.splice;function Ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Ee.prototype.clear=function(){this.__data__=[],this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=Ue(t,e);return!(n<0)&&(n==t.length-1?t.pop():Oe.call(t,n,1),--this.size,!0)},Ee.prototype.get=function(e){var t=this.__data__,n=Ue(t,e);return n<0?void 0:t[n][1]},Ee.prototype.has=function(e){return Ue(this.__data__,e)>-1},Ee.prototype.set=function(e,t){var n=this.__data__,i=Ue(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};const $e=de(V,"Map");function Pe(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Be.prototype.clear=function(){this.size=0,this.__data__={hash:new Fe,map:new($e||Ee),string:new Fe}},Be.prototype.delete=function(e){var t=Pe(this,e).delete(e);return this.size-=t?1:0,t},Be.prototype.get=function(e){return Pe(this,e).get(e)},Be.prototype.has=function(e){return Pe(this,e).has(e)},Be.prototype.set=function(e,t){var n=Pe(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var Ae="Expected a function";function Qe(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ae);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],l=n.cache;if(l.has(o))return l.get(o);var r=e.apply(this,i);return n.cache=l.set(o,r)||l,r};return n.cache=new(Qe.Cache||Be),n}Qe.Cache=Be;var De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_e=/\\(\\)?/g,qe=function(e){var t=Qe(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(De,(function(e,n,i,o){t.push(i?o.replace(_e,"$1"):n||e)})),t}));const et=qe;function tt(e,t){return F(e)?e:function(e,t){if(F(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!J(e))||He.test(e)||!ze.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:et(function(e){return null==e?"":$(e)}(e))}var nt=1/0;function it(e){if("string"==typeof e||J(e))return e;var t=e+"";return"0"==t&&1/e==-nt?"-0":t}function ot(e,t){for(var n=0,i=(t=tt(t,e)).length;null!=e&&n<i;)e=e[it(t[n++])];return n&&n==i?e:void 0}function lt(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}var rt=S?S.isConcatSpreadable:void 0;function at(e){return F(e)||Ke(e)||!!(rt&&e&&e[rt])}function st(e,t,n,i,o){var l=-1,r=e.length;for(n||(n=at),o||(o=[]);++l<r;){var a=e[l];t>0&&n(a)?t>1?st(a,t-1,n,i,o):lt(o,a):i||(o[o.length]=a)}return o}function ct(e){return(null==e?0:e.length)?st(e,1):[]}function ut(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Be;++t<n;)this.add(e[t])}function dt(e,t){return e.has(t)}function pt(e,t){return null!=e&&t in Object(e)}function ht(e,t){return null!=e&&function(e,t,n){for(var i=-1,o=(t=tt(t,e)).length,l=!1;++i<o;){var r=it(t[i]);if(!(l=null!=e&&n(e,r)))break;e=e[r]}return l||++i!=o?l:!!(o=null==e?0:e.length)&&Le(o)&&Xe(r,o)&&(F(e)||Ke(e))}(e,t,pt)}function mt(e){return H(e)&&function(e){return null!=e&&Le(e.length)&&!q(e)}(e)}function bt(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}ut.prototype.add=ut.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ut.prototype.has=function(e){return this.__data__.has(e)};var ft=function(e,t){return ge(Se(e,t,B),e+"")}((function(e,t){return mt(e)?function(e,t,n,i){var o=-1,l=Ze,r=!0,a=e.length,s=[],c=t.length;if(!a)return s;n&&(t=j(t,function(e){return function(t){return e(t)}}(n))),i?(l=bt,r=!1):t.length>=200&&(l=dt,r=!1,t=new ut(t));e:for(;++o<a;){var u=e[o],d=null==n?u:n(u);if(u=i||0!==u?u:0,r&&d==d){for(var p=c;p--;)if(t[p]===d)continue e;s.push(u)}else l(t,d,i)||s.push(u)}return s}(e,st(t,1,mt,!0)):[]}));const yt=ft;function gt(e,t,n,i){if(!P(e))return e;for(var o=-1,l=(t=tt(t,e)).length,r=l-1,a=e;null!=a&&++o<l;){var s=it(t[o]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=r){var u=a[s];void 0===(c=i?i(u,s,a):void 0)&&(c=P(u)?u:Xe(t[o+1])?[]:{})}ke(a,s,c),a=a[s]}return e}function vt(e,t){return function(e,t,n){for(var i=-1,o=t.length,l={};++i<o;){var r=t[i],a=ot(e,r);n(a,r)&&gt(l,tt(r,e),a)}return l}(e,t,(function(t,n){return ht(e,n)}))}var Zt=function(e){return ge(Se(e,void 0,ct),e+"")}((function(e,t){return null==e?{}:vt(e,t)}));const xt=Zt,Gt=e=>t=>typeof t===e,Xt=Gt("object"),It=Gt("boolean"),Wt=Gt("number"),kt=Gt("string"),Vt=Gt("undefined"),St=e=>null===e,Ct=e=>St(e)||Vt(e),{isArray:Lt}=Array,Rt=e=>Xt(e)&&!St(e)&&!Lt(e);const Yt=((e,t,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*t/e.length);return(l=t)=>{let r="";for(;;){let t=n(o),a=o;for(;a--;)if(r+=e[t[a]&i]||"",r.length===l)return r}}})("useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",21,(e=>{let t=globalThis.crypto;return void 0===t&&(t=require("node:crypto").webcrypto),t.getRandomValues(new Uint8Array(e))})),wt=(e,t)=>n=>Math.min(Math.max(n,e),t);function Tt(e,t,n){return i=>{if(!n)return;const o=n[i];e(o)&&(t[i]=o)}}function Nt(e){return t=>kt(t)&&e.includes(t)}function Kt(e){return t=>Wt(t)&&e.includes(t)}function zt(e,t,n){return Reflect.get(e,t)??n}function Ht(){const e=Date.now();return{updateAt:e,createAt:e}}function Mt(e,t){const n=Tt(Wt,e,t);n("updateAt"),n("createAt")}const Jt=()=>({tableIds:[],relationshipIds:[],indexIds:[],memoIds:[]});const jt=()=>({id:"",name:"",tableId:"",indexColumnIds:[],seqIndexColumnIds:[],unique:!1,meta:Ht()});const Ft={ASC:1,DESC:2},Ut=Object.values(Ft),Ot=()=>({id:"",indexId:"",columnId:"",orderType:Ft.ASC,meta:Ht()});const Et=()=>({});const $t=()=>({id:"",value:"",ui:{x:200,y:100,zIndex:2,width:116,height:100,color:""},meta:Ht()});const Pt={ZeroOne:2,ZeroN:4,OneOnly:8,OneN:16},Bt=Object.values(Pt),At={ring:1,dash:2},Qt=Object.values(At),Dt={left:1,right:2,top:4,bottom:8},_t=Object.values(Dt),qt=()=>({id:"",identification:!1,relationshipType:Pt.ZeroN,startRelationshipType:At.dash,start:{tableId:"",columnIds:[],x:0,y:0,direction:Dt.bottom},end:{tableId:"",columnIds:[],x:0,y:0,direction:Dt.bottom},meta:Ht()});const en={ERD:"ERD",visualization:"@dineug/erd-editor/builtin-visualization",schemaSQL:"@dineug/erd-editor/builtin-schema-sql",generatorCode:"@dineug/erd-editor/builtin-generator-code",settings:"settings"},tn=Object.values(en),nn={tableComment:1,columnComment:2,columnDataType:4,columnDefault:8,columnAutoIncrement:16,columnPrimaryKey:32,columnUnique:64,columnNotNull:128,relationship:256},on={columnName:1,columnDataType:2,columnNotNull:4,columnUnique:8,columnAutoIncrement:16,columnDefault:32,columnComment:64},ln=Object.values(on),rn={MariaDB:1,MSSQL:2,MySQL:4,Oracle:8,PostgreSQL:16,SQLite:32},an=Object.values(rn),sn={GraphQL:1,csharp:2,Java:4,Kotlin:8,TypeScript:16,JPA:32,Scala:64},cn=Object.values(sn),un={none:1,camelCase:2,pascalCase:4,snakeCase:8},dn=Object.values(un),pn={none:1,doubleQuote:2,singleQuote:4,backtick:8},hn=Object.values(pn),mn=nn.tableComment|nn.columnComment|nn.columnDataType|nn.columnDefault|nn.columnPrimaryKey|nn.columnNotNull|nn.relationship,bn=()=>({width:2e3,height:2e3,scrollTop:0,scrollLeft:0,zoomLevel:1,show:mn,database:rn.MySQL,databaseName:"",canvasType:en.ERD,language:sn.GraphQL,tableNameCase:un.pascalCase,columnNameCase:un.camelCase,bracketType:pn.none,relationshipDataTypeSync:!0,relationshipOptimization:!1,columnOrder:[on.columnName,on.columnDataType,on.columnNotNull,on.columnUnique,on.columnAutoIncrement,on.columnDefault,on.columnComment],maxWidthComment:-1,ignoreSaveSettings:0}),fn=wt(2e3,2e4),yn=wt(.1,1),gn=wt(60,200);const vn=()=>({id:"",name:"",comment:"",columnIds:[],seqColumnIds:[],ui:{x:200,y:100,zIndex:2,widthName:60,widthComment:60,color:""},meta:Ht()});const Zn=()=>({id:"",tableId:"",name:"",comment:"",dataType:"",default:"",options:0,ui:{keys:0,widthName:60,widthComment:60,widthDataType:60,widthDefault:60},meta:Ht()});function xn(e){var t,n,i,o,l,r;const a=e,s=function(e){const t=bn();if(!Rt(e)||Ct(e))return t;const n=Tt(Wt,t,e),i=Tt(kt,t,e),o=Tt(It,t,e);return Wt(e.width)&&(t.width=fn(e.width)),Wt(e.height)&&(t.height=fn(e.height)),Wt(e.zoomLevel)&&(t.zoomLevel=yn(e.zoomLevel)),Wt(e.maxWidthComment)&&-1!==e.maxWidthComment&&(t.maxWidthComment=gn(e.maxWidthComment)),n("scrollTop"),n("scrollLeft"),n("show"),n("ignoreSaveSettings"),i("databaseName"),i("canvasType"),o("relationshipDataTypeSync"),o("relationshipOptimization"),Tt(Kt(an),t,e)("database"),Tt(Kt(cn),t,e)("language"),Tt(Kt(dn),t,e)("tableNameCase"),Tt(Kt(dn),t,e)("columnNameCase"),Tt(Kt(hn),t,e)("bracketType"),Lt(e.columnOrder)&&ln.length===e.columnOrder.length&&0===yt(ln,e.columnOrder).length&&(t.columnOrder=e.columnOrder),t}(a.settings),c=function(e){const t=Jt();if(!Rt(e)||Ct(e))return t;const n=Tt(Lt,t,e);return n("tableIds"),n("relationshipIds"),n("indexIds"),n("memoIds"),t}(a.doc),u=function(e){const t=Et();if(!Rt(e)||Ct(e))return t;for(const[n,i]of Object.entries(e)){if(!Lt(i)||4!==i.length)continue;const[e,o,l,r]=i;if(kt(e)&&Wt(o)&&Wt(l)&&Rt(r)){const i={},a=Tt(Wt,i,r);Object.keys(r).forEach(a),t[n]=[e,o,l,i]}}return t}(a.lww),d=function(e){const t={};if(!Rt(e)||Ct(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=vn(),i=Tt(kt,e,n),o=Tt(Lt,e,n),l=Tt(Wt,e.ui,n.ui),r=Tt(kt,e.ui,n.ui);i("id"),i("name"),i("comment"),o("columnIds"),o("seqColumnIds"),r("color"),l("x"),l("y"),l("zIndex"),l("widthName"),l("widthComment"),Mt(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(t=a.collections)?void 0:t.tableEntities),p=function(e){const t={};if(!Rt(e)||Ct(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=Zn(),i=Tt(kt,e,n),o=Tt(Wt,e,n),l=Tt(Wt,e.ui,n.ui);i("id"),i("tableId"),i("name"),i("comment"),i("dataType"),i("default"),o("options"),l("keys"),l("widthName"),l("widthComment"),l("widthDataType"),l("widthDefault"),Mt(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(n=a.collections)?void 0:n.tableColumnEntities),h=function(e){const t={};if(!Rt(e)||Ct(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=qt(),i=Tt(kt,e,n),o=Tt(It,e,n),l=Tt(Wt,e.start,n.start),r=Tt(kt,e.start,n.start),a=Tt(Wt,e.end,n.end),s=Tt(kt,e.end,n.end);i("id"),o("identification"),Tt(Kt(Bt),e,n)("relationshipType"),Tt(Kt(Qt),e,n)("startRelationshipType"),r("tableId"),l("x"),l("y"),Tt(Kt(_t),e.start,n.start)("direction"),Tt(Lt,e.start,n.start)("columnIds"),s("tableId"),a("x"),a("y"),Tt(Kt(_t),e.end,n.end)("direction"),Tt(Lt,e.end,n.end)("columnIds"),Mt(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(i=a.collections)?void 0:i.relationshipEntities),m=function(e){const t={};if(!Rt(e)||Ct(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=jt(),i=Tt(kt,e,n),o=Tt(It,e,n),l=Tt(Lt,e,n);i("id"),i("name"),i("tableId"),o("unique"),l("indexColumnIds"),l("seqIndexColumnIds"),Mt(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(o=a.collections)?void 0:o.indexEntities),b=function(e){const t={};if(!Rt(e)||Ct(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=Ot(),i=Tt(kt,e,n);i("id"),i("indexId"),i("columnId"),Tt(Kt(Ut),e,n)("orderType"),Mt(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(l=a.collections)?void 0:l.indexColumnEntities),f=function(e){const t={};if(!Rt(e)||Ct(e))return t;for(const n of Object.values(e)){if(!n)continue;const e=$t(),i=Tt(kt,e,n),o=Tt(Wt,e.ui,n.ui),l=Tt(kt,e.ui,n.ui);i("id"),i("value"),l("color"),o("x"),o("y"),o("zIndex"),o("width"),o("height"),Mt(e.meta,n.meta),e.id&&(t[e.id]=e)}return t}(null==(r=a.collections)?void 0:r.memoEntities);return{$schema:"https://raw.githubusercontent.com/dineug/erd-editor/main/json-schema/schema.json",version:"3.0.0",settings:s,doc:c,collections:{tableEntities:d,tableColumnEntities:p,relationshipEntities:h,indexEntities:m,indexColumnEntities:b,memoEntities:f},lww:u}}const Gn={CanvasType:en,CanvasTypeList:tn,Show:nn,ColumnType:on,ColumnTypeList:ln,Database:rn,DatabaseList:an,Language:sn,LanguageList:cn,NameCase:un,NameCaseList:dn,BracketType:pn,BracketTypeList:hn,RelationshipType:Pt,RelationshipTypeList:Bt,StartRelationshipType:At,StartRelationshipTypeList:Qt,Direction:Dt,DirectionList:_t,ColumnOption:{autoIncrement:1,primaryKey:2,unique:4,notNull:8},ColumnUIKey:{primaryKey:1,foreignKey:2},OrderType:Ft,OrderTypeList:Ut,SaveSettingType:{scroll:1,zoomLevel:2},CANVAS_SIZE_MAX:2e4,CANVAS_SIZE_MIN:2e3,CANVAS_ZOOM_MAX:1,CANVAS_ZOOM_MIN:.1};function Xn(e){const t=xn({});return function(e,t){e.width=t.width,e.height=t.height,e.scrollTop=t.scrollTop,e.scrollLeft=t.scrollLeft,e.zoomLevel=t.zoomLevel,e.databaseName=t.databaseName,e.canvasType=Gn.CanvasType.ERD,e.show=Object.keys(t.show).reduce(((e,n)=>{if(zt(t.show,n,!1)){return e|zt(Gn.Show,n,0)}return e}),0),e.database=Reflect.get(Gn.Database,t.database)??Gn.Database.MySQL,e.language="C#"===t.language?Gn.Language.csharp:zt(Gn.Language,t.language,Gn.Language.GraphQL),e.tableNameCase=zt(Gn.NameCase,t.tableCase,Gn.NameCase.pascalCase),e.columnNameCase=zt(Gn.NameCase,t.columnCase,Gn.NameCase.camelCase),e.bracketType=zt(Gn.BracketType,t.bracketType,Gn.BracketType.none),e.relationshipDataTypeSync=t.setting.relationshipDataTypeSync,e.relationshipOptimization=t.setting.relationshipOptimization;const n=t.setting.columnOrder.map((e=>Gn.ColumnType[e]));0===yt(Gn.ColumnTypeList,n).length&&(e.columnOrder=n)}(t.settings,e.canvas),function(e,t){const n=t.tables.filter((({id:e})=>!!e)),i=t.indexes.filter((({id:e})=>!!e));e.doc.tableIds=n.map((({id:e})=>e)),e.doc.indexIds=i.map((({id:e})=>e));for(const t of n){const n=vn();n.id=t.id,n.name=t.name,n.comment=t.comment,n.columnIds=t.columns.map((({id:e})=>e)),n.seqColumnIds=[...n.columnIds],n.ui.y=t.ui.top,n.ui.x=t.ui.left,n.ui.zIndex=t.ui.zIndex,n.ui.widthName=t.ui.widthName,n.ui.widthComment=t.ui.widthComment,n.ui.color=t.ui.color??"";for(const n of t.columns){const i=Zn();i.id=n.id,i.tableId=t.id,i.name=n.name,i.comment=n.comment,i.dataType=n.dataType,i.default=n.default,i.options=Object.keys(n.option).reduce(((e,t)=>{if(zt(n.option,t,!1)){return e|zt(Gn.ColumnOption,t,0)}return e}),0),i.ui.widthName=n.ui.widthName,i.ui.widthComment=n.ui.widthComment,i.ui.widthDataType=n.ui.widthDataType,i.ui.widthDefault=n.ui.widthDefault,n.ui.pfk?i.ui.keys=Gn.ColumnUIKey.primaryKey|Gn.ColumnUIKey.foreignKey:n.ui.pk?i.ui.keys=Gn.ColumnUIKey.primaryKey:n.ui.fk&&(i.ui.keys=Gn.ColumnUIKey.foreignKey),e.collections.tableColumnEntities[i.id]=i}e.collections.tableEntities[n.id]=n}for(const t of i){const n=jt();n.id=t.id,n.name=t.name,n.tableId=t.tableId,n.unique=t.unique;for(const i of t.columns){const o=Yt(),l=Ot();n.indexColumnIds.push(o),n.seqIndexColumnIds.push(o),l.id=o,l.indexId=t.id,l.columnId=i.id,l.orderType=zt(Gn.OrderType,i.orderType,Gn.OrderType.ASC),e.collections.indexColumnEntities[l.id]=l}e.collections.indexEntities[n.id]=n}}(t,e.table),function(e,t){const n=t.memos.filter((({id:e})=>!!e));e.doc.memoIds=n.map((({id:e})=>e));for(const t of n){const n=$t();n.id=t.id,n.value=t.value,n.ui.y=t.ui.top,n.ui.x=t.ui.left,n.ui.width=t.ui.width,n.ui.height=t.ui.height,n.ui.zIndex=t.ui.zIndex,n.ui.color=t.ui.color??"",e.collections.memoEntities[n.id]=n}}(t,e.memo),function(e,t){const n=t.relationships.filter((({id:e})=>!!e));e.doc.relationshipIds=n.map((({id:e})=>e));for(const t of n){const n=qt();n.id=t.id,n.identification=t.identification,n.relationshipType=zt(Gn.RelationshipType,t.relationshipType,Gn.RelationshipType.ZeroN),n.startRelationshipType=zt(Gn.StartRelationshipType,"Ring"===t.startRelationshipType?"ring":"dash",Gn.StartRelationshipType.dash),n.start.tableId=t.start.tableId,n.start.columnIds=t.start.columnIds,n.start.x=t.start.x,n.start.y=t.start.y,n.start.direction=zt(Gn.Direction,t.start.direction,Gn.Direction.bottom),n.end.tableId=t.end.tableId,n.end.columnIds=t.end.columnIds,n.end.x=t.end.x,n.end.y=t.end.y,n.end.direction=zt(Gn.Direction,t.end.direction,Gn.Direction.bottom),e.collections.relationshipEntities[n.id]=n}}(t,e.relationship),t}function In(e,t,n){return e[t]||(e[t]=function(e){return[e,-1,-1,{}]}(n),e[t])}function Wn(e,t,n,i,o,l){const r=In(e,n,i);(r[3][o]??-1)<=t&&(r[3][o]=t,l())}let kn=class{constructor(e,t){Object.defineProperty(this,"collection",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"collectionKey",{enumerable:!0,configurable:!0,writable:!0,value:t})}selectById(e){return this.collection[e]}selectByIds(e){return e.length,e.map((e=>this.selectById(e))).filter(Boolean)}selectEntities(){return this.collection}selectAll(){return Object.values(this.collection)}setOne(e){return this.collection[e.id]=e,this}setMany(e){return e.forEach((e=>this.setOne(e))),this}setAll(e){return this.removeAll(),this.setMany(e),this}addOne(e){return this.selectById(e.id)||this.setOne(e),this}addMany(e){return e.forEach((e=>this.addOne(e))),this}removeOne(e){return this.selectById(e)&&Reflect.deleteProperty(this.collection,e),this}removeMany(e){return e.forEach((e=>this.removeOne(e))),this}removeAll(){return this.collection={},this}updateOne(e,t){const n=this.selectById(e);return n&&(t(n),n.meta.updateAt=Date.now()),this}updateMany(e,t){return e.forEach((e=>this.updateOne(e,t))),this}getOrCreate(e,t){const n=this.selectById(e);if(n)return n;const i=t(e);return this.setOne(i),this.selectById(e)}addOperator(e,t,n,i){return function(e,t,n,i,o){const l=In(e,n,i),r=l[1],a=l[2];r<t&&(l[1]=t),a<t&&o()}(e,t,n,this.collectionKey,i),this}removeOperator(e,t,n,i){return function(e,t,n,i,o){const l=In(e,n,i),r=l[2],a=l[1];r<t&&(l[2]=t),a<=t&&o()}(e,t,n,this.collectionKey,i),this}replaceOperator(e,t,n,i,o){return Wn(e,t,n,this.collectionKey,i,o),this}};const Vn=e=>new class{constructor(e){Object.defineProperty(this,"collections",{enumerable:!0,configurable:!0,writable:!0,value:e})}collection(e){return new kn(this.collections[e],e)}}(e);function Sn(e,t){return(e&t)===t}const Cn={columnUnique:"columnUnique",columnAutoIncrement:"columnAutoIncrement",columnName:"columnName",columnDataType:"columnDataType",columnNotNull:"columnNotNull",columnDefault:"columnDefault",columnComment:"columnComment"},Ln=Object.values(Cn),Rn=Object.values({ERD:"ERD","@vuerd/builtin-sql-ddl":"@vuerd/builtin-sql-ddl","@vuerd/builtin-grid":"@vuerd/builtin-grid","@vuerd/builtin-generator-code":"@vuerd/builtin-generator-code","@vuerd/builtin-visualization":"@vuerd/builtin-visualization"}),Yn=Object.values({MariaDB:"MariaDB",MSSQL:"MSSQL",MySQL:"MySQL",Oracle:"Oracle",PostgreSQL:"PostgreSQL",SQLite:"SQLite"}),wn=Object.values({GraphQL:"GraphQL","C#":"C#",Java:"Java",Kotlin:"Kotlin",TypeScript:"TypeScript",JPA:"JPA",Scala:"Scala"}),Tn=Object.values({none:"none",camelCase:"camelCase",pascalCase:"pascalCase",snakeCase:"snakeCase"}),Nn=Object.values({AtomOneDark:"AtomOneDark",AtomOneLight:"AtomOneLight",MonokaiSublime:"MonokaiSublime",GithubGist:"GithubGist",VS2015:"VS2015"}),Kn=Object.values({none:"none",doubleQuote:"doubleQuote",singleQuote:"singleQuote",backtick:"backtick"}),zn=()=>({version:"2.2.11",width:2e3,height:2e3,scrollTop:0,scrollLeft:0,zoomLevel:1,show:{tableComment:!0,columnComment:!0,columnDataType:!0,columnDefault:!0,columnAutoIncrement:!1,columnPrimaryKey:!0,columnUnique:!1,columnNotNull:!0,relationship:!0},database:"MySQL",databaseName:"",canvasType:"ERD",language:"GraphQL",tableCase:"pascalCase",columnCase:"camelCase",highlightTheme:"VS2015",bracketType:"none",setting:{relationshipDataTypeSync:!0,relationshipOptimization:!1,columnOrder:["columnName","columnDataType","columnNotNull","columnUnique","columnAutoIncrement","columnDefault","columnComment"]},pluginSerializationMap:{}}),Hn=wt(2e3,2e4),Mn=wt(.1,1);const Jn=()=>({memos:[]}),jn=()=>({id:"",value:"",ui:{active:!1,left:200,top:200,zIndex:2,width:127,height:127}});const Fn=["ZeroOneN","One","N"],Un={ZeroOneN:"ZeroN",One:"OneOnly",N:"OneN"},On=e=>Fn.includes(e)?Un[e]:e,En={ZeroOneN:"ZeroOneN",ZeroOne:"ZeroOne",ZeroN:"ZeroN",OneOnly:"OneOnly",OneN:"OneN",One:"One",N:"N"},$n=Object.values(En),Pn=Object.values({Ring:"Ring",Dash:"Dash"}),Bn={left:"left",right:"right",top:"top",bottom:"bottom"},An=Object.values(Bn),Qn=()=>({relationships:[]}),Dn=()=>({id:"",identification:!1,relationshipType:"ZeroN",startRelationshipType:"Dash",start:{tableId:"",columnIds:[],x:0,y:0,direction:"bottom"},end:{tableId:"",columnIds:[],x:0,y:0,direction:"bottom"},constraintName:"",visible:!0});const _n={ASC:"ASC",DESC:"DESC"},qn=Object.values(_n),ei=()=>({tables:[],indexes:[]}),ti=()=>({id:"",name:"",comment:"",columns:[],ui:{active:!1,left:200,top:100,zIndex:2,widthName:60,widthComment:60},visible:!0}),ni=()=>({id:"",name:"",comment:"",dataType:"",default:"",option:{autoIncrement:!1,primaryKey:!1,unique:!1,notNull:!1},ui:{active:!1,pk:!1,fk:!1,pfk:!1,widthName:60,widthComment:60,widthDataType:60,widthDefault:60}}),ii=()=>({id:"",name:"",tableId:"",columns:[],unique:!1}),oi=()=>({id:"",orderType:_n.ASC});function li(e){const t=e,n=function(e){var t;const n=zn();if(Ct(e))return n;const i=Tt(Wt,n,e),o=Tt(kt,n,e),l=Tt(It,n.show,e.show),r=Tt(It,n.setting,e.setting);if(Wt(e.width)&&(n.width=Hn(e.width)),Wt(e.height)&&(n.height=Hn(e.height)),Wt(e.zoomLevel)&&(n.zoomLevel=Mn(e.zoomLevel)),o("version"),o("databaseName"),i("scrollTop"),i("scrollLeft"),Tt(Nt(Yn),n,e)("database"),Tt(Nt(Rn),n,e)("canvasType"),Tt(Nt(wn),n,e)("language"),Tt(Nt(Tn),n,e)("tableCase"),Tt(Nt(Tn),n,e)("columnCase"),Tt(Nt(Nn),n,e)("highlightTheme"),Tt(Nt(Kn),n,e)("bracketType"),l("tableComment"),l("columnComment"),l("columnDataType"),l("columnDefault"),l("columnAutoIncrement"),l("columnPrimaryKey"),l("columnUnique"),l("columnNotNull"),l("relationship"),r("relationshipDataTypeSync"),r("relationshipOptimization"),null!=(t=e.setting)&&t.columnOrder&&Ln.length===e.setting.columnOrder.length&&0===yt(Ln,e.setting.columnOrder).length&&(n.setting.columnOrder=e.setting.columnOrder),Rt(e.pluginSerializationMap)){const t=e.pluginSerializationMap;for(const e of Object.keys(t)){const i=t[e];kt(i)&&(n.pluginSerializationMap[e]=i)}}return n}(t.canvas),i=function(e){const t=ei();if(Ct(e))return t;if(Lt(e.tables))for(const n of e.tables){const e=ti(),i=Tt(kt,e,n),o=Tt(It,e,n),l=Tt(Wt,e.ui,n.ui),r=Tt(It,e.ui,n.ui),a=Tt(kt,e.ui,n.ui);if(i("id"),i("name"),i("comment"),o("visible"),r("active"),a("color"),l("left"),l("top"),l("zIndex"),l("widthName"),l("widthComment"),Lt(n.columns))for(const t of n.columns){const n=ni(),i=Tt(kt,n,t),o=Tt(Wt,n.ui,t.ui),l=Tt(It,n.ui,t.ui),r=Tt(It,n.option,t.option);i("id"),i("name"),i("comment"),i("dataType"),i("default"),r("autoIncrement"),r("primaryKey"),r("unique"),r("notNull"),l("active"),l("pk"),l("fk"),l("pfk"),o("widthName"),o("widthComment"),o("widthDataType"),o("widthDefault"),e.columns.push(n)}t.tables.push(e)}if(Lt(e.indexes))for(const n of e.indexes){const e=ii(),i=Tt(kt,e,n),o=Tt(It,e,n);if(i("id"),i("name"),i("tableId"),o("unique"),Lt(n.columns))for(const t of n.columns){const n=oi();Tt(kt,n,t)("id"),Tt(Nt(qn),n,t)("orderType"),e.columns.push(n)}t.indexes.push(e)}return t}(t.table),o=function(e){var t,n,i,o;const l=Qn();if(Ct(e)||!Lt(e.relationships))return l;for(const r of e.relationships){const e=Dn(),a=Tt(kt,e,r),s=Tt(It,e,r),c=Tt(Wt,e.start,r.start),u=Tt(kt,e.start,r.start),d=Tt(Wt,e.end,r.end),p=Tt(kt,e.end,r.end);a("id"),a("constraintName"),s("identification"),s("visible"),Tt(Nt($n),e,r)("relationshipType"),e.relationshipType=On(e.relationshipType),Tt(Nt(Pn),e,r)("startRelationshipType"),u("tableId"),c("x"),c("y"),Tt(Nt(An),e.start,r.start)("direction"),Lt(null==(t=r.start)?void 0:t.columnIds)&&(e.start.columnIds=null==(n=r.start)?void 0:n.columnIds.filter(kt)),p("tableId"),d("x"),d("y"),Tt(Nt(An),e.end,r.end)("direction"),Lt(null==(i=r.end)?void 0:i.columnIds)&&(e.end.columnIds=null==(o=r.end)?void 0:o.columnIds.filter(kt)),l.relationships.push(e)}return l}(t.relationship),l=function(e){const t=Jn();if(Ct(e)||!Lt(e.memos))return t;for(const n of e.memos){const e=jn(),i=Tt(kt,e,n),o=Tt(Wt,e.ui,n.ui),l=Tt(It,e.ui,n.ui),r=Tt(kt,e.ui,n.ui);i("id"),i("value"),l("active"),r("color"),o("left"),o("top"),o("zIndex"),o("width"),o("height"),t.memos.push(e)}return t}(t.memo);return{canvas:n,table:i,relationship:o,memo:l}}function ri(e){const t=JSON.parse(e);return"3.0.0"===Reflect.get(t,"version")?xn(t):Xn(li(t))}function ai(e){const t=xt(e,["$schema","version","settings","doc","collections","lww"]);return Sn(t.settings.ignoreSaveSettings,Gn.SaveSettingType.scroll)&&(t.settings.scrollTop=0,t.settings.scrollLeft=0),Sn(t.settings.ignoreSaveSettings,Gn.SaveSettingType.zoomLevel)&&(t.settings.zoomLevel=1),JSON.stringify(t,null,2)
    /*!
     * @dineug/r-html
     * @version 0.1.3 | Sat Apr 13 2024
     * @author SeungHwan-Lee <dineug2@gmail.com>
     * @license MIT
     */}function si(e,t){return Object.freeze({key:t??Symbol(),value:e})}Gn.ColumnType.columnName,Gn.ColumnType.columnDataType,Gn.ColumnType.columnDefault,Gn.ColumnType.columnComment,Gn.ColumnType.columnAutoIncrement,Gn.ColumnType.columnUnique,Gn.ColumnType.columnNotNull,Gn.RelationshipType.ZeroOne,Gn.RelationshipType.ZeroN,Gn.RelationshipType.OneOnly,Gn.RelationshipType.OneN,Gn.Direction.left,Gn.Direction.right,Gn.Direction.top,Gn.Direction.bottom;const ci="@@r-html/context-unsubscribe";function ui(e,t){function n(n,i){return new CustomEvent(e,{detail:n,...t,...i})}return n.toString=()=>`${e}`,n.type=e,n}const di=ui("@@r-html/context-subscribe",{bubbles:!0,composed:!0}),pi=ui(ci,{bubbles:!0,composed:!0});function hi(e,...t){try{return null==e?void 0:e(...t)}catch(e){console.error(e)}}const mi=queueMicrotask??(e=>{Promise.resolve().then(e)}),bi=e=>t=>typeof t===e,fi=bi("object"),yi=bi("bigint"),gi=bi("boolean"),vi=bi("function"),Zi=bi("number"),xi=bi("string"),Gi=bi("symbol"),Xi=bi("undefined"),Ii=e=>null===e,{isArray:Wi}=Array,ki=e=>fi(e)&&!Ii(e)&&!Wi(e),Vi=e=>yi(e)||gi(e)||Zi(e)||xi(e)||Gi(e)||Xi(e)||Ii(e);function Si(){const e=new Set,t=t=>(e.has(t)||e.add(t),()=>{e.delete(t)});return{subscribe:t,next:t=>{e.forEach((e=>e(t)))},asReadonly:()=>({subscribe:t})}}const Ci=1,Li=[],Ri=new Map,Yi=new Map;let wi=!0,Ti=0;const Ni=e=>t=>{const n=Ri.get(t);let i=()=>{};const o=null!=n&&n.promise?n.promise:new Promise((e=>{i=e}));if(!n){const n={type:e,tickCount:Ti,promise:o,fn:t,resolve:()=>{i()}};Li.push(n),Ri.set(t,n)}return wi&&(mi(Ji),wi=!1),o},Ki=Ni("observer"),zi=Ni("nextTick"),Hi=(e,t)=>{var n;return null==(n=go.get(e))?void 0:n.forEach((n=>function(e,t,n){const i=xo.get(n);if(!i)return!1;const o=i.get(e);return!!o&&o.has(t)}(e,t,n)&&Ki(n)))};function Mi(){const e=Li.shift();if(e){if(Ri.delete(e.fn),"observer"===e.type)Wo(e.fn),Io(e.fn),e.resolve();else if("nextTick"===e.type){const t=hi(e.fn);t instanceof Promise?t.finally(e.resolve):e.resolve()}(function(){const e=Li[0];return!!e&&Ci<=Ti-e.tickCount})()&&Mi()}}function Ji(){!function(){for(;Li.length;)Mi();wi=!0,Ti=0}()}function ji(e,t){const n=yo.get(e);if(!n)return;const i=Zo.get(n);if(!i)return;const o=Yi.get(n);o?o.has(t)||o.add(t):(Yi.set(n,new Set([t])),zi((()=>{const e=Yi.get(n);e&&(Yi.delete(n),e.forEach((e=>i.next(e))))})))}function Fi(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function Ui(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n}const Oi=`@@r-html-${Math.random().toString().substring(2,8)}`,Ei=`...${Oi}`,$i=new RegExp(`${Oi}_(\\d+)_`,"g"),Pi=new RegExp(`^${Oi}_\\d+_$`),Bi=/^\n/;var Ai;!function(e){e.attribute="attribute",e.boolean="boolean",e.event="event",e.property="property",e.spread="spread",e.directive="directive"}(Ai||(Ai={}));const Qi=Symbol.for("https://github.com/dineug/r-html#beforeMount"),Di=Symbol.for("https://github.com/dineug/r-html#mounted"),_i=Symbol.for("https://github.com/dineug/r-html#unmounted"),qi=Symbol.for("https://github.com/dineug/r-html#beforeFirstUpdate"),eo=Symbol.for("https://github.com/dineug/r-html#beforeUpdate"),to=Symbol.for("https://github.com/dineug/r-html#firstUpdated"),no=Symbol.for("https://github.com/dineug/r-html#updated"),io=[Qi,Di,_i,qi,eo,to,no],oo=Symbol.for("https://github.com/dineug/r-html#Directive"),lo=Symbol.for("https://github.com/dineug/r-html#TemplateLiterals");let ro=null;function ao(e){ro=e}const so=e=>t=>{ro&&(ro[e]??(ro[e]=[])).push(t)},co=so(Qi),uo=so(Di),po=so(_i),ho=so(eo),mo=so(no);function bo(e,t){const n=Reflect.get(e,t,e);Wi(n)&&n.forEach(hi)}const fo=Si(),yo=new WeakMap,go=new WeakMap,vo=new WeakMap,Zo=new WeakMap,xo=new WeakMap,Go={shallow:!1};let Xo=null;function Io(e){return Xo=e,hi(e),Xo=null,()=>Wo(e)}function Wo(e){const t=xo.get(e);if(t)for(const[n]of t.entries()){const t=go.get(n);null==t||t.delete(e)}t&&xo.delete(e)}const ko=e=>e instanceof Node||e instanceof Map||e instanceof Set||e instanceof WeakMap||e instanceof WeakSet||e instanceof RegExp||e instanceof Date||e instanceof Promise||(Wi(e)||ki(e))&&Object.isFrozen(e);function Vo(e,t={}){const{shallow:n}=Object.assign({},Go,t),i=new Proxy(e,{get(i,o,l){const r=Reflect.get(i,o,l);return ko(r)?r:(function(e){if(!Xo)return;const t=go.get(e);t?t.has(Xo)||t.add(Xo):go.set(e,new Set([Xo]))}(e),function(e,t){if(!Xo)return;const n=xo.get(Xo);if(n){const i=n.get(e);i?i.has(t)||i.add(t):n.set(e,new Set([t]))}else xo.set(Xo,new Map([[e,new Set([t])]]))}(e,o),n||!ki(r)&&!Wi(r)||vo.has(r)?r:yo.has(r)?yo.get(r):Vo(r,t))},set(e,t,n,i){const o=Reflect.get(e,t,i),l=Reflect.set(e,t,n,i);return(!Wi(e)&&o!==n||"length"===t)&&(Hi(e,t),ji(e,t)),l},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return Hi(e,t),ji(e,t),n}});return yo.set(e,i),vo.set(i,e),i}function So(e){return(Zo.get(e)??Zo.set(e,Si()).get(e)).asReadonly()}function Co(e,t){const n=Vo({value:t.value},{shallow:!0}),i=e=>{n.value=e},o=()=>e instanceof HTMLElement?e:e.parentElement??e.host,l=()=>{o().dispatchEvent(di({context:t,observer:i}))};return l(),co(l),po((()=>{o().dispatchEvent(pi({context:t,observer:i}))})),n}function Lo(e,t,n){const i=e instanceof HTMLElement?e:e.parentElement??e.host,o=Si(),l=new Map,r=e=>{var i,r;const a=e;(null==(r=null==(i=a.detail)?void 0:i.context)?void 0:r.key)===t.key&&(a.stopPropagation(),a.detail.observer(n),l.set(a.detail.observer,o.subscribe(a.detail.observer)))},a=e=>{var n,i;const o=e;if((null==(i=null==(n=o.detail)?void 0:n.context)?void 0:i.key)===t.key){o.stopPropagation();const e=l.get(o.detail.observer);null==e||e(),l.delete(o.detail.observer)}};return i.addEventListener(di.type,r),i.addEventListener(pi.type,a),{set:e=>{o.next(e)},destroy:()=>{i.removeEventListener(di.type,r),i.removeEventListener(pi.type,a);for(const e of l.values())e();l.clear()}}}var Ro;!function(e){e.element="element",e.text="text",e.comment="comment"}(Ro||(Ro={}));class Yo{constructor(e={}){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Ro.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,e)}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}}const wo=({type:e,value:t},n=!1)=>e===Ro.element?((e,t=!1)=>t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e))(t,n):e===Ro.text?document.createTextNode(t):document.createComment(t),To=e=>!!e&&"false"!==e;const No=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n]));function Ko(e,t){if(e===t)return!0;const n=ki(e)?e:{},i=ki(t)?t:{},o=Object.keys(n),l=Object.keys(i);return o.length===l.length&&l.every((e=>Reflect.get(n,e)===Reflect.get(i,e)))}function zo(e,t){const n=t.parentNode;n&&n.insertBefore(e,t)}function Ho(e,t){const n=t.parentNode;n&&(t.nextSibling?n.insertBefore(e,t.nextSibling):n.appendChild(e))}const Mo=e=>e.parentNode&&e.parentNode.removeChild(e);function Jo(e,t){const n=[];let i=e.nextSibling;for(;i&&i!==t;)n.push(i),i=i.nextSibling;return n}const jo=()=>{},Fo=e=>e instanceof HTMLElement,Uo=e=>e instanceof SVGElement,Oo=e=>e.replace(/^([A-Z])|[\s-_](\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase()));var Eo;!function(e){e.html="html",e.svg="svg",e.css="css"}(Eo||(Eo={}));const $o=new Set(Object.values(Eo)),Po=new WeakMap,Bo=new WeakMap,Ao=new Set([Eo.svg]),Qo=e=>`${Oi}_${e}_`,Do=e=>ki(e)&&(e=>Wi(e)&&Wi(e.raw))(e.strings)&&Wi(e.values)&&$o.has(Reflect.get(e,lo)??""),_o=e=>Do(e)&&e[lo]===Eo.css,qo=(e,t=!0,n=!1)=>i=>t?!(null==i||!i.trimStart().startsWith(e)):n?!(null==i||!i.trimEnd().endsWith(e)):new RegExp(e).test(i??""),el=qo(Ei),tl=qo("."),nl=qo("?"),il=qo("@"),ol=qo("on"),ll=qo(Oi,!1),rl=e=>ll(e)&&Pi.test((null==e?void 0:e.trim())??""),al=({type:e,value:t})=>e===Ai.spread||e===Ai.directive||ll(t),sl=e=>rl(e)?Ai.directive:el(e)?Ai.spread:tl(e)?Ai.property:il(e)||ol(e)?Ai.event:nl(e)?Ai.boolean:Ai.attribute,cl=e=>el(e)?e.substring(3):rl(e)?e:tl(e)||il(e)||nl(e)?e.substring(1):ol(e)?e.substring(2):e;function ul(e){const t=[];let n=$i.exec(e);for(;n;){const i=Number(n[1]);t.push([n[0],Number.isInteger(i)?i:-1]),n=$i.exec(e)}return t}const dl="0123456789abcdefghijklmnopqrstuvwxyz-_";function pl(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}var hl,ml,bl,fl,yl,gl,vl,Zl,xl,Gl,Xl,Il,Wl,kl,Vl,Sl,Cl;class Ll{constructor(e,{name:t,value:n}){hl.set(this,void 0),ml.set(this,void 0),bl.set(this,void 0),fl.set(this,[]),yl.set(this,[]),gl.set(this,null),vl.set(this,null),Ui(this,hl,e,"f"),Ui(this,ml,t,"f"),Ui(this,bl,n,"f"),Ui(this,fl,ul(n??""),"f")}commit(e){const t=Fi(this,fl,"f").map((([t,n])=>e[n]));if(No(Fi(this,yl,"f"),t))return;const n=t[t.length-1];if("class"===Fi(this,ml,"f"))this.classCommit(n);else if("style"===Fi(this,ml,"f"))this.styleCommit(n);else{const e=t.reduce(((e,t,n)=>e.replace(new RegExp(Fi(this,fl,"f")[n][0]),Rl(t))),Fi(this,bl,"f")??"");Fi(this,hl,"f").setAttribute(Fi(this,ml,"f"),e.trim())}Ui(this,yl,t,"f")}classCommit(e){if(!Fo(Fi(this,hl,"f"))&&!Uo(Fi(this,hl,"f"))||!ki(e)&&!Wi(e))return;const t=Fi(this,yl,"f")[Fi(this,yl,"f").length-1];if(t===e||Wi(t)&&Wi(e)&&No(t,e)||ki(t)&&ki(e)&&Ko(t,e))return;const n=[...Fi(this,hl,"f").classList],i=Yl(e);if(Ii(Fi(this,vl,"f")))Ui(this,vl,n,"f");else{const e=Fi(this,vl,"f"),t=n.filter((t=>!e.includes(t)&&!i.includes(t)));Fi(this,hl,"f").classList.remove(...t)}Fi(this,hl,"f").classList.add(...i)}styleCommit(e){if(!Fo(Fi(this,hl,"f"))&&!Uo(Fi(this,hl,"f")))return;if(Ko(Fi(this,yl,"f")[Fi(this,yl,"f").length-1],e))return;const t=function(e){const t={};for(let n=0;n<e.style.length;n++){const i=e.style.item(n);t[i]=e.style.getPropertyValue(i)}return t}(Fi(this,hl,"f")),n=ki(e)?e:{};if(Ii(Fi(this,gl,"f")))Ui(this,gl,t,"f");else{const e=Fi(this,gl,"f");Object.keys(t).filter((t=>!e[t]&&!n[t])).forEach((e=>Fi(this,hl,"f").style.removeProperty(e)))}for(const e of Object.keys(n))Fi(this,hl,"f").style.setProperty(e,n[e])}}function Rl(e){return Vi(e)&&!Ii(e)&&!Xi(e)||_o(e)?String(e):""}function Yl(e,t=[]){if(_o(e))return t.push(Rl(e)),t;if(Vi(e))t.push(Rl(e));else if(fi(e))if(Wi(e))for(let n=0;n<e.length;n++)e[n]&&Yl(e[n],t);else for(let n in e)e[n]&&t.push(Rl(n));return t}hl=new WeakMap,ml=new WeakMap,bl=new WeakMap,fl=new WeakMap,yl=new WeakMap,gl=new WeakMap,vl=new WeakMap;class wl{constructor(e,{name:t,value:n}){Zl.set(this,void 0),xl.set(this,void 0),Gl.set(this,[]),Xl.set(this,[]),Ui(this,Zl,e,"f"),Ui(this,xl,t,"f"),Ui(this,Gl,ul(n??""),"f")}commit(e){const t=Fi(this,Gl,"f").map((([t,n])=>e[n]));if(No(Fi(this,Xl,"f"),t))return;const n=t[t.length-1];To(n)?Fi(this,Zl,"f").setAttribute(Fi(this,xl,"f"),""):Fi(this,Zl,"f").removeAttribute(Fi(this,xl,"f")),Ui(this,Xl,t,"f")}}function Tl(e,t){return Reflect.set(t,oo,e),t}Zl=new WeakMap,xl=new WeakMap,Gl=new WeakMap,Xl=new WeakMap,function(e){e.node="node",e.attribute="attribute"}(Il||(Il={}));let Nl=class{constructor(e,{name:t}){Wl.set(this,void 0),kl.set(this,void 0),Vl.set(this,null),Sl.set(this,null),Cl.set(this,null),Ui(this,Wl,e,"f"),Ui(this,kl,ul(t)[0],"f")}commit(e){var t,n,i,o;const[,l]=Fi(this,kl,"f"),r=e[l];if(!(e=>Wi(e)&&Reflect.get(e,oo)===Il.attribute)(r))return;const[a,s]=r;if(Fi(this,Vl,"f")!==s)null==(t=Fi(this,Cl,"f"))||t.call(this),Ui(this,Sl,s({node:Fi(this,Wl,"f")}),"f"),Ui(this,Vl,s,"f"),Ui(this,Cl,null==(n=Fi(this,Sl,"f"))?void 0:n.call(this,a),"f");else{const e=null==(i=Fi(this,Sl,"f"))?void 0:i.call(this,a);Fi(this,Cl,"f")!==e&&(null==(o=Fi(this,Cl,"f"))||o.call(this),Ui(this,Cl,e,"f"))}}destroy(){var e;null==(e=Fi(this,Cl,"f"))||e.call(this)}};var Kl,zl,Hl,Ml,Jl,jl,Fl,Ul,Ol,El,$l;Wl=new WeakMap,kl=new WeakMap,Vl=new WeakMap,Sl=new WeakMap,Cl=new WeakMap;class Pl{constructor(e,{name:t,value:n}){Kl.set(this,void 0),zl.set(this,void 0),Hl.set(this,[]),Ml.set(this,[]),Ui(this,Kl,e,"f"),Ui(this,zl,t,"f"),Ui(this,Hl,ul(n??""),"f")}commit(e){const t=Fi(this,Hl,"f").map((([t,n])=>e[n])).filter((e=>vi(e)||(e=>Wi(e)&&vi(e[0])&&(Xi(e[1])||gi(e[1])||ki(e[1])))(e)));No(Fi(this,Ml,"f"),t)||(this.clear(),t.forEach((e=>vi(e)?Fi(this,Kl,"f").addEventListener(Fi(this,zl,"f"),e):Fi(this,Kl,"f").addEventListener(Fi(this,zl,"f"),e[0],e[1]))),Ui(this,Ml,t,"f"))}clear(){Fi(this,Ml,"f").forEach((e=>vi(e)?Fi(this,Kl,"f").removeEventListener(Fi(this,zl,"f"),e):Fi(this,Kl,"f").removeEventListener(Fi(this,zl,"f"),e[0],e[1])))}destroy(){this.clear()}}Kl=new WeakMap,zl=new WeakMap,Hl=new WeakMap,Ml=new WeakMap;class Bl{constructor(e,{name:t,value:n}){Jl.set(this,void 0),jl.set(this,void 0),Fl.set(this,[]),Ul.set(this,[]),Ui(this,Jl,e,"f"),Ui(this,jl,t,"f"),Ui(this,Fl,ul(n??""),"f")}commit(e){const t=Fi(this,Fl,"f").map((([t,n])=>e[n]));if(No(Fi(this,Ul,"f"),t))return;const n=t[t.length-1];Reflect.set(Fi(this,Jl,"f"),Fi(this,jl,"f"),n,Fi(this,Jl,"f")),Ui(this,Ul,t,"f")}}Jl=new WeakMap,jl=new WeakMap,Fl=new WeakMap,Ul=new WeakMap;class Al{constructor(e,{name:t}){Ol.set(this,void 0),El.set(this,void 0),$l.set(this,null),Ui(this,Ol,e,"f"),Ui(this,El,ul(t)[0],"f")}commit(e){const[,t]=Fi(this,El,"f"),n=e[t];!ki(n)||Ko(Fi(this,$l,"f"),n)||(Object.keys(n).forEach((e=>Reflect.set(Fi(this,Ol,"f"),e,n[e],Fi(this,Ol,"f")))),Ui(this,$l,n,"f"))}}Ol=new WeakMap,El=new WeakMap,$l=new WeakMap;const Ql=(e,t)=>t.type===Ai.attribute?new Ll(e,t):t.type===Ai.boolean?new wl(e,t):t.type===Ai.event?new Pl(e,t):t.type===Ai.property?new Bl(e,t):t.type===Ai.spread?new Al(e,t):new Nl(e,t);var Dl,_l,ql,er;class tr{constructor(e,{value:t}){Dl.set(this,void 0),_l.set(this,void 0),ql.set(this,[]),er.set(this,[]),Ui(this,Dl,e,"f"),Ui(this,_l,t,"f"),xi(t)&&Ui(this,ql,ul(t),"f")}commit(e){const t=Fi(this,ql,"f").map((([t,n])=>e[n]));if(No(Fi(this,er,"f"),t))return;Ui(this,er,t,"f");const n=Fi(this,er,"f").reduce(((e,t,n)=>e.replace(new RegExp(Fi(this,ql,"f")[n][0]),!Vi(t)||Ii(t)||Xi(t)?"":String(t))),Fi(this,_l,"f")??"");Fi(this,Dl,"f").data=n}}Dl=new WeakMap,_l=new WeakMap,ql=new WeakMap,er=new WeakMap;const nr=Symbol("https://github.com/dineug/r-html.git#hostBridge");var ir,or,lr,rr,ar,sr,cr,ur,dr;class pr{constructor(e,{name:t,value:n}){ir.set(this,void 0),or.set(this,void 0),lr.set(this,[]),rr.set(this,[]),Ui(this,ir,e,"f"),Ui(this,or,t,"f"),Ui(this,lr,ul(n??""),"f")}commit(e){const t=Fi(this,lr,"f").map((([t,n])=>e[n]));if(No(Fi(this,rr,"f"),t))return;const n=t[t.length-1];Reflect.set(Fi(this,ir,"f"),Fi(this,or,"f"),n),Ui(this,rr,t,"f")}}function hr(e,t,n){const i=!(null==n||!n.strict),o={update:[],delete:[]},l=new Set,r=[],a=e.items,s=t.items;return a.forEach(((e,t)=>{const n=s.findIndex(((t,n)=>e.type===t.type&&e.key===t.key&&!l.has(n)));-1===n?i?o.delete.push({from:t}):r.push(e):(l.add(n),o.update.push({action:ar.move,from:t,to:n}))})),r.forEach((n=>{const i=e.itemToIndex.get(n),r=s.find(((e,t)=>n.type===e.type&&!l.has(t)));if(r){const e=t.itemToIndex.get(r);l.add(e),o.update.push({action:ar.move,from:i,to:e})}else o.delete.push({from:i})})),s.forEach(((e,n)=>{l.has(n)||o.update.push({action:ar.create,from:-1,to:t.itemToIndex.get(e)})})),o.update.sort(((e,t)=>e.to-t.to)),o}ir=new WeakMap,or=new WeakMap,lr=new WeakMap,rr=new WeakMap,function(e){e.create="create",e.move="move"}(ar||(ar={}));class mr{constructor(e,t){sr.set(this,void 0),cr.set(this,void 0),ur.set(this,[]),Ui(this,sr,e,"f"),Ui(this,cr,t,"f")}commit(e){const t=hr(function(e){const t=[],n=new Map;return e.forEach((({type:e,value:i},o)=>{const l={type:e,key:e===wr.templateLiterals?i.strings:i};t.push(l),n.set(l,o)})),{items:t,itemToIndex:n}}(Fi(this,ur,"f")),function(e){const t=[],n=new Map;return e.forEach(((e,i)=>{const o=Qr(e),l={type:o,key:o===wr.templateLiterals?e.strings:e};t.push(l),n.set(l,i)})),{items:t,itemToIndex:n}}(e)),n={length:e.length};t.update.forEach((({action:t,from:i,to:o})=>{switch(t){case ar.create:const t=document.createComment("");0===o?Ho(t,Fi(this,sr,"f")):Fi(this,ur,"f").length?Ho(t,n[o-1]?n[o-1].endNode:Fi(this,ur,"f")[o-1].endNode):zo(t,Fi(this,cr,"f")),n[o]=new br(t,e[o]);break;case ar.move:if(n[o]=Fi(this,ur,"f")[i],o===i)return;0===o?Fi(this,ur,"f")[i].insert("after",Fi(this,sr,"f")):Fi(this,ur,"f")[i].insert("after",n[o-1]?n[o-1].endNode:Fi(this,ur,"f")[o-1].endNode)}})),t.delete.forEach((({from:e})=>Fi(this,ur,"f")[e].destroy())),Ui(this,ur,Array.from(n),"f"),Fi(this,ur,"f").forEach(((t,n)=>t.commit(e[n])))}destroy(){Fi(this,ur,"f").forEach((e=>e.destroy()))}}sr=new WeakMap,cr=new WeakMap,ur=new WeakMap;let br=class{constructor(e,t){dr.set(this,void 0),Object.defineProperty(this,"startNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"endNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),zo(this.startNode,e),Ho(this.endNode,e),Mo(e),this.value=t,this.type=Qr(t),Ui(this,dr,ea(this.type,this.startNode,this.endNode),"f")}commit(e){Fi(this,dr,"f").commit(e),this.value=e}insert(e,t){const n=[this.startNode,...Jo(this.startNode,this.endNode),this.endNode];"before"===e?n.forEach((e=>zo(e,t))):n.reverse().forEach((e=>Ho(e,t)))}destroy(){var e,t;null==(t=(e=Fi(this,dr,"f")).destroy)||t.call(e),Jo(this.startNode,this.endNode).forEach(Mo),this.startNode.remove(),this.endNode.remove()}};var fr,yr,gr,vr,Zr,xr,Gr,Xr,Ir,Wr,kr,Vr,Sr,Cr,Lr,Rr,Yr,wr;dr=new WeakMap;class Tr{constructor(e,t){fr.set(this,void 0),yr.set(this,void 0),gr.set(this,null),vr.set(this,null),Zr.set(this,void 0),Ui(this,fr,e,"f"),Ui(this,yr,t,"f")}commit(e){var t,n;if(!Jr(e))return;const[i,o]=e;if(Fi(this,gr,"f")!==o)this.clear(),Ui(this,vr,o({startNode:Fi(this,fr,"f"),endNode:Fi(this,yr,"f")}),"f"),Ui(this,gr,o,"f"),Ui(this,Zr,null==(t=Fi(this,vr,"f"))?void 0:t.call(this,i),"f");else{const e=null==(n=Fi(this,vr,"f"))?void 0:n.call(this,i);Fi(this,Zr,"f")!==e&&(this.clear(),Ui(this,Zr,e,"f"))}}clear(){var e;null==(e=Fi(this,Zr,"f"))||e.call(this),Jo(Fi(this,fr,"f"),Fi(this,yr,"f")).forEach(Mo)}destroy(){this.clear()}}fr=new WeakMap,yr=new WeakMap,gr=new WeakMap,vr=new WeakMap,Zr=new WeakMap;class Nr{constructor(e,t){}commit(e){}}class Kr{constructor(e,t){xr.set(this,void 0),Gr.set(this,null),Ui(this,xr,t,"f")}commit(e){Fi(this,Gr,"f")!==e&&(Fi(this,Gr,"f")&&Mo(Fi(this,Gr,"f")),zo(e,Fi(this,xr,"f")),Ui(this,Gr,e,"f"))}}xr=new WeakMap,Gr=new WeakMap;class zr{constructor(e,t){Xr.set(this,void 0),Ir.set(this,void 0),Wr.set(this,null),kr.set(this,null),Vr.set(this,jo),Ui(this,Xr,e,"f"),Ui(this,Ir,t,"f")}commit(e){Fi(this,Wr,"f")!==e&&(this.clear(),(e=>e instanceof Promise)(e)&&this.promiseCommit(e))}promiseCommit(e){const[t,n]=function(e){let t=jo;const n=new Promise(((e,n)=>t=n)),i=()=>t();return[Promise.race([n,e]),i]}(e);Ui(this,Vr,n,"f"),t.then((e=>{var t;const n=Qr(e);Ui(this,kr,ea(n,Fi(this,Xr,"f"),Fi(this,Ir,"f")),"f"),null==(t=Fi(this,kr,"f"))||t.commit(e)})),Ui(this,Wr,e,"f")}partClear(){var e,t;null==(t=null==(e=Fi(this,kr,"f"))?void 0:e.destroy)||t.call(e),Jo(Fi(this,Xr,"f"),Fi(this,Ir,"f")).forEach(Mo)}clear(){var e,t;Fi(this,Vr,"f").call(this),null==(t=null==(e=Fi(this,kr,"f"))?void 0:e.destroy)||t.call(e),Jo(Fi(this,Xr,"f"),Fi(this,Ir,"f")).forEach(Mo),Ui(this,Vr,jo,"f")}destroy(){this.clear()}}Xr=new WeakMap,Ir=new WeakMap,Wr=new WeakMap,kr=new WeakMap,Vr=new WeakMap;class Hr{constructor(e,t){Sr.set(this,document.createTextNode("")),Cr.set(this,null),Ho(Fi(this,Sr,"f"),e)}commit(e){Fi(this,Cr,"f")!==e&&(Fi(this,Sr,"f").data=Ii(e)||Xi(e)?"":String(e),Ui(this,Cr,e,"f"))}}Sr=new WeakMap,Cr=new WeakMap;class Mr{constructor(e,t){Lr.set(this,void 0),Rr.set(this,void 0),Yr.set(this,null),Ui(this,Lr,e,"f"),Ui(this,Rr,t,"f")}commit(e){const{strings:t,values:n}=e;Fi(this,Yr,"f")&&!Fi(this,Yr,"f").equalStrings(t)&&(Fi(this,Yr,"f").destroy(),Ui(this,Yr,null,"f")),Fi(this,Yr,"f")||(Ui(this,Yr,new Ya(e,Fi(this,Lr,"f"),Fi(this,Rr,"f")),"f"),Fi(this,Yr,"f").insert("before",Fi(this,Rr,"f"))),Fi(this,Yr,"f").commit(n)}destroy(){var e;null==(e=Fi(this,Yr,"f"))||e.destroy()}}Lr=new WeakMap,Rr=new WeakMap,Yr=new WeakMap,function(e){e.primitive="primitive",e.templateLiterals="templateLiterals",e.array="array",e.node="node",e.object="object",e.function="function",e.directive="directive"}(wr||(wr={}));const Jr=e=>Wi(e)&&Reflect.get(e,oo)===Il.node,jr=e=>t=>t instanceof e,Fr=jr(Hr),Ur=jr(Mr),Or=jr(mr),Er=jr(Kr),Pr=jr(zr),Br=jr(Nr),Ar=jr(Tr),Qr=e=>Vi(e)?wr.primitive:Do(e)?wr.templateLiterals:Jr(e)?wr.directive:Wi(e)?wr.array:(e=>e instanceof Node)(e)?wr.node:vi(e)?wr.function:wr.object,Dr={[wr.primitive]:Fr,[wr.templateLiterals]:Ur,[wr.array]:Or,[wr.node]:Er,[wr.function]:Br,[wr.object]:Pr,[wr.directive]:Ar},_r={[wr.primitive]:Hr,[wr.templateLiterals]:Mr,[wr.array]:mr,[wr.node]:Kr,[wr.function]:Nr,[wr.object]:zr,[wr.directive]:Tr},qr=(e,t)=>Dr[e](t),ea=(e,t,n)=>new _r[e](t,n);var ta,na,ia,oa,la,ra,aa,sa,ca,ua,da,pa,ha,ma,ba;class fa{constructor(e,t,n,i){var o;ta.set(this,document.createComment("")),na.set(this,document.createComment("")),ia.set(this,void 0),oa.set(this,void 0),la.set(this,[]),ra.set(this,[]),aa.set(this,null),sa.set(this,Vo({},{shallow:!0})),ca.set(this,null),ua.set(this,null),da.set(this,document.createElement("div")),Ui(this,ta,e,"f"),Ui(this,na,t,"f"),Ui(this,oa,n,"f"),Ui(this,ia,ul(n.value)[0],"f"),n.staticAttrs&&n.staticAttrs.forEach((e=>function(e,{type:t,name:n,value:i}){switch(t){case Ai.attribute:case Ai.property:Reflect.set(e,n,i);break;case Ai.boolean:Reflect.set(e,n,To(i))}}(Fi(this,sa,"f"),e))),null==(o=n.attrs)||o.forEach((e=>{e.type===Ai.directive?Fi(this,la,"f").push(e):e.type===Ai.spread?i.push(new Al(Fi(this,sa,"f"),e)):e.type===Ai.event?i.push(new Pl(Fi(this,da,"f"),e)):i.push(new pr(Fi(this,sa,"f"),e))}))}createContext(){const e=Fi(this,ta,"f"),t={host:document.body,get parentElement(){return e.parentElement},dispatchEvent:e=>Fi(this,da,"f").dispatchEvent(e)},n=Fi(this,ta,"f").getRootNode();if(n instanceof ShadowRoot){const e=n.host;t.host=e}else if(n instanceof DocumentFragment){const e=function(e){return Reflect.get(e,nr)??null}(n);e&&(t.host=e)}return t}commit(e){const[,t]=Fi(this,ia,"f"),n=e[t];if(!vi(n)||Fi(this,ca,"f")===n)return void Fi(this,ra,"f").forEach((t=>t.commit(e)));const i=this.createContext();this.clear(),ao(this);const o=n.call(i,Fi(this,sa,"f"),i);ao(null),Fi(this,la,"f").length&&Fi(this,ra,"f").push(...Fi(this,la,"f").map((e=>new Nl(i,e)))),bo(this,Qi);let l=!1;Ui(this,ua,Io((()=>{var e;const t=o(),n=Qr(t);qr(n,Fi(this,aa,"f"))||(this.partClear(),Ui(this,aa,ea(n,Fi(this,ta,"f"),Fi(this,na,"f")),"f")),bo(this,l?eo:qi),null==(e=Fi(this,aa,"f"))||e.commit(t),l?bo(this,no):(bo(this,to),l=!0)})),"f"),Fi(this,ra,"f").forEach((t=>t.commit(e))),bo(this,Di),Ui(this,ca,n,"f")}partClear(){var e,t;null==(t=null==(e=Fi(this,aa,"f"))?void 0:e.destroy)||t.call(e),Jo(Fi(this,ta,"f"),Fi(this,na,"f")).forEach(Mo)}clear(){var e;Jo(Fi(this,ta,"f"),Fi(this,na,"f")).forEach(Mo),bo(this,_i),Fi(this,ra,"f").forEach((e=>{var t;return null==(t=e.destroy)?void 0:t.call(e)})),null==(e=Fi(this,ua,"f"))||e.call(this),Ui(this,ra,[],"f"),Ui(this,ua,null,"f"),function(e){io.forEach((t=>Reflect.set(e,t,null,e)))}(this)}destroy(){this.clear(),this.partClear()}}ta=new WeakMap,na=new WeakMap,ia=new WeakMap,oa=new WeakMap,la=new WeakMap,ra=new WeakMap,aa=new WeakMap,sa=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap;const ya=(ba=class{constructor(e,t,n){pa.set(this,document.createComment("")),ha.set(this,document.createComment("")),ma.set(this,void 0),Ui(this,ma,new fa(Fi(this,pa,"f"),Fi(this,ha,"f"),t,n),"f"),zo(Fi(this,pa,"f"),e),Ho(Fi(this,ha,"f"),e),e.remove()}commit(e){Fi(this,ma,"f").commit(e)}destroy(){var e,t;null==(t=(e=Fi(this,ma,"f")).destroy)||t.call(e),Fi(this,pa,"f").remove(),Fi(this,ha,"f").remove()}},pa=new WeakMap,ha=new WeakMap,ma=new WeakMap,ba),ga=(e=>{var t,n,i;return i=class extends e{constructor(e,i,o){super(e,i,o),t.set(this,[]),n.set(this,null),this.hmr()}commit(e){const n=e;super.commit(n),Ui(this,t,e,"f")}hmr(){Ui(this,n,fo.subscribe((e=>Fi(this,t,"f").includes(e)&&this.commit(Fi(this,t,"f")))),"f")}destroy(){var e,t;null==(e=Fi(this,n,"f"))||e.call(this),null==(t=super.destroy)||t.call(this)}},t=new WeakMap,n=new WeakMap,i})(ya);var va,Za,xa,Ga,Xa,Ia,Wa,ka,Va,Sa,Ca;class La{constructor(e,{value:t}){va.set(this,document.createComment("")),Za.set(this,document.createComment("")),xa.set(this,void 0),Ga.set(this,null),Xa.set(this,null),Ui(this,xa,ul(t)[0],"f"),zo(Fi(this,va,"f"),e),Ho(Fi(this,Za,"f"),e),e.remove()}commit(e){var t;const[,n]=Fi(this,xa,"f"),i=e[n];if(Fi(this,Ga,"f")===i)return;const o=Qr(i);qr(o,Fi(this,Xa,"f"))||(Ii(Fi(this,Xa,"f"))||this.clear(),Ui(this,Xa,ea(o,Fi(this,va,"f"),Fi(this,Za,"f")),"f")),null==(t=Fi(this,Xa,"f"))||t.commit(i),Ui(this,Ga,i,"f")}clear(){var e,t;null==(t=null==(e=Fi(this,Xa,"f"))?void 0:e.destroy)||t.call(e),Jo(Fi(this,va,"f"),Fi(this,Za,"f")).forEach(Mo)}destroy(){this.clear(),Fi(this,va,"f").remove(),Fi(this,Za,"f").remove()}}function Ra(e=[],t,n=!1,i=[]){return e.forEach((e=>{if(e.isComponent){const n=document.createComment("");return t.appendChild(n),void i.push(new ga(n,e,i))}const o=wo(e,e.isSvg||n);t.appendChild(o),o instanceof Comment&&e.isMarker&&i.push(new tr(o,e)),o instanceof Text&&e.isMarkerOnly&&i.push(new La(o,e)),o instanceof Element&&(e.staticAttrs&&e.staticAttrs.forEach((e=>function(e,{type:t,name:n,value:i}){switch(t){case Ai.attribute:e.setAttribute(n,i??"");break;case Ai.boolean:To(i)&&e.setAttribute(n,"");break;case Ai.property:Reflect.set(e,n,i,e)}}(o,e))),e.attrs&&i.push(...e.attrs.map((e=>Ql(o,e)))),e.children&&Ra(e.children,o,e.isSvg||n,i))})),i}va=new WeakMap,Za=new WeakMap,xa=new WeakMap,Ga=new WeakMap,Xa=new WeakMap;class Ya{constructor(e,t,n){if(Ia.set(this,document.createComment("")),Wa.set(this,document.createComment("")),ka.set(this,null),Va.set(this,[]),Sa.set(this,void 0),Ca.set(this,!1),Ui(this,Sa,e.strings,"f"),e[lo]!==Eo.html&&e[lo]!==Eo.svg)return;const[i,o]=function(e,t=!1){const n=document.createDocumentFragment();return[n,Ra(e.children,n,t)]}(e.template.node,(e=>Ao.has(e))(e[lo]));Ui(this,ka,i,"f"),Ui(this,Va,o,"f"),t&&n?(Ui(this,Ia,t,"f"),Ui(this,Wa,n,"f"),Ui(this,Ca,!0,"f")):(i.prepend(Fi(this,Ia,"f")),i.append(Fi(this,Wa,"f")))}equalStrings(e){return Fi(this,Sa,"f")===e}commit(e){Fi(this,Va,"f").forEach((t=>t.commit(e)))}insert(e,t){Fi(this,ka,"f")&&("before"===e?zo(Fi(this,ka,"f"),t):"after"===e?Ho(Fi(this,ka,"f"),t):t.appendChild(Fi(this,ka,"f")),Ui(this,ka,null,"f"))}destroy(){Fi(this,Va,"f").forEach((e=>{var t;return null==(t=e.destroy)?void 0:t.call(e)})),Jo(Fi(this,Ia,"f"),Fi(this,Wa,"f")).forEach(Mo),Fi(this,Ca,"f")||(Fi(this,Ia,"f").remove(),Fi(this,Wa,"f").remove())}}Ia=new WeakMap,Wa=new WeakMap,ka=new WeakMap,Va=new WeakMap,Sa=new WeakMap,Ca=new WeakMap;const wa=new WeakMap;const Ta=e=>({value:e}),Na=function(e,t){return(...n)=>Tl(Il.attribute,[e(...n),t])}((e=>e),(({node:e})=>{let t=null;const n=()=>{t&&(t.value=null)};return i=>(t===i||(i.value=e,t=i),n)}));function Ka(e,t){return(...n)=>Tl(Il.node,[e(...n),t])}const za=Ka((e=>e),(({startNode:e,endNode:t})=>{const n=e.getRootNode();let i=new Map,o=null;const l=e=>Do(e)?e.strings:e,r=e=>{const t=l(e);return i.has(t)?i.get(t):null},a=i=>{const o=Qr(i),l=ea(o,e,t),r=document.createDocumentFragment(),a=function(e,t){const n=e=>{const n=e;t.dispatchEvent(di(n.detail))},i=e=>{const n=e;t.dispatchEvent(pi(n.detail))};return e.addEventListener(di.type,n),e.addEventListener(pi.type,i),()=>{e.removeEventListener(di.type,n),e.removeEventListener(pi.type,i)}}(r,n),s=function(e,t){if(t instanceof ShadowRoot){const n=t.host;Reflect.set(e,nr,n)}return()=>{Reflect.deleteProperty(e,nr)}}(r,n);return{part:l,fragment:r,destroy:()=>{var e;a(),s(),null==(e=l.destroy)||e.call(l)}}},s=()=>{i.forEach((({destroy:e})=>e())),i=new Map,Jo(e,t).forEach(Mo)};return n=>{const c=r(o),u=r(n);if(c&&l(o)!==l(n)&&Jo(e,t).forEach((e=>c.fragment.appendChild(e))),u)l(o)!==l(n)&&zo(u.fragment,t),u.part.commit(n);else{const e=a(n);((e,t)=>{i.set(l(e),t)})(n,e),e.part.commit(n)}return o=n,s}})),Ha=Ka((e=>e),(({startNode:e,endNode:t})=>{let n=null;const i=()=>{Jo(e,t).forEach(Mo)};return e=>{if(n===e)return i;i();const o=document.createElement("template");return o.innerHTML=e,zo(o.content,t),n=e,i}}));var Ma;const Ja=Ka(((e,t,n)=>(e.length,[e,t,n])),(({startNode:e,endNode:t})=>{let n=[];const i=()=>{n.forEach((e=>e.destroy()))};return([o,l,r])=>{const a=function(e,t,n){const i=[],o=new Map,l=[];return e.forEach(((e,r,a)=>{const s={key:t(e),value:n(e,r,a)},c={type:Qr(s.value),key:s.key};l.push(s),i.push(c),o.set(c,r)})),{items:i,itemToIndex:o,values:l}}(o,l,r),s=a.values,c=hr(function(e){const t=[],n=new Map;return e.forEach((({type:e,key:i},o)=>{const l={type:e,key:i};t.push(l),n.set(l,o)})),{items:t,itemToIndex:n}}(n),a,{strict:!0}),u={length:s.length};return c.update.forEach((({action:i,from:o,to:l})=>{switch(i){case ar.create:const i=document.createComment("");0===l?Ho(i,e):n.length?Ho(i,u[l-1]?u[l-1].endNode:n[l-1].endNode):zo(i,t),u[l]=new ja(i,s[l].value,s[l].key);break;case ar.move:if(u[l]=n[o],l===o)return;0===l?n[o].insert("after",e):n[o].insert("after",u[l-1]?u[l-1].endNode:n[l-1].endNode)}})),c.delete.forEach((({from:e})=>n[e].destroy())),n=Array.from(u),n.forEach(((e,t)=>e.commit(s[t].value))),i}}));class ja{constructor(e,t,n){Ma.set(this,void 0),Object.defineProperty(this,"startNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"endNode",{enumerable:!0,configurable:!0,writable:!0,value:document.createComment("")}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"key",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),zo(this.startNode,e),Ho(this.endNode,e),Mo(e),this.key=n,this.type=Qr(t),Ui(this,Ma,ea(this.type,this.startNode,this.endNode),"f")}commit(e){Fi(this,Ma,"f").commit(e)}insert(e,t){const n=[this.startNode,...Jo(this.startNode,this.endNode),this.endNode];"before"===e?n.forEach((e=>zo(e,t))):n.reverse().forEach((e=>Ho(e,t)))}destroy(){var e,t;null==(t=(e=Fi(this,Ma,"f")).destroy)||t.call(e),Jo(this.startNode,this.endNode).forEach(Mo),this.startNode.remove(),this.endNode.remove()}}Ma=new WeakMap;var Fa,Ua;!function(e){e.string="string",e.whiteSpace="whiteSpace",e.nextLine="nextLine",e.equal="equal",e.tilde="tilde",e.plus="plus",e.sharp="sharp",e.asterisk="asterisk",e.commercialAt="commercialAt",e.ampersand="ampersand",e.period="period",e.comma="comma",e.colon="colon",e.semicolon="semicolon",e.gt="gt",e.leftBrace="leftBrace",e.rightBrace="rightBrace",e.leftBracket="leftBracket",e.rightBracket="rightBracket",e.leftParent="leftParent",e.rightParent="rightParent"}(Fa||(Fa={})),function(e){e.style="style",e.multiComment="multiComment",e.singleComment="singleComment"}(Ua||(Ua={}));const Oa={doubleQuote:'"',singleQuote:"'",whiteSpace:/\s/,string:/\S/,breakString:/:|;|{|&|#|@|,|>|~|\(|\)|\[|\.|\+/,nextLine:"\n",slash:"/",equal:"=",tilde:"~",plus:"+",sharp:"#",asterisk:"*",commercialAt:"@",ampersand:"&",period:".",comma:",",colon:":",semicolon:";",gt:">",leftBrace:"{",rightBrace:"}",leftBracket:"[",rightBracket:"]",leftParent:"(",rightParent:")"},Ea=e=>t=>e===t,$a=e=>t=>e.test(t),Pa={doubleQuote:Ea(Oa.doubleQuote),singleQuote:Ea(Oa.singleQuote),whiteSpace:$a(Oa.whiteSpace),string:$a(Oa.string),breakString:$a(Oa.breakString),nextLine:Ea(Oa.nextLine),slash:Ea(Oa.slash),equal:Ea(Oa.equal),tilde:Ea(Oa.tilde),plus:Ea(Oa.plus),sharp:Ea(Oa.sharp),asterisk:Ea(Oa.asterisk),commercialAt:Ea(Oa.commercialAt),ampersand:Ea(Oa.ampersand),period:Ea(Oa.period),comma:Ea(Oa.comma),colon:Ea(Oa.colon),semicolon:Ea(Oa.semicolon),gt:Ea(Oa.gt),leftBrace:Ea(Oa.leftBrace),rightBrace:Ea(Oa.rightBrace),leftBracket:Ea(Oa.leftBracket),rightBracket:Ea(Oa.rightBracket),leftParent:Ea(Oa.leftParent),rightParent:Ea(Oa.rightParent)};function Ba(e){const t=[];let n=0;const i=()=>n<e.length,o=(e=>t=>Pa.slash(e[t])&&Pa.asterisk(e[t+1]))(e),l=(e=>t=>Pa.asterisk(e[t])&&Pa.slash(e[t+1]))(e),r=(e=>t=>Pa.slash(e[t])&&Pa.slash(e[t+1]))(e),a=(s=Ua.style)=>{for(;i();){let c=e[n];if(Pa.nextLine(c)){if(t.push({type:Fa.nextLine,value:c}),n++,s===Ua.singleComment)break}else if(Pa.whiteSpace(c)){let o="";for(;i()&&Pa.whiteSpace(c)&&!Pa.nextLine(c);)o+=c,c=e[++n];t.push({type:Fa.whiteSpace,value:o})}else{if(s===Ua.style){if(o(n)){a(Ua.multiComment);continue}if(r(n)){a(Ua.singleComment);continue}if(Pa.colon(c)){t.push({type:Fa.colon,value:c});let o="";if(c=e[++n],!Pa.whiteSpace(c))continue;for(o="";i()&&Pa.whiteSpace(c);)o+=c,c=e[++n];for(t.push({type:Fa.whiteSpace,value:o}),o="";i()&&!Pa.semicolon(c);)o+=c,c=e[++n];t.push({type:Fa.string,value:o});continue}if(Pa.leftBracket(c)){t.push({type:Fa.leftBracket,value:c});let o="";for(c=e[++n];i()&&!Pa.equal(c)&&!Pa.rightBracket(c);)o+=c,c=e[++n];if(t.push({type:Fa.string,value:o}),Pa.equal(c)&&(t.push({type:Fa.equal,value:c}),c=e[++n]),Pa.doubleQuote(c)){let o="";for(c=e[++n];i()&&!Pa.doubleQuote(c);)o+=c,c=e[++n];t.push({type:Fa.string,value:o}),c=e[++n]}if(Pa.singleQuote(c)){let o="";for(c=e[++n];i()&&!Pa.singleQuote(c);)o+=c,c=e[++n];t.push({type:Fa.string,value:o}),c=e[++n]}Pa.rightBracket(c)&&(t.push({type:Fa.rightBracket,value:c}),n++);continue}if(Pa.commercialAt(c)){t.push({type:Fa.commercialAt,value:c}),n++;continue}if(Pa.gt(c)){t.push({type:Fa.gt,value:c}),n++;continue}if(Pa.tilde(c)){t.push({type:Fa.tilde,value:c}),n++;continue}if(Pa.plus(c)){t.push({type:Fa.plus,value:c}),n++;continue}if(Pa.sharp(c)){t.push({type:Fa.sharp,value:c}),n++;continue}if(Pa.asterisk(c)){t.push({type:Fa.asterisk,value:c}),n++;continue}if(Pa.ampersand(c)){t.push({type:Fa.ampersand,value:c}),n++;continue}if(Pa.period(c)){t.push({type:Fa.period,value:c}),n++;continue}if(Pa.comma(c)){t.push({type:Fa.comma,value:c}),n++;continue}if(Pa.semicolon(c)){t.push({type:Fa.semicolon,value:c}),n++;continue}if(Pa.leftBrace(c)){t.push({type:Fa.leftBrace,value:c}),n++;continue}if(Pa.rightBrace(c)){t.push({type:Fa.rightBrace,value:c}),n++;continue}if(Pa.leftParent(c)){let o="";for(;i()&&!Pa.rightParent(c);)o+=c,c=e[++n];o+=c,t.push({type:Fa.string,value:o}),n++;continue}}else if(s===Ua.multiComment){if(l(n)){t.push({type:Fa.string,value:"*/"}),n+=2;break}}else if(s===Ua.singleComment&&Pa.nextLine(c)){t.push({type:Fa.nextLine,value:c}),n++;break}if(Pa.string(c)){let o="";for(;i()&&Pa.string(c)&&!Pa.breakString(c);)o+=c,c=e[++n];t.push({type:Fa.string,value:o})}else n++}}};return a(),t}const Aa=new RegExp(`^${Oi.replace("@@","")}_\\d+_$`),Qa=e=>t=>n=>i=>!!n[i]&&n[i][e]===t,Da=Qa("type"),_a=Qa("value"),qa=Da(Fa.string),es=Da(Fa.whiteSpace),ts=Da(Fa.nextLine);Da(Fa.equal),Da(Fa.tilde),Da(Fa.plus);const ns=Da(Fa.sharp),is=Da(Fa.asterisk),os=Da(Fa.commercialAt),ls=Da(Fa.ampersand),rs=Da(Fa.period);Da(Fa.comma);const as=Da(Fa.colon),ss=Da(Fa.semicolon);Da(Fa.gt);const cs=Da(Fa.leftBrace),us=Da(Fa.rightBrace);Da(Fa.leftBracket),Da(Fa.rightBracket),Da(Fa.leftParent),Da(Fa.rightParent);const ds=_a("/*"),ps=_a("*/"),hs=_a("//"),ms=ts,bs=e=>{const t=os(e),n=qa(e);return e=>t(e)&&n(e+1)},fs=qa,ys=is,gs=e=>{const t=fs(e),n=ys(e),i=ls(e),o=(e=>{const t=os(e),n=qa(e);return i=>t(i)&&t(i+1)&&n(i+2)&&Aa.test(e[i+2].value)})(e);return e=>t(e)||n(e)||i(e)||o(e)},vs=e=>{const t=gs(e),n=(e=>{const t=rs(e),n=qa(e);return e=>t(e)&&n(e+1)})(e),i=(e=>{const t=ns(e),n=qa(e);return e=>t(e)&&n(e+1)})(e),o=bs(e),l=(e=>{const t=as(e),n=qa(e);return e=>t(e)&&n(e+1)})(e);return e=>t(e)||n(e)||i(e)||o(e)||l(e)},Zs=e=>t=>n=>{var i;n&&(t[e]?null==(i=t[e])||i.push(n):t[e]=[n])},xs=Zs("properties"),Gs=Zs("children");var Xs;!function(e){e.style="style",e.comment="comment",e.atRule="atRule"}(Xs||(Xs={}));let Is=class{constructor(e={}){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Xs.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.assign(this,e)}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}};function Ws(e){let t=0;const n=()=>t<e.length,i=(e=>{const t=qa(e),n=as(e),i=es(e),o=ss(e);return e=>t(e)&&n(e+1)&&i(e+2)&&t(e+3)&&o(e+4)})(e),o=(e=>{const t=os(e),n=qa(e),i=ss(e),o=ts(e);return l=>t(l)&&t(l+1)&&n(l+2)&&Aa.test(e[l+2].value)&&(o(l+3)||i(l+3))})(e),l=vs(e),r=cs(e),a=us(e),s=ds(e),c=ps(e),u=hs(e),d=ms(e),p=bs(e),h=ss(e),m=(b,f,y=Xs.style)=>{const g=new Is({type:y,parent:b,value:f});for(;n();){let b=e[t];if(a(t)){t++;break}if(i(t)){const n=e[t+3];xs(g)({name:b.value,value:n.value}),t+=5}else if(o(t)){const n=`@@${e[t+2].value}`;xs(g)({name:n,value:n}),t+=4}else if(s(t)){let i=b.value;for(b=e[++t];n()&&!c(t);)i+=b.value,b=e[++t];i+=b.value,Gs(g)(new Is({type:Xs.comment,parent:g,value:i})),t++}else if(u(t)){let i=b.value;for(b=e[++t];n()&&!d(t);)i+=b.value,b=e[++t];Gs(g)(new Is({type:Xs.comment,parent:g,value:i})),t++}else if(p(t)){let i=b.value;for(b=e[++t];n()&&!r(t)&&!h(t);)i+=b.value,b=e[++t];if(h(t)){i+=";",Gs(g)(new Is({type:Xs.atRule,parent:g,value:i})),t++;continue}Gs(g)(m(g,i.trim(),Xs.atRule))}else if(l(t)){let i=b.value;for(b=e[++t];n()&&!r(t);)i+=b.value,b=e[++t];Gs(g)(m(g,i.trim()))}else t++}return g};return m(null)}var ks,Vs;!function(e){e.string="string",e.whiteSpace="whiteSpace",e.lt="lt",e.gt="gt",e.slash="slash",e.equal="equal"}(ks||(ks={})),function(e){e.element="element",e.text="text",e.comment="comment"}(Vs||(Vs={}));const Ss="'",Cs=/\s/,Ls=/\S/,Rs=/<|>|=/,Ys="<",ws=">",Ts="/",Ns="=",Ks="-",zs="!",Hs=e=>t=>e===t,Ms=e=>t=>e.test(t),Js={doubleQuote:Hs('"'),singleQuote:Hs(Ss),whiteSpace:Ms(Cs),string:Ms(Ls),breakString:Ms(Rs),lt:Hs(Ys),gt:Hs(ws),slash:Hs(Ts),equal:Hs(Ns),hyphen:Hs(Ks),exclamationPoint:Hs(zs)};function js(e){const t=[];let n=0;const i=()=>n<e.length,o=(e=>t=>Js.lt(e[t])&&Js.exclamationPoint(e[t+1])&&Js.hyphen(e[t+2])&&Js.hyphen(e[t+3]))(e),l=(r=Vs.text)=>{for(;i();){let a=e[n];if(Js.whiteSpace(a)){let o="";for(;i()&&Js.whiteSpace(a);)o+=a,a=e[++n];r!==Vs.element&&t.push({type:ks.whiteSpace,value:o})}else{if(r===Vs.element){if(Js.lt(a)){t.push({type:ks.lt,value:a}),n++;continue}if(Js.gt(a)){t.push({type:ks.gt,value:a}),n++;break}if(Js.slash(a)){t.push({type:ks.slash,value:a}),n++;continue}if(Js.equal(a)){t.push({type:ks.equal,value:a}),n++;continue}if(Js.doubleQuote(a)){let o="";for(a=e[++n];i()&&!Js.doubleQuote(a);)o+=a,a=e[++n];t.push({type:ks.string,value:o}),n++;continue}if(Js.singleQuote(a)){let o="";for(a=e[++n];i()&&!Js.singleQuote(a);)o+=a,a=e[++n];t.push({type:ks.string,value:o}),n++;continue}}else if(r===Vs.comment){if(Js.lt(a)){t.push({type:ks.lt,value:a}),n++;continue}if(Js.gt(a)){t.push({type:ks.gt,value:a}),n++;break}}else if(Js.lt(a)){l(o(n)?Vs.comment:Vs.element);continue}if(Js.string(a)){let o="";for(;i()&&Js.string(a)&&!Js.breakString(a);)o+=a,a=e[++n];t.push({type:ks.string,value:o})}else n++}}};return l(),t}const Fs=/^(area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Us=e=>t=>n=>i=>!!n[i]&&n[i][e]===t,Os=Us("type"),Es=Us("value"),$s=Os(ks.lt),Ps=Os(ks.gt),Bs=Os(ks.slash),As=Os(ks.equal),Qs=Os(ks.string),Ds=Os(ks.whiteSpace),_s=Es("!--"),qs=Es("--"),ec=e=>t=>n=>{var i;n&&(t[e]?null==(i=t[e])||i.push(n):t[e]=[n])},tc=ec("attrs"),nc=ec("children");function ic(e){const t=new Yo({type:Ro.element,value:"template",children:[]});let n=0;const i=()=>n<e.length,o=(e=>{const t=$s(e),n=Qs(e);return e=>t(e)&&n(e+1)})(e),l=(e=>{const t=$s(e),n=Bs(e),i=Qs(e),o=Ps(e);return e=>t(e)&&n(e+1)&&i(e+2)&&o(e+3)})(e),r=(e=>{const t=$s(e),n=Bs(e),i=Ps(e);return e=>t(e)&&n(e+1)&&n(e+2)&&i(e+3)})(e),a=(e=>{const t=Bs(e),n=Ps(e);return e=>t(e)&&n(e+1)})(e),s=(e=>{const t=$s(e),n=Qs(e),i=_s(e);return e=>t(e)&&n(e+1)&&i(e+1)})(e),c=(e=>{const t=Qs(e),n=qs(e),i=Ps(e);return e=>t(e)&&n(e)&&i(e+1)})(e),u=$s(e),d=Ps(e),p=As(e),h=Ds(e),m=Qs(e),b=()=>{let t=e[n];const i={name:t.value};return t=e[++n],p(n)&&(t=e[++n],m(n)&&(i.value=t.value,n++)),i},f=t=>{let p=e[n];if(h(n)||m(n)){let o=p.value;for(p=e[++n];i()&&!u(n);)o+=p.value,p=e[++n];return o=o.trim(),o.length?new Yo({parent:t,type:Ro.text,value:o}):null}if(s(n)){let o="";for(n+=2,p=e[n];i()&&!c(n);)o+=p.value,p=e[++n];return c(n)&&(n+=2),new Yo({parent:t,type:Ro.comment,value:o})}if(o(n)){p=e[++n];const o=(e=>Fs.test(e))(p.value),s=new Yo({parent:t,type:Ro.element,value:p.value.toLowerCase()});for(n++;i()&&!d(n)&&!a(n);)m(n)?tc(s)(b()):n++;if(a(n))return n+=2,s;for(p=e[++n];i()&&!l(n)&&!r(n)&&!o;)nc(s)(f(s));return(l(n)||r(n))&&(n+=4),s}return n++,null};for(;i();)nc(t)(f(t));return t}class oc{get isMarker(){return ll(this.value)}get isMarkerOnly(){return rl(this.value)}get isSvg(){return this.type===Ro.element&&/^svg$/i.test(this.value)}get isComponent(){return this.type===Ro.element&&this.isMarkerOnly}constructor(e,t=null){if(Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Ro.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"staticAttrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e.type,this.value=e.value,this.parent=t,e.attrs){const[t,n]=function(e=[]){const t=((e,t)=>e.reduce(((e,n)=>{const i=e[t(n)];return i?i.push(n):e[t(n)]=[n],e}),{}))(e,(e=>cl(e.name)));return Object.keys(t).map((e=>t[e])).reduce(((e,t)=>{const[n,i]=e,o=t[t.length-1],l=sl(o.name);if(l===Ai.event)i.push(...t.filter((e=>!!e.value)).map((e=>({type:sl(e.name),name:cl(e.name),value:e.value}))));else if(l===Ai.attribute){const e=t.filter((e=>!!e.value)).map((e=>e.value)).join(" "),r={type:l,name:cl(o.name)};e&&(r.value=e),al(r)?i.push(r):n.push(r)}else{const e={type:l,name:cl(o.name)};o.value&&(e.value=o.value),al(e)?i.push(e):n.push(e)}return e}),[[],[]])}(e.attrs);t.length&&(this.staticAttrs=t),n.length&&(this.attrs=n)}e.children&&(this.children=e.children.map((e=>new oc(e,this))))}insert(e,t,n){if(this.children){const i="before"===e?0:1;this.children.includes(n)&&this.children.splice(this.children.indexOf(n)+i,0,t)}else this.children=[t]}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}}function lc(e){const t=ul(e.value);e.value.replace($i,Oi).split(Oi).reduce(((n,i,o)=>(o<t.length?n.push(new oc(new Yo({type:Ro.text,value:i}),e.parent),new oc(new Yo({type:Ro.text,value:t[o][0]}),e.parent)):n.push(new oc(new Yo({type:Ro.text,value:i}),e.parent)),n)),[]).filter((e=>""!==e.value&&!(!e.value.trim()&&Bi.test(e.value)))).reverse().forEach(((t,n,{length:i})=>n===i-1?e.value=t.value:e.parent&&e.parent.insert("after",t,e)))}const rc=e=>(t,...n)=>{const i={strings:t,values:n,[lo]:e};if(Po.has(t)){const e=Po.get(t);return i.template=e,i}const o=function(e){const t=new oc(e);for(const e of t)e.type===Ro.text&&!rl(e.value)&&lc(e);return t}((e=>ic(js(e)))(t.reduce(((e,t,i)=>(i<n.length?e.push(t,Qo(i)):e.push(t),e)),[]).join("")));return i.template=Object.freeze({node:o}),Po.set(t,i.template),i},ac=rc(Eo.html),sc=rc(Eo.svg),cc=e=>!Vi(e)||Ii(e)||Xi(e)?_o(e)?`.${String(e)}`:"":String(e),uc=e=>(t,[n,i])=>t.replace(new RegExp(n),cc(e[i]));class dc{get selector(){return[...this.iterParent()].reverse().map((e=>e.toString(!0))).join(" ")}get isAtRule(){return this.type===Xs.atRule}constructor(e,t=null,n){var i;if(Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Xs.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skipParent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.type=e.type,this.value=e.value,this.parent=t,e.value&&e.isMarker){const t=uc(n),i=ul(e.value).reduce(t,e.value);this.value=i}this.value&&e.isThis&&this.parent&&(this.value=this.value.replace(/\&/,null==(i=this.parent)?void 0:i.toString(!0)),this.skipParent=!0),this.value&&e.isAtRule&&this.parent&&(this.skipParent=!0);const[o,l]=bc(e,n);if(e.children&&l.push(...e.children.map((e=>[e,n]))),this.style=o,this.children=l.filter((([e])=>e.type===Xs.style||e.type===Xs.atRule)).map((([e,t])=>new dc(e,this,t))),this.value&&e.isAtRule&&this.parent&&e.children){let e="";for(const t of this.children)t.value&&(e+=`${t.value} {\n${t.style}}\n`);this.style=e}}toString(e=!1){return this.value?this.value:e?`.${hc(this.style)}`:hc(this.style)}*iterParent(){if(yield this,this.parent)if(this.skipParent){if(!this.parent.parent)return;yield*this.parent.parent.iterParent()}else yield*this.parent.iterParent()}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)e.isAtRule?yield e:yield*e}}const pc=new Map;function hc(e){if(pc.has(e))return pc.get(e);const t=function(e=21){let t="_";for(let n=0;n<e;n++)t+=dl.charAt(pl(0,dl.length));return t}();return pc.set(e,t),t}const mc=(e,t)=>`${e}: ${t};\n`;function bc(e,t,n=["",[]]){var i;const o=uc(t);return null==(i=e.properties)||i.forEach((e=>{if(e.isDynamic){const i=ul(e.name),o=t[i[0][1]];_o(o)?(o.template.node.children&&n[1].push(...o.template.node.children.map((e=>[e,o.values]))),bc(o.template.node,o.values,n)):n[0]+=cc(o)}else if(e.isMarkerName&&e.isMarkerValue){const t=ul(e.name),i=ul(e.value),l=t.reduce(o,e.name),r=i.reduce(o,e.value);n[0]+=mc(l,r)}else if(e.isMarkerName){const t=ul(e.name).reduce(o,e.name);n[0]+=mc(t,e.value)}else if(e.isMarkerValue){const t=ul(e.value).reduce(o,e.value);n[0]+=mc(e.name,t)}else n[0]+=mc(e.name,e.value)})),n}const fc={vCSSStyleSheetMap:new Map,hostContextMap:new Map};let yc=globalThis.ShadowRoot&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;function gc(){return fc}function vc(e,t){const n=gc(),i=new dc(e,null,t);return[...i].forEach((e=>{const t=e.selector;if(n.vCSSStyleSheetMap.has(t))return;const i=yc?new CSSStyleSheet:null,o=yc?null:document.createElement("style"),l=e.isAtRule&&!e.style?`${t}`:`${t} {\n${e.style}}`;i?i.replaceSync(l):o&&(o.textContent=l),n.vCSSStyleSheetMap.set(t,{selector:t,cssText:l,style:e.style,sheet:i,styleElement:o}),Zc()})),String(i)}function Zc(){yc?function(){const e=gc(),t=Array.from(e.vCSSStyleSheetMap).map((([,{sheet:e}])=>e)).filter(Boolean);Array.from(e.hostContextMap).forEach((([e])=>{e.adoptedStyleSheets=t}))}():function(){const e=gc();Array.from(e.hostContextMap).forEach((([t,{vSheets:n,styleElements:i}])=>{Array.from(e.vCSSStyleSheetMap).filter((([,e])=>!n.has(e))).map((([,e])=>(n.add(e),e.styleElement?document.importNode(e.styleElement,!0):null))).filter(Boolean).forEach((e=>{t.appendChild(e),i.add(e)}))}))}()}const xc=Symbol.for("https://github.com/dineug/r-html#props");function Gc(e){function t(t){return{type:e,payload:t,timestamp:Date.now()}}return t.toString=()=>`${e}`,t.type=e,t}function*Xc(e,t,n){for(const i of n)null!=i&&i[Symbol.iterator]?yield*Xc(e,t,i):vi(i)?yield*Xc(e,t,i(e,t)):yield i}const Ic=(e,t,n)=>[...Xc(e,t,n)],Wc=(...e)=>t=>e.reduce(((e,t)=>t(e)),t);const kc=function*(e){for(const t of e)t.length&&(yield t)};class Vc{get isMarkerName(){return ll(this.name)}get isMarkerValue(){return ll(this.value)}get isDynamic(){return rl(this.name)&&this.name===this.value}constructor(e){Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.value=e.value}}class Sc{get isMarker(){return ll(this.value)}get isThis(){var e;return!(null==(e=this.value)||!e.startsWith("&"))}get isAtRule(){return this.type===Xs.atRule}constructor(e,t=null){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:Xs.comment}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=e.type,this.value=e.value,this.parent=t,e.properties&&(this.properties=e.properties.map((e=>new Vc(e)))),e.children&&(this.children=e.children.map((e=>new Sc(e,this))))}*iterParent(){yield this,this.parent&&(yield*this.parent.iterParent())}*[Symbol.iterator](){if(yield this,this.children)for(const e of this.children)yield*e}}const Cc=(e,...t)=>{const n={strings:e,values:t,[lo]:Eo.css};if(Bo.has(e)){const i=Bo.get(e),o=vc(i.node,t);return n.template=i,n.toString=()=>o,n}const i=function(e){return new Sc(e)}((e=>Ws(Ba(e)))(e.raw.reduce(((e,n,i)=>(i<t.length?e.push(n,Qo(i)):e.push(n),e)),[]).join(""))),o=vc(i,t);return n.template=Object.freeze({node:i}),n.toString=()=>o,Bo.set(e,n.template),n};var Lc=function(e,t){return(Lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Rc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Lc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Yc(e,t,n,i){return new(n||(n=Promise))((function(o,l){function r(e){try{s(i.next(e))}catch(e){l(e)}}function a(e){try{s(i.throw(e))}catch(e){l(e)}}function s(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(r,a)}s((i=i.apply(e,t||[])).next())}))}function wc(e,t){var n,i,o,l,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,a[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Tc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nc(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,l=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=l.next()).done;)r.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return r}function Kc(e,t,n){if(n||2===arguments.length)for(var i,o=0,l=t.length;o<l;o++)(i||!(o in t))&&(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function zc(e){return this instanceof zc?(this.v=e,this):new zc(e)}function Hc(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,t||[]),l=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(e){o[e]&&(i[e]=function(t){return new Promise((function(n,i){l.push([e,t,n,i])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof zc?Promise.resolve(e.value.v).then(s,c):u(l[0][2],e)}(o[e](t))}catch(e){u(l[0][3],e)}}function s(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),l.shift(),l.length&&a(l[0][0],l[0][1])}}function Mc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Tc(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,o,(t=e[n](t)).done,t.value)}))}}}function Jc(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function jc(e){return"function"==typeof e}function Fc(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Uc=Fc((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Oc(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ec=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,i,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var r=Tc(l),a=r.next();!a.done;a=r.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}else l.remove(this);var s=this.initialTeardown;if(jc(s))try{s()}catch(e){o=e instanceof Uc?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=Tc(c),d=u.next();!d.done;d=u.next()){var p=d.value;try{Bc(p)}catch(e){o=o??[],e instanceof Uc?o=Kc(Kc([],Nc(o)),Nc(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}if(o)throw new Uc(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Bc(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Oc(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Oc(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),$c=Ec.EMPTY;function Pc(e){return e instanceof Ec||e&&"closed"in e&&jc(e.remove)&&jc(e.add)&&jc(e.unsubscribe)}function Bc(e){jc(e)?e():e.unsubscribe()}var Ac=void 0,Qc=!1,Dc={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,Kc([e,t],Nc(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function _c(e){Dc.setTimeout((function(){throw e}))}function qc(){}function eu(e){e()}var tu=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Pc(t)&&t.add(n)):n.destination=au,n}return Rc(t,e),t.create=function(e,t,n){return new lu(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Ec),nu=Function.prototype.bind;function iu(e,t){return nu.call(e,t)}var ou=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ru(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ru(e)}else ru(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ru(e)}},e}(),lu=function(e){function t(t,n,i){var o,l,r=e.call(this)||this;jc(t)||!t?o={next:t??void 0,error:n??void 0,complete:i??void 0}:r&&Qc?((l=Object.create(t)).unsubscribe=function(){return r.unsubscribe()},o={next:t.next&&iu(t.next,l),error:t.error&&iu(t.error,l),complete:t.complete&&iu(t.complete,l)}):o=t;return r.destination=new ou(o),r}return Rc(t,e),t}(tu);function ru(e){_c(e)}var au={closed:!0,next:qc,error:function(e){throw e},complete:qc},su="function"==typeof Symbol&&Symbol.observable||"@@observable";function cu(e){return e}var uu=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this,o=function(e){return e&&e instanceof tu||function(e){return e&&jc(e.next)&&jc(e.error)&&jc(e.complete)}(e)&&Pc(e)}(e)?e:new lu(e,t,n);return eu((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=du(t))((function(t,i){var o=new lu({next:function(t){try{e(t)}catch(e){i(e),o.unsubscribe()}},error:i,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[su]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e){return 0===e.length?cu:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=du(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function du(e){var t;return null!==(t=e??Ac)&&void 0!==t?t:Promise}function pu(e){return function(t){if(function(e){return jc(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function hu(e,t,n,i,o){return new mu(e,t,n,i,o)}var mu=function(e){function t(t,n,i,o,l,r){var a=e.call(this,t)||this;return a.onFinalize=l,a.shouldUnsubscribe=r,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return Rc(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(tu),bu=Fc((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),fu=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Rc(t,e),t.prototype.lift=function(e){var t=new yu(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new bu},t.prototype.next=function(e){var t=this;eu((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=Tc(t.currentObservers),l=o.next();!l.done;l=o.next()){l.value.next(e)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;eu((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;eu((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,o=n.isStopped,l=n.observers;return i||o?$c:(this.currentObservers=null,l.push(e),new Ec((function(){t.currentObservers=null,Oc(l,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,o=t.isStopped;n?e.error(i):o&&e.complete()},t.prototype.asObservable=function(){var e=new uu;return e.source=this,e},t.create=function(e,t){return new yu(e,t)},t}(uu),yu=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return Rc(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:$c},t}(fu),gu=function(){return Date.now()},vu=function(e){function t(t,n){return e.call(this)||this}return Rc(t,e),t.prototype.schedule=function(e,t){return this},t}(Ec),Zu={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=Zu.delegate;return null!=o&&o.setInterval?o.setInterval.apply(o,Kc([e,t],Nc(n))):setInterval.apply(void 0,Kc([e,t],Nc(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},xu=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return Rc(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Zu.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Zu.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(e){i=!0,n=e||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Oc(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(vu),Gu=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=gu,e}(),Xu=function(e){function t(t,n){void 0===n&&(n=Gu.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return Rc(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Gu),Iu=new Xu(xu),Wu=Iu;function ku(e){return e&&jc(e.schedule)}var Vu=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Su(e){return jc(null==e?void 0:e.then)}function Cu(e){return jc(e[su])}function Lu(e){return Symbol.asyncIterator&&jc(null==e?void 0:e[Symbol.asyncIterator])}function Ru(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Yu="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function wu(e){return jc(null==e?void 0:e[Yu])}function Tu(e){return Hc(this,arguments,(function(){var t,n,i;return wc(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,zc(t.read())];case 3:return n=o.sent(),i=n.value,n.done?[4,zc(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,zc(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function Nu(e){return jc(null==e?void 0:e.getReader)}function Ku(e){if(e instanceof uu)return e;if(null!=e){if(Cu(e))return function(e){return new uu((function(t){var n=e[su]();if(jc(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(Vu(e))return function(e){return new uu((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}(e);if(Su(e))return function(e){return new uu((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,_c)}))}(e);if(Lu(e))return zu(e);if(wu(e))return function(e){return new uu((function(t){var n,i;try{for(var o=Tc(e),l=o.next();!l.done;l=o.next()){var r=l.value;if(t.next(r),t.closed)return}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}t.complete()}))}(e);if(Nu(e))return function(e){return zu(Tu(e))}(e)}throw Ru(e)}function zu(e){return new uu((function(t){(function(e,t){var n,i,o,l;return Yc(this,void 0,void 0,(function(){var r,a;return wc(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=Mc(e),s.label=1;case 1:return[4,n.next()];case 2:if((i=s.sent()).done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=s.sent(),o={error:a},[3,11];case 6:return s.trys.push([6,,9,10]),i&&!i.done&&(l=n.return)?[4,l.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Hu(e,t,n,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var l=t.schedule((function(){n(),o?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(l),!o)return l}function Mu(e,t){return pu((function(n,i){var o=0;n.subscribe(hu(i,(function(n){i.next(e.call(t,n,o++))})))}))}function Ju(e,t,n){return void 0===n&&(n=1/0),jc(t)?Ju((function(n,i){return Mu((function(e,o){return t(n,e,i,o)}))(Ku(e(n,i)))}),n):("number"==typeof t&&(n=t),pu((function(t,i){return function(e,t,n,i,o,l,r,a){var s=[],c=0,u=0,d=!1,p=function(){d&&!s.length&&!c&&t.complete()},h=function(e){return c<i?m(e):s.push(e)},m=function(e){l&&t.next(e),c++;var a=!1;Ku(n(e,u++)).subscribe(hu(t,(function(e){null==o||o(e),l?h(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var e=function(){var e=s.shift();r?Hu(t,r,(function(){return m(e)})):m(e)};s.length&&c<i;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(hu(t,h,(function(){d=!0,p()}))),function(){null==a||a()}}(t,i,e,n)})))}function ju(e,t,n){void 0===e&&(e=0),void 0===n&&(n=Wu);var i=-1;return null!=t&&(ku(t)?n=t:i=t),new uu((function(t){var o=function(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;o<0&&(o=0);var l=0;return n.schedule((function(){t.closed||(t.next(l++),0<=i?this.schedule(void 0,i):t.complete())}),o)}))}function Fu(e,t){return pu((function(n,i){var o=0;n.subscribe(hu(i,(function(n){return e.call(t,n,o++)&&i.next(n)})))}))}function Uu(e){return pu((function(t,n){var i=[];return t.subscribe(hu(n,(function(e){return i.push(e)}),(function(){n.next(i),n.complete()}))),Ku(e).subscribe(hu(n,(function(){var e=i;i=[],n.next(e)}),qc)),function(){i=null}}))}function Ou(e,t){return void 0===t&&(t=Iu),pu((function(n,i){var o=null,l=null,r=null,a=function(){if(o){o.unsubscribe(),o=null;var e=l;l=null,i.next(e)}};function s(){var n=r+e,l=t.now();if(l<n)return o=this.schedule(void 0,n-l),void i.add(o);a()}n.subscribe(hu(i,(function(n){l=n,r=t.now(),o||(o=t.schedule(s,e),i.add(o))}),(function(){a(),i.complete()}),void 0,(function(){l=o=null})))}))}function Eu(e,t,n,i){return pu((function(o,l){var r;t&&"function"!=typeof t?(n=t.duration,r=t.element,i=t.connector):r=t;var a=new Map,s=function(e){a.forEach(e),e(l)},c=function(e){return s((function(t){return t.error(e)}))},u=0,d=!1,p=new mu(l,(function(t){try{var o=e(t),s=a.get(o);if(!s){a.set(o,s=i?i():new fu);var h=function(e,t){var n=new uu((function(e){u++;var n=t.subscribe(e);return function(){n.unsubscribe(),0==--u&&d&&p.unsubscribe()}}));return n.key=e,n}(o,s);if(l.next(h),n){var m=hu(s,(function(){s.complete(),null==m||m.unsubscribe()}),void 0,void 0,(function(){return a.delete(o)}));p.add(Ku(n(h)).subscribe(m))}}s.next(r?r(t):t)}catch(e){c(e)}}),(function(){return s((function(e){return e.complete()}))}),c,(function(){return a.clear()}),(function(){return d=!0,0===u}));o.subscribe(p)}))}function $u(e,t,n){void 0===t&&(t=Iu);var i=ju(e,t);return function(e,t){return pu((function(n,i){var o=t??{},l=o.leading,r=void 0===l||l,a=o.trailing,s=void 0!==a&&a,c=!1,u=null,d=null,p=!1,h=function(){null==d||d.unsubscribe(),d=null,s&&(f(),p&&i.complete())},m=function(){d=null,p&&i.complete()},b=function(t){return d=Ku(e(t)).subscribe(hu(i,h,m))},f=function(){if(c){c=!1;var e=u;u=null,i.next(e),!p&&b(e)}};n.subscribe(hu(i,(function(e){c=!0,u=e,(!d||d.closed)&&(r?f():b(e))}),(function(){p=!0,(!(s&&c&&d)||d.closed)&&i.complete()})))}))}((function(){return i}),n)}function Pu(e){const t=new Set(e);return e=>t.has(e)}function Bu(e,...t){try{return null==e?void 0:e(...t)}catch(e){console.error(e)}}const Au=queueMicrotask??(e=>{Promise.resolve().then(e)}),Qu=e=>t=>typeof t===e,Du=Qu("function"),_u=Qu("string"),qu=Qu("undefined"),ed=e=>(e=>null===e)(e)||qu(e),{isArray:td}=Array,nd=e=>Number.isInteger(e);const id=((e,t,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*i*t/e.length);return(l=t)=>{let r="";for(;;){let t=n(o),a=o;for(;a--;)if(r+=e[t[a]&i]||"",r.length===l)return r}}})("useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",21,(e=>{let t=globalThis.crypto;return void 0===t&&(t=require("node:crypto").webcrypto),t.getRandomValues(new Uint8Array(e))})),od=(e,t)=>n=>Math.min(Math.max(n,e),t);const ld="object"==typeof e&&e&&e.Object===Object&&e;var rd="object"==typeof self&&self&&self.Object===Object&&self;const ad=ld||rd||Function("return this")();const sd=ad.Symbol;var cd=Object.prototype,ud=cd.hasOwnProperty,dd=cd.toString,pd=sd?sd.toStringTag:void 0;var hd=Object.prototype.toString;var md="[object Null]",bd="[object Undefined]",fd=sd?sd.toStringTag:void 0;function yd(e){return null==e?void 0===e?bd:md:fd&&fd in Object(e)?function(e){var t=ud.call(e,pd),n=e[pd];try{e[pd]=void 0;var i=!0}catch{}var o=dd.call(e);return i&&(t?e[pd]=n:delete e[pd]),o}(e):function(e){return hd.call(e)}(e)}function gd(e){return null!=e&&"object"==typeof e}var vd="[object Symbol]";function Zd(e){return"symbol"==typeof e||gd(e)&&yd(e)==vd}function xd(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}const Gd=Array.isArray;var Xd=1/0,Id=sd?sd.prototype:void 0,Wd=Id?Id.toString:void 0;function kd(e){if("string"==typeof e)return e;if(Gd(e))return xd(e,kd)+"";if(Zd(e))return Wd?Wd.call(e):"";var t=e+"";return"0"==t&&1/e==-Xd?"-0":t}var Vd=/\s/;var Sd=/^\s+/;function Cd(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&Vd.test(e.charAt(t)););return t}(e)+1).replace(Sd,"")}function Ld(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Rd=NaN,Yd=/^[-+]0x[0-9a-f]+$/i,wd=/^0b[01]+$/i,Td=/^0o[0-7]+$/i,Nd=parseInt;function Kd(e){if("number"==typeof e)return e;if(Zd(e))return Rd;if(Ld(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ld(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cd(e);var n=wd.test(e);return n||Td.test(e)?Nd(e.slice(2),n?2:8):Yd.test(e)?Rd:+e}var zd=1/0,Hd=17976931348623157e292;function Md(e){return e?(e=Kd(e))===zd||e===-zd?(e<0?-1:1)*Hd:e==e?e:0:0===e?e:0}function Jd(e){return e}var jd="[object AsyncFunction]",Fd="[object Function]",Ud="[object GeneratorFunction]",Od="[object Proxy]";function Ed(e){if(!Ld(e))return!1;var t=yd(e);return t==Fd||t==Ud||t==jd||t==Od}const $d=ad["__core-js_shared__"];var Pd=function(){var e=/[^.]+$/.exec($d&&$d.keys&&$d.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Bd=Function.prototype.toString;function Ad(e){if(null!=e){try{return Bd.call(e)}catch{}try{return e+""}catch{}}return""}var Qd=/^\[object .+?Constructor\]$/,Dd=Function.prototype,_d=Object.prototype,qd=Dd.toString,ep=_d.hasOwnProperty,tp=RegExp("^"+qd.call(ep).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function np(e){return!(!Ld(e)||function(e){return!!Pd&&Pd in e}(e))&&(Ed(e)?tp:Qd).test(Ad(e))}function ip(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return np(n)?n:void 0}const op=ip(ad,"WeakMap");var lp=Object.create,rp=function(){function e(){}return function(t){if(!Ld(t))return{};if(lp)return lp(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const ap=rp;var sp=Date.now;function cp(e){return function(){return e}}var up=function(){try{var e=ip(Object,"defineProperty");return e({},"",{}),e}catch{}}();const dp=up;var pp=dp?function(e,t){return dp(e,"toString",{configurable:!0,enumerable:!1,value:cp(t),writable:!0})}:Jd;var hp=function(e){var t=0,n=0;return function(){var i=sp(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(pp);const mp=hp;function bp(e){return e!=e}function fp(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}(e,t,n):function(e,t,n,i){for(var o=e.length,l=n+(i?1:-1);i?l--:++l<o;)if(t(e[l],l,e))return l;return-1}(e,bp,n)}(e,t,0)>-1}var yp=9007199254740991,gp=/^(?:0|[1-9]\d*)$/;function vp(e,t){var n=typeof e;return!!(t=t??yp)&&("number"==n||"symbol"!=n&&gp.test(e))&&e>-1&&e%1==0&&e<t}function Zp(e,t,n){"__proto__"==t&&dp?dp(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function xp(e,t){return e===t||e!=e&&t!=t}var Gp=Object.prototype.hasOwnProperty;function Xp(e,t,n){var i=e[t];(!Gp.call(e,t)||!xp(i,n)||void 0===n&&!(t in e))&&Zp(e,t,n)}function Ip(e,t,n,i){var o=!n;n||(n={});for(var l=-1,r=t.length;++l<r;){var a=t[l],s=i?i(n[a],e[a],a,n,e):void 0;void 0===s&&(s=e[a]),o?Zp(n,a,s):Xp(n,a,s)}return n}var Wp=Math.max;var kp=9007199254740991;function Vp(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=kp}function Sp(e){return null!=e&&Vp(e.length)&&!Ed(e)}var Cp=Object.prototype;function Lp(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Cp)}function Rp(e){return gd(e)&&"[object Arguments]"==yd(e)}var Yp=Object.prototype,wp=Yp.hasOwnProperty,Tp=Yp.propertyIsEnumerable,Np=Rp(function(){return arguments}())?Rp:function(e){return gd(e)&&wp.call(e,"callee")&&!Tp.call(e,"callee")};const Kp=Np;var zp="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hp=zp&&"object"==typeof module&&module&&!module.nodeType&&module,Mp=Hp&&Hp.exports===zp?ad.Buffer:void 0;const Jp=(Mp?Mp.isBuffer:void 0)||function(){return!1};var jp={};function Fp(e){return function(t){return e(t)}}jp["[object Float32Array]"]=jp["[object Float64Array]"]=jp["[object Int8Array]"]=jp["[object Int16Array]"]=jp["[object Int32Array]"]=jp["[object Uint8Array]"]=jp["[object Uint8ClampedArray]"]=jp["[object Uint16Array]"]=jp["[object Uint32Array]"]=!0,jp["[object Arguments]"]=jp["[object Array]"]=jp["[object ArrayBuffer]"]=jp["[object Boolean]"]=jp["[object DataView]"]=jp["[object Date]"]=jp["[object Error]"]=jp["[object Function]"]=jp["[object Map]"]=jp["[object Number]"]=jp["[object Object]"]=jp["[object RegExp]"]=jp["[object Set]"]=jp["[object String]"]=jp["[object WeakMap]"]=!1;var Up="object"==typeof exports&&exports&&!exports.nodeType&&exports,Op=Up&&"object"==typeof module&&module&&!module.nodeType&&module,Ep=Op&&Op.exports===Up&&ld.process;const $p=function(){try{return Op&&Op.require&&Op.require("util").types||Ep&&Ep.binding&&Ep.binding("util")}catch{}}();var Pp=$p&&$p.isTypedArray,Bp=Pp?Fp(Pp):function(e){return gd(e)&&Vp(e.length)&&!!jp[yd(e)]};const Ap=Bp;var Qp=Object.prototype.hasOwnProperty;function Dp(e,t){var n=Gd(e),i=!n&&Kp(e),o=!n&&!i&&Jp(e),l=!n&&!i&&!o&&Ap(e),r=n||i||o||l,a=r?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],s=a.length;for(var c in e)(t||Qp.call(e,c))&&(!r||!("length"==c||o&&("offset"==c||"parent"==c)||l&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vp(c,s)))&&a.push(c);return a}function _p(e,t){return function(n){return e(t(n))}}const qp=_p(Object.keys,Object);var eh=Object.prototype.hasOwnProperty;function th(e){if(!Lp(e))return qp(e);var t=[];for(var n in Object(e))eh.call(e,n)&&"constructor"!=n&&t.push(n);return t}function nh(e){return Sp(e)?Dp(e):th(e)}var ih=Object.prototype.hasOwnProperty;function oh(e){if(!Ld(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Lp(e),n=[];for(var i in e)"constructor"==i&&(t||!ih.call(e,i))||n.push(i);return n}function lh(e){return Sp(e)?Dp(e,!0):oh(e)}var rh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ah=/^\w*$/;function sh(e,t){if(Gd(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Zd(e))||(ah.test(e)||!rh.test(e)||null!=t&&e in Object(t))}const ch=ip(Object,"create");var uh=Object.prototype.hasOwnProperty;var dh=Object.prototype.hasOwnProperty;function ph(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function hh(e,t){for(var n=e.length;n--;)if(xp(e[n][0],t))return n;return-1}ph.prototype.clear=function(){this.__data__=ch?ch(null):{},this.size=0},ph.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ph.prototype.get=function(e){var t=this.__data__;if(ch){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return uh.call(t,e)?t[e]:void 0},ph.prototype.has=function(e){var t=this.__data__;return ch?void 0!==t[e]:dh.call(t,e)},ph.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ch&&void 0===t?"__lodash_hash_undefined__":t,this};var mh=Array.prototype.splice;function bh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}bh.prototype.clear=function(){this.__data__=[],this.size=0},bh.prototype.delete=function(e){var t=this.__data__,n=hh(t,e);return!(n<0)&&(n==t.length-1?t.pop():mh.call(t,n,1),--this.size,!0)},bh.prototype.get=function(e){var t=this.__data__,n=hh(t,e);return n<0?void 0:t[n][1]},bh.prototype.has=function(e){return hh(this.__data__,e)>-1},bh.prototype.set=function(e,t){var n=this.__data__,i=hh(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};const fh=ip(ad,"Map");function yh(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function gh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}gh.prototype.clear=function(){this.size=0,this.__data__={hash:new ph,map:new(fh||bh),string:new ph}},gh.prototype.delete=function(e){var t=yh(this,e).delete(e);return this.size-=t?1:0,t},gh.prototype.get=function(e){return yh(this,e).get(e)},gh.prototype.has=function(e){return yh(this,e).has(e)},gh.prototype.set=function(e,t){var n=yh(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var vh="Expected a function";function Zh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(vh);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],l=n.cache;if(l.has(o))return l.get(o);var r=e.apply(this,i);return n.cache=l.set(o,r)||l,r};return n.cache=new(Zh.Cache||gh),n}Zh.Cache=gh;var xh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gh=/\\(\\)?/g,Xh=function(e){var t=Zh(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xh,(function(e,n,i,o){t.push(i?o.replace(Gh,"$1"):n||e)})),t}));const Ih=Xh;function Wh(e){return null==e?"":kd(e)}function kh(e,t){return Gd(e)?e:sh(e,t)?[e]:Ih(Wh(e))}var Vh=1/0;function Sh(e){if("string"==typeof e||Zd(e))return e;var t=e+"";return"0"==t&&1/e==-Vh?"-0":t}function Ch(e,t){for(var n=0,i=(t=kh(t,e)).length;null!=e&&n<i;)e=e[Sh(t[n++])];return n&&n==i?e:void 0}function Lh(e,t,n){var i=null==e?void 0:Ch(e,t);return void 0===i?n:i}function Rh(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}var Yh=sd?sd.isConcatSpreadable:void 0;function wh(e){return Gd(e)||Kp(e)||!!(Yh&&e&&e[Yh])}function Th(e,t,n,i,o){var l=-1,r=e.length;for(n||(n=wh),o||(o=[]);++l<r;){var a=e[l];t>0&&n(a)?t>1?Th(a,t-1,n,i,o):Rh(o,a):i||(o[o.length]=a)}return o}function Nh(e){return(null==e?0:e.length)?Th(e,1):[]}function Kh(e){return mp(function(e,t,n){return t=Wp(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,l=Wp(i.length-t,0),r=Array(l);++o<l;)r[o]=i[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=i[o];return a[t]=n(r),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,void 0,Nh),e+"")}const zh=_p(Object.getPrototypeOf,Object);var Hh="[object Object]",Mh=Function.prototype,Jh=Object.prototype,jh=Mh.toString,Fh=Jh.hasOwnProperty,Uh=jh.call(Object);function Oh(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var l=Array(o);++i<o;)l[i]=e[i+t];return l}var Eh=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function $h(e){return Eh.test(e)}var Ph="\\ud800-\\udfff",Bh="["+Ph+"]",Ah="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qh="\\ud83c[\\udffb-\\udfff]",Dh="[^"+Ph+"]",_h="(?:\\ud83c[\\udde6-\\uddff]){2}",qh="[\\ud800-\\udbff][\\udc00-\\udfff]",em="(?:"+Ah+"|"+Qh+")"+"?",tm="[\\ufe0e\\ufe0f]?",nm=tm+em+("(?:\\u200d(?:"+[Dh,_h,qh].join("|")+")"+tm+em+")*"),im="(?:"+[Dh+Ah+"?",Ah,_h,qh,Bh].join("|")+")",om=RegExp(Qh+"(?="+Qh+")|"+im+nm,"g");function lm(e){return $h(e)?function(e){return e.match(om)||[]}(e):function(e){return e.split("")}(e)}var rm=function(e){return function(t){var n=$h(t=Wh(t))?lm(t):void 0,i=n?n[0]:t.charAt(0),o=n?function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:Oh(e,t,n)}(n,1).join(""):t.slice(1);return i[e]()+o}}("toUpperCase");const am=rm;var sm=function(e){return function(t){return null==e?void 0:e[t]}}({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});const cm=sm;var um=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,dm=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var pm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var hm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var mm="\\ud800-\\udfff",bm="\\u2700-\\u27bf",fm="a-z\\xdf-\\xf6\\xf8-\\xff",ym="A-Z\\xc0-\\xd6\\xd8-\\xde",gm="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vm="["+gm+"]",Zm="\\d+",xm="["+bm+"]",Gm="["+fm+"]",Xm="[^"+mm+gm+Zm+bm+fm+ym+"]",Im="(?:\\ud83c[\\udde6-\\uddff]){2}",Wm="[\\ud800-\\udbff][\\udc00-\\udfff]",km="["+ym+"]",Vm="(?:"+Gm+"|"+Xm+")",Sm="(?:"+km+"|"+Xm+")",Cm="(?:['](?:d|ll|m|re|s|t|ve))?",Lm="(?:['](?:D|LL|M|RE|S|T|VE))?",Rm="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ym="[\\ufe0e\\ufe0f]?",wm=Ym+Rm+("(?:\\u200d(?:"+["[^"+mm+"]",Im,Wm].join("|")+")"+Ym+Rm+")*"),Tm="(?:"+[xm,Im,Wm].join("|")+")"+wm,Nm=RegExp([km+"?"+Gm+"+"+Cm+"(?="+[vm,km,"$"].join("|")+")",Sm+"+"+Lm+"(?="+[vm,km+Vm,"$"].join("|")+")",km+"?"+Vm+"+"+Cm,km+"+"+Lm,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Zm,Tm].join("|"),"g");function Km(e,t,n){return e=Wh(e),void 0===(t=n?void 0:t)?function(e){return hm.test(e)}(e)?function(e){return e.match(Nm)||[]}(e):function(e){return e.match(pm)||[]}(e):e.match(t)||[]}var zm=RegExp("[']","g");function Hm(e){return function(t){return function(e,t,n,i){var o=-1,l=null==e?0:e.length;for(i&&l&&(n=e[++o]);++o<l;)n=t(n,e[o],o,e);return n}(Km(function(e){return(e=Wh(e))&&e.replace(um,cm).replace(dm,"")}(t).replace(zm,"")),e,"")}}var Mm=Hm((function(e,t,n){return t=t.toLowerCase(),e+(n?function(e){return am(Wh(e).toLowerCase())}(t):t)}));const Jm=Mm;var jm=ad.isFinite,Fm=Math.min;function Um(e){var t=this.__data__=new bh(e);this.size=t.size}Um.prototype.clear=function(){this.__data__=new bh,this.size=0},Um.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Um.prototype.get=function(e){return this.__data__.get(e)},Um.prototype.has=function(e){return this.__data__.has(e)},Um.prototype.set=function(e,t){var n=this.__data__;if(n instanceof bh){var i=n.__data__;if(!fh||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new gh(i)}return n.set(e,t),this.size=n.size,this};var Om="object"==typeof exports&&exports&&!exports.nodeType&&exports,Em=Om&&"object"==typeof module&&module&&!module.nodeType&&module,$m=Em&&Em.exports===Om?ad.Buffer:void 0,Pm=$m?$m.allocUnsafe:void 0;function Bm(){return[]}var Am=Object.prototype.propertyIsEnumerable,Qm=Object.getOwnPropertySymbols,Dm=Qm?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,o=0,l=[];++n<i;){var r=e[n];t(r,n,e)&&(l[o++]=r)}return l}(Qm(e),(function(t){return Am.call(e,t)})))}:Bm;const _m=Dm;var qm=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Rh(t,_m(e)),e=zh(e);return t}:Bm;const eb=qm;function tb(e,t,n){var i=t(e);return Gd(e)?i:Rh(i,n(e))}function nb(e){return tb(e,nh,_m)}function ib(e){return tb(e,lh,eb)}const ob=ip(ad,"DataView");const lb=ip(ad,"Promise");const rb=ip(ad,"Set");var ab="[object Map]",sb="[object Promise]",cb="[object Set]",ub="[object WeakMap]",db="[object DataView]",pb=Ad(ob),hb=Ad(fh),mb=Ad(lb),bb=Ad(rb),fb=Ad(op),yb=yd;(ob&&yb(new ob(new ArrayBuffer(1)))!=db||fh&&yb(new fh)!=ab||lb&&yb(lb.resolve())!=sb||rb&&yb(new rb)!=cb||op&&yb(new op)!=ub)&&(yb=function(e){var t=yd(e),n="[object Object]"==t?e.constructor:void 0,i=n?Ad(n):"";if(i)switch(i){case pb:return db;case hb:return ab;case mb:return sb;case bb:return cb;case fb:return ub}return t});const gb=yb;var vb=Object.prototype.hasOwnProperty;const Zb=ad.Uint8Array;function xb(e){var t=new e.constructor(e.byteLength);return new Zb(t).set(new Zb(e)),t}var Gb=/\w*$/;var Xb=sd?sd.prototype:void 0,Ib=Xb?Xb.valueOf:void 0;var Wb="[object Boolean]",kb="[object Date]",Vb="[object Map]",Sb="[object Number]",Cb="[object RegExp]",Lb="[object Set]",Rb="[object String]",Yb="[object Symbol]",wb="[object ArrayBuffer]",Tb="[object DataView]",Nb="[object Float32Array]",Kb="[object Float64Array]",zb="[object Int8Array]",Hb="[object Int16Array]",Mb="[object Int32Array]",Jb="[object Uint8Array]",jb="[object Uint8ClampedArray]",Fb="[object Uint16Array]",Ub="[object Uint32Array]";function Ob(e,t,n){var i=e.constructor;switch(t){case wb:return xb(e);case Wb:case kb:return new i(+e);case Tb:return function(e,t){var n=t?xb(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case Nb:case Kb:case zb:case Hb:case Mb:case Jb:case jb:case Fb:case Ub:return function(e,t){var n=t?xb(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case Vb:return new i;case Sb:case Rb:return new i(e);case Cb:return function(e){var t=new e.constructor(e.source,Gb.exec(e));return t.lastIndex=e.lastIndex,t}(e);case Lb:return new i;case Yb:return function(e){return Ib?Object(Ib.call(e)):{}}(e)}}var Eb=$p&&$p.isMap,Pb=Eb?Fp(Eb):function(e){return gd(e)&&"[object Map]"==gb(e)};const Bb=Pb;var Ab=$p&&$p.isSet,Qb=Ab?Fp(Ab):function(e){return gd(e)&&"[object Set]"==gb(e)};const Db=Qb;var _b=1,qb=2,ef=4,tf="[object Arguments]",nf="[object Function]",of="[object GeneratorFunction]",lf="[object Object]",rf={};function af(e,t,n,i,o,l){var r,a=t&_b,s=t&qb,c=t&ef;if(n&&(r=o?n(e,i,o,l):n(e)),void 0!==r)return r;if(!Ld(e))return e;var u=Gd(e);if(u){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&vb.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(e,r)}else{var d=gb(e),p=d==nf||d==of;if(Jp(e))return function(e,t){if(t)return e.slice();var n=e.length,i=Pm?Pm(n):new e.constructor(n);return e.copy(i),i}(e,a);if(d==lf||d==tf||p&&!o){if(r=s||p?{}:function(e){return"function"!=typeof e.constructor||Lp(e)?{}:ap(zh(e))}(e),!a)return s?function(e,t){return Ip(e,eb(e),t)}(e,function(e,t){return e&&Ip(t,lh(t),e)}(r,e)):function(e,t){return Ip(e,_m(e),t)}(e,function(e,t){return e&&Ip(t,nh(t),e)}(r,e))}else{if(!rf[d])return o?e:{};r=Ob(e,d,a)}}l||(l=new Um);var h=l.get(e);if(h)return h;l.set(e,r),Db(e)?e.forEach((function(i){r.add(af(i,t,n,i,e,l))})):Bb(e)&&e.forEach((function(i,o){r.set(o,af(i,t,n,o,e,l))}));var m=u?void 0:(c?s?ib:nb:s?lh:nh)(e);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(m||e,(function(i,o){m&&(i=e[o=i]),Xp(r,o,af(i,t,n,o,e,l))})),r}rf[tf]=rf["[object Array]"]=rf["[object ArrayBuffer]"]=rf["[object DataView]"]=rf["[object Boolean]"]=rf["[object Date]"]=rf["[object Float32Array]"]=rf["[object Float64Array]"]=rf["[object Int8Array]"]=rf["[object Int16Array]"]=rf["[object Int32Array]"]=rf["[object Map]"]=rf["[object Number]"]=rf[lf]=rf["[object RegExp]"]=rf["[object Set]"]=rf["[object String]"]=rf["[object Symbol]"]=rf["[object Uint8Array]"]=rf["[object Uint8ClampedArray]"]=rf["[object Uint16Array]"]=rf["[object Uint32Array]"]=!0,rf["[object Error]"]=rf[nf]=rf["[object WeakMap]"]=!1;var sf=1,cf=4;function uf(e){return af(e,sf|cf)}function df(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new gh;++t<n;)this.add(e[t])}function pf(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function hf(e,t){return e.has(t)}df.prototype.add=df.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},df.prototype.has=function(e){return this.__data__.has(e)};var mf=1,bf=2;function ff(e,t,n,i,o,l){var r=n&mf,a=e.length,s=t.length;if(a!=s&&!(r&&s>a))return!1;var c=l.get(e),u=l.get(t);if(c&&u)return c==t&&u==e;var d=-1,p=!0,h=n&bf?new df:void 0;for(l.set(e,t),l.set(t,e);++d<a;){var m=e[d],b=t[d];if(i)var f=r?i(b,m,d,t,e,l):i(m,b,d,e,t,l);if(void 0!==f){if(f)continue;p=!1;break}if(h){if(!pf(t,(function(e,t){if(!hf(h,t)&&(m===e||o(m,e,n,i,l)))return h.push(t)}))){p=!1;break}}else if(m!==b&&!o(m,b,n,i,l)){p=!1;break}}return l.delete(e),l.delete(t),p}function yf(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function gf(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var vf=1,Zf=2,xf="[object Boolean]",Gf="[object Date]",Xf="[object Error]",If="[object Map]",Wf="[object Number]",kf="[object RegExp]",Vf="[object Set]",Sf="[object String]",Cf="[object Symbol]",Lf="[object ArrayBuffer]",Rf="[object DataView]",Yf=sd?sd.prototype:void 0,wf=Yf?Yf.valueOf:void 0;var Tf=1,Nf=Object.prototype.hasOwnProperty;var Kf=1,zf="[object Arguments]",Hf="[object Array]",Mf="[object Object]",Jf=Object.prototype.hasOwnProperty;function jf(e,t,n,i,o,l){var r=Gd(e),a=Gd(t),s=r?Hf:gb(e),c=a?Hf:gb(t),u=(s=s==zf?Mf:s)==Mf,d=(c=c==zf?Mf:c)==Mf,p=s==c;if(p&&Jp(e)){if(!Jp(t))return!1;r=!0,u=!1}if(p&&!u)return l||(l=new Um),r||Ap(e)?ff(e,t,n,i,o,l):function(e,t,n,i,o,l,r){switch(n){case Rf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Lf:return!(e.byteLength!=t.byteLength||!l(new Zb(e),new Zb(t)));case xf:case Gf:case Wf:return xp(+e,+t);case Xf:return e.name==t.name&&e.message==t.message;case kf:case Sf:return e==t+"";case If:var a=yf;case Vf:var s=i&vf;if(a||(a=gf),e.size!=t.size&&!s)return!1;var c=r.get(e);if(c)return c==t;i|=Zf,r.set(e,t);var u=ff(a(e),a(t),i,o,l,r);return r.delete(e),u;case Cf:if(wf)return wf.call(e)==wf.call(t)}return!1}(e,t,s,n,i,o,l);if(!(n&Kf)){var h=u&&Jf.call(e,"__wrapped__"),m=d&&Jf.call(t,"__wrapped__");if(h||m){var b=h?e.value():e,f=m?t.value():t;return l||(l=new Um),o(b,f,n,i,l)}}return!!p&&(l||(l=new Um),function(e,t,n,i,o,l){var r=n&Tf,a=nb(e),s=a.length;if(s!=nb(t).length&&!r)return!1;for(var c=s;c--;){var u=a[c];if(!(r?u in t:Nf.call(t,u)))return!1}var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var h=!0;l.set(e,t),l.set(t,e);for(var m=r;++c<s;){var b=e[u=a[c]],f=t[u];if(i)var y=r?i(f,b,u,t,e,l):i(b,f,u,e,t,l);if(!(void 0===y?b===f||o(b,f,n,i,l):y)){h=!1;break}m||(m="constructor"==u)}if(h&&!m){var g=e.constructor,v=t.constructor;g!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v)&&(h=!1)}return l.delete(e),l.delete(t),h}(e,t,n,i,o,l))}function Ff(e,t,n,i,o){return e===t||(null==e||null==t||!gd(e)&&!gd(t)?e!=e&&t!=t:jf(e,t,n,i,Ff,o))}var Uf=1,Of=2;function Ef(e){return e==e&&!Ld(e)}function $f(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Pf(e){var t=function(e){for(var t=nh(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,Ef(o)]}return t}(e);return 1==t.length&&t[0][2]?$f(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,i){var o=n.length,l=o,r=!i;if(null==e)return!l;for(e=Object(e);o--;){var a=n[o];if(r&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<l;){var s=(a=n[o])[0],c=e[s],u=a[1];if(r&&a[2]){if(void 0===c&&!(s in e))return!1}else{var d=new Um;if(i)var p=i(c,u,s,e,t,d);if(!(void 0===p?Ff(u,c,Uf|Of,i,d):p))return!1}}return!0}(n,e,t)}}function Bf(e,t){return null!=e&&t in Object(e)}function Af(e,t){return null!=e&&function(e,t,n){for(var i=-1,o=(t=kh(t,e)).length,l=!1;++i<o;){var r=Sh(t[i]);if(!(l=null!=e&&n(e,r)))break;e=e[r]}return l||++i!=o?l:!!(o=null==e?0:e.length)&&Vp(o)&&vp(r,o)&&(Gd(e)||Kp(e))}(e,t,Bf)}var Qf=1,Df=2;function _f(e){return sh(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Sh(e)):function(e){return function(t){return Ch(t,e)}}(e)}function qf(e){return"function"==typeof e?e:null==e?Jd:"object"==typeof e?Gd(e)?function(e,t){return sh(e)&&Ef(t)?$f(Sh(e),t):function(n){var i=Lh(n,e);return void 0===i&&i===t?Af(n,e):Ff(t,i,Qf|Df)}}(e[0],e[1]):Pf(e):_f(e)}function ey(e,t,n,i){for(var o=-1,l=null==e?0:e.length;++o<l;){var r=e[o];t(i,r,n(r),e)}return i}var ty=function(e){return function(t,n,i){for(var o=-1,l=Object(t),r=i(t),a=r.length;a--;){var s=r[e?a:++o];if(!1===n(l[s],s,l))break}return t}}();const ny=ty;var iy=function(e,t){return function(n,i){if(null==n)return n;if(!Sp(n))return e(n,i);for(var o=n.length,l=t?o:-1,r=Object(n);(t?l--:++l<o)&&!1!==i(r[l],l,r););return n}}((function(e,t){return e&&ny(e,t,nh)}));const oy=iy;function ly(e,t,n,i){return oy(e,(function(e,o,l){t(i,e,n(e),l)})),i}function ry(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}function ay(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function sy(e){return e&&e.length?e[0]:void 0}var cy=Object.prototype.hasOwnProperty,uy=function(e,t){return function(n,i){var o=Gd(n)?ey:ly,l=t?t():{};return o(n,e,qf(i),l)}}((function(e,t,n){cy.call(e,n)?e[n].push(t):Zp(e,n,[t])}));const dy=uy;var py="[object Map]",hy="[object Set]",my=Object.prototype.hasOwnProperty;function by(e){if(null==e)return!0;if(Sp(e)&&(Gd(e)||"string"==typeof e||"function"==typeof e.splice||Jp(e)||Ap(e)||Kp(e)))return!e.length;var t=gb(e);if(t==py||t==hy)return!e.size;if(Lp(e))return!th(e).length;for(var n in e)if(my.call(e,n))return!1;return!0}function fy(e,t){return null==(e=function(e,t){return t.length<2?e:Ch(e,Oh(t,0,-1))}(e,t=kh(t,e)))||delete e[Sh(ay(t))]}function yy(e){return function(e){if(!gd(e)||yd(e)!=Hh)return!1;var t=zh(e);if(null===t)return!0;var n=Fh.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&jh.call(n)==Uh}(e)?void 0:e}var gy=Kh((function(e,t){var n={};if(null==e)return n;var i=!1;t=xd(t,(function(t){return t=kh(t,e),i||(i=t.length>1),t})),Ip(e,ib(e),n),i&&(n=af(n,7,yy));for(var o=t.length;o--;)fy(n,t[o]);return n}));const vy=gy;function Zy(e,t,n,i){if(!Ld(e))return e;for(var o=-1,l=(t=kh(t,e)).length,r=l-1,a=e;null!=a&&++o<l;){var s=Sh(t[o]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(o!=r){var u=a[s];void 0===(c=i?i(u,s,a):void 0)&&(c=Ld(u)?u:vp(t[o+1])?[]:{})}Xp(a,s,c),a=a[s]}return e}function xy(e,t){return function(e,t,n){for(var i=-1,o=t.length,l={};++i<o;){var r=t[i],a=Ch(e,r);n(a,r)&&Zy(l,kh(r,e),a)}return l}(e,t,(function(t,n){return Af(e,n)}))}var Gy=Kh((function(e,t){return null==e?{}:xy(e,t)}));const Xy=Gy;var Iy=Math.ceil,Wy=Math.max;var ky=function(e){return function(t,n,i){return i&&"number"!=typeof i&&function(e,t,n){if(!Ld(n))return!1;var i=typeof t;return!!("number"==i?Sp(n)&&vp(t,n.length):"string"==i&&t in n)&&xp(n[t],e)}(t,n,i)&&(n=i=void 0),t=Md(t),void 0===n?(n=t,t=0):n=Md(n),function(e,t,n,i){for(var o=-1,l=Wy(Iy((t-e)/(n||1)),0),r=Array(l);l--;)r[i?l:++o]=e,e+=n;return r}(t,n,i=void 0===i?t<n?1:-1:Md(i),e)}}();const Vy=ky;var Sy=function(e){var t=Math[e];return function(e,n){if(e=Kd(e),n=null==n?0:Fm(function(e){var t=Md(e),n=t%1;return t==t?n?t-n:t:0}(n),292),n&&jm(e)){var i=(Wh(e)+"e").split("e");return+((i=(Wh(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}("round");const Cy=Sy;var Ly=rb&&1/gf(new rb([,-0]))[1]==1/0?function(e){return new rb(e)}:function(){};const Ry=Ly;var Yy=200;function wy(e){return e&&e.length?function(e,t,n){var i=-1,o=fp,l=e.length,r=!0,a=[],s=a;if(n)r=!1,o=ry;else if(l>=Yy){var c=t?null:Ry(e);if(c)return gf(c);r=!1,o=hf,s=new df}else s=t?[]:a;e:for(;++i<l;){var u=e[i],d=t?t(u):u;if(u=n||0!==u?u:0,r&&d==d){for(var p=s.length;p--;)if(s[p]===d)continue e;t&&s.push(d),a.push(u)}else o(s,d,n)||(s!==a&&s.push(d),a.push(u))}return a}(e):[]}const Ty="editor.changeHasHistory",Ny="editor.selectAll",Ky="editor.unselectAll",zy="editor.select",Hy="editor.changeViewport",My="editor.clear",Jy="editor.loadJson",jy="editor.initialClear",Fy="editor.initialLoadJson",Uy="editor.focusTable",Oy="editor.focusColumn",Ey="editor.focusTableEnd",$y="editor.focusMoveTable",Py="editor.editTable",By="editor.editTableEnd",Ay="editor.selectAllColumn",Qy="editor.drawStartRelationship",Dy="editor.drawStartAddRelationship",_y="editor.drawEndRelationship",qy="editor.drawRelationship",eg="editor.hoverColumnMap",tg="editor.changeOpenMap",ng="editor.dragstartColumn",ig="editor.dragendColumn",og="editor.sharedMouseTracker",lg="editor.validationIds",rg=Gn.CanvasType,ag=Gn.CanvasTypeList,sg=Gn.Show,cg=Gn.ColumnType,ug=Gn.ColumnTypeList,dg=Gn.Database,pg=Gn.DatabaseList,hg=Gn.Language,mg=Gn.LanguageList,bg=Gn.NameCase,fg=Gn.NameCaseList,yg=Gn.BracketType,gg=Gn.BracketTypeList,vg=Gn.RelationshipType,Zg=Gn.StartRelationshipType,xg=Gn.Direction,Gg=Gn.ColumnOption,Xg=Gn.ColumnUIKey,Ig=Gn.OrderType,Wg=Gn.SaveSettingType,kg=Gn.CANVAS_SIZE_MAX,Vg=Gn.CANVAS_SIZE_MIN,Sg=Gn.CANVAS_ZOOM_MAX,Cg=Gn.CANVAS_ZOOM_MIN,Lg={[yg.none]:"",[yg.backtick]:"`",[yg.doubleQuote]:'"',[yg.singleQuote]:"'"},Rg={[cg.columnName]:"Name",[cg.columnDataType]:"DataType",[cg.columnDefault]:"Default",[cg.columnComment]:"Comment",[cg.columnAutoIncrement]:"Auto Increment",[cg.columnUnique]:"Unique",[cg.columnNotNull]:"Not Null"},Yg={shared:1,changeOnly:2,following:4};function wg(e,t){return{...uf(t),tags:nd(t.tags)?t.tags|e:e}}function Tg(e,t){return t.map((t=>wg(e,t)))}const Ng=(e=>(...t)=>function*(n,i){const o=Ic(n,i,t);yield Tg(e,o)})(Yg.changeOnly);function Kg(e,t){return(e&t)===t}function zg(e,t){return!(e.x>t.x+t.w||e.x+e.w<t.x||e.y>t.y+t.h||e.y+e.h<t.y)}function Hg(e,t,n){const i={x:0,y:0,w:0,h:0};return i.w=e*n,i.h=t*n,i.x=(e-i.w)/2,i.y=(t-i.h)/2,i}function Mg({x:e,y:t},n,i,o){const l=Hg(n,i,o),r=e*o,a=t*o;return{x:l.x+r,y:l.y+a}}function Jg(e,t,n,i){const{x:o,y:l}=e,{x:r,y:a}=Mg(e,t,n,i);return{x:o+(o-r)/i,y:l+(l-a)/i}}const jg=200,Fg=100,Ug=8,Og=1,Eg=8,Pg=38,Bg=12,Ag=12,Qg=60,Dg=35,_g=22,qg=15,ev=24,tv=150,nv={MariaDB:"MariaDB",MSSQL:"MSSQL",MySQL:"MySQL",Oracle:"Oracle",PostgreSQL:"PostgreSQL",SQLite:"SQLite"},iv=Object.values(nv),ov={[nv.MariaDB]:dg.MariaDB,[nv.MSSQL]:dg.MSSQL,[nv.MySQL]:dg.MySQL,[nv.Oracle]:dg.Oracle,[nv.PostgreSQL]:dg.PostgreSQL,[nv.SQLite]:dg.SQLite},lv=/[^0-9]/g,rv=e=>e.replace(lv,""),av=od(Vg,kg),sv=od(Cg,Sg),cv=od(Qg,200);function uv(e){const t=_u(e)?Number(rv(e)):e;return av(t)}function dv(e){return Cy(sv(e),2)}function pv(e){const t=_u(e)?Number(rv(e)):e;return`${cv(t)}px`}function hv(e){return`${(100*e).toFixed()}%`}const mv=Pu(pg),bv=Pu(fg),fv=Pu(gg),yv=Pu(mg),gv=Pu(ug),vv=Pu(iv),Zv=Pu(ag);function xv(e){return Math.max(e,Qg)}function Gv(e){return _u(e)?e.trim():""}function Xv(e){return e<=.7}const Iv="table",Wv="memo",kv={tableName:"tableName",tableComment:"tableComment",columnName:"columnName",columnDataType:"columnDataType",columnNotNull:"columnNotNull",columnUnique:"columnUnique",columnAutoIncrement:"columnAutoIncrement",columnDefault:"columnDefault",columnComment:"columnComment"},Vv={ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",Tab:"Tab"},Sv=Pu(Object.values(Vv)),Cv=()=>({id:id(),selectedMap:{},hasUndo:!1,hasRedo:!1,viewport:{width:1200,height:675},focusTable:null,drawRelationship:null,hoverColumnMap:{},openMap:{},draggableColumn:null,draggingColumnMap:{},sharedMouseTrackerMap:{}}),Lv=e=>e.ui.zIndex,Rv=(e,t)=>Math.max(1,...e.map(Lv),...t.map(Lv))+1,Yv=e=>t=>e.y===t.y&&e.x===t.x;function wv({width:e,height:t,zoomLevel:n,scrollLeft:i,scrollTop:o},l,r){const a=Jg({x:jg-i,y:Fg-o},e,t,n),s=[...l,...r].map((({ui:e})=>e));for(;s.some(Yv(a));)a.x+=50,a.y+=50;return a}function Tv(){const e=Date.now();return{updateAt:e,createAt:e}}function Nv(e,t){return wy([...e,t])}function Kv(e,t,n){if(!t||t===n)return[n];const i=e.indexOf(t),o=e.indexOf(n);return-1===i?[n]:function(e,t){return e<t?Vy(e,t+1):Vy(t,e+1)}(i,o).map((t=>e[t]))}const zv={[cg.columnName]:!0,[cg.columnDataType]:sg.columnDataType,[cg.columnNotNull]:sg.columnNotNull,[cg.columnUnique]:sg.columnUnique,[cg.columnAutoIncrement]:sg.columnAutoIncrement,[cg.columnDefault]:sg.columnDefault,[cg.columnComment]:sg.columnComment},Hv={[cg.columnName]:kv.columnName,[cg.columnDataType]:kv.columnDataType,[cg.columnNotNull]:kv.columnNotNull,[cg.columnUnique]:kv.columnUnique,[cg.columnAutoIncrement]:kv.columnAutoIncrement,[cg.columnDefault]:kv.columnDefault,[cg.columnComment]:kv.columnComment},Mv=[kv.tableName,kv.tableComment];function Jv({settings:{show:e,columnOrder:t}}){return t.filter((t=>{const n=zv[t];return!0===n||Kg(e,n)})).map((e=>Hv[e]))}function jv({collections:e,editor:{focusTable:t}}){if(!t)return!1;const n=Vn(e).collection("tableEntities").selectById(t.tableId);return!(null==n||!n.columnIds.length)}function Fv(e){const{editor:{focusTable:t}}=e;if(!t)return!0;const n=Jv(e);return n.indexOf(t.focusType)===n.length-1}function Uv(e){const{editor:{focusTable:t}}=e;return!t||0===Jv(e).indexOf(t.focusType)}function Ov({collections:e,editor:{focusTable:t}}){if(null==t||!t.columnId)return!0;const n=Vn(e).collection("tableEntities").selectById(t.tableId);return!n||n.columnIds.indexOf(t.columnId)===n.columnIds.length-1}function Ev({collections:e,editor:{focusTable:t}}){if(null==t||!t.columnId)return!0;const n=Vn(e).collection("tableEntities").selectById(t.tableId);return!n||0===n.columnIds.indexOf(t.columnId)}function $v(e){const t=Jv(e);return t[t.length-1]}function Pv(e){return Jv(e)[0]}function Bv({settings:{show:e}}){return Kg(e,sg.tableComment)?Mv:[kv.tableName]}function Av(e){const{editor:{focusTable:t}}=e;if(!t)return!0;const n=Bv(e);return n.indexOf(t.focusType)===n.length-1}function Qv(e){const{editor:{focusTable:t}}=e;return!t||0===Bv(e).indexOf(t.focusType)}const Dv=Pu(Mv);function _v(e){const{editor:{focusTable:t}}=e;if(!t)return kv.tableName;const n=Bv(e),i=n.indexOf(t.focusType);return Av(e)?n[0]:n[i+1]}function qv(e){const{editor:{focusTable:t}}=e;if(!t)return kv.tableName;const n=Bv(e),i=n.indexOf(t.focusType);return Qv(e)?n[n.length-1]:n[i-1]}function eZ(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Vn(n).collection("tableEntities").selectById(i.tableId);if(o)if(Dv(i.focusType))if(Qv(e))if(jv(e)){const t=o.columnIds[o.columnIds.length-1];i.focusType=$v(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}else i.focusType=qv(e);else i.focusType=qv(e);else if(Uv(e)){if(Ev(e))i.focusType=Kg(e.settings.show,sg.tableComment)?kv.tableComment:kv.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const n=o.columnIds.indexOf(i.columnId),l=o.columnIds[n-1];i.focusType=$v(e),i.columnId=l,i.prevSelectColumnId=l,t.shiftKey&&t.moveKey!==Vv.Tab?i.selectColumnIds=Nv(i.selectColumnIds,l):i.selectColumnIds=[l]}}else i.focusType=function(e){const{editor:{focusTable:t}}=e;if(!t)return kv.columnName;const n=Jv(e),i=n.indexOf(t.focusType);return Uv(e)?n[n.length-1]:n[i-1]}(e),!t.shiftKey&&i.columnId&&(i.prevSelectColumnId=i.columnId,i.selectColumnIds=[i.columnId])}function tZ(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Vn(n).collection("tableEntities").selectById(i.tableId);if(o)if(Dv(i.focusType))if(Av(e))if(jv(e)){const t=o.columnIds[0];i.focusType=Pv(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}else i.focusType=_v(e);else i.focusType=_v(e);else if(Fv(e)){if(Ov(e))i.focusType=kv.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const n=o.columnIds.indexOf(i.columnId),l=o.columnIds[n+1];i.focusType=Pv(e),i.columnId=l,i.prevSelectColumnId=l,t.shiftKey&&t.moveKey!==Vv.Tab?i.selectColumnIds=Nv(i.selectColumnIds,l):i.selectColumnIds=[l]}}else i.focusType=function(e){const{editor:{focusTable:t}}=e;if(!t)return kv.columnName;const n=Jv(e),i=n.indexOf(t.focusType);return Fv(e)?n[0]:n[i+1]}(e),!t.shiftKey&&i.columnId&&(i.prevSelectColumnId=i.columnId,i.selectColumnIds=[i.columnId])}const nZ=Gc(Ty),iZ=Gc(Ny),oZ=Gc(Ky),lZ=Gc(zy),rZ=Gc(Hy),aZ=Gc(My),sZ=Gc(Jy),cZ=Gc(jy),uZ=Gc(Fy),dZ=Gc(Uy),pZ=Gc(Oy),hZ=Gc(Ey),mZ=Gc($y),bZ=Gc(Py),fZ=Gc(By),yZ=Gc(Ay),gZ=Gc(Qy),vZ=Gc(Dy),ZZ=Gc(_y),xZ=Gc(qy),GZ=Gc(eg),XZ=Gc(tg),IZ=Gc(ng),WZ=Gc(ig),kZ=Gc(og),VZ=Gc(lg),SZ={[Ty]:({editor:e},{payload:{hasRedo:t,hasUndo:n}})=>{e.hasRedo=t,e.hasUndo=n},[Ny]:({editor:e,doc:t})=>{const n=t.tableIds.reduce(((e,t)=>(e[t]=Iv,e)),{}),i=t.memoIds.reduce(((e,t)=>(e[t]=Wv,e)),{});e.selectedMap={...i,...n}},[Ky]:({editor:e})=>{Object.keys(e.selectedMap).forEach((t=>{Reflect.deleteProperty(e.selectedMap,t)}))},[zy]:({editor:e},{payload:t})=>{Object.assign(e.selectedMap,t)},[Hy]:({editor:e},{payload:{width:t,height:n}})=>{e.viewport.width=t,e.viewport.height=n},[My]:e=>{const{doc:t,collections:n,lww:i}=xn({});e.doc=t,e.collections=n,e.lww=i},[Jy]:(e,{payload:{value:t}})=>{const{version:n,settings:i,doc:o,collections:l,lww:r}=ri(t);Zv(i.canvasType)||(i.canvasType=rg.ERD),Object.assign(e.settings,i),e.version=n,e.doc=o,e.collections=l,e.lww=r},[jy]:e=>{const{doc:t,collections:n,lww:i}=xn({});e.doc=t,e.collections=n,e.lww=i},[Fy]:(e,{payload:{value:t}})=>{const{version:n,settings:i,doc:o,collections:l,lww:r}=ri(t);Zv(i.canvasType)||(i.canvasType=rg.ERD),Object.assign(e.settings,i),e.version=n,e.doc=o,e.collections=l,e.lww=r},[Uy]:({editor:e,collections:t},{payload:n})=>{var i,o;const l=Vn(t).collection("tableEntities");if((null==(i=e.focusTable)?void 0:i.tableId)===n.tableId&&n.focusType)e.focusTable.focusType=n.focusType,e.focusTable.columnId=null,e.focusTable.prevSelectColumnId=null,e.focusTable.selectColumnIds=[];else if(n.focusType){const t=l.selectById(n.tableId);if(!t)return;e.focusTable={tableId:t.id,focusType:n.focusType,columnId:null,prevSelectColumnId:null,selectColumnIds:[],edit:!1}}else if((null==(o=e.focusTable)?void 0:o.tableId)!==n.tableId){const t=l.selectById(n.tableId);if(!t)return;e.focusTable={tableId:t.id,focusType:kv.tableName,columnId:null,prevSelectColumnId:null,selectColumnIds:[],edit:!1}}},[Oy]:({editor:e,collections:t},{payload:n})=>{var i;const o=Vn(t).collection("tableEntities");if((null==(i=e.focusTable)?void 0:i.tableId)===n.tableId){const t=o.selectById(n.tableId);if(!t)return;const i=e.focusTable;i.columnId=n.columnId,i.focusType=n.focusType,n.$mod&&n.shiftKey?i.selectColumnIds=function(e,t,n,i){return wy([...t,...Kv(e,n,i)])}(t.columnIds,i.selectColumnIds,i.prevSelectColumnId,i.columnId):n.shiftKey?i.selectColumnIds=Kv(t.columnIds,i.prevSelectColumnId,i.columnId):n.$mod?i.selectColumnIds=Nv(i.selectColumnIds,n.columnId):i.selectColumnIds=[n.columnId],i.prevSelectColumnId=n.columnId}else{const t=o.selectById(n.tableId);if(!t)return;e.focusTable={tableId:t.id,focusType:n.focusType,columnId:n.columnId,prevSelectColumnId:n.columnId,selectColumnIds:[n.columnId],edit:!1}}},[Ey]:({editor:e})=>{e.focusTable=null},[$y]:(e,{payload:t})=>{const{editor:{focusTable:n}}=e;if(n)switch(n.edit=!1,t.moveKey){case Vv.ArrowUp:!function(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Vn(n).collection("tableEntities").selectById(i.tableId);if(o)if(Dv(i.focusType)){if(jv(e)){const t=o.columnIds[o.columnIds.length-1];i.focusType=$v(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}}else if(Ev(e))i.focusType=kv.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const e=o.columnIds.indexOf(i.columnId),n=o.columnIds[e-1];i.columnId=n,i.prevSelectColumnId=n,t.shiftKey&&t.moveKey!==Vv.Tab?i.selectColumnIds=Nv(i.selectColumnIds,n):i.selectColumnIds=[n]}}(e,t);break;case Vv.ArrowDown:!function(e,t){const{collections:n,editor:{focusTable:i}}=e;if(!i)return;const o=Vn(n).collection("tableEntities").selectById(i.tableId);if(o)if(Dv(i.focusType)){if(jv(e)){const t=o.columnIds[0];i.focusType=Pv(e),i.columnId=t,i.prevSelectColumnId=t,i.selectColumnIds=[t]}}else if(Ov(e))i.focusType=kv.tableName,i.columnId=null,i.prevSelectColumnId=null,i.selectColumnIds=[];else if(i.columnId){const e=o.columnIds.indexOf(i.columnId),n=o.columnIds[e+1];i.columnId=n,i.prevSelectColumnId=n,t.shiftKey&&t.moveKey!==Vv.Tab?i.selectColumnIds=Nv(i.selectColumnIds,n):i.selectColumnIds=[n]}}(e,t);break;case Vv.ArrowLeft:eZ(e,t);break;case Vv.ArrowRight:tZ(e,t);break;case Vv.Tab:t.shiftKey?eZ(e,t):tZ(e,t)}},[Py]:({editor:{focusTable:e}})=>{e&&(e.edit=!0)},[By]:({editor:{focusTable:e}})=>{e&&(e.edit=!1)},[Ay]:({collections:e,editor:{focusTable:t}})=>{if(!t)return;const n=Vn(e).collection("tableEntities").selectById(t.tableId);n&&(t.selectColumnIds=[...n.columnIds])},[Qy]:({editor:e},{payload:{relationshipType:t}})=>{e.drawRelationship={relationshipType:t,start:null,end:{x:0,y:0}}},[Dy]:({editor:{drawRelationship:e},collections:t},{payload:{tableId:n}})=>{if(!e)return;const i=Vn(t).collection("tableEntities").selectById(n);i&&(e.start={tableId:n,x:i.ui.x,y:i.ui.y})},[_y]:({editor:e})=>{e.drawRelationship=null},[qy]:({editor:{drawRelationship:e},settings:{scrollLeft:t,scrollTop:n,zoomLevel:i,width:o,height:l}},{payload:{x:r,y:a}})=>{if(null==e||!e.start)return;const s=Jg({x:r-t,y:a-n},o,l,i);e.end.x=s.x,e.end.y=s.y},[eg]:({editor:e},{payload:{columnIds:t}})=>{Object.keys(e.hoverColumnMap).forEach((t=>{Reflect.deleteProperty(e.hoverColumnMap,t)}));for(const n of t)e.hoverColumnMap[n]=!0},[tg]:({editor:e},{payload:t})=>{Object.assign(e.openMap,t)},[ng]:({editor:e},{payload:t})=>{e.draggableColumn=t,t.columnIds.forEach((t=>{e.draggingColumnMap[t]=!0}))},[ig]:({editor:e})=>{e.draggableColumn=null,Object.keys(e.draggingColumnMap).forEach((t=>{Reflect.deleteProperty(e.draggingColumnMap,t)}))},[og]:({editor:e},{payload:t,tags:n,meta:i})=>{if(ed(n)||!Kg(n,Yg.shared)||!_u(null==i?void 0:i.editorId)||e.id===i.editorId)return;const o=e.sharedMouseTrackerMap[i.editorId],l=!_u(i.nickname)||by(i.nickname.trim())?"user":i.nickname.trim();o?(o.x=t.x,o.y=t.y,o.nickname=l,clearTimeout(o.timeoutId),o.timeoutId=setTimeout((()=>{Reflect.deleteProperty(e.sharedMouseTrackerMap,i.editorId)}),3e4)):e.sharedMouseTrackerMap[i.editorId]={...t,id:i.editorId,nickname:l,timeoutId:setTimeout((()=>{Reflect.deleteProperty(e.sharedMouseTrackerMap,i.editorId)}),3e4)}},[lg]:({doc:e,collections:t})=>{const n=Vn(t).collection("tableEntities"),i=Vn(t).collection("tableColumnEntities"),o=Vn(t).collection("indexEntities"),l=Vn(t).collection("indexColumnEntities"),r=Vn(t).collection("relationshipEntities"),a=Vn(t).collection("memoEntities"),s=e.tableIds.filter((e=>!n.selectById(e))),c=e.relationshipIds.filter((e=>!r.selectById(e))),u=e.indexIds.filter((e=>!o.selectById(e))),d=e.memoIds.filter((e=>!a.selectById(e)));e.tableIds=e.tableIds.filter((e=>!s.includes(e))),e.relationshipIds=e.relationshipIds.filter((e=>!c.includes(e))),e.indexIds=e.indexIds.filter((e=>!u.includes(e))),e.memoIds=e.memoIds.filter((e=>!d.includes(e))),n.selectAll().forEach((e=>{const t=e.columnIds.filter((e=>!i.selectById(e))),n=e.seqColumnIds.filter((e=>!i.selectById(e)));e.columnIds=e.columnIds.filter((e=>!t.includes(e))),e.seqColumnIds=e.seqColumnIds.filter((e=>!n.includes(e)))})),o.selectAll().forEach((e=>{const t=e.indexColumnIds.filter((e=>!l.selectById(e))),n=e.seqIndexColumnIds.filter((e=>!l.selectById(e)));e.indexColumnIds=e.indexColumnIds.filter((e=>!t.includes(e))),e.seqIndexColumnIds=e.seqIndexColumnIds.filter((e=>!n.includes(e)))}))}},CZ={changeHasHistoryAction:nZ,selectAllAction:iZ,unselectAllAction:oZ,selectAction:lZ,changeViewportAction:rZ,clearAction:aZ,loadJsonAction:sZ,initialClearAction:cZ,initialLoadJsonAction:uZ,focusTableAction:dZ,focusColumnAction:pZ,focusTableEndAction:hZ,focusMoveTableAction:mZ,editTableAction:bZ,editTableEndAction:fZ,selectAllColumnAction:yZ,drawStartRelationshipAction:gZ,drawStartAddRelationshipAction:vZ,drawEndRelationshipAction:ZZ,drawRelationshipAction:xZ,hoverColumnMapAction:GZ,changeOpenMapAction:XZ,dragstartColumnAction:IZ,dragendColumnAction:WZ,sharedMouseTrackerAction:kZ,validationIdsAction:VZ},LZ={[Jy]:(e,t,n)=>{e.push(aZ(),sZ({value:ai(n)}))},[My]:(e,t,n)=>{e.push(sZ({value:ai(n)}))}},RZ="index.add",YZ="index.remove",wZ="index.changeName",TZ="index.changeUnique";typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof e<"u"||typeof self<"u"&&self;function NZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var KZ=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===zZ}(e)}(e)};var zZ="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function HZ(e,t){return!1!==t.clone&&t.isMergeableObject(e)?UZ(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function MZ(e,t,n){return e.concat(t).map((function(e){return HZ(e,n)}))}function JZ(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function jZ(e,t){try{return t in e}catch{return!1}}function FZ(e,t,n){var i={};return n.isMergeableObject(e)&&JZ(e).forEach((function(t){i[t]=HZ(e[t],n)})),JZ(t).forEach((function(o){(function(e,t){return jZ(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(jZ(e,o)&&n.isMergeableObject(t[o])?i[o]=function(e,t){if(!t.customMerge)return UZ;var n=t.customMerge(e);return"function"==typeof n?n:UZ}(o,n)(e[o],t[o],n):i[o]=HZ(t[o],n))})),i}function UZ(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||MZ,n.isMergeableObject=n.isMergeableObject||KZ,n.cloneUnlessOtherwiseSpecified=HZ;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):FZ(e,t,n):HZ(t,n)}UZ.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return UZ(e,n,t)}),{})};const OZ=NZ(UZ),EZ=e=>OZ({id:id(),name:"",tableId:"",indexColumnIds:[],seqIndexColumnIds:[],unique:!1,meta:Tv()},e??{}),$Z=Gc(RZ),PZ=Gc(YZ),BZ=Gc(wZ),AZ=Gc(TZ),QZ={[RZ]:({doc:e,collections:t,lww:n},{payload:{id:i,tableId:o},timestamp:l})=>{Vn(t).collection("indexEntities").addOne(EZ({id:i,tableId:o})).addOperator(n,l,i,(()=>{Pu(e.indexIds)(i)||e.indexIds.push(i)}))},[YZ]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Vn(t).collection("indexEntities").removeOperator(n,o,i,(()=>{const t=e.indexIds.indexOf(i);-1!==t&&e.indexIds.splice(t,1)}))},[wZ]:({collections:e,lww:t},{payload:{id:n,tableId:i,value:o},timestamp:l})=>{const r=Vn(e).collection("indexEntities");r.getOrCreate(n,(e=>EZ({id:e,tableId:i}))),r.replaceOperator(t,l,n,"name",(()=>{r.updateOne(n,(e=>{e.name=o}))}))},[TZ]:({collections:e,lww:t},{payload:{id:n,tableId:i,value:o},timestamp:l})=>{const r=Vn(e).collection("indexEntities");r.getOrCreate(n,(e=>EZ({id:e,tableId:i}))),r.replaceOperator(t,l,n,"unique",(()=>{r.updateOne(n,(e=>{e.unique=o}))}))}},DZ={addIndexAction:$Z,removeIndexAction:PZ,changeIndexNameAction:BZ,changeIndexUniqueAction:AZ},_Z={[RZ]:(e,{payload:{id:t}})=>{e.push(PZ({id:t}))},[YZ]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("indexEntities").selectById(t);i&&e.push($Z({id:t,tableId:i.tableId}))},[wZ]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Vn(i).collection("indexEntities").selectById(t);o&&e.push(BZ({id:t,tableId:n,value:o.name}))},[TZ]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Vn(o).collection("indexEntities").selectById(t)&&e.push(AZ({id:t,tableId:n,value:!i}))}},qZ="indexColumn.add",ex="indexColumn.remove",tx="indexColumn.move",nx="indexColumn.changeOrderType",ix=e=>OZ({id:id(),indexId:"",columnId:"",orderType:Ig.ASC,meta:Tv()},e??{});function ox(e,t,n){if(Pu(t)(n)){const i=t.reduce(((e,t,n)=>(e[t]=n,e)),{});e.push(n),e.sort(((e,t)=>{const n=i[e],o=i[t];return void 0===n?1:void 0===o?-1:n-o}))}else e.push(n),t.push(n)}const lx=Gc(qZ),rx=Gc(ex),ax=Gc(tx),sx=Gc(nx),cx={[qZ]:({collections:e,lww:t},{payload:{id:n,indexId:i,tableId:o,columnId:l},timestamp:r})=>{const a=Vn(e).collection("indexEntities"),s=a.getOrCreate(i,(e=>EZ({id:e,tableId:o})));Vn(e).collection("indexColumnEntities").addOne(ix({id:n,indexId:i,columnId:l})).addOperator(t,r,n,(()=>{Pu(s.indexColumnIds)(n)||a.updateOne(i,(e=>{ox(e.indexColumnIds,e.seqIndexColumnIds,n)}))}))},[ex]:({collections:e,lww:t},{payload:{id:n,indexId:i,tableId:o},timestamp:l})=>{const r=Vn(e).collection("indexEntities"),a=r.getOrCreate(i,(e=>EZ({id:e,tableId:o})));Vn(e).collection("indexColumnEntities").removeOperator(t,l,n,(()=>{const e=a.indexColumnIds.indexOf(n);-1!==e&&r.updateOne(i,(t=>{t.indexColumnIds.splice(e,1)}))}))},[tx]:({collections:e},{payload:{id:t,indexId:n,tableId:i,targetId:o}})=>{if(t===o)return;const l=Vn(e).collection("indexEntities"),r=l.getOrCreate(n,(e=>EZ({id:e,tableId:i}))),a=r.indexColumnIds.indexOf(t);if(-1===a)return;const s=r.indexColumnIds.indexOf(o);-1!==s&&l.updateOne(n,(e=>{e.indexColumnIds.splice(a,1),e.indexColumnIds.splice(s,0,t);const n=e.seqIndexColumnIds.indexOf(t),i=e.seqIndexColumnIds.indexOf(o);-1!==n&&-1!==i&&(e.seqIndexColumnIds.splice(n,1),e.seqIndexColumnIds.splice(i,0,t))}))},[nx]:({collections:e,lww:t},{payload:{id:n,indexId:i,columnId:o,value:l},timestamp:r})=>{const a=Vn(e).collection("indexColumnEntities");a.getOrCreate(n,(e=>ix({id:e,indexId:i,columnId:o}))),a.replaceOperator(t,r,n,"orderType",(()=>{a.updateOne(n,(e=>{e.orderType=l}))}))}},ux={addIndexColumnAction:lx,removeIndexColumnAction:rx,moveIndexColumnAction:ax,changeIndexColumnOrderTypeAction:sx},dx={[qZ]:(e,{payload:{id:t,indexId:n,tableId:i}})=>{e.push(rx({id:t,indexId:n,tableId:i}))},[ex]:(e,{payload:{id:t,indexId:n,tableId:i}},{collections:o})=>{const l=Vn(o).collection("indexColumnEntities").selectById(t);l&&e.push(lx({id:t,indexId:n,tableId:i,columnId:l.columnId}))},[tx]:(e,{payload:{id:t,indexId:n,tableId:i,targetId:o}},{collections:l})=>{const r=Vn(l).collection("indexEntities").selectById(n);if(!r)return;const a=r.indexColumnIds.indexOf(t);if(-1===a)return;const s=r.indexColumnIds.indexOf(o);if(-1===s)return;const c=a<s?a+1:a-1,u=r.indexColumnIds[c];e.push(ax({indexId:n,tableId:i,id:t,targetId:u}))},[nx]:(e,{payload:{id:t,indexId:n,columnId:i}},{collections:o})=>{const l=Vn(o).collection("indexColumnEntities").selectById(t);l&&e.push(sx({id:t,indexId:n,columnId:i,value:l.orderType}))}},px="memo.add",hx="memo.move",mx="memo.moveTo",bx="memo.remove",fx="memo.changeValue",yx="memo.changeColor",gx="memo.resize",vx="memo.changeZIndex",Zx=e=>OZ({id:id(),value:"",ui:{x:200,y:100,zIndex:2,width:116,height:100,color:""},meta:Tv()},e??{}),xx=Gc(px),Gx=Gc(hx),Xx=Gc(mx),Ix=Gc(bx),Wx=Gc(fx),kx=Gc(yx),Vx=Gc(gx),Sx=Gc(vx),Cx={[px]:({doc:e,collections:t,lww:n},{payload:{id:i,ui:o},timestamp:l})=>{Vn(t).collection("memoEntities").addOne(Zx({id:i,ui:o})).addOperator(n,l,i,(()=>{Pu(e.memoIds)(i)||e.memoIds.push(i)}))},[hx]:({collections:e},{payload:{ids:t,movementX:n,movementY:i}})=>{const o=Vn(e).collection("memoEntities");for(const e of t)o.getOrCreate(e,(e=>Zx({id:e})));o.updateMany(t,(e=>{e.ui.x=Cy(e.ui.x+n,4),e.ui.y=Cy(e.ui.y+i,4)}))},[mx]:({collections:e},{payload:{id:t,x:n,y:i}})=>{const o=Vn(e).collection("memoEntities");o.getOrCreate(t,(e=>Zx({id:e}))),o.updateOne(t,(e=>{e.ui.x=n,e.ui.y=i}))},[bx]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Vn(t).collection("memoEntities").removeOperator(n,o,i,(()=>{const t=e.memoIds.indexOf(i);-1!==t&&e.memoIds.splice(t,1)}))},[fx]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Vn(e).collection("memoEntities");l.getOrCreate(n,(e=>Zx({id:e}))),l.replaceOperator(t,o,n,"value",(()=>{l.updateOne(n,(e=>{e.value=i}))}))},[yx]:({collections:e,lww:t},{payload:{id:n,color:i},timestamp:o})=>{const l=Vn(e).collection("memoEntities");l.getOrCreate(n,(e=>Zx({id:e}))),l.replaceOperator(t,o,n,"ui.color",(()=>{l.updateOne(n,(e=>{e.ui.color=i}))}))},[gx]:({collections:e},{payload:{id:t,x:n,y:i,width:o,height:l}})=>{const r=Vn(e).collection("memoEntities");r.getOrCreate(t,(e=>Zx({id:e}))),r.updateOne(t,(e=>{e.ui.x=n,e.ui.y=i,e.ui.width=o,e.ui.height=l}))},[vx]:({collections:e},{payload:{id:t,zIndex:n}})=>{const i=Vn(e).collection("memoEntities");i.getOrCreate(t,(e=>Zx({id:e}))),i.updateOne(t,(e=>{e.ui.zIndex=n}))}},Lx={addMemoAction:xx,moveMemoAction:Gx,moveToMemoAction:Xx,removeMemoAction:Ix,changeMemoValueAction:Wx,changeMemoColorAction:kx,resizeMemoAction:Vx,changeZIndexAction:Sx},Rx={[px]:(e,{payload:{id:t}})=>{e.push(Ix({id:t}))},[bx]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("memoEntities").selectById(t);i&&e.push(xx({id:i.id,ui:Xy(i.ui,["x","y","zIndex"])}))},[fx]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("memoEntities").selectById(t);i&&e.push(Wx({id:t,value:i.value}))},[mx]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("memoEntities").selectById(t);i&&e.push(Xx({id:t,x:i.ui.x,y:i.ui.y}))}},Yx={[hx]:(e,t,n)=>{const i=n.filter((e=>e.type===Gx.type));if(!i.length)return;const o=dy(i,(e=>e.payload.ids.join(",")));for(const[,n]of Object.entries(o)){const{payload:{ids:i}}=sy(n),{x:o,y:l}=n.reduce(((e,{payload:{movementX:t,movementY:n}})=>(e.x+=t,e.y+=n,e)),{x:0,y:0});Math.abs(o)+Math.abs(l)<20||(e.push(Gx({ids:i,movementX:-1*o,movementY:-1*l})),t.push(Gx({ids:i,movementX:o,movementY:l})))}},[yx]:(e,t,n)=>{const i=n.filter((({type:e})=>e===kx.type));if(!i.length)return;const o=dy(i,(e=>e.payload.id));for(const[n,i]of Object.entries(o)){const o=sy(i),l=ay(i);e.push(kx({id:n,color:o.payload.prevColor,prevColor:l.payload.color})),t.push(kx({id:n,color:l.payload.color,prevColor:o.payload.prevColor}))}},[gx]:(e,t,n)=>{const i=n.filter((e=>e.type===Vx.type));if(!i.length)return;const o=dy(i,(e=>e.payload.id));for(const[,n]of Object.entries(o)){if(n.length<2)continue;const i=sy(n),o=ay(n);e.push(i),t.push(o)}}},wx="relationship.add",Tx="relationship.remove",Nx="relationship.changeType",Kx=e=>OZ({id:id(),identification:!1,relationshipType:vg.ZeroN,startRelationshipType:Zg.dash,start:{tableId:"",columnIds:[],x:0,y:0,direction:xg.bottom},end:{tableId:"",columnIds:[],x:0,y:0,direction:xg.bottom},meta:Tv()},e??{}),zx=Gc(wx),Hx=Gc(Tx),Mx=Gc(Nx),Jx={[wx]:({doc:e,collections:t,lww:n},{payload:{id:i,relationshipType:o,start:l,end:r},timestamp:a})=>{Vn(t).collection("relationshipEntities").addOne(Kx({id:i,relationshipType:o,start:{tableId:l.tableId,columnIds:l.columnIds},end:{tableId:r.tableId,columnIds:r.columnIds}})).addOperator(n,a,i,(()=>{Pu(e.relationshipIds)(i)||e.relationshipIds.push(i)}))},[Tx]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Vn(t).collection("relationshipEntities").removeOperator(n,o,i,(()=>{const t=e.relationshipIds.indexOf(i);-1!==t&&e.relationshipIds.splice(t,1)}))},[Nx]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Vn(e).collection("relationshipEntities");l.replaceOperator(t,o,n,"relationshipType",(()=>{l.updateOne(n,(e=>{e.relationshipType=i}))}))}},jx={addRelationshipAction:zx,removeRelationshipAction:Hx,changeRelationshipTypeAction:Mx},Fx={[wx]:(e,{payload:{id:t}})=>{e.push(Hx({id:t}))},[Tx]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("relationshipEntities").selectById(t);i&&e.push(zx({id:i.id,relationshipType:i.relationshipType,start:Xy(i.start,["tableId","columnIds"]),end:Xy(i.end,["tableId","columnIds"])}))},[Nx]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("relationshipEntities").selectById(t);i&&e.push(Mx({id:t,value:i.relationshipType}))}},Ux="settings.changeDatabaseName",Ox="settings.resize",Ex="settings.changeZoomLevel",$x="settings.streamZoomLevel",Px="settings.scrollTo",Bx="settings.streamScrollTo",Ax="settings.changeShow",Qx="settings.changeDatabase",Dx="settings.changeCanvasType",_x="settings.changeLanguage",qx="settings.changeTableNameCase",eG="settings.changeColumnNameCase",tG="settings.changeBracketType",nG="settings.changeRelationshipDataTypeSync",iG="settings.changeRelationshipOptimization",oG="settings.changeColumnOrder",lG="settings.changeMaxWidthComment",rG="settings.changeIgnoreSaveSettings",aG=Gc(Ux),sG=Gc(Ox),cG=Gc(Ex),uG=Gc($x),dG=Gc(Px),pG=Gc(Bx),hG=Gc(Ax),mG=Gc(Qx),bG=Gc(Dx),fG=Gc(_x),yG=Gc(qx),gG=Gc(eG),vG=Gc(tG),ZG=Gc(nG),xG=Gc(iG),GG=Gc(oG),XG=Gc(lG),IG=Gc(rG),WG={[Ux]:({settings:e,lww:t},{payload:{value:n},timestamp:i})=>{Wn(t,i,"settings.databaseName","settings","databaseName",(()=>{e.databaseName=n}))},[Ox]:({settings:e},{payload:{width:t,height:n}})=>{e.width=uv(t),e.height=uv(n)},[Ex]:({settings:e},{payload:{value:t},tags:n})=>{!ed(n)&&Kg(n,Yg.following)||(e.zoomLevel=dv(t))},[$x]:({settings:e},{payload:{value:t},tags:n})=>{!ed(n)&&Kg(n,Yg.following)||(e.zoomLevel=dv(e.zoomLevel+t))},[Px]:({settings:e,editor:{viewport:t}},{payload:{scrollTop:n,scrollLeft:i},tags:o})=>{if(!ed(o)&&Kg(o,Yg.following))return;const l=od(t.height-e.height,0),r=od(t.width-e.width,0);e.scrollTop=Cy(l(n),4),e.scrollLeft=Cy(r(i),4)},[Bx]:({settings:e,editor:{viewport:t}},{payload:{movementX:n,movementY:i},tags:o})=>{if(!ed(o)&&Kg(o,Yg.following))return;const l=od(t.height-e.height,0),r=od(t.width-e.width,0);e.scrollTop=Cy(l(e.scrollTop+i),4),e.scrollLeft=Cy(r(e.scrollLeft+n),4)},[Ax]:({settings:e},{payload:{show:t,value:n}})=>{e.show=n?e.show|t:e.show&~t},[Qx]:({settings:e},{payload:{value:t}})=>{mv(t)&&(e.database=t)},[Dx]:({settings:e},{payload:{value:t},tags:n})=>{!ed(n)&&Kg(n,Yg.following)||(e.canvasType=t)},[_x]:({settings:e},{payload:{value:t}})=>{yv(t)&&(e.language=t)},[qx]:({settings:e},{payload:{value:t}})=>{bv(t)&&(e.tableNameCase=t)},[eG]:({settings:e},{payload:{value:t}})=>{bv(t)&&(e.columnNameCase=t)},[tG]:({settings:e},{payload:{value:t}})=>{fv(t)&&(e.bracketType=t)},[nG]:({settings:e},{payload:{value:t}})=>{e.relationshipDataTypeSync=t},[iG]:({settings:e},{payload:{value:t}})=>{e.relationshipOptimization=t},[oG]:({settings:e},{payload:{value:t,target:n}})=>{if(t===n||!gv(t)||!gv(n))return;const i=e.columnOrder.indexOf(t),o=e.columnOrder.indexOf(n);-1===i||-1===o||(e.columnOrder.splice(i,1),e.columnOrder.splice(o,0,t))},[lG]:({settings:e},{payload:{value:t}})=>{e.maxWidthComment=-1===t?t:cv(t)},[rG]:({settings:e},{payload:{saveSettingType:t,value:n}})=>{e.ignoreSaveSettings=n?e.ignoreSaveSettings|t:e.ignoreSaveSettings&~t}},kG={changeDatabaseNameAction:aG,resizeAction:sG,changeZoomLevelAction:cG,streamZoomLevelAction:uG,scrollToAction:dG,streamScrollToAction:pG,changeShowAction:hG,changeDatabaseAction:mG,changeCanvasTypeAction:bG,changeLanguageAction:fG,changeTableNameCaseAction:yG,changeColumnNameCaseAction:gG,changeBracketTypeAction:vG,changeRelationshipDataTypeSyncAction:ZG,changeRelationshipOptimizationAction:xG,changeColumnOrderAction:GG,changeMaxWidthCommentAction:XG,changeIgnoreSaveSettingsAction:IG},VG={[Ox]:(e,t,{settings:n})=>{e.push(sG({width:n.width,height:n.height}))},[Px]:(e,t,{settings:n})=>{e.push(dG({scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}))},[Ax]:(e,{payload:{show:t,value:n}})=>{e.push(hG({show:t,value:!n}))},[Ex]:(e,t,{settings:n})=>{e.push(cG({value:n.zoomLevel}))}},SG={[Bx]:(e,t,n)=>{const i=n.filter((e=>e.type===pG.type));if(!i.length)return;const{x:o,y:l}=i.reduce(((e,{payload:{movementX:t,movementY:n}})=>(e.x+=t,e.y+=n,e)),{x:0,y:0});Math.abs(o)+Math.abs(l)<20||(e.push(pG({movementX:-1*o,movementY:-1*l})),t.push(pG({movementX:o,movementY:l})))},[$x]:(e,t,n)=>{const i=n.filter((e=>e.type===uG.type));if(!i.length)return;const o=i.reduce(((e,{payload:{value:t}})=>e+t),0);e.push(uG({value:-1*o})),t.push(uG({value:o}))}},CG="table.add",LG="table.move",RG="table.moveTo",YG="table.remove",wG="table.changeName",TG="table.changeComment",NG="table.changeColor",KG="table.changeZIndex",zG="table.sort";function HG(e,{settings:{show:t,maxWidthComment:n},collections:i}){let o=e.ui.widthName+Ug;if(Kg(t,sg.tableComment)){o+=(-1===n?e.ui.widthComment:n<e.ui.widthComment?n:e.ui.widthComment)+Ug}const l=function(e){return MG.reduce(((t,{key:n,width:i})=>Kg(e,n)?t+i+Ug:t),Ag+Ug+Qg+Ug+Bg)}(t);o<l&&(o=l);const r=function(e,t,n){const i={width:0,name:0,comment:0,dataType:0,default:0,notNull:0,autoIncrement:0,unique:0};for(const o of e){if(i.name<o.ui.widthName&&(i.name=o.ui.widthName),Kg(t,sg.columnComment)&&i.comment<o.ui.widthComment){const e=-1===n?o.ui.widthComment:n<o.ui.widthComment?n:o.ui.widthComment;i.comment=e}Kg(t,sg.columnDataType)&&i.dataType<o.ui.widthDataType&&(i.dataType=o.ui.widthDataType),Kg(t,sg.columnDefault)&&i.default<o.ui.widthDefault&&(i.default=o.ui.widthDefault)}return Kg(t,sg.columnNotNull)&&(i.notNull=Dg),Kg(t,sg.columnAutoIncrement)&&(i.autoIncrement=qg),Kg(t,sg.columnUnique)&&(i.unique=_g),i.width=Object.entries(i).reduce(((e,[t,n])=>"width"===t||0===n?e:e+n+Ug),Ag+Ug+Bg),i}(Vn(i).collection("tableColumnEntities").selectByIds(e.columnIds),t,n);return o<r.width&&(o=r.width),{...r,width:Og+Eg+o+Eg+Og}}const MG=[{key:sg.columnComment,width:Qg},{key:sg.columnDataType,width:Qg},{key:sg.columnDefault,width:Qg},{key:sg.columnNotNull,width:Dg},{key:sg.columnAutoIncrement,width:qg},{key:sg.columnUnique,width:_g}];function JG(e){return Og+Eg+Pg+e.columnIds.length*ev+Eg+Og}function jG({doc:{tableIds:e},collections:t},{toWidth:n}){const i=Vn(t).collection("tableEntities").selectByIds(e),o=Vn(t).collection("tableColumnEntities");for(const e of i){e.ui.widthName=xv(n(e.name)),e.ui.widthComment=xv(n(e.comment));const t=o.selectByIds(e.columnIds);for(const e of t)e.ui.widthName=xv(n(e.name)),e.ui.widthDataType=xv(n(e.dataType)),e.ui.widthDefault=xv(n(e.default)),e.ui.widthComment=xv(n(e.comment))}}const FG=e=>OZ({id:id(),name:"",comment:"",columnIds:[],seqColumnIds:[],ui:{x:200,y:100,zIndex:2,widthName:Qg,widthComment:Qg,color:""},meta:Tv()},e??{}),UG=Gc(CG),OG=Gc(LG),EG=Gc(RG),$G=Gc(YG),PG=Gc(wG),BG=Gc(TG),AG=Gc(NG),QG=Gc(KG),DG=Gc(zG),_G={[CG]:({doc:e,collections:t,lww:n},{payload:{id:i,ui:o},timestamp:l})=>{Vn(t).collection("tableEntities").addOne(FG({id:i,ui:o})).addOperator(n,l,i,(()=>{Pu(e.tableIds)(i)||e.tableIds.push(i)}))},[LG]:({collections:e},{payload:{ids:t,movementX:n,movementY:i}})=>{const o=Vn(e).collection("tableEntities");for(const e of t)o.getOrCreate(e,(e=>FG({id:e})));o.updateMany(t,(e=>{e.ui.x=Cy(e.ui.x+n,4),e.ui.y=Cy(e.ui.y+i,4)}))},[RG]:({collections:e},{payload:{id:t,x:n,y:i}})=>{const o=Vn(e).collection("tableEntities");o.getOrCreate(t,(e=>FG({id:e}))),o.updateOne(t,(e=>{e.ui.x=n,e.ui.y=i}))},[YG]:({doc:e,collections:t,lww:n},{payload:{id:i},timestamp:o})=>{Vn(t).collection("tableEntities").removeOperator(n,o,i,(()=>{const t=e.tableIds.indexOf(i);-1!==t&&e.tableIds.splice(t,1)}))},[wG]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Vn(e).collection("tableEntities");r.getOrCreate(n,(e=>FG({id:e}))),r.replaceOperator(t,o,n,"name",(()=>{r.updateOne(n,(e=>{e.name=i,e.ui.widthName=xv(l(i))}))}))},[TG]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Vn(e).collection("tableEntities");r.getOrCreate(n,(e=>FG({id:e}))),r.replaceOperator(t,o,n,"comment",(()=>{r.updateOne(n,(e=>{e.comment=i,e.ui.widthComment=xv(l(i))}))}))},[NG]:({collections:e,lww:t},{payload:{id:n,color:i},timestamp:o})=>{const l=Vn(e).collection("tableEntities");l.getOrCreate(n,(e=>FG({id:e}))),l.replaceOperator(t,o,n,"ui.color",(()=>{l.updateOne(n,(e=>{e.ui.color=i}))}))},[KG]:({collections:e},{payload:{id:t,zIndex:n}})=>{const i=Vn(e).collection("tableEntities");i.getOrCreate(t,(e=>FG({id:e}))),i.updateOne(t,(e=>{e.ui.zIndex=n}))},[zG]:e=>{const{doc:t,settings:n,collections:i}=e,o=n.width,l=Vn(i).collection("tableEntities").selectByIds(t.tableIds);l.sort(((e,t)=>e.columnIds.length-t.columnIds.length));let r=50,a=50,s=50;l.forEach((t=>{const n=HG(t,e).width+80,i=JG(t)+80;r+n>o&&(a+=s,s=0,r=50),s<i&&(s=i),t.ui.y=a,t.ui.x=r,r+=n}))}},qG={addTableAction:UG,moveTableAction:OG,moveToTableAction:EG,removeTableAction:$G,changeTableNameAction:PG,changeTableCommentAction:BG,changeTableColorAction:AG,changeZIndexAction:QG,sortTableAction:DG},eX={[CG]:(e,{payload:{id:t}})=>{e.push($G({id:t}))},[YG]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("tableEntities").selectById(t);i&&e.push(UG({id:i.id,ui:Xy(i.ui,["x","y","zIndex"])}))},[wG]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("tableEntities").selectById(t);i&&e.push(PG({id:t,value:i.name}))},[TG]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("tableEntities").selectById(t);i&&e.push(BG({id:t,value:i.comment}))},[RG]:(e,{payload:{id:t}},{collections:n})=>{const i=Vn(n).collection("tableEntities").selectById(t);i&&e.push(EG({id:t,x:i.ui.x,y:i.ui.y}))},[zG]:()=>{}},tX={[LG]:(e,t,n)=>{const i=n.filter((e=>e.type===OG.type));if(!i.length)return;const o=dy(i,(e=>e.payload.ids.join(",")));for(const[,n]of Object.entries(o)){const{payload:{ids:i}}=sy(n),{x:o,y:l}=n.reduce(((e,{payload:{movementX:t,movementY:n}})=>(e.x+=t,e.y+=n,e)),{x:0,y:0});Math.abs(o)+Math.abs(l)<20||(e.push(OG({ids:i,movementX:-1*o,movementY:-1*l})),t.push(OG({ids:i,movementX:o,movementY:l})))}},[NG]:(e,t,n)=>{const i=n.filter((({type:e})=>e===AG.type));if(!i.length)return;const o=dy(i,(e=>e.payload.id));for(const[n,i]of Object.entries(o)){const o=sy(i),l=ay(i);e.push(AG({id:n,color:o.payload.prevColor,prevColor:l.payload.color})),t.push(AG({id:n,color:l.payload.color,prevColor:o.payload.prevColor}))}}},nX="column.add",iX="column.remove",oX="column.changeName",lX="column.changeComment",rX="column.changeDataType",aX="column.changeDefault",sX="column.changeAutoIncrement",cX="column.changePrimaryKey",uX="column.changeUnique",dX="column.changeNotNull",pX="column.move",hX=e=>OZ({id:id(),tableId:"",name:"",comment:"",dataType:"",default:"",options:0,ui:{keys:0,widthName:Qg,widthComment:Qg,widthDataType:Qg,widthDefault:Qg},meta:Tv()},e??{}),mX=Gc(nX),bX=Gc(iX),fX=Gc(oX),yX=Gc(lX),gX=Gc(rX),vX=Gc(aX),ZX=Gc(sX),xX=Gc(cX),GX=Gc(uX),XX=Gc(dX),IX=Gc(pX),WX={[nX]:({collections:e,lww:t},{payload:{id:n,tableId:i},timestamp:o})=>{const l=Vn(e).collection("tableEntities"),r=l.getOrCreate(i,(e=>FG({id:e})));Vn(e).collection("tableColumnEntities").addOne(hX({id:n,tableId:i})).addOperator(t,o,n,(()=>{Pu(r.columnIds)(n)||l.updateOne(i,(e=>{ox(e.columnIds,e.seqColumnIds,n)}))}))},[iX]:({collections:e,lww:t},{payload:{id:n,tableId:i},timestamp:o})=>{const l=Vn(e).collection("tableEntities"),r=l.getOrCreate(i,(e=>FG({id:e})));Vn(e).collection("tableColumnEntities").removeOperator(t,o,n,(()=>{const e=r.columnIds.indexOf(n);-1!==e&&l.updateOne(i,(t=>{t.columnIds.splice(e,1)}))}))},[oX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Vn(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>hX({id:e}))),r.replaceOperator(t,o,n,"name",(()=>{r.updateOne(n,(e=>{e.name=i,e.ui.widthName=xv(l(i))}))}))},[lX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Vn(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>hX({id:e}))),r.replaceOperator(t,o,n,"comment",(()=>{r.updateOne(n,(e=>{e.comment=i,e.ui.widthComment=xv(l(i))}))}))},[rX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Vn(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>hX({id:e}))),r.replaceOperator(t,o,n,"dataType",(()=>{r.updateOne(n,(e=>{e.dataType=i,e.ui.widthDataType=xv(l(i))}))}))},[aX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o},{toWidth:l})=>{const r=Vn(e).collection("tableColumnEntities");r.getOrCreate(n,(e=>hX({id:e}))),r.replaceOperator(t,o,n,"default",(()=>{r.updateOne(n,(e=>{e.default=i,e.ui.widthDefault=xv(l(i))}))}))},[sX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Vn(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>hX({id:e}))),l.replaceOperator(t,o,n,"options(autoIncrement)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|Gg.autoIncrement:e.options&~Gg.autoIncrement}))}))},[cX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Vn(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>hX({id:e}))),l.replaceOperator(t,o,n,"options(primaryKey)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|Gg.primaryKey:e.options&~Gg.primaryKey,e.ui.keys=i?e.ui.keys|Xg.primaryKey:e.ui.keys&~Xg.primaryKey}))}))},[uX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Vn(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>hX({id:e}))),l.replaceOperator(t,o,n,"options(unique)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|Gg.unique:e.options&~Gg.unique}))}))},[dX]:({collections:e,lww:t},{payload:{id:n,value:i},timestamp:o})=>{const l=Vn(e).collection("tableColumnEntities");l.getOrCreate(n,(e=>hX({id:e}))),l.replaceOperator(t,o,n,"options(notNull)",(()=>{l.updateOne(n,(e=>{e.options=i?e.options|Gg.notNull:e.options&~Gg.notNull}))}))},[pX]:({collections:e},{payload:{id:t,tableId:n,targetId:i}})=>{if(t===i)return;const o=Vn(e).collection("tableEntities"),l=o.getOrCreate(n,(e=>FG({id:e}))),r=l.columnIds.indexOf(t);if(-1===r)return;const a=l.columnIds.indexOf(i);-1!==a&&o.updateOne(n,(e=>{e.columnIds.splice(r,1),e.columnIds.splice(a,0,t);const n=e.seqColumnIds.indexOf(t),o=e.seqColumnIds.indexOf(i);-1!==n&&-1!==o&&(e.seqColumnIds.splice(n,1),e.seqColumnIds.splice(o,0,t))}))}},kX={addColumnAction:mX,removeColumnAction:bX,changeColumnNameAction:fX,changeColumnCommentAction:yX,changeColumnDataTypeAction:gX,changeColumnDefaultAction:vX,changeColumnAutoIncrementAction:ZX,changeColumnPrimaryKeyAction:xX,changeColumnUniqueAction:GX,changeColumnNotNullAction:XX,moveColumnAction:IX},VX={[nX]:(e,{payload:{id:t,tableId:n}})=>{e.push(bX({id:t,tableId:n}))},[iX]:(e,{payload:{id:t,tableId:n}})=>{e.push(mX({id:t,tableId:n}))},[oX]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Vn(i).collection("tableColumnEntities").selectById(t);o&&e.push(fX({id:t,tableId:n,value:o.name}))},[rX]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Vn(i).collection("tableColumnEntities").selectById(t);o&&e.push(gX({id:t,tableId:n,value:o.dataType}))},[aX]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Vn(i).collection("tableColumnEntities").selectById(t);o&&e.push(vX({id:t,tableId:n,value:o.default}))},[lX]:(e,{payload:{id:t,tableId:n}},{collections:i})=>{const o=Vn(i).collection("tableColumnEntities").selectById(t);o&&e.push(yX({id:t,tableId:n,value:o.comment}))},[sX]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Vn(o).collection("tableColumnEntities").selectById(t)&&e.push(ZX({id:t,tableId:n,value:!i}))},[dX]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Vn(o).collection("tableColumnEntities").selectById(t)&&e.push(XX({id:t,tableId:n,value:!i}))},[cX]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Vn(o).collection("tableColumnEntities").selectById(t)&&e.push(xX({id:t,tableId:n,value:!i}))},[uX]:(e,{payload:{id:t,tableId:n,value:i}},{collections:o})=>{Vn(o).collection("tableColumnEntities").selectById(t)&&e.push(GX({id:t,tableId:n,value:!i}))},[pX]:(e,{payload:{id:t,tableId:n,targetId:i}},{collections:o})=>{const l=Vn(o).collection("tableEntities").selectById(n);if(!l)return;const r=l.columnIds.indexOf(t);if(-1===r)return;const a=l.columnIds.indexOf(i);if(-1===a)return;const s=r<a?r+1:r-1,c=l.columnIds[s];e.push(IX({id:t,tableId:n,targetId:c}))}},SX={...eX,...VX,...Fx,...Rx,...VG,...LZ,..._Z,...dx},CX={...tX,...Yx,...SG};function LX(e,t,n){const i=[],o=[];for(const t of n){const n=SX[t.type];n&&(n(i,t,e.state),o.push(uf(t)))}for(const e of Object.keys(CX))CX[e](i,o,n);!i.length||!o.length||t.push({undo:e=>{const t=Date.now();e(i.map(RX(t)))},redo:e=>{const t=Date.now();e(o.map(RX(t)))}})}function RX(e){return t=>({...uf(t),timestamp:e})}const YX=(e,t)=>n=>{Bu(LX,e,t,n)},wX=()=>function*({settings:e,doc:{tableIds:t,memoIds:n},collections:i}){const o=Vn(i).collection("tableEntities").selectByIds(t),l=Vn(i).collection("memoEntities").selectByIds(n),r=wv(e,o,l),a=id();yield TW(),yield lZ({[a]:Wv}),yield xx({id:a,ui:{...r,zIndex:Rv(o,l)}})},TX=e=>function*({editor:{selectedMap:t}}){if(e)return void(yield Ix({id:e}));const n=Object.entries(t).filter((([,e])=>e===Wv));for(const[e]of n)yield Ix({id:e})},NX=(e,t)=>function*({doc:{tableIds:n,memoIds:i},collections:o}){const l=Vn(o).collection("tableEntities").selectByIds(n),r=Vn(o).collection("memoEntities").selectByIds(i);t||(yield TW()),yield lZ({[e]:Wv}),yield Sx({id:e,zIndex:Rv(l,r)})},KX={addMemoAction$:wX,removeMemoAction$:TX,selectMemoAction$:NX},zX={columnName:"columnName",columnDataType:"columnDataType",columnNotNull:"columnNotNull",columnUnique:"columnUnique",columnAutoIncrement:"columnAutoIncrement",columnDefault:"columnDefault",columnComment:"columnComment"},HX=Pu(Object.values(zX));function MX(e,t){return t.filter((t=>{switch(t){case cg.columnName:return!0;case cg.columnDataType:return Kg(e,sg.columnDataType);case cg.columnDefault:return Kg(e,sg.columnDefault);case cg.columnComment:return Kg(e,sg.columnComment);case cg.columnAutoIncrement:return Kg(e,sg.columnAutoIncrement);case cg.columnUnique:return Kg(e,sg.columnUnique);case cg.columnNotNull:return Kg(e,sg.columnNotNull);default:return!1}}))}const JX=()=>function*({settings:e,doc:{tableIds:t,memoIds:n},collections:i}){const o=Vn(i).collection("tableEntities").selectByIds(t),l=Vn(i).collection("memoEntities").selectByIds(n),r=wv(e,o,l),a=id();yield oZ(),yield lZ({[a]:Iv}),yield UG({id:a,ui:{...r,zIndex:Rv(o,l)}}),yield dZ({tableId:a})},jX=e=>function*({doc:{relationshipIds:t,indexIds:n},editor:{selectedMap:i},collections:o}){const l=Vn(o).collection("relationshipEntities").selectByIds(t),r=Vn(o).collection("indexEntities").selectByIds(n);if(e){const t=l.filter((({start:t,end:n})=>t.tableId===e||n.tableId===e)),n=r.filter((({tableId:t})=>t===e));for(const{id:e}of n)yield PZ({id:e});for(const{id:e}of t)yield Hx({id:e});return void(yield $G({id:e}))}const a=Object.entries(i).filter((([,e])=>e===Iv)).map((([e])=>e)),s=Pu(a),c=l.filter((({start:e,end:t})=>s(e.tableId)||s(t.tableId))),u=r.filter((({tableId:e})=>s(e)));for(const{id:e}of u)yield PZ({id:e});for(const{id:e}of c)yield Hx({id:e});for(const e of a)yield $G({id:e})},FX=(e,t)=>function*({doc:{tableIds:n,memoIds:i},collections:o,editor:{drawRelationship:l}}){const r=Vn(o).collection("tableEntities"),a=r.selectByIds(n),s=Vn(o).collection("memoEntities").selectByIds(i);if(t||(yield oZ()),yield lZ({[e]:Iv}),yield QG({id:e,zIndex:Rv(a,s)}),yield dZ({tableId:e}),l)if(l.start){const t=r.selectById(l.start.tableId),n=r.selectById(e);if(!t||!n)return;const i=Vn(o).collection("tableColumnEntities").selectByIds(t.columnIds).filter((({options:e})=>Kg(e,Gg.primaryKey)));if(!i.length)return;const a=i.map((()=>id()));for(let e=0;e<i.length;e++){const t=i[e],o={id:a[e],tableId:n.id};yield[mX(o),XX({...o,value:!0}),fX({...o,value:t.name}),gX({...o,value:t.dataType}),vX({...o,value:t.default}),yX({...o,value:t.comment})]}yield zx({id:id(),relationshipType:l.relationshipType,start:{tableId:t.id,columnIds:i.map((({id:e})=>e))},end:{tableId:n.id,columnIds:a}}),yield ZZ()}else yield zW(e)},UX=e=>function*({editor:{selectedMap:t,focusTable:n},settings:{show:i,columnOrder:o},collections:l}){const r=n&&!Dv(n.focusType),a=Object.entries(t).filter((([,e])=>e===Iv)).map((([e])=>e)).filter((e=>!r||e!==(null==n?void 0:n.tableId)));for(const t of a)for(const n of e){const e={id:id(),tableId:t};yield[mX(e),fX({...e,value:n.name}),gX({...e,value:n.dataType}),vX({...e,value:n.default}),yX({...e,value:n.comment}),XX({...e,value:Kg(n.options,Gg.notNull)}),GX({...e,value:Kg(n.options,Gg.unique)}),ZX({...e,value:Kg(n.options,Gg.autoIncrement)})]}if(!n||!r)return;const s=Vn(l).collection("tableEntities").selectById(n.tableId);if(!s)return;const c=s.columnIds.filter(Pu(n.selectColumnIds));if(0===c.length)return;const u=s.columnIds.slice(s.columnIds.indexOf(c[c.length-1])+1),d=[...c,...u],p=MX(i,o);yield hZ();for(let t=0;t<d.length;t++){const i=d[t],o=e[t];if(!o)break;const l={id:i,tableId:s.id};yield[...p.map((e=>{switch(e){case cg.columnName:return fX({...l,value:o.name});case cg.columnDataType:return gX({...l,value:o.dataType});case cg.columnDefault:return vX({...l,value:o.default});case cg.columnComment:return yX({...l,value:o.comment});case cg.columnAutoIncrement:return ZX({...l,value:Kg(o.options,Gg.autoIncrement)});case cg.columnUnique:return GX({...l,value:Kg(o.options,Gg.unique)});case cg.columnNotNull:return XX({...l,value:Kg(o.options,Gg.notNull)});default:return null}})).filter(Boolean),pZ({tableId:s.id,columnId:i,focusType:n.focusType,$mod:!0,shiftKey:!1})]}const h=e.slice(d.length);for(const e of h){const t=id(),i={id:t,tableId:s.id};yield[mX(i),...p.map((t=>{switch(t){case cg.columnName:return fX({...i,value:e.name});case cg.columnDataType:return gX({...i,value:e.dataType});case cg.columnDefault:return vX({...i,value:e.default});case cg.columnComment:return yX({...i,value:e.comment});case cg.columnAutoIncrement:return ZX({...i,value:Kg(e.options,Gg.autoIncrement)});case cg.columnUnique:return GX({...i,value:Kg(e.options,Gg.unique)});case cg.columnNotNull:return XX({...i,value:Kg(e.options,Gg.notNull)});default:return null}})).filter(Boolean),pZ({tableId:s.id,columnId:t,focusType:n.focusType,$mod:!0,shiftKey:!1})]}},OX={addTableAction$:JX,removeTableAction$:jX,selectTableAction$:FX,pasteTableAction$:UX};function EX(e,t,n,i=[]){const{doc:{relationshipIds:o},collections:l}=t,r=e.pop();return r&&(i.some((({id:e})=>e===r.id))||(i.push(r),Vn(l).collection("relationshipEntities").selectByIds(o).forEach((({start:t,end:i})=>{const o=t.columnIds.indexOf(r.id);if(-1!==o){const t=i.columnIds[o];e.push({id:t,tableId:i.tableId,value:n.value})}else{const o=i.columnIds.indexOf(r.id);if(-1!==o){const i=t.columnIds[o];e.push({id:i,tableId:t.tableId,value:n.value})}}}))),EX(e,t,n,i)),i}const $X=Pu([kv.columnNotNull,kv.columnUnique,kv.columnAutoIncrement]),PX=Pu([kv.columnName,kv.columnDataType,kv.columnDefault,kv.columnComment]),BX=e=>function*({editor:{selectedMap:t}}){if(e){const t=id();return yield mX({id:t,tableId:e}),void(yield pZ({tableId:e,columnId:t,focusType:kv.columnName,$mod:!1,shiftKey:!1}))}const n=Object.entries(t).filter((([,e])=>e===Iv)).map((([e])=>({tableId:e,id:id()})));for(const e of n)yield mX(e);const i=ay(n);i&&(yield pZ({tableId:i.tableId,columnId:i.id,focusType:kv.columnName,$mod:!1,shiftKey:!1}))},AX=(e,t)=>function*(n){const{doc:{relationshipIds:i,indexIds:o},editor:{focusTable:l},collections:r}=n;if(null!=l&&l.columnId){const e=function(e,t){const{collections:n,editor:{focusTable:i}}=e;if(null==i||!i.columnId)return null;const o=Vn(n).collection("tableEntities").selectById(i.tableId);if(!o)return null;const l=o.columnIds.indexOf(i.columnId);if(l<=0)return null;let r=null;for(let e=l;e>=0;e--){const n=o.columnIds[e];if(!t.includes(n)){r=n;break}}return r}(n,t);e?yield pZ({tableId:l.tableId,columnId:e,focusType:l.focusType,$mod:!1,shiftKey:!1}):yield dZ({tableId:l.tableId,focusType:kv.tableName})}const a=Pu(t),s=Vn(r).collection("relationshipEntities").selectByIds(i).filter((({start:t,end:n})=>t.tableId===e&&t.columnIds.some(a)||n.tableId===e&&n.columnIds.some(a))),c=Vn(r).collection("indexEntities").selectByIds(o).filter((t=>t.tableId===e&&Vn(r).collection("indexColumnEntities").selectByIds(t.indexColumnIds).map((({columnId:e})=>e)).some(a)));for(const{id:e}of c)yield PZ({id:e});for(const{id:e}of s)yield Hx({id:e});for(const n of t)yield bX({id:n,tableId:e})},QX=(e,t,n)=>function*({collections:i}){if(!$X(e))return;const o=Vn(i).collection("tableColumnEntities").selectById(n);if(o)switch(e){case kv.columnNotNull:yield XX({id:n,tableId:t,value:!Kg(o.options,Gg.notNull)});break;case kv.columnUnique:yield GX({id:n,tableId:t,value:!Kg(o.options,Gg.unique)});break;case kv.columnAutoIncrement:yield ZX({id:n,tableId:t,value:!Kg(o.options,Gg.autoIncrement)})}},DX=e=>function*(t){const{settings:{relationshipDataTypeSync:n}}=t;let i=[e];n&&(i=EX([e],t,e)),yield i.map(gX)},_X=(e,t,n,i)=>function*({collections:o}){if(!PX(e)||!Vn(o).collection("tableColumnEntities").selectById(n))return;const l={id:n,tableId:t,value:i};switch(e){case kv.columnName:yield fX(l);break;case kv.columnDataType:yield DX(l);break;case kv.columnDefault:yield vX(l);break;case kv.columnComment:yield yX(l)}},qX=(e,t)=>function*({collections:n}){const i=Vn(n).collection("tableColumnEntities").selectById(t);if(!i)return;const o=Kg(i.options,Gg.primaryKey);yield xX({tableId:e,id:t,value:!o})},eI={addColumnAction$:BX,removeColumnAction$:AX,toggleColumnValueAction$:QX,changeColumnDataTypeAction$:DX,changeColumnValueAction$:_X,changeColumnPrimaryKeyAction$:qX};function tI(e){return 9+e.ui.width+8+1}function nI(e){return 25+e.ui.height+8+1}const iI="string",oI="leftParent",lI="rightParent",rI="leftBracket",aI="rightBracket",sI="comma",cI="period",uI="equal",dI="semicolon",pI="'",hI="`",mI=/\s/,bI=/\S/,fI=/;|,|\(|\)|\[|\./,yI="=",gI=".",vI=",",ZI=";",xI="(",GI=")",XI="[",II="]",WI=e=>t=>e===t,kI=e=>t=>e.test(t),VI={doubleQuote:WI('"'),singleQuote:WI(pI),backtick:WI(hI),whiteSpace:kI(mI),string:kI(bI),breakString:kI(fI),equal:WI(yI),period:WI(gI),comma:WI(vI),semicolon:WI(ZI),leftParent:WI(xI),rightParent:WI(GI),leftBracket:WI(XI),rightBracket:WI(II)};const SI=e=>t=>n=>!!t[n]&&t[n].type===e,CI=e=>{const t=e.toUpperCase();return e=>n=>!!e[n]&&e[n].value.toUpperCase()===t},LI=SI(iI),RI=SI(cI),YI=SI(sI),wI=SI(oI),TI=SI(lI),NI=CI("CREATE"),KI=CI("ALTER"),zI=CI("DROP"),HI=CI("USE"),MI=CI("RENAME"),JI=CI("DELETE"),jI=CI("SELECT"),FI=CI("TABLE"),UI=CI("INDEX"),OI=CI("UNIQUE"),EI=CI("ADD"),$I=CI("PRIMARY"),PI=CI("KEY"),BI=CI("CONSTRAINT"),AI=CI("FOREIGN"),QI=CI("NOT"),DI=CI("NULL"),_I=CI("DEFAULT"),qI=CI("COMMENT"),eW=CI("REFERENCES"),tW=CI("ASC"),nW=CI("DESC"),iW=CI("ON"),oW=CI("AUTO_INCREMENT"),lW=CI("AUTOINCREMENT"),rW=CI("IF"),aW=CI("EXISTS"),sW=e=>{const t=oW(e),n=lW(e);return e=>t(e)||n(e)},cW=e=>{const t=NI(e),n=KI(e),i=zI(e),o=HI(e),l=MI(e),r=JI(e),a=jI(e);return e=>t(e)||n(e)||i(e)||o(e)||l(e)||r(e)||a(e)},uW=e=>{const t=NI(e),n=FI(e),i=rW(e),o=QI(e),l=aW(e);return e=>t(e)&&n(e+1)&&i(e+2)&&o(e+3)&&l(e+4)},dW=e=>{const t=NI(e),n=UI(e),i=OI(e);return e=>t(e)&&i(e+1)&&n(e+2)},pW=Array.from(new Set(["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","GEOMETRY","GEOMETRYCOLLECTION","INT","INTEGER","JSON","LINESTRING","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NUMERIC","POINT","POLYGON","REAL","SET","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","YEAR","BIGINT","BINARY","BIT","CHAR","DATE","DATETIME","DATETIME2","DATETIMEOFFSET","DECIMAL","FLOAT","GEOGRAPHY","GEOMETRY","IMAGE","INT","MONEY","NCHAR","NTEXT","NUMERIC","NVARCHAR","REAL","SMALLDATETIME","SMALLINT","SMALLMONEY","SQL_VARIANT","TEXT","TIME","TINYINT","UNIQUEIDENTIFIER","VARBINARY","VARCHAR","XML","BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FLOAT","GEOMETRY","GEOMETRYCOLLECTION","INT","INTEGER","JSON","LINESTRING","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NUMERIC","POINT","POLYGON","SET","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","YEAR","BFILE","BINARY_DOUBLE","BINARY_FLOAT","BLOB","CHAR","CLOB","DATE","DATETIME","LONG RAW","LONG","NCHAR","NCLOB","NUMBER","NVARCHAR2","RAW","TIMESTAMP WITH LOCAL TIME ZONE","TIMESTAMP WITH TIME ZONE","TIMESTAMP","UriType","VARCHAR","VARCHAR2","XMLType","BIGINT","BIGSERIAL","BIT VARYING","BIT","BOOL","BOOLEAN","BOX","BYTEA","CHAR","CHARACTER VARYING","CHARACTER","CIDR","CIRCLE","DATE","DECIMAL","DOUBLE PRECISION","FLOAT4","FLOAT8","INET","INT","INT2","INT4","INT8","INTEGER","INTERVAL","JSON","JSONB","LINE","LSEG","MACADDR","MACADDR8","MONEY","NUMERIC","PATH","PG_LSN","POINT","POLYGON","REAL","SERIAL","SERIAL2","SERIAL4","SERIAL8","SMALLINT","SMALLSERIAL","TEXT","TIME WITH","TIME","TIMESTAMP WITH","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TSQUERY","TSVECTOR","TXID_SNAPSHOT","UUID","VARBIT","VARCHAR","XML","BLOB","INTEGER","NUMERIC","REAL","TEXT"].map((e=>e.toUpperCase())))),hW=e=>{const t=LI(e);return n=>{const i=e[n];return!!i&&(t(n)&&pW.includes(i.value.toUpperCase()))}},mW={createTable:"create.table",createIndex:"create.index",alterTableAddUnique:"alter.table.add.unique",alterTableAddPrimaryKey:"alter.table.add.primaryKey",alterTableAddForeignKey:"alter.table.add.foreignKey"},bW={asc:"ASC",desc:"DESC"};function fW(e,t){const n=cW(e),i=LI(e),o=wI(e),l=RI(e),r=qI(e),a=uW(e),s={type:mW.createTable,name:"",comment:"",columns:[],indexes:[],foreignKeys:[]};for(t.value+=a(t.value)?5:2;t.value<e.length&&!n(t.value);){let n=e[t.value];if(o(t.value)){t.value++;const{columns:n,indexes:i,foreignKeys:o}=yW(e,t);s.columns=n,s.indexes=i,s.foreignKeys=o}else!i(t.value)||s.name?r(t.value)?(n=e[++t.value],i(t.value)&&(s.comment=n.value,t.value++)):t.value++:(s.name=n.value,n=e[++t.value],l(t.value)&&(n=e[++t.value],i(t.value)&&(s.name=n.value,t.value++)))}return s}function yW(e,t){const n=LI(e),i=wI(e),o=TI(e),l=YI(e),r=BI(e),a=UI(e),s=$I(e),c=AI(e),u=sW(e),d=OI(e),p=DI(e),h=QI(e),m=_I(e),b=qI(e),f=nW(e),y=tW(e),g=PI(e),v=hW(e),Z=()=>t.value<e.length,x=[],G=[],X=[],I=[],W=[];let k={name:"",dataType:"",default:"",comment:"",primaryKey:!1,autoIncrement:!1,unique:!1,nullable:!0};for(;Z();){let V=e[t.value];if(!n(t.value)||k.name||r(t.value)||s(t.value)||c(t.value)||d(t.value)||a(t.value)||g(t.value))if(i(t.value)){for(V=e[++t.value];Z()&&!o(t.value);)V=e[++t.value];t.value++}else if(r(t.value))V=e[++t.value],n(t.value)&&t.value++;else if(s(t.value)){if(V=e[++t.value],g(t.value))if(V=e[++t.value],i(t.value)){for(V=e[++t.value];Z()&&!o(t.value);)n(t.value)&&I.push(V.value.toUpperCase()),V=e[++t.value];t.value++}else k.primaryKey=!0}else if(c(t.value)){const n=gW(e,t);n&&X.push(n)}else if(a(t.value)||g(t.value)){if(V=e[++t.value],n(t.value)){const r=V.value,a=[];if(V=e[++t.value],i(t.value)){V=e[++t.value];let i={name:"",sort:bW.asc};for(;Z()&&!o(t.value);)n(t.value)&&!f(t.value)&&!y(t.value)&&(i.name=V.value),f(t.value)&&(i.sort=bW.desc),l(t.value)&&(a.push(i),i={name:"",sort:bW.asc}),V=e[++t.value];!a.includes(i)&&""!==i.name&&a.push(i),a.length&&G.push({name:r,unique:!1,columns:a}),t.value++}}}else if(d(t.value))if(V=e[++t.value],g(t.value)&&(V=e[++t.value]),n(t.value)&&(V=e[++t.value]),i(t.value)){for(V=e[++t.value];Z()&&!o(t.value);)n(t.value)&&W.push(V.value.toUpperCase()),V=e[++t.value];t.value++}else k.unique=!0;else if(h(t.value))V=e[++t.value],p(t.value)&&(k.nullable=!1,t.value++);else if(m(t.value))V=e[++t.value],n(t.value)&&(k.default=V.value,t.value++);else if(b(t.value))V=e[++t.value],n(t.value)&&(k.comment=V.value,t.value++);else if(u(t.value))k.autoIncrement=!0,t.value++;else if(v(t.value)){let n=V.value;if(V=e[++t.value],i(t.value)){for(n+="(",V=e[++t.value];Z()&&!o(t.value);)n+=V.value,V=e[++t.value];n+=")",t.value++}k.dataType=n}else if(l(t.value))(k.name||k.dataType)&&x.push(k),k={name:"",dataType:"",default:"",comment:"",primaryKey:!1,autoIncrement:!1,unique:!1,nullable:!0},t.value++;else{if(o(t.value)){t.value++;break}t.value++}else k.name=V.value,t.value++}return!x.includes(k)&&(k.name||k.dataType)&&x.push(k),x.forEach((e=>{I.includes(e.name.toUpperCase())&&(e.primaryKey=!0),W.includes(e.name.toUpperCase())&&(e.unique=!0)})),{columns:x,indexes:G,foreignKeys:X}}function gW(e,t){const n=LI(e),i=wI(e),o=TI(e),l=eW(e),r=RI(e),a=PI(e),s=()=>t.value<e.length,c={columnNames:[],refTableName:"",refColumnNames:[]};let u=e[++t.value];if(a(t.value)){if(u=e[++t.value],i(t.value)){for(u=e[++t.value];s()&&!o(t.value);)n(t.value)&&c.columnNames.push(u.value),u=e[++t.value];u=e[++t.value]}if(l(t.value)&&(u=e[++t.value],n(t.value)&&(c.refTableName=u.value,u=e[++t.value],r(t.value)&&(u=e[++t.value],n(t.value)&&(c.refTableName=u.value,u=e[++t.value])),i(t.value)))){for(u=e[++t.value];s()&&!o(t.value);)n(t.value)&&c.refColumnNames.push(u.value),u=e[++t.value];u=e[++t.value]}if(c.columnNames.length&&c.columnNames.length===c.refColumnNames.length)return c}return null}function vW(e,t){const n=cW(e),i=LI(e),o=BI(e),l=RI(e),r=FI(e),a=AI(e),s={type:mW.alterTableAddForeignKey,name:"",columnNames:[],refTableName:"",refColumnNames:[]};for(t.value++;t.value<e.length&&!n(t.value);){let n=e[t.value];if(r(t.value))n=e[++t.value],i(t.value)&&(s.name=n.value,n=e[++t.value],l(t.value)&&(n=e[++t.value],i(t.value)&&(s.name=n.value,t.value++)));else if(o(t.value))n=e[++t.value],i(t.value)&&t.value++;else if(a(t.value)){const n=gW(e,t);n&&(s.columnNames=n.columnNames,s.refTableName=n.refTableName,s.refColumnNames=n.refColumnNames)}else t.value++}return s}function ZW(e,t){const n=cW(e),i=LI(e),o=wI(e),l=TI(e),r=BI(e),a=$I(e),s=RI(e),c=PI(e),u=FI(e),d=()=>t.value<e.length,p={type:mW.alterTableAddPrimaryKey,name:"",columnNames:[]};for(t.value++;d()&&!n(t.value);){let n=e[t.value];if(u(t.value))n=e[++t.value],i(t.value)&&(p.name=n.value,n=e[++t.value],s(t.value)&&(n=e[++t.value],i(t.value)&&(p.name=n.value,t.value++)));else if(r(t.value))n=e[++t.value],i(t.value)&&t.value++;else if(a(t.value)){if(n=e[++t.value],c(t.value)&&(n=e[++t.value],o(t.value))){for(n=e[++t.value];d()&&!l(t.value);)i(t.value)&&p.columnNames.push(n.value),n=e[++t.value];n=e[++t.value]}}else t.value++}return p}function xW(e,t){const n=cW(e),i=LI(e),o=BI(e),l=RI(e),r=FI(e),a=OI(e),s=wI(e),c=TI(e),u=()=>t.value<e.length,d={type:mW.alterTableAddUnique,name:"",columnNames:[]};for(t.value++;u()&&!n(t.value);){let n=e[t.value];if(r(t.value))n=e[++t.value],i(t.value)&&(d.name=n.value,n=e[++t.value],l(t.value)&&(n=e[++t.value],i(t.value)&&(d.name=n.value,t.value++)));else if(o(t.value))n=e[++t.value],i(t.value)&&t.value++;else if(a(t.value)){if(n=e[++t.value],s(t.value)){for(n=e[++t.value];u()&&!c(t.value);)i(t.value)&&d.columnNames.push(n.value),n=e[++t.value];t.value++}}else t.value++}return d}function GW(e,t){const n=cW(e),i=OI(e),o=LI(e),l=wI(e),r=TI(e),a=YI(e),s=UI(e),c=iW(e),u=nW(e),d=tW(e),p=dW(e),h=()=>t.value<e.length,m={type:mW.createIndex,name:"",unique:i(t.value+1),tableName:"",columns:[]};for(t.value+=p(t.value)?2:1;h()&&!n(t.value);){let n=e[t.value];if(s(t.value))n=e[++t.value],o(t.value)&&(m.name=n.value);else if(c(t.value)){if(n=e[++t.value],o(t.value)&&(m.tableName=n.value,n=e[++t.value],l(t.value))){n=e[++t.value];let i={name:"",sort:bW.asc};for(;h()&&!r(t.value);)o(t.value)&&!u(t.value)&&!d(t.value)&&(i.name=n.value),u(t.value)&&(i.sort=bW.desc),a(t.value)&&(m.columns.push(i),i={name:"",sort:bW.asc}),n=e[++t.value];!m.columns.includes(i)&&""!==i.name&&m.columns.push(i),t.value++}}else t.value++}return m}function XW(e){const t=[],n={value:0},i=(e=>{const t=NI(e),n=FI(e);return e=>t(e)&&n(e+1)})(e),o=(e=>{const t=NI(e),n=UI(e),i=dW(e);return e=>t(e)&&n(e+1)||i(e)})(e),l=(e=>{const t=KI(e),n=FI(e),i=EI(e),o=$I(e),l=PI(e),r=BI(e);return e=>t(e)&&n(e+1)&&i(e+3)&&o(e+4)&&l(e+5)||t(e)&&n(e+1)&&i(e+3)&&r(e+4)&&o(e+6)&&l(e+7)})(e),r=(e=>{const t=KI(e),n=FI(e),i=EI(e),o=AI(e),l=PI(e),r=BI(e);return e=>t(e)&&n(e+1)&&i(e+3)&&o(e+4)&&l(e+5)||t(e)&&n(e+1)&&i(e+3)&&r(e+4)&&o(e+6)&&l(e+7)})(e),a=(e=>{const t=KI(e),n=FI(e),i=EI(e),o=OI(e),l=BI(e);return e=>t(e)&&n(e+1)&&i(e+3)&&o(e+4)||t(e)&&n(e+1)&&i(e+3)&&l(e+4)&&o(e+6)})(e);for(;n.value<e.length;)i(n.value)?t.push(fW(e,n)):o(n.value)?t.push(GW(e,n)):l(n.value)?t.push(ZW(e,n)):r(n.value)?t.push(vW(e,n)):a(n.value)?t.push(xW(e,n)):n.value++;return t}const IW=e=>XW(function(e){const t=[];let n=0;const i=()=>n<e.length;for(;i();){let o=e[n];if(VI.whiteSpace(o))for(;i()&&VI.whiteSpace(o);)o=e[++n];else if(VI.leftParent(o))t.push({type:oI,value:o}),n++;else if(VI.rightParent(o))t.push({type:lI,value:o}),n++;else if(VI.leftBracket(o))t.push({type:rI,value:o}),n++;else if(VI.rightBracket(o))t.push({type:aI,value:o}),n++;else if(VI.comma(o))t.push({type:sI,value:o}),n++;else if(VI.period(o))t.push({type:cI,value:o}),n++;else if(VI.equal(o))t.push({type:uI,value:o}),n++;else if(VI.semicolon(o))t.push({type:dI,value:o}),n++;else if(VI.doubleQuote(o)){let l="";for(o=e[++n];i()&&!VI.doubleQuote(o);)l+=o,o=e[++n];t.push({type:iI,value:l}),n++}else if(VI.singleQuote(o)){let l="";for(o=e[++n];i()&&!VI.singleQuote(o);)l+=o,o=e[++n];t.push({type:iI,value:l}),n++}else if(VI.backtick(o)){let l="";for(o=e[++n];i()&&!VI.backtick(o);)l+=o,o=e[++n];t.push({type:iI,value:l}),n++}else if(VI.string(o)){let l="";for(;i()&&VI.string(o)&&!VI.breakString(o);)l+=o,o=e[++n];t.push({type:iI,value:l})}else n++}return t}(e));function WW(e,t){for(const n of e)if(n.name.toUpperCase()===t.toUpperCase())return n;return null}function kW(e,t,n){const i=xn({}),o=function(e){const t={tables:[],indexes:[],primaryKeys:[],foreignKeys:[],uniques:[]};for(const n of e)switch(n.type){case mW.createTable:n.name&&t.tables.push(n);break;case mW.createIndex:n.tableName&&n.columns.length&&t.indexes.push(n);break;case mW.alterTableAddPrimaryKey:n.name&&n.columnNames.length&&t.primaryKeys.push(n);break;case mW.alterTableAddForeignKey:n.name&&n.columnNames.length&&n.refTableName&&n.refColumnNames.length&&n.columnNames.length===n.refColumnNames.length&&t.foreignKeys.push(n);break;case mW.alterTableAddUnique:n.name&&n.columnNames.length&&t.uniques.push(n)}return t}(IW(e)),l=function({tables:e,indexes:t,primaryKeys:n,foreignKeys:i,uniques:o}){return t.forEach((t=>{const n=WW(e,t.tableName);n&&n.indexes.push({name:t.name,unique:t.unique,columns:t.columns})})),n.forEach((t=>{const n=WW(e,t.name);n&&t.columnNames.forEach((e=>{const t=WW(n.columns,e);t&&(t.primaryKey=!0)}))})),o.forEach((t=>{const n=WW(e,t.name);n&&t.columnNames.forEach((e=>{const t=WW(n.columns,e);t&&(t.unique=!0)}))})),i.forEach((t=>{const n=WW(e,t.name);n&&n.foreignKeys.push({columnNames:t.columnNames,refTableName:t.refTableName,refColumnNames:t.refColumnNames})})),e}(o),r=uv(100*l.length);return i.settings.width=r,i.settings.height=r,l.forEach((e=>function({doc:e,collections:t},n,{toWidth:i}){const o=FG({name:n.name,comment:n.comment,ui:{widthName:xv(i(n.name)),widthComment:xv(i(n.comment))}});n.columns.forEach((e=>{const n=hX({tableId:o.id,name:e.name,comment:e.comment,dataType:e.dataType,default:e.default,options:(e.autoIncrement?Gg.autoIncrement:0)|(e.primaryKey?Gg.primaryKey:0)|(e.unique?Gg.unique:0)|(e.nullable?0:Gg.notNull),ui:{widthName:xv(i(e.name)),widthComment:xv(i(e.comment)),widthDataType:xv(i(e.dataType)),widthDefault:xv(i(e.default)),keys:e.primaryKey?Xg.primaryKey:0}});o.columnIds.push(n.id),o.seqColumnIds.push(n.id),Vn(t).collection("tableColumnEntities").setOne(n)})),e.tableIds.push(o.id),Vn(t).collection("tableEntities").setOne(o)}(i,e,t))),function({doc:e,collections:t},n){const i=Vn(t).collection("tableEntities").selectByIds(e.tableIds),o=Vn(t).collection("tableColumnEntities");n.forEach((n=>{if(!n.foreignKeys.length)return;const l=WW(i,n.name);if(!l)return;const r=o.selectByIds(l.columnIds);n.foreignKeys.forEach((n=>{const a=WW(i,n.refTableName);if(!a)return;const s=o.selectByIds(a.columnIds),c=[],u=[];n.refColumnNames.forEach((e=>{const t=WW(s,e);t&&c.push(t)})),n.columnNames.forEach((e=>{const t=WW(r,e);t&&(u.push(t),Kg(t.ui.keys,Xg.primaryKey)?t.ui.keys|=Xg.foreignKey:t.ui.keys=Xg.foreignKey)}));const d=Kx({identification:!u.some((e=>!(Kg(e.ui.keys,Xg.primaryKey)&&Kg(e.ui.keys,Xg.foreignKey)))),relationshipType:vg.ZeroN,start:{tableId:a.id,columnIds:c.map((e=>e.id))},end:{tableId:l.id,columnIds:u.map((e=>e.id))}});e.relationshipIds.push(d.id),Vn(t).collection("relationshipEntities").setOne(d)}))}))}(i,l),function({doc:e,collections:t},n){const i=Vn(t).collection("tableEntities").selectByIds(e.tableIds);n.forEach((n=>{n.indexes.forEach((o=>{const l=WW(i,n.name);if(!l)return;const r=Vn(t).collection("tableColumnEntities").selectByIds(l.columnIds),a=[],s=EZ({name:o.name,tableId:l.id,unique:o.unique});o.columns.forEach((e=>{const t=WW(r,e.name);if(!t)return;const n=ix({indexId:s.id,columnId:t.id,orderType:e.sort===bW.asc?Ig.ASC:Ig.DESC});a.push(n)})),0!==a.length&&(a.forEach((e=>{s.indexColumnIds.push(e.id),s.seqIndexColumnIds.push(e.id),Vn(t).collection("indexColumnEntities").setOne(e)})),e.indexIds.push(s.id),Vn(t).collection("indexEntities").setOne(s))}))}))}(i,l),ai(n?n(i):i)}const VW=15;function SW(e){return Object.entries(e).reduce(((e,[t,n])=>(n===Iv?e.tableIds.push(t):n===Wv&&e.memoIds.push(t),e)),{tableIds:[],memoIds:[]})}const CW=e=>function*(){yield aZ(),yield sZ({value:e})},LW=e=>function*(){yield cZ(),yield uZ({value:e})},RW=(e,t)=>function*({editor:{selectedMap:n},settings:{zoomLevel:i}}){const{tableIds:o,memoIds:l}=SW(n),r=e/i,a=t/i;o.length&&(yield OG({ids:o,movementX:r,movementY:a})),l.length&&(yield Gx({ids:l,movementX:r,movementY:a}))},YW=()=>function*(){yield jX(),yield TX()},wW=e=>function*(t){const{doc:{tableIds:n,memoIds:i},collections:o}=t,l={...Vn(o).collection("tableEntities").selectByIds(n).reduce(((n,i)=>{const o=HG(i,t).width,l=JG(i),r=i.ui.x+o/2-VW,a=i.ui.y+l/2-VW;return zg(e,{x:r,y:a,w:VW,h:VW})&&(n[i.id]=Iv),n}),{}),...Vn(o).collection("memoEntities").selectByIds(i).reduce(((t,n)=>{const i=tI(n),o=nI(n),l=n.ui.x+i/2-VW,r=n.ui.y+o/2-VW;return zg(e,{x:l,y:r,w:VW,h:VW})&&(t[n.id]=Wv),t}),{})};yield TW(),by(l)||(yield lZ(l))},TW=()=>function*(){yield oZ(),yield hZ()},NW=(e,t)=>function*(n){const{editor:{focusTable:i}}=n;i&&(e===Vv.Tab&&!t&&(Dv(i.focusType)&&Av(n)&&!jv(n)||!Dv(i.focusType)&&Fv(n)&&Ov(n))?yield BX(i.tableId):yield mZ({moveKey:e,shiftKey:t}))},KW=e=>function*({editor:t}){var n;(null==(n=t.drawRelationship)?void 0:n.relationshipType)===e?yield ZZ():yield gZ({relationshipType:e})},zW=e=>function*({collections:t}){const n=Vn(t).collection("tableEntities").selectById(e);if(n){if(!Vn(t).collection("tableColumnEntities").selectByIds(n.columnIds).some((e=>Kg(e.options,Gg.primaryKey)))){const t=id();yield mX({tableId:e,id:t}),yield xX({tableId:e,id:t,value:!0}),yield pZ({tableId:e,columnId:t,focusType:kv.columnName,$mod:!1,shiftKey:!1})}yield vZ({tableId:e})}},HW=e=>function*({editor:{selectedMap:t},collections:n}){const{tableIds:i,memoIds:o}=SW(t),l=Vn(n).collection("tableEntities").selectByIds(i),r=Vn(n).collection("memoEntities").selectByIds(o);yield l.map((t=>AG({id:t.id,color:e,prevColor:t.ui.color}))),yield r.map((t=>kx({id:t.id,color:e,prevColor:t.ui.color})))},MW=e=>function*({settings:t},n){yield CW(kW(e,n,(e=>(e.settings={...e.settings,...vy(uf(t),["width","height","scrollTop","scrollLeft","zoomLevel"])},e)))),yield DG()},JW=e=>function*({editor:{focusTable:t}}){!t||!t.columnId||(yield IZ({tableId:t.tableId,columnIds:e?[...t.selectColumnIds]:[t.columnId]}))},jW=(e,t)=>function*({editor:{draggableColumn:n},collections:i}){if(!n||0===n.columnIds.length)return;const{tableId:o,columnIds:l}=n,r=Vn(i).collection("tableEntities"),a=r.selectById(o);if(!a)return;if(t===o){const t=a.columnIds.indexOf(l[0]);if(-1===t)return;const n=a.columnIds.indexOf(e);if(-1===n)return;const i=l.map((t=>IX({tableId:o,id:t,targetId:e})));return t<n&&i.reverse(),void(yield i)}if(!r.selectById(t))return;const s=Vn(i).collection("tableColumnEntities").selectByIds(l);if(0===s.length)return;yield AX(o,l);const c=s.map((()=>id()));for(let n=0;n<s.length;n++){const i=s[n],o=c[n],l={id:o,tableId:t};yield[mX(l),fX({...l,value:i.name}),gX({...l,value:i.dataType}),vX({...l,value:i.default}),yX({...l,value:i.comment}),xX({...l,value:Kg(i.options,Gg.primaryKey)}),XX({...l,value:Kg(i.options,Gg.notNull)}),GX({...l,value:Kg(i.options,Gg.unique)}),ZX({...l,value:Kg(i.options,Gg.autoIncrement)}),IX({...l,targetId:e}),pZ({tableId:t,columnId:o,focusType:kv.columnName,$mod:!0,shiftKey:!1})]}yield IZ({tableId:t,columnIds:c})},FW={loadJsonAction$:CW,initialLoadJsonAction$:LW,moveAllAction$:RW,removeSelectedAction$:YW,dragSelectAction$:wW,unselectAllAction$:TW,focusMoveTableAction$:NW,drawStartRelationshipAction$:KW,drawStartAddRelationshipAction$:zW,changeColorAllAction$:HW,loadSchemaSQLAction$:MW,dragstartColumnAction$:JW,dragoverColumnAction$:jW},UW=e=>function*(){yield $Z({id:id(),tableId:e})},OW=e=>function*({collections:t}){const n=Vn(t).collection("indexEntities").selectById(e);n&&(yield AZ({id:e,tableId:n.tableId,value:!n.unique}))},EW={addIndexAction$:UW,changeIndexUniqueAction$:OW},$W=(e,t)=>function*({collections:n}){const i=Vn(n).collection("indexEntities").selectById(e);if(!i)return;const o=Vn(n).collection("indexColumnEntities").selectByIds(i.seqIndexColumnIds).find((e=>e.columnId===t));o?yield lx({id:o.id,indexId:e,tableId:i.tableId,columnId:t}):yield lx({id:id(),indexId:e,tableId:i.tableId,columnId:t})},PW=(e,t)=>function*({collections:n}){const i=Vn(n).collection("indexEntities").selectById(e);if(!i)return;const o=Vn(n).collection("indexColumnEntities").selectByIds(i.indexColumnIds).filter((e=>e.columnId===t));for(const t of o)yield rx({id:t.id,indexId:e,tableId:i.tableId})},BW=e=>function*({collections:t}){const n=Vn(t).collection("indexColumnEntities").selectById(e);n&&(yield sx({id:e,indexId:n.indexId,columnId:n.columnId,value:n.orderType===Ig.ASC?Ig.DESC:Ig.ASC}))},AW=(e,t)=>function*({collections:n}){if(e===t)return;const i=Vn(n).collection("indexColumnEntities").selectById(e);if(!i)return;const o=Vn(n).collection("indexEntities").selectById(i.indexId);o&&(yield ax({id:e,indexId:i.indexId,tableId:o.tableId,targetId:t}))},QW={addIndexColumnAction$:$W,removeIndexColumnAction$:PW,changeIndexColumnOrderTypeAction$:BW,moveIndexColumnAction$:AW};function DW({editor:{viewport:e},settings:{scrollLeft:t,scrollTop:n,zoomLevel:i,width:o,height:l}},r){const a=Hg(o,l,i),s=Hg(o,l,r),c=(a.w-s.w)/2,u=(a.h-s.h)/2,d=o/2,p=l/2,h=-1*t+e.width/2,m=(p-(-1*n+e.height/2))/p;return{movementX:Cy(-1*c*((d-h)/d),4),movementY:Cy(-1*u*m,4)}}const _W=e=>function*(t){const{settings:{scrollLeft:n,scrollTop:i}}=t,o=dv(e),{movementX:l,movementY:r}=DW(t,o);yield cG({value:e}),yield dG({scrollLeft:n+l,scrollTop:i+r})},qW=e=>function*(t){const{settings:{zoomLevel:n}}=t,i=dv(n+e),{movementX:o,movementY:l}=DW(t,i);yield uG({value:e}),yield pG({movementX:o,movementY:l})},ek={changeZoomLevelAction$:_W,streamZoomLevelAction$:qW},tk=Object.freeze({...CZ,...FW,...DZ,...EW,...ux,...QW,...Lx,...KX,...jx,...kG,...ek,...qG,...OX,...kX,...eI}),nk=["table.add","table.move","table.moveTo","table.remove","table.changeName","table.changeComment","table.changeColor","table.sort","column.add","column.remove","column.changeName","column.changeComment","column.changeDataType","column.changeDefault","column.changeAutoIncrement","column.changePrimaryKey","column.changeUnique","column.changeNotNull","column.move","relationship.add","relationship.remove","relationship.changeType","index.add","index.remove","index.changeName","index.changeUnique","indexColumn.add","indexColumn.remove","indexColumn.move","indexColumn.changeOrderType","memo.add","memo.move","memo.moveTo","memo.remove","memo.changeValue","memo.changeColor","memo.resize","settings.changeDatabaseName","settings.resize","settings.changeZoomLevel","settings.streamZoomLevel","settings.scrollTo","settings.streamScrollTo","settings.changeShow","settings.changeDatabase","settings.changeCanvasType","settings.changeLanguage","settings.changeTableNameCase","settings.changeColumnNameCase","settings.changeBracketType","settings.changeRelationshipDataTypeSync","settings.changeRelationshipOptimization","settings.changeColumnOrder","settings.changeMaxWidthComment","settings.changeIgnoreSaveSettings","editor.loadJson","editor.clear"],ik=Pu(["settings.changeZoomLevel","settings.streamZoomLevel","settings.scrollTo","settings.streamScrollTo","settings.changeDatabase","settings.changeCanvasType","settings.changeLanguage","settings.changeTableNameCase","settings.changeColumnNameCase","settings.changeBracketType"]),ok=[...nk.filter((e=>!ik(e)))],lk=["editor.sharedMouseTracker"],rk=[...nk,...lk],ak=["table.move","memo.move"],sk=["table.changeColor","memo.changeColor"],ck=["settings.streamZoomLevel","settings.streamScrollTo"],uk=[...Object.keys(CX)],dk=[...Object.keys(SX),...uk],pk=Fu((e=>!!e.length)),hk=e=>{const t=Pu(e);return e=>new uu((n=>e.subscribe({next:e=>n.next(e.filter((e=>t(e.type)))),error:e=>n.error(e),complete:()=>n.complete()}))).pipe(pk)},mk="@@none-stream",bk=(e,t=[],n=Ou(200))=>{const i=((e,t)=>n=>{const i=t.find((([,e])=>e(n)));return i?i[0]:e(n)?n:mk})(Pu(e),t.map((([e,t])=>[e,Pu(t)])));return e=>new uu((t=>e.subscribe({next:e=>{const n=e.reduce(((e,t)=>{const n=i(t.type);return e[n]||(e[n]=[]),e[n].push(t),e}),{});Object.values(n).forEach((e=>t.next(e)))},error:e=>t.error(e),complete:()=>t.complete()}))).pipe(pk,Eu((e=>i(e[0].type))),Ju((e=>e.key===mk?e:e.pipe(Uu(e.pipe(n)),Mu((e=>e.flat()))))))},fk=Pu(uk),yk=Pu(lk),gk=e=>e.pipe(bk(lk,[],$u(100)),Mu((e=>{var t;return yk(null==(t=e[0])?void 0:t.type)?[ay(e)]:e})),bk(uk,[["@@move",ak],["@@scroll",ck],["@@color",sk]]),Mu((e=>{var t;if(!fk(null==(t=e[0])?void 0:t.type))return e;const n=[];for(const t of Object.keys(CX))CX[t]([],n,e);return n.length?n:e})));function vk(e,t){return function({context:e,state:t,reducers:n,enableObservable:i=!0}){const o=i?Vo(t):t,l=Si(),r=Si();let a=Wc(kc);const s=t=>{hi(Reflect.get(n,t.type,n),o,t,e)},c=(...t)=>{const n=Ic(o,e,t);l.next(n)},u=l.subscribe((e=>{const t=a(function*(e){yield e}(e));for(const e of t)r.next(e)})),d=r.subscribe((e=>e.forEach(s)));return{context:e,state:o,dispatch:(...e)=>{mi((()=>c(...e)))},dispatchSync:c,subscribe:r.subscribe,pipe:(...e)=>(a=Wc(...e,kc),()=>{a=Wc(kc)}),destroy:()=>{u(),d()}}}({context:e,state:{...xn({}),editor:Cv()},reducers:{...SZ,..._G,...WX,...Cx,...Jx,...WG,...QZ,...cx},enableObservable:t??!0})}
/*!
 * @dineug/go
 * @version 0.1.8 | Sun Dec 24 2023
 * @author SeungHwan-Lee <dineug2@gmail.com>
 * @license MIT
 */function Zk(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function xk(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n}var Gk,Xk,Ik,Wk;const kk={limit:-1,leading:!1,trailing:!1};class Vk{constructor(e){Gk.add(this),Xk.set(this,[]),Ik.set(this,void 0),xk(this,Ik,Object.assign({},kk,{...e}),"f")}isEmpty(){return!Zk(this,Xk,"f").length}put(e){Zk(this,Xk,"f").push(e),Zk(this,Gk,"m",Wk).call(this)}take(){return Zk(this,Xk,"f").shift()}flush(){const e=Zk(this,Xk,"f");return xk(this,Xk,[],"f"),e}drop(e){const t=Zk(this,Xk,"f").findIndex(e);if(-1===t)return!1;const n=Zk(this,Xk,"f").slice();return n.splice(t,1),xk(this,Xk,n,"f"),!0}}Xk=new WeakMap,Ik=new WeakMap,Gk=new WeakSet,Wk=function(){-1!==Zk(this,Ik,"f").limit&&Zk(this,Ik,"f").limit<Zk(this,Xk,"f").length&&(Zk(this,Ik,"f").trailing?Zk(this,Xk,"f").pop():Zk(this,Ik,"f").leading?Zk(this,Xk,"f").shift():Zk(this,Xk,"f").pop())};const Sk=e=>new Vk(e);var Ck,Lk,Rk,Yk,wk;const Tk=Symbol.for("https://github.com/dineug/go.git#closed");class Nk{get closed(){return Zk(this,Yk,"f")}constructor(e=Sk()){Ck.add(this),Lk.set(this,void 0),Rk.set(this,Sk()),Yk.set(this,!1),xk(this,Lk,e,"f")}put(e){Zk(this,Yk,"f")||(Zk(this,Lk,"f").put(e),Zk(this,Ck,"m",wk).call(this))}take(e,t){return Zk(this,Yk,"f")?(null==t||t(Tk),()=>!1):(Zk(this,Rk,"f").put([e,t]),Zk(this,Ck,"m",wk).call(this),()=>Zk(this,Rk,"f").drop((([t])=>t===e)))}flush(e,t){Zk(this,Yk,"f")?null==t||t(Tk):e(Zk(this,Lk,"f").flush())}close(){xk(this,Yk,!0,"f"),Zk(this,Rk,"f").flush().forEach((([e,t])=>null==t?void 0:t(Tk)))}}Lk=new WeakMap,Rk=new WeakMap,Yk=new WeakMap,Ck=new WeakSet,wk=function(){if(Zk(this,Rk,"f").isEmpty()||Zk(this,Lk,"f").isEmpty())return;const[e]=Zk(this,Rk,"f").take(),t=Zk(this,Lk,"f").take();null==e||e(t)};const Kk=e=>new Nk(e),zk=e=>t=>typeof t===e,Hk=zk("object"),Mk=zk("function"),{isArray:Jk}=Array,jk=e=>Hk(e)&&!(e=>null===e)(e)&&!Jk(e),Fk=e=>jk(e)&&Mk(e.then),Uk=e=>jk(e)&&Mk(e.next),Ok=e=>jk(e)&&Mk(e.next)&&Mk(e.throw)&&Mk(e.return),Ek=Symbol.for("https://github.com/dineug/go.git#cancel"),$k=Symbol.for("https://github.com/dineug/go.git#attachCancel"),Pk=(e,t)=>(Reflect.set(e,$k,t),e),Bk=e=>e===Ek,Ak=e=>{if(jk(e)){const t=Reflect.get(e,$k);null==t||t()}return oV((()=>new Promise(((e,t)=>t(Ek)))))},Qk=e=>oV((function*(){let t=()=>!1;const n=new Promise(((n,i)=>{t=e.take(n,i)}));return Pk(n,(()=>{t()})),yield n})),Dk=e=>oV((()=>new Promise((t=>setTimeout(t,e))))),_k=Symbol.for("https://github.com/dineug/go.git#kill"),qk=e=>e===_k,eV=(e,t)=>{e.put(t)},tV=(e,t)=>oV((function*(){for(;;){const n=yield Qk(e);oV(t,n)}})),nV={leading:!0,trailing:!1},iV=(e,t,n,i)=>oV((function*(){const o=Object.assign({},nV,{...i});let l,r,a=-1;for(;;){const i=yield Qk(e);r=i,-1===a&&(o.leading&&(l=i,oV(t,i)),a=setTimeout((()=>{o.trailing&&(!o.leading||l!==r)&&oV(t,r),a=-1}),n))}}));function oV(e,...t){let n=!1,i=null;const o=new Promise((async(o,l)=>{let r=null;i=()=>{l(Ek),null==r||r.forEach(Ak),r=null};try{const i=e(...t);if(Fk(i))return r=[i],o(await i);if(!Uk(i))return o(i);let l,a=await i.next();for(;!n&&!a.done;){try{const e=lV(a.value);r=Jk(e)?e:[e],l=await(Jk(e)?Promise.all(e):e),a=await i.next(l)}catch(e){if(qk(e))throw e;Ok(i)&&(a=await i.throw(e))}l=void 0,r=null}o(a.value)}catch(e){Bk(e)&&(n=!0),l(e)}}));return o.catch((()=>{})),Pk(o,(()=>{n=!0,null==i||i()})),o}function lV(e){return Fk(e)?e:Uk(e)?oV((()=>e)):Mk(e)?oV(e):Jk(e)?e.map((e=>oV((()=>e)))):Promise.resolve()}const rV={left:"left",right:"right",top:"top",bottom:"bottom"},aV=Object.values(rV);Pu([rV.top,rV.bottom,rV.left,rV.right]);const sV=50,cV=35,uV=10,dV=16,pV=26;function hV(e,t){const n=HG(t,e).width,i=JG(t),{x:o,y:l}=t.ui;return{width:n,height:i,top:{x:o+n/2,y:l},bottom:{x:o+n/2,y:l+i},left:{x:o,y:l+i/2},right:{x:o+n,y:l+i/2},lt:{x:o,y:l},rt:{x:o+n,y:l},lb:{x:o,y:l+i},rb:{x:o+n,y:l+i}}}function mV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const bV={[rV.top]:xg.top,[rV.bottom]:xg.bottom,[rV.left]:xg.left,[rV.right]:xg.right};function fV(e){const{doc:{tableIds:t,relationshipIds:n},collections:i}=e,o=Pu(t),l=Vn(i).collection("tableEntities"),r=Vn(i).collection("relationshipEntities").selectByIds(n).filter((({start:e,end:t})=>o(e.tableId)&&o(t.tableId))),a=new Map;for(const t of r){const{start:n,end:i}=t,o=l.selectById(n.tableId),r=l.selectById(i.tableId);if(o&&r)if(n.tableId===i.tableId){n.direction=xg.top,i.direction=xg.right;const l=yV(e,a,o);n.x=l.objectPoint.rt.x-20,n.y=l.objectPoint.rt.y,i.x=l.objectPoint.rt.x,i.y=l.objectPoint.rt.y+20,l.top.set(t.id,t),l.right.set(t.id,t)}else{const n=yV(e,a,o),i=yV(e,a,r),[l,s]=gV(n.objectPoint,i.objectPoint,t);n[l].set(t.id,t),i[s].set(t.id,t)}}for(const e of a.values())for(const t of aV){const n=t;e[n].size<2||vV(n,e)}}function yV(e,t,n){let i=t.get(n.id);return i||(i={table:n,objectPoint:hV(e,n),top:new Map,bottom:new Map,left:new Map,right:new Map},t.set(n.id,i)),i}function gV(e,t,n){const i=[rV.bottom,rV.bottom];let o=mV(e.bottom,t.bottom);n.start.x=e.bottom.x,n.start.y=e.bottom.y,n.end.x=t.bottom.x,n.end.y=t.bottom.y,n.start.direction=xg.bottom,n.end.direction=xg.bottom;for(const l of aV)for(const r of aV){const a=l,s=r,c=mV(e[a],t[s]);o<=c||(o=c,i[0]=a,i[1]=s,n.start.x=e[a].x,n.start.y=e[a].y,n.start.direction=bV[a],n.end.x=t[s].x,n.end.y=t[s].y,n.end.direction=bV[s])}return i}function vV(e,t){const n=function(e,t){const n=t[e].size,i={x:t.objectPoint.width/n,y:t.objectPoint.height/n},o={x:i.x/2,y:i.y/2},l=[],r=[];if(e===rV.left||e===rV.right){let e=t.objectPoint.lt.y-o.y;for(let t=0;t<n;t++)e+=i.y,r.push(e)}else if(e===rV.top||e===rV.bottom){let e=t.objectPoint.lt.x-o.x;for(let t=0;t<n;t++)e+=i.x,l.push(e)}return{xArray:l,yArray:r}}(e,t),i=function(e,t){const n=[],i=[],o=[],l=e===rV.top||e===rV.bottom;for(const o of t[e].values()){const{start:l,end:r}=o;l.tableId===r.tableId?e===rV.top?(n.push(o.start),i.push(o.end)):e===rV.right&&(n.push(o.end),i.push(o.start)):o.start.tableId===t.table.id?(n.push(o.start),i.push(o.end)):(n.push(o.end),i.push(o.start))}return i.forEach(((e,t)=>{o.push({start:n[t],end:i[t],distance:l?e.x:e.y})})),o.sort(((e,t)=>e.distance-t.distance))}(e,t);e===rV.left||e===rV.right?n.yArray.forEach(((e,t)=>{i[t].start.y=e})):(e===rV.top||e===rV.bottom)&&n.xArray.forEach(((e,t)=>{i[t].start.x=e}))}const ZV=[[[bX,xX,sZ,uZ],function*(e,t){yield iV(e,(function*(){const{doc:e,collections:n}=t,i=Vn(n).collection("relationshipEntities"),o=i.selectByIds(e.relationshipIds);for(const{id:e,end:t,identification:l}of o){const o=Vn(n).collection("tableEntities").selectById(t.tableId);if(!o)continue;const r=Pu(o.columnIds),a=Vn(n).collection("tableColumnEntities").selectByIds(t.columnIds).filter((e=>r(e.id)));if(!a.length)continue;const s=a.every((e=>Kg(e.options,Gg.primaryKey)));s!==l&&i.updateOne(e,(e=>{e.identification=s}))}}),10,{leading:!1,trailing:!0})}],[[bX,XX,sZ,uZ],function*(e,t){yield iV(e,(function*(){const{doc:e,collections:n}=t,i=Vn(n).collection("relationshipEntities"),o=i.selectByIds(e.relationshipIds);for(const{id:e,end:t,startRelationshipType:l}of o){const o=Vn(n).collection("tableEntities").selectById(t.tableId);if(!o)continue;const r=Pu(o.columnIds),a=Vn(n).collection("tableColumnEntities").selectByIds(t.columnIds).filter((e=>r(e.id)));if(!a.length)continue;const s=a.every((e=>Kg(e.options,Gg.notNull)))?Zg.dash:Zg.ring;s!==l&&i.updateOne(e,(e=>{e.startRelationshipType=s}))}}),10,{leading:!1,trailing:!0})}],[[hG,XG,zx,Gx,OG,EG,PG,BG,mX,bX,fX,yX,gX,vX,DG],function*(e,t){yield iV(e,(function*(){fV(t)}),5,{leading:!1,trailing:!0})}]],xV=[[[sZ,uZ],function*(e,t,n){yield iV(e,(function*(){jG(t,n),fV(t)}),5,{leading:!1,trailing:!0})}]],GV=[[[xX],function*(e,t){yield tV(e,(function*({payload:{id:e}}){const{collections:n}=t,i=Vn(n).collection("tableColumnEntities"),o=i.selectById(e);!o||!Kg(o.options,Gg.primaryKey)||Kg(o.options,Gg.notNull)||i.updateOne(e,(e=>{e.options=e.options|Gg.notNull}))}))}],[[zx],function*(e,t){yield tV(e,(function*({payload:{id:e,end:n}}){const{doc:{relationshipIds:i},collections:o}=t;i.includes(e)&&Vn(o).collection("tableColumnEntities").updateMany(n.columnIds,(e=>{e.ui.keys=e.ui.keys|Xg.foreignKey}))}))}],[[Hx],function*(e,t){yield tV(e,(function*({payload:{id:e}}){const{doc:{relationshipIds:n},collections:i}=t;if(n.includes(e))return;const o=Vn(i).collection("relationshipEntities").selectById(e);o&&Vn(i).collection("tableColumnEntities").updateMany(o.end.columnIds,(e=>{e.ui.keys=e.ui.keys&~Xg.foreignKey}))}))}],[[sZ,uZ],function*(e,t){yield tV(e,(function*(){const{doc:e,collections:n}=t,i=Vn(n).collection("relationshipEntities").selectByIds(e.relationshipIds),o=Vn(n).collection("tableEntities").selectByIds(e.tableIds),l=new Set,r=Vn(n).collection("tableColumnEntities");for(const{end:e}of i){const t=r.selectByIds(e.columnIds);for(const e of t)e.ui.keys=e.ui.keys|Xg.foreignKey,l.add(e.id)}for(const e of o){const t=r.selectByIds(e.columnIds);for(const e of t)Kg(e.ui.keys,Xg.foreignKey)&&!l.has(e.id)&&(e.ui.keys=e.ui.keys&~Xg.foreignKey)}}))}]],XV=[...xV,...GV,...ZV];class IV extends Error{}class WV extends IV{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class kV extends IV{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class VV extends IV{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class SV extends IV{}class CV extends IV{constructor(e){super(`Invalid unit ${e}`)}}class LV extends IV{}class RV extends IV{constructor(){super("Zone is an abstract class")}}const YV="numeric",wV="short",TV="long",NV={year:YV,month:YV,day:YV},KV={year:YV,month:wV,day:YV},zV={year:YV,month:wV,day:YV,weekday:wV},HV={year:YV,month:TV,day:YV},MV={year:YV,month:TV,day:YV,weekday:TV},JV={hour:YV,minute:YV},jV={hour:YV,minute:YV,second:YV},FV={hour:YV,minute:YV,second:YV,timeZoneName:wV},UV={hour:YV,minute:YV,second:YV,timeZoneName:TV},OV={hour:YV,minute:YV,hourCycle:"h23"},EV={hour:YV,minute:YV,second:YV,hourCycle:"h23"},$V={hour:YV,minute:YV,second:YV,hourCycle:"h23",timeZoneName:wV},PV={hour:YV,minute:YV,second:YV,hourCycle:"h23",timeZoneName:TV},BV={year:YV,month:YV,day:YV,hour:YV,minute:YV},AV={year:YV,month:YV,day:YV,hour:YV,minute:YV,second:YV},QV={year:YV,month:wV,day:YV,hour:YV,minute:YV},DV={year:YV,month:wV,day:YV,hour:YV,minute:YV,second:YV},_V={year:YV,month:wV,day:YV,weekday:wV,hour:YV,minute:YV},qV={year:YV,month:TV,day:YV,hour:YV,minute:YV,timeZoneName:wV},eS={year:YV,month:TV,day:YV,hour:YV,minute:YV,second:YV,timeZoneName:wV},tS={year:YV,month:TV,day:YV,weekday:TV,hour:YV,minute:YV,timeZoneName:TV},nS={year:YV,month:TV,day:YV,weekday:TV,hour:YV,minute:YV,second:YV,timeZoneName:TV};class iS{get type(){throw new RV}get name(){throw new RV}get ianaName(){return this.name}get isUniversal(){throw new RV}offsetName(e,t){throw new RV}formatOffset(e,t){throw new RV}offset(e){throw new RV}equals(e){throw new RV}get isValid(){throw new RV}}let oS=null;class lS extends iS{static get instance(){return null===oS&&(oS=new lS),oS}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return gC(e,t,n)}formatOffset(e,t){return GC(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let rS={};const aS={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let sS={};class cS extends iS{static create(e){return sS[e]||(sS[e]=new cS(e)),sS[e]}static resetCache(){sS={},rS={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=cS.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return gC(e,t,n,this.name)}formatOffset(e,t){return GC(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=function(e){return rS[e]||(rS[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),rS[e]}(this.name);let[i,o,l,r,a,s,c]=n.formatToParts?function(e,t){const n=e.formatToParts(t),i=[];for(let e=0;e<n.length;e++){const{type:t,value:o}=n[e],l=aS[t];"era"===t?i[l]=o:DS(l)||(i[l]=parseInt(o,10))}return i}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,o,l,r,a,s,c,u]=i;return[r,o,l,a,s,c,u]}(n,t);"BC"===r&&(i=1-Math.abs(i));let u=+t;const d=u%1e3;return u-=d>=0?d:1e3+d,(mC({year:i,month:o,day:l,hour:24===a?0:a,minute:s,second:c,millisecond:0})-u)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let uS={};let dS={};function pS(e,t={}){const n=JSON.stringify([e,t]);let i=dS[n];return i||(i=new Intl.DateTimeFormat(e,t),dS[n]=i),i}let hS={};let mS={};let bS=null;let fS={};function yS(e,t,n,i){const o=e.listingMode();return"error"===o?null:"en"===o?n(t):i(t)}class gS{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:o,...l}=n;if(!t||Object.keys(l).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let i=hS[n];return i||(i=new Intl.NumberFormat(e,t),hS[n]=i),i}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return rC(this.floor?Math.floor(e):uC(e,3),this.padTo)}}class vS{constructor(e,t,n){let i;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&cS.create(n).valid?(i=n,this.dt=e):(i="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=pS(t,o)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class ZS{constructor(e,t,n){this.opts={style:"long",...n},!t&&eC()&&(this.rtf=function(e,t={}){const{base:n,...i}=t,o=JSON.stringify([e,i]);let l=mS[o];return l||(l=new Intl.RelativeTimeFormat(e,t),mS[o]=l),l}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",i=!1){const o={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&l){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${o[e][0]}`;case-1:return n?"yesterday":`last ${o[e][0]}`;case 0:return n?"today":`this ${o[e][0]}`}}const r=Object.is(t,-0)||t<0,a=Math.abs(t),s=1===a,c=o[e],u=i?s?c[1]:c[2]||c[1]:s?o[e][0]:e;return r?`${a} ${u} ago`:`in ${a} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const xS={firstDay:1,minimalDays:4,weekend:[6,7]};class GS{static fromOpts(e){return GS.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,i,o=!1){const l=e||NS.defaultLocale,r=l||(o?"en-US":bS||(bS=(new Intl.DateTimeFormat).resolvedOptions().locale,bS)),a=t||NS.defaultNumberingSystem,s=n||NS.defaultOutputCalendar,c=oC(i)||NS.defaultWeekSettings;return new GS(r,a,s,c,l)}static resetCache(){bS=null,dS={},hS={},mS={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:i}={}){return GS.create(e,t,n,i)}constructor(e,t,n,i,o){const[l,r,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,i;try{t=pS(e).resolvedOptions(),i=e}catch{const o=e.substring(0,n);t=pS(o).resolvedOptions(),i=o}const{numberingSystem:o,calendar:l}=t;return[i,o,l]}}(e);this.locale=l,this.numberingSystem=t||r||null,this.outputCalendar=n||a||null,this.weekSettings=i,this.intl=function(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function(e){return(!e.numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?GS.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,oC(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return yS(this,e,VC,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=function(e){const t=[];for(let n=1;n<=12;n++){const i=wR.utc(2009,n,1);t.push(e(i))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[i][e]}))}weekdays(e,t=!1){return yS(this,e,RC,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=function(e){const t=[];for(let n=1;n<=7;n++){const i=wR.utc(2016,11,13+n);t.push(e(i))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[i][e]}))}meridiems(){return yS(this,void 0,(()=>YC),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[wR.utc(2016,11,13,9),wR.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return yS(this,e,KC,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[wR.utc(-40,1,1),wR.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const i=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return i?i.value:null}numberFormatter(e={}){return new gS(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new vS(e,this.intl,t)}relFormatter(e={}){return new ZS(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let i=uS[n];return i||(i=new Intl.ListFormat(e,t),uS[n]=i),i}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:tC()?function(e){let t=fS[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,fS[e]=t}return t}(this.locale):xS}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let XS=null;class IS extends iS{static get utcInstance(){return null===XS&&(XS=new IS(0)),XS}static instance(e){return 0===e?IS.utcInstance:new IS(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new IS(vC(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${GC(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${GC(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return GC(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class WS extends iS{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function kS(e,t){if(DS(e)||null===e)return t;if(e instanceof iS)return e;if(function(e){return"string"==typeof e}(e)){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?lS.instance:"utc"===n||"gmt"===n?IS.utcInstance:IS.parseSpecifier(n)||cS.create(e)}return _S(e)?IS.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new WS(e)}let VS,SS=()=>Date.now(),CS="system",LS=null,RS=null,YS=null,wS=60,TS=null;class NS{static get now(){return SS}static set now(e){SS=e}static set defaultZone(e){CS=e}static get defaultZone(){return kS(CS,lS.instance)}static get defaultLocale(){return LS}static set defaultLocale(e){LS=e}static get defaultNumberingSystem(){return RS}static set defaultNumberingSystem(e){RS=e}static get defaultOutputCalendar(){return YS}static set defaultOutputCalendar(e){YS=e}static get defaultWeekSettings(){return TS}static set defaultWeekSettings(e){TS=oC(e)}static get twoDigitCutoffYear(){return wS}static set twoDigitCutoffYear(e){wS=e%100}static get throwOnInvalid(){return VS}static set throwOnInvalid(e){VS=e}static resetCaches(){GS.resetCache(),cS.resetCache()}}class KS{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const zS=[0,31,59,90,120,151,181,212,243,273,304,334],HS=[0,31,60,91,121,152,182,213,244,274,305,335];function MS(e,t){return new KS("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function JS(e,t,n){const i=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const o=i.getUTCDay();return 0===o?7:o}function jS(e,t,n){return n+(dC(e)?HS:zS)[t-1]}function FS(e,t){const n=dC(e)?HS:zS,i=n.findIndex((e=>e<t));return{month:i+1,day:t-n[i]}}function US(e,t){return(e-t+7)%7+1}function OS(e,t=4,n=1){const{year:i,month:o,day:l}=e,r=jS(i,o,l),a=US(JS(i,o,l),n);let s,c=Math.floor((r-a+14-t)/7);return c<1?(s=i-1,c=fC(s,t,n)):c>fC(i,t,n)?(s=i+1,c=1):s=i,{weekYear:s,weekNumber:c,weekday:a,...XC(e)}}function ES(e,t=4,n=1){const{weekYear:i,weekNumber:o,weekday:l}=e,r=US(JS(i,1,t),n),a=pC(i);let s,c=7*o+l-r-7+t;c<1?(s=i-1,c+=pC(s)):c>a?(s=i+1,c-=pC(i)):s=i;const{month:u,day:d}=FS(s,c);return{year:s,month:u,day:d,...XC(e)}}function $S(e){const{year:t,month:n,day:i}=e;return{year:t,ordinal:jS(t,n,i),...XC(e)}}function PS(e){const{year:t,ordinal:n}=e,{month:i,day:o}=FS(t,n);return{year:t,month:i,day:o,...XC(e)}}function BS(e,t){if(DS(e.localWeekday)&&DS(e.localWeekNumber)&&DS(e.localWeekYear))return{minDaysInFirstWeek:4,startOfWeek:1};if(!DS(e.weekday)||!DS(e.weekNumber)||!DS(e.weekYear))throw new SV("Cannot mix locale-based week fields with ISO-based week fields");return DS(e.localWeekday)||(e.weekday=e.localWeekday),DS(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),DS(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}function AS(e){const t=qS(e.year),n=lC(e.month,1,12),i=lC(e.day,1,hC(e.year,e.month));return t?n?!i&&MS("day",e.day):MS("month",e.month):MS("year",e.year)}function QS(e){const{hour:t,minute:n,second:i,millisecond:o}=e,l=lC(t,0,23)||24===t&&0===n&&0===i&&0===o,r=lC(n,0,59),a=lC(i,0,59),s=lC(o,0,999);return l?r?a?!s&&MS("millisecond",o):MS("second",i):MS("minute",n):MS("hour",t)}function DS(e){return typeof e>"u"}function _S(e){return"number"==typeof e}function qS(e){return"number"==typeof e&&e%1==0}function eC(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function tC(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function nC(e,t,n){if(0!==e.length)return e.reduce(((e,i)=>{const o=[t(i),i];return e&&n(e[0],o[0])===e[0]?e:o}),null)[1]}function iC(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oC(e){if(null==e)return null;if("object"!=typeof e)throw new LV("Week settings must be an object");if(!lC(e.firstDay,1,7)||!lC(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!lC(e,1,7))))throw new LV("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function lC(e,t,n){return qS(e)&&e>=t&&e<=n}function rC(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function aC(e){if(!DS(e)&&null!==e&&""!==e)return parseInt(e,10)}function sC(e){if(!DS(e)&&null!==e&&""!==e)return parseFloat(e)}function cC(e){if(!DS(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function uC(e,t,n=!1){const i=10**t;return(n?Math.trunc:Math.round)(e*i)/i}function dC(e){return e%4==0&&(e%100!=0||e%400==0)}function pC(e){return dC(e)?366:365}function hC(e,t){const n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?dC(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function mC(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function bC(e,t,n){return-US(JS(e,1,t),n)+t-1}function fC(e,t=4,n=1){const i=bC(e,t,n),o=bC(e+1,t,n);return(pC(e)-i+o)/7}function yC(e){return e>99?e:e>NS.twoDigitCutoffYear?1900+e:2e3+e}function gC(e,t,n,i=null){const o=new Date(e),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(l.timeZone=i);const r={timeZoneName:t,...l},a=new Intl.DateTimeFormat(n,r).formatToParts(o).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function vC(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const i=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-i:i)}function ZC(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new LV(`Invalid unit value ${e}`);return t}function xC(e,t){const n={};for(const i in e)if(iC(e,i)){const o=e[i];if(null==o)continue;n[t(i)]=ZC(o)}return n}function GC(e,t){const n=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),o=e>=0?"+":"-";switch(t){case"short":return`${o}${rC(n,2)}:${rC(i,2)}`;case"narrow":return`${o}${n}${i>0?`:${i}`:""}`;case"techie":return`${o}${rC(n,2)}${rC(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function XC(e){return function(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}(e,["hour","minute","second","millisecond"])}const IC=["January","February","March","April","May","June","July","August","September","October","November","December"],WC=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],kC=["J","F","M","A","M","J","J","A","S","O","N","D"];function VC(e){switch(e){case"narrow":return[...kC];case"short":return[...WC];case"long":return[...IC];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const SC=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],CC=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],LC=["M","T","W","T","F","S","S"];function RC(e){switch(e){case"narrow":return[...LC];case"short":return[...CC];case"long":return[...SC];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const YC=["AM","PM"],wC=["Before Christ","Anno Domini"],TC=["BC","AD"],NC=["B","A"];function KC(e){switch(e){case"narrow":return[...NC];case"short":return[...TC];case"long":return[...wC];default:return null}}function zC(e,t){let n="";for(const i of e)i.literal?n+=i.val:n+=t(i.val);return n}const HC={D:NV,DD:KV,DDD:HV,DDDD:MV,t:JV,tt:jV,ttt:FV,tttt:UV,T:OV,TT:EV,TTT:$V,TTTT:PV,f:BV,ff:QV,fff:qV,ffff:tS,F:AV,FF:DV,FFF:eS,FFFF:nS};class MC{static create(e,t={}){return new MC(e,t)}static parseFormat(e){let t=null,n="",i=!1;const o=[];for(let l=0;l<e.length;l++){const r=e.charAt(l);"'"===r?(n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),t=null,n="",i=!i):i||r===t?n+=r:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=r,t=r)}return n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return HC[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return rC(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),i=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,o=(t,n)=>this.loc.extract(e,t,n),l=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",r=()=>n?function(e){return YC[e.hour<12?0:1]}(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(t,i)=>n?function(e,t){return VC(t)[e.month-1]}(e,t):o(i?{month:t}:{month:t,day:"numeric"},"month"),s=(t,i)=>n?function(e,t){return RC(t)[e.weekday-1]}(e,t):o(i?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=MC.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return KC(t)[e.year<0?0:1]}(e,t):o({era:t},"era");return zC(MC.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return l({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return l({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return l({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return r();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return s("short",!0);case"cccc":return s("long",!0);case"ccccc":return s("narrow",!0);case"EEE":return s("short",!1);case"EEEE":return s("long",!1);case"EEEEE":return s("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=MC.parseFormat(t),o=i.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]);return zC(i,(e=>t=>{const i=n(t);return i?this.num(e.get(i),t.length):t})(e.shiftTo(...o.map(n).filter((e=>e)))))}}const JC=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function jC(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function FC(...e){return t=>e.reduce((([e,n,i],o)=>{const[l,r,a]=o(t,i);return[{...e,...l},r||n,a]}),[{},null,1]).slice(0,2)}function UC(e,...t){if(null==e)return[null,null];for(const[n,i]of t){const t=n.exec(e);if(t)return i(t)}return[null,null]}function OC(...e){return(t,n)=>{const i={};let o;for(o=0;o<e.length;o++)i[e[o]]=aC(t[n+o]);return[i,null,n+o]}}const EC=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,$C=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,PC=RegExp(`${$C.source}${`(?:${EC.source}?(?:\\[(${JC.source})\\])?)?`}`),BC=RegExp(`(?:T${PC.source})?`),AC=OC("weekYear","weekNumber","weekDay"),QC=OC("year","ordinal"),DC=RegExp(`${$C.source} ?(?:${EC.source}|(${JC.source}))?`),_C=RegExp(`(?: ${DC.source})?`);function qC(e,t,n){const i=e[t];return DS(i)?n:aC(i)}function eL(e,t){return[{hours:qC(e,t,0),minutes:qC(e,t+1,0),seconds:qC(e,t+2,0),milliseconds:cC(e[t+3])},null,t+4]}function tL(e,t){const n=!e[t]&&!e[t+1],i=vC(e[t+1],e[t+2]);return[{},n?null:IS.instance(i),t+3]}function nL(e,t){return[{},e[t]?cS.create(e[t]):null,t+1]}const iL=RegExp(`^T?${$C.source}$`),oL=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function lL(e){const[t,n,i,o,l,r,a,s,c]=e,u="-"===t[0],d=s&&"-"===s[0],p=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:p(sC(n)),months:p(sC(i)),weeks:p(sC(o)),days:p(sC(l)),hours:p(sC(r)),minutes:p(sC(a)),seconds:p(sC(s),"-0"===s),milliseconds:p(cC(c),d)}]}const rL={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function aL(e,t,n,i,o,l,r){const a={year:2===t.length?yC(aC(t)):aC(t),month:WC.indexOf(n)+1,day:aC(i),hour:aC(o),minute:aC(l)};return r&&(a.second=aC(r)),e&&(a.weekday=e.length>3?SC.indexOf(e)+1:CC.indexOf(e)+1),a}const sL=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function cL(e){const[,t,n,i,o,l,r,a,s,c,u,d]=e,p=aL(t,o,i,n,l,r,a);let h;return h=s?rL[s]:c?0:vC(u,d),[p,new IS(h)]}const uL=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,dL=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,pL=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function hL(e){const[,t,n,i,o,l,r,a]=e;return[aL(t,o,i,n,l,r,a),IS.utcInstance]}function mL(e){const[,t,n,i,o,l,r,a]=e;return[aL(t,a,n,i,o,l,r),IS.utcInstance]}const bL=jC(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,BC),fL=jC(/(\d{4})-?W(\d\d)(?:-?(\d))?/,BC),yL=jC(/(\d{4})-?(\d{3})/,BC),gL=jC(PC),vL=FC((function(e,t){return[{year:qC(e,t),month:qC(e,t+1,1),day:qC(e,t+2,1)},null,t+3]}),eL,tL,nL),ZL=FC(AC,eL,tL,nL),xL=FC(QC,eL,tL,nL),GL=FC(eL,tL,nL);const XL=FC(eL);const IL=jC(/(\d{4})-(\d\d)-(\d\d)/,_C),WL=jC(DC),kL=FC(eL,tL,nL);const VL="Invalid Duration",SL={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},CL={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...SL},LL=365.2425,RL=30.436875,YL={years:{quarters:4,months:12,weeks:LL/7,days:LL,hours:24*LL,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:LL/28,days:LL/4,hours:24*LL/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:RL/7,days:RL,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...SL},wL=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],TL=wL.slice(0).reverse();function NL(e,t,n=!1){const i={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new HL(i)}function KL(e,t){let n=t.milliseconds??0;for(const i of TL.slice(1))t[i]&&(n+=t[i]*e[i].milliseconds);return n}function zL(e,t){const n=KL(e,t)<0?-1:1;wL.reduceRight(((i,o)=>{if(DS(t[o]))return i;if(i){const l=t[i]*n,r=e[o][i],a=Math.floor(l/r);t[o]+=a*n,t[i]-=a*r*n}return o}),null),wL.reduce(((n,i)=>{if(DS(t[i]))return n;if(n){const o=t[n]%1;t[n]-=o,t[i]+=o*e[n][i]}return i}),null)}class HL{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?YL:CL;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||GS.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return HL.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new LV("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new HL({values:xC(e,HL.normalizeUnit),loc:GS.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(_S(e))return HL.fromMillis(e);if(HL.isDuration(e))return e;if("object"==typeof e)return HL.fromObject(e);throw new LV(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return UC(e,[oL,lL])}(e);return n?HL.fromObject(n,t):HL.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return UC(e,[iL,XL])}(e);return n?HL.fromObject(n,t):HL.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new LV("need to specify a reason the Duration is invalid");const n=e instanceof KS?e:new KS(e,t);if(NS.throwOnInvalid)throw new VV(n);return new HL({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new CV(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?MC.create(this.loc,n).formatDurationFromString(this,e):VL}toHuman(e={}){if(!this.isValid)return VL;const t=wL.map((t=>{const n=this.values[t];return DS(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(e+=uC(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},wR.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?KL(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=HL.fromDurationLike(e),n={};for(const e of wL)(iC(t.values,e)||iC(this.values,e))&&(n[e]=t.get(e)+this.get(e));return NL(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=HL.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=ZC(e(this.values[n],n));return NL(this,{values:t},!0)}get(e){return this[HL.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return NL(this,{values:{...this.values,...xC(e,HL.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){return NL(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return zL(this.matrix,e),NL(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=function(e){const t={};for(const[n,i]of Object.entries(e))0!==i&&(t[n]=i);return t}(this.normalize().shiftToAll().toObject());return NL(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>HL.normalizeUnit(e)));const t={},n={},i=this.toObject();let o;for(const l of wL)if(e.indexOf(l)>=0){o=l;let e=0;for(const t in n)e+=this.matrix[t][l]*n[t],n[t]=0;_S(i[l])&&(e+=i[l]);const r=Math.trunc(e);t[l]=r,n[l]=(1e3*e-1e3*r)/1e3}else _S(i[l])&&(n[l]=i[l]);for(const e in n)0!==n[e]&&(t[o]+=e===o?n[e]:n[e]/this.matrix[o][e]);return zL(this.matrix,t),NL(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return NL(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const n of wL)if(!t(this.values[n],e.values[n]))return!1;return!0}}const ML="Invalid Interval";class JL{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new LV("need to specify a reason the Interval is invalid");const n=e instanceof KS?e:new KS(e,t);if(NS.throwOnInvalid)throw new kV(n);return new JL({invalid:n})}static fromDateTimes(e,t){const n=TR(e),i=TR(t),o=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?JL.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:JL.invalid("missing or invalid end"):JL.invalid("missing or invalid start")}(n,i);return o??new JL({start:n,end:i})}static after(e,t){const n=HL.fromDurationLike(t),i=TR(e);return JL.fromDateTimes(i,i.plus(n))}static before(e,t){const n=HL.fromDurationLike(t),i=TR(e);return JL.fromDateTimes(i.minus(n),i)}static fromISO(e,t){const[n,i]=(e||"").split("/",2);if(n&&i){let e,o,l,r;try{e=wR.fromISO(n,t),o=e.isValid}catch{o=!1}try{l=wR.fromISO(i,t),r=l.isValid}catch{r=!1}if(o&&r)return JL.fromDateTimes(e,l);if(o){const n=HL.fromISO(i,t);if(n.isValid)return JL.after(e,n)}else if(r){const e=HL.fromISO(n,t);if(e.isValid)return JL.before(l,e)}}return JL.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let i;return i=null!=t&&t.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,i=i.startOf(e,t),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?JL.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(TR).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s:i}=this,o=0;for(;i<this.e;){const e=t[o]||this.e,l=+e>+this.e?this.e:e;n.push(JL.fromDateTimes(i,l)),i=l,o+=1}return n}splitBy(e){const t=HL.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:i}=this,o=1;const l=[];for(;i<this.e;){const e=this.start.plus(t.mapUnits((e=>e*o)));n=+e>+this.e?this.e:e,l.push(JL.fromDateTimes(i,n)),i=n,o+=1}return l}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:JL.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return JL.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const i=[],o=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),l=Array.prototype.concat(...o).sort(((e,t)=>e.time-t.time));for(const e of l)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&i.push(JL.fromDateTimes(t,e.time)),t=null);return JL.merge(i)}difference(...e){return JL.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ML}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=NV,t={}){return this.isValid?MC.create(this.s.loc.clone(t),e).formatInterval(this):ML}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ML}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ML}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ML}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:ML}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):HL.invalid(this.invalidReason)}mapEndpoints(e){return JL.fromDateTimes(e(this.s),e(this.e))}}class jL{static hasDST(e=NS.defaultZone){const t=wR.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return cS.isValidZone(e)}static normalizeZone(e){return kS(e,NS.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||GS.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||GS.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||GS.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||GS.create(t,n,o)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||GS.create(t,n,o)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||GS.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||GS.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return GS.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return GS.create(t,null,"gregory").eras(e)}static features(){return{relative:eC(),localeWeek:tC()}}}function FL(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(t)-n(e);return Math.floor(HL.fromMillis(i).as("days"))}function UL(e,t,n,i){let[o,l,r,a]=function(e,t,n){const i=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=FL(e,t);return(n-n%7)/7}],["days",FL]],o={},l=e;let r,a;for(const[s,c]of i)n.indexOf(s)>=0&&(r=s,o[s]=c(e,t),a=l.plus(o),a>t?(o[s]--,(e=l.plus(o))>t&&(a=e,o[s]--,e=l.plus(o))):e=a);return[e,o,a,r]}(e,t,n);const s=t-o,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(r<t&&(r=o.plus({[a]:1})),r!==o&&(l[a]=(l[a]||0)+s/(r-o)));const u=HL.fromObject(l,i);return c.length>0?HL.fromMillis(s,i).shiftTo(...c).plus(u):u}const OL={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},EL={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},$L=OL.hanidec.replace(/[\[|\]]/g,"").split("");function PL({numberingSystem:e},t=""){return new RegExp(`${OL[e||"latn"]}${t}`)}const BL="missing Intl.DateTimeFormat.formatToParts support";function AL(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(-1!==e[n].search(OL.hanidec))t+=$L.indexOf(e[n]);else for(const e in EL){const[n,o]=EL[e];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}return t}(e))}}const QL="[  ]",DL=new RegExp(QL,"g");function _L(e){return e.replace(/\./g,"\\.?").replace(DL,QL)}function qL(e){return e.replace(/\./g,"").replace(DL," ").toLowerCase()}function eR(e,t){return null===e?null:{regex:RegExp(e.map(_L).join("|")),deser:([n])=>e.findIndex((e=>qL(n)===qL(e)))+t}}function tR(e,t){return{regex:e,deser:([,e,t])=>vC(e,t),groups:t}}function nR(e){return{regex:e,deser:([e])=>e}}function iR(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}const oR={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let lR=null;function rR(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=sR(MC.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}function aR(e,t,n){const i=rR(MC.parseFormat(n),e),o=i.map((t=>function(e,t){const n=PL(t),i=PL(t,"{2}"),o=PL(t,"{3}"),l=PL(t,"{4}"),r=PL(t,"{6}"),a=PL(t,"{1,2}"),s=PL(t,"{1,3}"),c=PL(t,"{1,6}"),u=PL(t,"{1,9}"),d=PL(t,"{2,4}"),p=PL(t,"{4,6}"),h=e=>({regex:RegExp(iR(e.val)),deser:([e])=>e,literal:!0}),m=(m=>{if(e.literal)return h(m);switch(m.val){case"G":return eR(t.eras("short"),0);case"GG":return eR(t.eras("long"),0);case"y":return AL(c);case"yy":case"kk":return AL(d,yC);case"yyyy":case"kkkk":return AL(l);case"yyyyy":return AL(p);case"yyyyyy":return AL(r);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return AL(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return AL(i);case"MMM":return eR(t.months("short",!0),1);case"MMMM":return eR(t.months("long",!0),1);case"LLL":return eR(t.months("short",!1),1);case"LLLL":return eR(t.months("long",!1),1);case"o":case"S":return AL(s);case"ooo":case"SSS":return AL(o);case"u":return nR(u);case"uu":return nR(a);case"uuu":case"E":case"c":return AL(n);case"a":return eR(t.meridiems(),0);case"EEE":return eR(t.weekdays("short",!1),1);case"EEEE":return eR(t.weekdays("long",!1),1);case"ccc":return eR(t.weekdays("short",!0),1);case"cccc":return eR(t.weekdays("long",!0),1);case"Z":case"ZZ":return tR(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return tR(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return nR(/[a-z_+-/]{1,256}?/i);case" ":return nR(/[^\S\n\r]/);default:return h(m)}})(e)||{invalidReason:BL};return m.token=e,m}(t,e))),l=o.find((e=>e.invalidReason));if(l)return{input:t,tokens:i,invalidReason:l.invalidReason};{const[e,n]=function(e){return[`^${e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,e]}(o),l=RegExp(e,"i"),[r,a]=function(e,t,n){const i=e.match(t);if(i){const e={};let t=1;for(const o in n)if(iC(n,o)){const l=n[o],r=l.groups?l.groups+1:1;!l.literal&&l.token&&(e[l.token.val[0]]=l.deser(i.slice(t,t+r))),t+=r}return[i,e]}return[i,{}]}(t,l,n),[s,c,u]=a?function(e){let t,n=null;return DS(e.z)||(n=cS.create(e.z)),DS(e.Z)||(n||(n=new IS(e.Z)),t=e.Z),DS(e.q)||(e.M=3*(e.q-1)+1),DS(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),DS(e.u)||(e.S=cC(e.u)),[Object.keys(e).reduce(((t,n)=>{const i=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return i&&(t[i]=e[n]),t}),{}),n,t]}(a):[null,null,void 0];if(iC(a,"a")&&iC(a,"H"))throw new SV("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:r,matches:a,result:s,zone:c,specificOffset:u}}}function sR(e,t){if(!e)return null;const n=MC.create(t,e).dtFormatter((lR||(lR=wR.fromMillis(1555555555555)),lR)),i=n.formatToParts(),o=n.resolvedOptions();return i.map((t=>function(e,t,n){const{type:i,value:o}=e;if("literal"===i){const e=/^\s+$/.test(o);return{literal:!e,val:e?" ":o}}const l=t[i];let r=i;"hour"===i&&(r=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=oR[r];if("object"==typeof a&&(a=a[l]),a)return{literal:!1,val:a}}(t,e,o)))}const cR="Invalid DateTime",uR=864e13;function dR(e){return new KS("unsupported zone",`the zone "${e.name}" is not supported`)}function pR(e){return null===e.weekData&&(e.weekData=OS(e.c)),e.weekData}function hR(e){return null===e.localWeekData&&(e.localWeekData=OS(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function mR(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new wR({...n,...t,old:n})}function bR(e,t,n){let i=e-60*t*1e3;const o=n.offset(i);if(t===o)return[i,t];i-=60*(o-t)*1e3;const l=n.offset(i);return o===l?[i,o]:[e-60*Math.min(o,l)*1e3,Math.max(o,l)]}function fR(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function yR(e,t,n){return bR(mC(e),t,n)}function gR(e,t){const n=e.o,i=e.c.year+Math.trunc(t.years),o=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),l={...e.c,year:i,month:o,day:Math.min(e.c.day,hC(i,o))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},r=HL.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=mC(l);let[s,c]=bR(a,n,e.zone);return 0!==r&&(s+=r,c=e.zone.offset(s)),{ts:s,o:c}}function vR(e,t,n,i,o,l){const{setZone:r,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const i=t||a,o=wR.fromObject(e,{...n,zone:i,specificOffset:l});return r?o:o.setZone(a)}return wR.invalid(new KS("unparsable",`the input "${o}" can't be parsed as ${i}`))}function ZR(e,t,n=!0){return e.isValid?MC.create(GS.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function xR(e,t){const n=e.c.year>9999||e.c.year<0;let i="";return n&&e.c.year>=0&&(i+="+"),i+=rC(e.c.year,n?6:4),t?(i+="-",i+=rC(e.c.month),i+="-",i+=rC(e.c.day)):(i+=rC(e.c.month),i+=rC(e.c.day)),i}function GR(e,t,n,i,o,l){let r=rC(e.c.hour);return t?(r+=":",r+=rC(e.c.minute),(0!==e.c.millisecond||0!==e.c.second||!n)&&(r+=":")):r+=rC(e.c.minute),(0!==e.c.millisecond||0!==e.c.second||!n)&&(r+=rC(e.c.second),(0!==e.c.millisecond||!i)&&(r+=".",r+=rC(e.c.millisecond,3))),o&&(e.isOffsetFixed&&0===e.offset&&!l?r+="Z":e.o<0?(r+="-",r+=rC(Math.trunc(-e.o/60)),r+=":",r+=rC(Math.trunc(-e.o%60))):(r+="+",r+=rC(Math.trunc(e.o/60)),r+=":",r+=rC(Math.trunc(e.o%60)))),l&&(r+="["+e.zone.ianaName+"]"),r}const XR={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},IR={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},WR={ordinal:1,hour:0,minute:0,second:0,millisecond:0},kR=["year","month","day","hour","minute","second","millisecond"],VR=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],SR=["year","ordinal","hour","minute","second","millisecond"];function CR(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new CV(e);return t}(e)}}function LR(e,t){const n=kS(t.zone,NS.defaultZone),i=GS.fromObject(t),o=NS.now();let l,r;if(DS(e.year))l=o;else{for(const t of kR)DS(e[t])&&(e[t]=XR[t]);const t=AS(e)||QS(e);if(t)return wR.invalid(t);const i=n.offset(o);[l,r]=yR(e,i,n)}return new wR({ts:l,zone:n,loc:i,o:r})}function RR(e,t,n){const i=!!DS(n.round)||n.round,o=(e,o)=>(e=uC(e,i||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,o)),l=i=>n.calendary?t.hasSame(e,i)?0:t.startOf(i).diff(e.startOf(i),i).get(i):t.diff(e,i).get(i);if(n.unit)return o(l(n.unit),n.unit);for(const e of n.units){const t=l(e);if(Math.abs(t)>=1)return o(t,e)}return o(e>t?-0:0,n.units[n.units.length-1])}function YR(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}class wR{constructor(e){const t=e.zone||NS.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new KS("invalid input"):null)||(t.isValid?null:dR(t));this.ts=DS(e.ts)?NS.now():e.ts;let i=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,o]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);i=fR(this.ts,e),n=Number.isNaN(i.year)?new KS("invalid input"):null,i=n?null:i,o=n?null:e}this._zone=t,this.loc=e.loc||GS.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new wR({})}static local(){const[e,t]=YR(arguments),[n,i,o,l,r,a,s]=t;return LR({year:n,month:i,day:o,hour:l,minute:r,second:a,millisecond:s},e)}static utc(){const[e,t]=YR(arguments),[n,i,o,l,r,a,s]=t;return e.zone=IS.utcInstance,LR({year:n,month:i,day:o,hour:l,minute:r,second:a,millisecond:s},e)}static fromJSDate(e,t={}){const n=function(e){return"[object Date]"===Object.prototype.toString.call(e)}(e)?e.valueOf():NaN;if(Number.isNaN(n))return wR.invalid("invalid input");const i=kS(t.zone,NS.defaultZone);return i.isValid?new wR({ts:n,zone:i,loc:GS.fromObject(t)}):wR.invalid(dR(i))}static fromMillis(e,t={}){if(_S(e))return e<-uR||e>uR?wR.invalid("Timestamp out of range"):new wR({ts:e,zone:kS(t.zone,NS.defaultZone),loc:GS.fromObject(t)});throw new LV(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(_S(e))return new wR({ts:1e3*e,zone:kS(t.zone,NS.defaultZone),loc:GS.fromObject(t)});throw new LV("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=kS(t.zone,NS.defaultZone);if(!n.isValid)return wR.invalid(dR(n));const i=GS.fromObject(t),o=xC(e,CR),{minDaysInFirstWeek:l,startOfWeek:r}=BS(o,i),a=NS.now(),s=DS(t.specificOffset)?n.offset(a):t.specificOffset,c=!DS(o.ordinal),u=!DS(o.year),d=!DS(o.month)||!DS(o.day),p=u||d,h=o.weekYear||o.weekNumber;if((p||c)&&h)throw new SV("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new SV("Can't mix ordinal dates with month/day");const m=h||o.weekday&&!p;let b,f,y=fR(a,s);m?(b=VR,f=IR,y=OS(y,l,r)):c?(b=SR,f=WR,y=$S(y)):(b=kR,f=XR);let g=!1;for(const e of b){DS(o[e])?o[e]=g?f[e]:y[e]:g=!0}const v=m?function(e,t=4,n=1){const i=qS(e.weekYear),o=lC(e.weekNumber,1,fC(e.weekYear,t,n)),l=lC(e.weekday,1,7);return i?o?!l&&MS("weekday",e.weekday):MS("week",e.weekNumber):MS("weekYear",e.weekYear)}(o,l,r):c?function(e){const t=qS(e.year),n=lC(e.ordinal,1,pC(e.year));return t?!n&&MS("ordinal",e.ordinal):MS("year",e.year)}(o):AS(o),Z=v||QS(o);if(Z)return wR.invalid(Z);const x=m?ES(o,l,r):c?PS(o):o,[G,X]=yR(x,s,n),I=new wR({ts:G,zone:n,o:X,loc:i});return o.weekday&&p&&e.weekday!==I.weekday?wR.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${I.toISO()}`):I}static fromISO(e,t={}){const[n,i]=function(e){return UC(e,[bL,vL],[fL,ZL],[yL,xL],[gL,GL])}(e);return vR(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,i]=function(e){return UC(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[sL,cL])}(e);return vR(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,i]=function(e){return UC(e,[uL,hL],[dL,hL],[pL,mL])}(e);return vR(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(DS(e)||DS(t))throw new LV("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:o=null}=n,l=GS.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[r,a,s,c]=function(e,t,n){const{result:i,zone:o,specificOffset:l,invalidReason:r}=aR(e,t,n);return[i,o,l,r]}(l,e,t);return c?wR.invalid(c):vR(r,a,n,`format ${t}`,e,s)}static fromString(e,t,n={}){return wR.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,i]=function(e){return UC(e,[IL,vL],[WL,kL])}(e);return vR(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new LV("need to specify a reason the DateTime is invalid");const n=e instanceof KS?e:new KS(e,t);if(NS.throwOnInvalid)throw new WV(n);return new wR({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=sR(e,GS.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return rR(MC.parseFormat(e),GS.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?pR(this).weekYear:NaN}get weekNumber(){return this.isValid?pR(this).weekNumber:NaN}get weekday(){return this.isValid?pR(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?hR(this).weekday:NaN}get localWeekNumber(){return this.isValid?hR(this).weekNumber:NaN}get localWeekYear(){return this.isValid?hR(this).weekYear:NaN}get ordinal(){return this.isValid?$S(this.c).ordinal:NaN}get monthShort(){return this.isValid?jL.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?jL.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?jL.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?jL.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=mC(this.c),i=this.zone.offset(n-e),o=this.zone.offset(n+e),l=this.zone.offset(n-i*t),r=this.zone.offset(n-o*t);if(l===r)return[this];const a=n-l*t,s=n-r*t,c=fR(a,l),u=fR(s,r);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[mR(this,{ts:a}),mR(this,{ts:s})]:[this]}get isInLeapYear(){return dC(this.year)}get daysInMonth(){return hC(this.year,this.month)}get daysInYear(){return this.isValid?pC(this.year):NaN}get weeksInWeekYear(){return this.isValid?fC(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?fC(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:i}=MC.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(IS.instance(e),t)}toLocal(){return this.setZone(NS.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=kS(e,NS.defaultZone)).equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[i]=yR(n,t,e)}return mR(this,{ts:i,zone:e})}return wR.invalid(dR(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return mR(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=xC(e,CR),{minDaysInFirstWeek:n,startOfWeek:i}=BS(t,this.loc),o=!DS(t.weekYear)||!DS(t.weekNumber)||!DS(t.weekday),l=!DS(t.ordinal),r=!DS(t.year),a=!DS(t.month)||!DS(t.day),s=r||a,c=t.weekYear||t.weekNumber;if((s||l)&&c)throw new SV("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&l)throw new SV("Can't mix ordinal dates with month/day");let u;o?u=ES({...OS(this.c,n,i),...t},n,i):DS(t.ordinal)?(u={...this.toObject(),...t},DS(t.day)&&(u.day=Math.min(hC(u.year,u.month),u.day))):u=PS({...$S(this.c),...t});const[d,p]=yR(u,this.o,this.zone);return mR(this,{ts:d,o:p})}plus(e){if(!this.isValid)return this;return mR(this,gR(this,HL.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return mR(this,gR(this,HL.fromDurationLike(e).negate()))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},i=HL.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===i)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===i){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?MC.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):cR}toLocaleString(e=NV,t={}){return this.isValid?MC.create(this.loc.clone(t),e).formatDateTime(this):cR}toLocaleParts(e={}){return this.isValid?MC.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;const l="extended"===e;let r=xR(this,l);return r+="T",r+=GR(this,l,t,n,i,o),r}toISODate({format:e="extended"}={}){return this.isValid?xR(this,"extended"===e):null}toISOWeekDate(){return ZR(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:o=!1,format:l="extended"}={}){return this.isValid?(i?"T":"")+GR(this,"extended"===l,t,e,n,o):null}toRFC2822(){return ZR(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ZR(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?xR(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),ZR(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():cR}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return HL.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=function(e){return Array.isArray(e)?e:[e]}(t).map(HL.normalizeUnit),l=e.valueOf()>this.valueOf(),r=UL(l?this:e,l?e:this,o,i);return l?r.negate():r}diffNow(e="milliseconds",t={}){return this.diff(wR.now(),e,t)}until(e){return this.isValid?JL.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(t,n)<=i&&i<=o.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||wR.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),RR(t,this.plus(n),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?RR(e.base||wR.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(wR.isDateTime))throw new LV("min requires all arguments be DateTimes");return nC(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(wR.isDateTime))throw new LV("max requires all arguments be DateTimes");return nC(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:i=null,numberingSystem:o=null}=n;return aR(GS.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return wR.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return NV}static get DATE_MED(){return KV}static get DATE_MED_WITH_WEEKDAY(){return zV}static get DATE_FULL(){return HV}static get DATE_HUGE(){return MV}static get TIME_SIMPLE(){return JV}static get TIME_WITH_SECONDS(){return jV}static get TIME_WITH_SHORT_OFFSET(){return FV}static get TIME_WITH_LONG_OFFSET(){return UV}static get TIME_24_SIMPLE(){return OV}static get TIME_24_WITH_SECONDS(){return EV}static get TIME_24_WITH_SHORT_OFFSET(){return $V}static get TIME_24_WITH_LONG_OFFSET(){return PV}static get DATETIME_SHORT(){return BV}static get DATETIME_SHORT_WITH_SECONDS(){return AV}static get DATETIME_MED(){return QV}static get DATETIME_MED_WITH_SECONDS(){return DV}static get DATETIME_MED_WITH_WEEKDAY(){return _V}static get DATETIME_FULL(){return qV}static get DATETIME_FULL_WITH_SECONDS(){return eS}static get DATETIME_HUGE(){return tS}static get DATETIME_HUGE_WITH_SECONDS(){return nS}}function TR(e){if(wR.isDateTime(e))return e;if(e&&e.valueOf&&_S(e.valueOf()))return wR.fromJSDate(e);if(e&&"object"==typeof e)return wR.fromObject(e);throw new LV(`Unknown datetime argument: ${e}, of type ${typeof e}`)}function NR({collections:e,lww:t},{tableIds:n,tableColumnIds:i,relationshipIds:o,indexIds:l,indexColumnIds:r,memoIds:a}){Vn(e).collection("tableEntities").removeMany(n),Vn(e).collection("tableColumnEntities").removeMany(i),Vn(e).collection("relationshipEntities").removeMany(o),Vn(e).collection("indexEntities").removeMany(l),Vn(e).collection("indexColumnEntities").removeMany(r),Vn(e).collection("memoEntities").removeMany(a),[...n,...i,...o,...l,...r,...a].forEach((e=>Reflect.deleteProperty(t,e)))}const KR=Pu(["tableEntities","tableColumnEntities","relationshipEntities","indexEntities","indexColumnEntities","memoEntities"]);class zR{async run(e){const t=xn(JSON.parse(e)),{doc:{tableIds:n,memoIds:i,indexIds:o,relationshipIds:l},collections:r,lww:a}=t,s=Pu(n),c=Pu(i),u=Pu(o),d=Pu(l),p=HR(wR.now()),h=Vn(r).collection("tableEntities"),m=Vn(r).collection("tableColumnEntities"),b=Vn(r).collection("indexEntities"),f=Vn(r).collection("indexColumnEntities"),y=Vn(r).collection("relationshipEntities"),g=Vn(r).collection("memoEntities"),v=new Set(h.selectAll().filter(p(s)).map((({id:e})=>e))),Z=new Set,x=new Set(y.selectAll().filter(p(d)).map((({id:e})=>e))),G=new Set(b.selectAll().filter(p(u)).map((({id:e})=>e))),X=new Set,I=new Set(g.selectAll().filter(p(c)).map((({id:e})=>e)));m.selectAll().filter((({tableId:e})=>v.has(e))).forEach((({id:e})=>Z.add(e))),y.selectAll().filter((({id:e,start:t,end:n})=>!x.has(e)&&(v.has(t.tableId)||v.has(n.tableId)))).forEach((({id:e})=>x.add(e))),b.selectAll().filter((({id:e,tableId:t})=>!G.has(e)&&v.has(t))).forEach((({id:e})=>G.add(e))),f.selectAll().filter((({indexId:e})=>G.has(e))).forEach((({id:e})=>X.add(e))),NR(t,{tableIds:[...v],tableColumnIds:[...Z],relationshipIds:[...x],indexIds:[...G],indexColumnIds:[...X],memoIds:[...I]});const W=Pu(h.selectAll().map((({id:e})=>e))),k=Pu(m.selectAll().map((({id:e})=>e))),V=Pu(b.selectAll().map((({id:e})=>e))),S=Pu(f.selectAll().map((({id:e})=>e))),C=Pu(y.selectAll().map((({id:e})=>e))),L=Pu(g.selectAll().map((({id:e})=>e)));return m.selectAll().filter((({tableId:e,id:t,meta:n})=>!W(e)&&p((()=>!1))({id:t,meta:n}))).forEach((({id:e})=>Z.add(e))),f.selectAll().filter((({indexId:e,id:t,meta:n})=>!V(e)&&p((()=>!1))({id:t,meta:n}))).forEach((({id:e})=>X.add(e))),Object.entries(a).forEach((([e,[t]])=>{if(KR(t))switch(t){case"tableEntities":!W(e)&&v.add(e);break;case"tableColumnEntities":!k(e)&&Z.add(e);break;case"relationshipEntities":!C(e)&&x.add(e);break;case"indexEntities":!V(e)&&G.add(e);break;case"indexColumnEntities":!S(e)&&X.add(e);break;case"memoEntities":!L(e)&&I.add(e)}})),{tableIds:[...v],tableColumnIds:[...Z],relationshipIds:[...x],indexIds:[...G],indexColumnIds:[...X],memoIds:[...I]}}}const HR=e=>t=>({id:n,meta:i})=>{if(t(n))return!1;return 3<Math.floor(e.diff(wR.fromMillis(i.updateAt),"days").toObject().days??0)}
    /*!
     * @dineug/erd-editor
     * @version 3.2.3 | Sat Apr 13 2024
     * @author SeungHwan-Lee <dineug2@gmail.com>
     * @license MIT
     */;var MR={now:function(){return(MR.delegate||performance).now()},delegate:void 0},JR={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,i=t((function(t){n=void 0,e(t)}));return new Ec((function(){return null==n?void 0:n(i)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=JR.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,Kc([],Nc(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=JR.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,Kc([],Nc(e)))},delegate:void 0};function jR(e){return new uu((function(t){var n=e||MR,i=n.now(),o=0,l=function(){t.closed||(o=JR.requestAnimationFrame((function(r){o=0;var a=n.now();t.next({timestamp:e?a:r,elapsed:a-i}),l()})))};return l(),function(){o&&JR.cancelAnimationFrame(o)}}))}var FR=jR(),UR=new uu((function(e){return e.complete()}));function OR(e){return e[e.length-1]}function ER(e,t){return void 0===t&&(t=0),pu((function(n,i){n.subscribe(hu(i,(function(n){return Hu(i,e,(function(){return i.next(n)}),t)}),(function(){return Hu(i,e,(function(){return i.complete()}),t)}),(function(n){return Hu(i,e,(function(){return i.error(n)}),t)})))}))}function $R(e,t){return void 0===t&&(t=0),pu((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}function PR(e,t){if(!e)throw new Error("Iterable cannot be null");return new uu((function(n){Hu(n,t,(function(){var i=e[Symbol.asyncIterator]();Hu(n,t,(function(){i.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function BR(e,t){if(null!=e){if(Cu(e))return function(e,t){return Ku(e).pipe($R(t),ER(t))}(e,t);if(Vu(e))return function(e,t){return new uu((function(n){var i=0;return t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())}))}))}(e,t);if(Su(e))return function(e,t){return Ku(e).pipe($R(t),ER(t))}(e,t);if(Lu(e))return PR(e,t);if(wu(e))return function(e,t){return new uu((function(n){var i;return Hu(n,t,(function(){i=e[Yu](),Hu(n,t,(function(){var e,t,o;try{t=(e=i.next()).value,o=e.done}catch(e){return void n.error(e)}o?n.complete():n.next(t)}),0,!0)})),function(){return jc(null==i?void 0:i.return)&&i.return()}}))}(e,t);if(Nu(e))return function(e,t){return PR(Tu(e),t)}(e,t)}throw Ru(e)}var AR=Array.isArray;function QR(e){return Mu((function(t){return function(e,t){return AR(t)?e.apply(void 0,Kc([],Nc(t))):e(t)}(e,t)}))}var DR=["addListener","removeListener"],_R=["addEventListener","removeEventListener"],qR=["on","off"];function eY(e,t,n,i){if(jc(n)&&(i=n,n=void 0),i)return eY(e,t,n).pipe(QR(i));var o=Nc(function(e){return jc(e.addEventListener)&&jc(e.removeEventListener)}(e)?_R.map((function(i){return function(o){return e[i](t,o,n)}})):function(e){return jc(e.addListener)&&jc(e.removeListener)}(e)?DR.map(tY(e,t)):function(e){return jc(e.on)&&jc(e.off)}(e)?qR.map(tY(e,t)):[],2),l=o[0],r=o[1];if(!l&&Vu(e))return Ju((function(e){return eY(e,t,n)}))(Ku(e));if(!l)throw new TypeError("Invalid event target");return new uu((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return l(t),function(){return r(t)}}))}function tY(e,t){return function(n){return function(i){return e[n](t,i)}}}function nY(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return ku(OR(e))?e.pop():void 0}(e),i=function(e,t){return"number"==typeof OR(e)?e.pop():t}(e,1/0),o=e;return o.length?1===o.length?Ku(o[0]):function(e){return void 0===e&&(e=1/0),Ju(cu,e)}(i)(function(e,t){return t?BR(e,t):Ku(e)}(o,n)):UR}function iY(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0!==t){if(!1!==t){var o=new lu({next:function(){o.unsubscribe(),e()}});return Ku(t.apply(void 0,Kc([],Nc(n)))).subscribe(o)}}else e()}function oY(e){return pu((function(t,n){Ku(e).subscribe(hu(n,(function(){return n.complete()}),qc)),!n.closed&&t.subscribe(n)}))}var lY=Hm((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));const rY=lY;function aY(e,t,n){return null==e?e:Zy(e,t,n)}var sY=Hm((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));const cY=sY;function uY({notify:e,dispatch:t},n){let i=(null==n?void 0:n.commands)??[],o=(null==n?void 0:n.cursor)??-1,l=(null==n?void 0:n.limit)??0,r=!0;const a=()=>-1!==o,s=()=>o<i.length-1,c=()=>({hasRedo:s(),hasUndo:a()}),u=(e,n)=>{r=!1,e[n](t),r=!0};return Object.freeze({get cursor(){return o},get size(){return i.length},hasUndo:a,hasRedo:s,push:t=>{r&&(i.splice(o+1,i.length-o),i.push(t),0!==l&&i.length>l&&(i=i.slice(i.length-l,i.length)),o=i.length-1,e(c()))},undo:()=>{if(!a())return;const t=i[o];u(t,"undo"),o--,e(c())},redo:()=>{if(!s())return;const t=i[o+1];u(t,"redo"),o++,e(c())},clear:()=>{const t=i.length;i=[],o=-1,t>0&&e(c())},setLimit:e=>l=e,clone:e=>uY(e,{commands:[...i],cursor:o,limit:l})})}const dY=(e,t)=>n=>n.pipe(Uu(new uu((i=>{let o=!1;const l=n.subscribe((()=>{o&&i.next()}));return l.add(e.subscribe((()=>{o||(o=!0,i.next())}))),l.add(t.subscribe((()=>{o=!1}))),l}))),Mu((e=>e.flat())),pk),pY=e=>{const t=t=>ed(t.tags)||!e.some((e=>Kg(t.tags,e)));return e=>new uu((n=>e.subscribe({next:e=>n.next(e.filter(t)),error:e=>n.error(e),complete:()=>n.complete()}))).pipe(pk)},hY=(e,t=[])=>{const n=Pu(ok),i=e=>!ed(e.tags)&&t.some((t=>Kg(e.tags,t)))||!n(e.type);return t=>new uu((n=>t.subscribe({next:t=>{n.next(e()?t.filter(i):t)},error:e=>n.error(e),complete:()=>n.complete()}))).pipe(pk)},mY=2048;function bY(e,{getReadonly:t=(()=>!1),getHistory:n}={}){const i=new Set,o=vk(e),l=function(e){const t=XV.map((([t,n])=>{const i=Kk();return{pattern:Pu(t.map(String)),channel:i,proc:oV(n,i,e.state,e.context)}})),n=e.subscribe((e=>{for(const n of e)for(const e of t)e.pattern(n.type)&&eV(e.channel,n)}));return{destroy:()=>{t.forEach((({proc:e})=>Ak(e))),t.splice(0,t.length),n()}}}(o),r={notify:e=>o.dispatch(nZ(e)),dispatch:o.dispatchSync},a=(null==n?void 0:n(r))??uY(r);a.setLimit(mY);const s=new fu,c=s.pipe(hk(dk),pY([Yg.changeOnly,Yg.shared]),hY(t),bk(uk,[["@@move",ak],["@@scroll",ck],["@@color",sk]])),u=new uu((e=>o.subscribe((t=>e.next(t))))).pipe(hk(nk),hY(t,[Yg.shared]),Ou(200)),d=(...e)=>{s.next(Ic(o.state,o.context,e))};return i.add(c.subscribe(YX(o,a))).add(s.pipe(hY(t,[Yg.shared])).subscribe(o.dispatchSync)),Object.freeze({...o,dispatch:(...e)=>{Au((()=>d(e)))},dispatchSync:d,destroy:()=>{Array.from(i).forEach((e=>e.unsubscribe())),i.clear(),o.destroy(),l.destroy(),a.clear(),s.complete()},undo:()=>{t()||a.undo()},redo:()=>{t()||a.redo()},history:a,change$:u})}var fY;const yY="openColorPicker",gY="closeColorPicker",vY="openToast",ZY="loadShikiService",xY="openTableProperties",GY="dragendColumnAll",XY="copy",IY="paste",WY="schemaGC",kY="toggleSearch",VY="openThemeBuilder",SY="setThemeOptions",CY="mouseTrackerStart",LY="mouseTrackerEnd",RY="openDiffViewer";class YY{constructor(){fY.set(this,new Set)}on(e){return Jc(this,fY,"f").has(e)||Jc(this,fY,"f").add(e),()=>{Jc(this,fY,"f").delete(e)}}emit(e){Jc(this,fY,"f").forEach((t=>{Bu(Reflect.get(t,e.type),e)}))}clear(){Jc(this,fY,"f").clear()}}fY=new WeakMap;const wY=Gc(yY),TY=Gc(gY),NY=Gc(vY),KY=Gc(ZY),zY=Gc(xY),HY=Gc(GY),MY=Gc(XY),JY=Gc(IY),jY=Gc(WY),FY=Gc(kY),UY=Gc(VY),OY=Gc(SY),EY=Gc(CY),$Y=Gc(LY),PY=Gc(RY);function BY(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return!0;return!1}function AY(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return e[i];return null}function QY(e){var t=e;if(typeof t>"u"){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function DY(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function _Y(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!(!t||!t.length)}function qY(e){return e.replace(/_/g,".")}function ew(e,t){var n=null,i="-1";return BY(e,(function(e){var o=DY("("+e.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!(!o||e.brand)&&(n=e,i=o[3]||"-1",e.versionAlias?i=e.versionAlias:e.versionTest&&(i=function(e,t){var n=DY("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",t);return n?n[3]:""}(e.versionTest.toLowerCase(),t)||i),i=qY(i),!0)})),{preset:n,version:i}}function tw(e,t){var n={brand:"",version:"-1"};return BY(e,(function(e){var i=nw(t,e);return!!i&&(n.brand=e.id,n.version=e.versionAlias||i.version,"-1"!==n.version)})),n}function nw(e,t){return AY(e,(function(e){var n=e.brand;return DY(""+t.test,n.toLowerCase())}))}var iw=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ow=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],lw=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],rw=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],aw=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function sw(e){return!!ew(rw,e).preset}function cw(e){var t=navigator.userAgentData,n=(t.uaList||t.brands).slice(),i=e&&e.fullVersionList,o=t.mobile||!1,l=n[0],r=(e&&e.platform||t.platform||navigator.platform).toLowerCase(),a={name:l.brand,version:l.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!tw(rw,n).brand||sw(QY())},s={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&BY(lw,(function(e){return nw(n,e)}));var c=tw(ow,n);if(a.chromium=!!c.brand,a.chromiumVersion=c.version,!a.chromium){var u=tw(lw,n);a.webkit=!!u.brand,a.webkitVersion=u.version}var d=AY(aw,(function(e){return new RegExp(""+e.test,"g").exec(r)}));if(s.name=d?d.id:"",e&&(s.version=e.platformVersion),i&&i.length){var p=tw(iw,i);a.name=p.brand||a.name,a.version=p.version||a.version}else{var h=tw(iw,n);a.name=h.brand||a.name,a.version=h.brand&&e?e.uaFullVersion:h.version}return a.webkit&&(s.name=o?"ios":"mac"),"ios"===s.name&&a.webview&&(a.version="-1"),s.version=qY(s.version),a.version=qY(a.version),s.majorVersion=parseInt(s.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:s,isMobile:o,isHints:!0}}function uw(e){return typeof e>"u"&&_Y()?cw():function(e){var t=QY(e),n=!!/mobi/g.exec(t),i={name:"unknown",version:"-1",majorVersion:-1,webview:sw(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},l=ew(iw,t),r=l.preset,a=l.version,s=ew(aw,t),c=s.preset,u=s.version,d=ew(ow,t);if(i.chromium=!!d.preset,i.chromiumVersion=d.version,!i.chromium){var p=ew(lw,t);i.webkit=!!p.preset,i.webkitVersion=p.version}return c&&(o.name=c.id,o.version=u,o.majorVersion=parseInt(u,10)),r&&(i.name=r.id,i.version=a,i.webview&&"ios"===o.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:o,isMobile:n,isHints:!1}}(e)}const dw=uw();let pw="mac"===dw.os.name,hw="ios"===dw.os.name;dw.os.name,dw.os.name,dw.browser.name,dw.browser.name,dw.browser.name,function(e){_Y()?navigator.userAgentData.getHighEntropyValues(["architecture","model","platform","platformVersion","uaFullVersion","fullVersionList"]).then((function(t){var n=cw(t);return e&&e(n),n})):(e&&e(uw()),typeof Promise>"u"||!Promise||Promise.resolve(uw()))}((e=>{pw="mac"===e.os.name,hw="ios"===e.os.name,e.os.name,e.os.name,e.browser.name,e.browser.name,e.browser.name}));const mw=()=>pw||hw;const bw={edit:"edit",stop:"stop",search:"search",undo:"undo",redo:"redo",addTable:"addTable",addColumn:"addColumn",addMemo:"addMemo",removeTable:"removeTable",removeColumn:"removeColumn",primaryKey:"primaryKey",selectAllTable:"selectAllTable",selectAllColumn:"selectAllColumn",relationshipZeroOne:"relationshipZeroOne",relationshipZeroN:"relationshipZeroN",relationshipOneOnly:"relationshipOneOnly",relationshipOneN:"relationshipOneN",tableProperties:"tableProperties",zoomIn:"zoomIn",zoomOut:"zoomOut"},fw=Object.values(bw),yw="Shift",gw="Meta",vw="Alt",Zw="Control",xw={[yw]:"",[gw]:"",[vw]:"",[Zw]:""},Gw={[yw]:"Shift",[gw]:"Cmd",[vw]:"Alt",[Zw]:"Ctrl"};function Xw(e){return(mw()?xw:Gw)[e]??e}function Iw(e){return e.startsWith("Key")?e.slice(3):e.startsWith("Digit")?e.slice(5):"Backspace"===e?"":"Escape"===e?"ESC":"Equal"===e?"Plus":e}function Ww(e){return e?function(e){const t=mw()?"Meta":"Control";return e.trim().split(" ").map((e=>{let n=e.split(/\b\+/),i=n.pop();return n=n.map((e=>"$mod"===e?t:e)),[n,i]}))}(e).map((([e,t])=>[e.map(Xw),Iw(t)])):[]}function kw(e){return mw()?e.metaKey:e.ctrlKey}function Vw(e){return Ww(e).map((([e,t])=>[...e,t].join(" + "))).join(" ")}function Sw(e,t){const n=function(e){return{...e}}(e),i=bY(n,t),o=Vo({[bw.edit]:[{shortcut:"Enter"}],[bw.stop]:[{shortcut:"Escape"}],[bw.search]:[{shortcut:"$mod+KeyK",preventDefault:!0,stopPropagation:!0}],[bw.undo]:[{shortcut:"$mod+KeyZ",preventDefault:!0,stopPropagation:!0}],[bw.redo]:[{shortcut:"$mod+Shift+KeyZ",preventDefault:!0,stopPropagation:!0}],[bw.addTable]:[{shortcut:"Alt+KeyN",preventDefault:!0}],[bw.addColumn]:[{shortcut:"Alt+Enter",preventDefault:!0}],[bw.addMemo]:[{shortcut:"Alt+KeyM",preventDefault:!0}],[bw.removeTable]:[{shortcut:"$mod+Backspace",preventDefault:!0},{shortcut:"$mod+Delete",preventDefault:!0}],[bw.removeColumn]:[{shortcut:"Alt+Backspace",preventDefault:!0},{shortcut:"Alt+Delete",preventDefault:!0}],[bw.primaryKey]:[{shortcut:"Alt+KeyK",preventDefault:!0}],[bw.selectAllTable]:[{shortcut:"$mod+Alt+KeyA",preventDefault:!0}],[bw.selectAllColumn]:[{shortcut:"Alt+KeyA",preventDefault:!0}],[bw.relationshipZeroOne]:[{shortcut:"$mod+Alt+Digit1",preventDefault:!0}],[bw.relationshipZeroN]:[{shortcut:"$mod+Alt+Digit2",preventDefault:!0}],[bw.relationshipOneOnly]:[{shortcut:"$mod+Alt+Digit3",preventDefault:!0}],[bw.relationshipOneN]:[{shortcut:"$mod+Alt+Digit4",preventDefault:!0}],[bw.tableProperties]:[{shortcut:"Alt+Space",preventDefault:!0}],[bw.zoomIn]:[{shortcut:"$mod+Equal",preventDefault:!0,stopPropagation:!0}],[bw.zoomOut]:[{shortcut:"$mod+Minus",preventDefault:!0,stopPropagation:!0}]},{shallow:!0}),l=new fu,r=new fu,a=new YY;return Object.freeze({...n,actions:tk,store:i,keyBindingMap:o,shortcut$:l,keydown$:r,emitter:a})}const Cw=si({}),Lw=(e,t)=>Co(e,{...Cw,value:t??Cw.value});function Rw(e){e.store.dispatchSync(cZ()),e.store.destroy(),e.keydown$.complete(),e.shortcut$.complete(),e.emitter.clear()}function Yw(e,t){const n={start:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},end:{x1:t.x,y1:t.y,x2:t.x,y2:t.y}},i={M:{x:0,y:0},L:{x:0,y:0},Q:{x:0,y:0},d(){const e=this.M.x-this.L.x,t=this.M.y-this.L.y,n=e/2,i=t/2,o=Math.abs(t)<=Math.abs(e),l=function(e){return t=>n=>n<0?(t?-1:1)*e:(t?1:-1)*e}(Math.abs(o?i:n)),r=l(!0),a=l(!1),s=r(e),c=r(t),u=a(e),d=a(t),p=o?this.M.x-n+s:this.M.x,h=o?this.M.y:this.M.y-i+c,m=o?this.L.x+n+u:this.L.x,b=o?this.L.y:this.L.y+i+d;return[[{x:this.M.x,y:this.M.y},{x:p,y:h}],[{x:p,y:h},{x:m,y:b}],[{x:m,y:b},{x:this.L.x,y:this.L.y}]]}};let o=1;return e.direction===xg.left||e.direction===xg.right?(e.direction===xg.left&&(o*=-1),n.start.x2=e.x+o*sV,n.start.x1+=o*cV,i.M.x=n.start.x2,i.M.y=e.y):(e.direction===xg.top||e.direction===xg.bottom)&&(e.direction===xg.top&&(o*=-1),n.start.y2=e.y+o*sV,n.start.y1+=o*cV,i.M.x=e.x,i.M.y=n.start.y2),o=1,t.direction===xg.left||t.direction===xg.right?(t.direction===xg.left&&(o*=-1),n.end.x2=t.x+o*sV,n.end.x1+=o*cV,i.L.x=n.end.x2,i.L.y=t.y):(t.direction===xg.top||t.direction===xg.bottom)&&(t.direction===xg.top&&(o*=-1),n.end.y2=t.y+o*sV,n.end.y1+=o*cV,i.L.x=t.x,i.L.y=n.end.y2),{line:n,path:i}}function ww(e,t){const n={start:{base:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},base2:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},center:{x1:e.x,y1:e.y,x2:e.x,y2:e.y},center2:{x1:e.x,y1:e.y,x2:e.x,y2:e.y}},end:{base:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},base2:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},left:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},center:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},center2:{x1:t.x,y1:t.y,x2:t.x,y2:t.y},right:{x1:t.x,y1:t.y,x2:t.x,y2:t.y}}},i={cx:t.x,cy:t.y},o={cx:e.x,cy:e.y};let l=1;return e.direction===xg.left||e.direction===xg.right?(e.direction===xg.left&&(l*=-1),n.start.base.x1=n.start.base.x2+=l*dV,n.start.base2.x1=n.start.base2.x2+=l*(uV+dV),n.start.center.x1=n.start.base.x1,n.start.base.y1-=uV,n.start.base.y2+=uV,n.start.base2.y1-=uV,n.start.base2.y2+=uV,n.start.center2.x1+=l*(dV+dV+3),o.cx+=l*pV):(e.direction===xg.top||e.direction===xg.bottom)&&(e.direction===xg.top&&(l*=-1),n.start.base.y1=n.start.base.y2+=l*dV,n.start.base2.y1=n.start.base2.y2+=l*(uV+dV),n.start.center.y1=n.start.base.y1,n.start.base.x1-=uV,n.start.base.x2+=uV,n.start.base2.x1-=uV,n.start.base2.x2+=uV,n.start.center2.y1+=l*(dV+dV+3),o.cy+=l*pV),l=1,t.direction===xg.left||t.direction===xg.right?(t.direction===xg.left&&(l*=-1),n.end.base.x1=n.end.base.x2+=l*dV,n.end.base2.x1=n.end.base2.x2+=l*(uV+dV),n.end.center.x1=n.end.left.x1=n.end.right.x1=n.end.base.x1,n.end.base.y1-=uV,n.end.base.y2+=uV,n.end.base2.y1-=uV,n.end.base2.y2+=uV,n.end.left.y2+=uV,n.end.right.y2-=uV,n.end.center2.x1+=l*(dV+dV+3),i.cx+=l*pV):(t.direction===xg.top||t.direction===xg.bottom)&&(t.direction===xg.top&&(l*=-1),n.end.base.y1=n.end.base.y2+=l*dV,n.end.base2.y1=n.end.base2.y2+=l*(uV+dV),n.end.center.y1=n.end.left.y1=n.end.right.y1=n.end.base.y1,n.end.base.x1-=uV,n.end.base.x2+=uV,n.end.base2.x1-=uV,n.end.base2.x2+=uV,n.end.left.x2+=uV,n.end.right.x2-=uV,n.end.center2.y1+=l*(dV+dV+3),i.cy+=l*pV),{line:n,circle:i,startCircle:o}}const Tw={1:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <circle
      cx=${t.circle.cx} cy=${t.circle.cy} r="8"
      fill-opacity="0.0"
      stroke-width="3"
    ></circle>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center.x1} y1=${t.line.end.center.y1}
      x2=${t.line.end.center.x2} y2=${t.line.end.center.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `,[vg.ZeroOne]:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <circle
      cx=${t.circle.cx} cy=${t.circle.cy} r="8"
      fill-opacity="0.0"
      stroke-width="3"
    ></circle>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center.x1} y1=${t.line.end.center.y1}
      x2=${t.line.end.center.x2} y2=${t.line.end.center.y2}
      stroke-width="3"
    ></line>
  `,[vg.ZeroN]:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <circle
      cx=${t.circle.cx} cy=${t.circle.cy} r="8"
      fill-opacity="0.0"
      stroke-width="3"
    ></circle>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center.x1} y1=${t.line.end.center.y1}
      x2=${t.line.end.center.x2} y2=${t.line.end.center.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `,[vg.OneOnly]:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base2.x1} y1=${t.line.end.base2.y1}
      x2=${t.line.end.base2.x2} y2=${t.line.end.base2.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
  `,[vg.OneN]:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `,32:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.base.x1} y1=${t.line.end.base.y1}
      x2=${t.line.end.base.x2} y2=${t.line.end.base.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
  `,64:({path:e,line:t})=>sc`
    <line
      x1=${e.line.end.x1} y1=${e.line.end.y1}
      x2=${e.line.end.x2} y2=${e.line.end.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.left.x1} y1=${t.line.end.left.y1}
      x2=${t.line.end.left.x2} y2=${t.line.end.left.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.center2.x1} y1=${t.line.end.center2.y1}
      x2=${t.line.end.center2.x2} y2=${t.line.end.center2.y2}
      stroke-width="3"
    ></line>
    <line
      x1=${t.line.end.right.x1} y1=${t.line.end.right.y1}
      x2=${t.line.end.right.x2} y2=${t.line.end.right.y2}
      stroke-width="3"
    ></line>
  `};const Nw=(e,t)=>()=>{const{relationship:t,strokeWidth:n}=e,i=function(e){return{path:Yw(e.start,e.end),line:ww(e.start,e.end)}}(t),{path:o,line:l}=i,r=o.path.d(),a=function(e,t){const n=Tw[e];return(null==n?void 0:n(t))??null}(t.relationshipType,i);return sc`
      ${r.map((([e,i])=>sc`
            <line
              x1=${e.x} y1=${e.y}
              x2=${i.x} y2=${i.y}
              stroke-dasharray=${t.identification?0:10}
              stroke-width=${n}
              fill="transparent"
            ></line>
          `))}
      <line
        x1=${o.line.start.x1} y1=${o.line.start.y1}
        x2=${o.line.start.x2} y2=${o.line.start.y2}
        stroke-width="3"
      ></line>
      <line
        x1=${l.line.start.base.x1} y1=${l.line.start.base.y1}
        x2=${l.line.start.base.x2} y2=${l.line.start.base.y2}
        stroke-width="3"
      ></line>
      ${t.startRelationshipType===Zg.ring?sc`
            <circle
              cx=${l.startCircle.cx} cy=${l.startCircle.cy} r="8"
              fill-opacity="0.0"
              stroke-width="3"
            ></circle>
            <line
              x1=${l.line.start.center.x1} y1=${l.line.start.center.y1}
              x2=${l.line.start.center.x2} y2=${l.line.start.center.y2}
              stroke-width="3"
            ></line>
      `:sc`
            <line
              x1=${l.line.start.base2.x1} y1=${l.line.start.base2.y1}
              x2=${l.line.start.base2.x2} y2=${l.line.start.base2.y2}
              stroke-width="3"
            ></line>
            <line
              x1=${l.line.start.center2.x1} y1=${l.line.start.center2.y1}
              x2=${l.line.start.center2.x2} y2=${l.line.start.center2.y2}
              stroke-width="3"
            ></line>
      `}
      ${a}
    `},Kw=Cc`
  position: absolute;
  top: 0;
  left: 0;
  overflow: visible;

  .relationship {
    stroke: var(--key-fk);
  }

  .relationship.identification {
    stroke: var(--key-pfk);
  }

  .relationship:hover {
    stroke: var(--relationship-hover);
  }
`,zw=(e,t)=>{const n=Lw(t),i=()=>{const{store:e}=n.value;e.dispatch(GZ({columnIds:[]}))};return()=>{const{store:t}=n.value,{settings:{width:o,height:l},doc:{relationshipIds:r},collections:a}=t.state,s=Vn(a).collection("relationshipEntities").selectByIds(r);return sc`
      <svg
        class=${[Kw,e.class]}
        style=${{width:`${o}px`,height:`${l}px`,"min-width":`${o}px`,"min-height":`${l}px`}}
      >
        ${Ja(s,(e=>e.id),(t=>sc`
            <g
              class=${["relationship",{identification:t.identification}]}
              data-id=${t.id}
              @mouseenter=${()=>(e=>{const{store:t}=n.value;t.dispatch(GZ({columnIds:[...e.start.columnIds,...e.end.columnIds]}))})(t)}
              @mouseleave=${i}
            >
              <${Nw}
                relationship=${t}
                strokeWidth=${e.strokeWidth??3}
              />
            </g>
          `))}
      </svg>
    `}};function Hw(){const e=new Set;return po((()=>{Array.from(e).forEach((e=>Du(e)?e():e.unsubscribe())),e.clear()})),{addUnsubscribe:(...t)=>{t.forEach((t=>e.add(t)))}}}function Mw(e,t){const n={path:{path:{M:{x:0,y:0},L:{x:0,y:0},Q:{x:0,y:0},d(){return`M ${this.M.x} ${this.M.y} L ${this.L.x} ${this.L.y}`}},line:{start:{x1:0,y1:0,x2:0,y2:0}}},line:{start:{base:{x1:0,y1:0,x2:0,y2:0},base2:{x1:0,y1:0,x2:0,y2:0},center:{x1:0,y1:0,x2:0,y2:0},center2:{x1:0,y1:0,x2:0,y2:0}}}};if(!t.start)return n;const i=function(e,t){let n=rV.bottom;if(!t.start)return n;const i=Vn(e.collections).collection("tableEntities").selectById(t.start.tableId);if(!i)return n;const o=hV(e,i);let l=mV(o.bottom,t.end);return t.start.x=o.bottom.x,t.start.y=o.bottom.y,aV.forEach((e=>{const i=e,r=mV(o[i],t.end);l<=r||(l=r,n=i,t.start&&(t.start.x=o[i].x,t.start.y=o[i].y))})),n}(e,t);return n.path=function(e,t){const n={start:{x1:0,y1:0,x2:0,y2:0}},i={M:{x:0,y:0},L:{x:0,y:0},Q:{x:0,y:0},d(){return`M ${this.M.x} ${this.M.y} L ${this.L.x} ${this.L.y}`}};if(t.start){n.start.x1=t.start.x,n.start.y1=t.start.y,n.start.x2=t.start.x,n.start.y2=t.start.y;let o=1;e===rV.left||e===rV.right?(e===rV.left&&(o*=-1),n.start.x2=t.start.x+o*sV,n.start.x1+=o*cV,i.M.x=n.start.x2,i.M.y=t.start.y):(e===rV.top||e===rV.bottom)&&(e===rV.top&&(o*=-1),n.start.y2=t.start.y+o*sV,n.start.y1+=o*cV,i.M.x=t.start.x,i.M.y=n.start.y2)}return i.L.x=t.end.x,i.L.y=t.end.y,{path:i,line:n}}(i,t),n.line=function(e,t){const n={start:{base:{x1:0,y1:0,x2:0,y2:0},base2:{x1:0,y1:0,x2:0,y2:0},center:{x1:0,y1:0,x2:0,y2:0},center2:{x1:0,y1:0,x2:0,y2:0}}};if(!t.start)return n;n.start.base.x1=n.start.base2.x1=n.start.center.x1=n.start.center2.x1=t.start.x,n.start.base.x2=n.start.base2.x2=n.start.center.x2=n.start.center2.x2=t.start.x,n.start.base.y1=n.start.base2.y1=n.start.center.y1=n.start.center2.y1=t.start.y,n.start.base.y2=n.start.base2.y2=n.start.center.y2=n.start.center2.y2=t.start.y;let i=1;return e===rV.left||e===rV.right?(e===rV.left&&(i*=-1),n.start.base.x1=n.start.base.x2+=i*dV,n.start.base2.x1=n.start.base2.x2+=i*(uV+dV),n.start.center.x1=n.start.base.x1,n.start.base.y1-=uV,n.start.base.y2+=uV,n.start.base2.y1-=uV,n.start.base2.y2+=uV,n.start.center2.x1+=i*(dV+dV+3)):(e===rV.top||e===rV.bottom)&&(e===rV.top&&(i*=-1),n.start.base.y1=n.start.base.y2+=i*dV,n.start.base2.y1=n.start.base2.y2+=i*(uV+dV),n.start.center.y1=n.start.base.y1,n.start.base.x1-=uV,n.start.base.x2+=uV,n.start.base2.x1-=uV,n.start.base2.x2+=uV,n.start.center2.y1+=i*(dV+dV+3)),n}(i,t),n}const Jw=Cc`
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
  stroke: var(--key-fk);
  overflow: visible;
`,jw=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw();return uo((()=>{const t=e.root.value,{store:o}=n.value;i(eY(t,"mousemove").subscribe((e=>{e.preventDefault();const{x:n,y:i}=t.getBoundingClientRect();o.dispatch(xZ({x:e.clientX-n,y:e.clientY-i}))})))})),()=>{const{store:t}=n.value,{settings:{width:i,height:o}}=t.state,{path:l,line:r}=Mw(t.state,e.draw);return sc`
      <svg
        class=${Jw}
        style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`}}
      >
        <g>
          <path
            d=${l.path.d()}
            stroke-dasharray="10"
            stroke-width="3"
            fill="transparent"
          ></path>
          <line
            x1=${l.line.start.x1} y1=${l.line.start.y1}
            x2=${l.line.start.x2} y2=${l.line.start.y2}
            stroke-width="3"
          ></line>
          <line
            x1=${r.start.base.x1} y1=${r.start.base.y1}
            x2=${r.start.base.x2} y2=${r.start.base.y2}
            stroke-width="3"
          ></line>
          <line
            x1=${r.start.base2.x1} y1=${r.start.base2.y1}
            x2=${r.start.base2.x2} y2=${r.start.base2.y2}
            stroke-width="3"
          ></line>
          <line
            x1=${r.start.center2.x1} y1=${r.start.center2.y1}
            x2=${r.start.center2.x2} y2=${r.start.center2.y2}
            stroke-width="3"
          ></line>
        </g>
      </svg>
    `}},Fw=e=>Cc`
  font-size: var(--font-size-${e});
  letter-spacing: var(--letter-spacing-${e});
  line-height: var(--line-height-${e});
`,Uw=Fw(1),Ow=Fw(2),Ew=Fw(3);Fw(4);const $w=Fw(5),Pw=Fw(6),Bw=Fw(7),Aw=Fw(8),Qw=Fw(9),Dw=Cc`
  ${Ow};
  font-weight: var(--font-weight-regular);
`,_w=Cc`
  ${Uw};
  font-weight: var(--font-weight-regular);
`;const qw=Cc`
  position: absolute;
  background-color: var(--table-background);
  padding: ${Eg}px 0;
  border-radius: 6px;
  border: 1px solid var(--table-border);
  fill: transparent;
  color: transparent;
  ${_w};

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
  }

  &[data-selected] {
    border: 1px solid var(--table-select);
  }

  .column-row-move {
    transition: transform 0.3s;
  }
`,eT=Cc`
  display: flex;
  flex-direction: column;
  position: relative;
  padding: 0 ${Eg}px;
`,tT=Cc`
  position: absolute;
  top: -${Eg+1}px;
  left: 0;
  width: 100%;
  min-height: 4px;
  border-radius: 6px 6px 0 0;
  cursor: pointer;
`,nT=Cc`
  display: flex;
  height: ${12}px;
  justify-content: flex-end;
  margin-bottom: ${2}px;
  cursor: move;

  & > .icon {
    cursor: pointer;
  }

  & > .icon:last-child {
    margin-left: ${4}px;
  }

  & > .icon:hover {
    fill: var(--active);
    color: var(--active);
  }
`,iT=Cc`
  display: flex;
  height: ${24}px;
  align-items: center;

  & > .input-padding {
    padding: ${2}px ${Ug}px
      ${2}px 0;
  }
`;function oT(e){const t=e.target;t&&(t.value=rv(t.value))}function lT(e){e.preventDefault()}function rT(e){e.stopPropagation()}function aT(e){return e instanceof MouseEvent}const sT="@dineug/erd-editor/internal-force-focus",cT="@dineug/erd-editor/internal-forward-move-start";function uT(e,t){function n(n,i){return new CustomEvent(e,{detail:n,...t,...i})}return n.toString=()=>`${e}`,n.type=e,n}const dT=uT("@dineug/erd-editor/internal-focus"),pT=uT(sT),hT=uT(cT,{bubbles:!0,composed:!0}),mT=eY(window,"keyup"),bT=eY(window,"mousedown"),fT=eY(window,"mousemove"),yT=eY(window,"mouseup"),gT=eY(window,"touchstart"),vT=eY(window,"touchmove"),ZT=eY(window,"touchend"),xT=function(e){return e?jR(e):FR}().pipe(function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new fu}:t,i=e.resetOnError,o=void 0===i||i,l=e.resetOnComplete,r=void 0===l||l,a=e.resetOnRefCountZero,s=void 0===a||a;return function(e){var t,i,l,a=0,c=!1,u=!1,d=function(){null==i||i.unsubscribe(),i=void 0},p=function(){d(),t=l=void 0,c=u=!1},h=function(){var e=t;p(),null==e||e.unsubscribe()};return pu((function(e,m){a++,!u&&!c&&d();var b=l=l??n();m.add((function(){0===--a&&!u&&!c&&(i=iY(h,s))})),b.subscribe(m),!t&&a>0&&(t=new lu({next:function(e){return b.next(e)},error:function(e){u=!0,d(),i=iY(p,o,e),b.error(e)},complete:function(){c=!0,d(),i=iY(p,r),b.complete()}}),Ku(e).subscribe(t))}))(e)}}()),GT=eY(window,hT.type).pipe(Mu((e=>e.detail.originEvent))),XT=nY(bT,gT,GT),IT=nY(yT,ZT);let WT=0,kT=0;XT.subscribe((e=>{aT(e)?(WT=e.clientX,kT=e.clientY):(WT=e.touches[0].clientX,kT=e.touches[0].clientY)}));const VT=nY(fT.pipe(Mu((e=>{const t=e.clientX,n=e.clientY,i=t-WT,o=n-kT;return WT=t,kT=n,{event:e,movementX:i,movementY:o,x:t,y:n}}))),vT.pipe(Fu((e=>1===e.touches.length)),Mu((e=>{const t=e.touches[0].clientX,n=e.touches[0].clientY,i=t-WT,o=n-kT;return WT=t,kT=n,{event:e,movementX:i,movementY:o,x:t,y:n}})))),ST=VT.pipe(oY(IT));function CT(e,t){const n=Lw(e),i=({event:e,movementX:t,movementY:i})=>{"mousemove"===e.type&&e.preventDefault();const{store:o}=n.value;o.dispatch(RW(t,i))};return{onMoveStart:e=>{const o=e.target;if(!o)return;const{store:l}=n.value;l.dispatch(FX(t.table.id,kw(e))),!o.closest(".table-header-color")&&!o.closest(".column-row")&&!o.closest(".icon")&&!o.closest(".input-padding")&&ST.subscribe(i)}}}const LT=Cc`
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: auto;
  word-break: break-all;
  color: var(--active);
  font-weight: var(--font-weight-bold);

  &.isEmptyName {
    color: var(--placeholder);
  }
`,RT=(e,t)=>{const n=Lw(t),{onMoveStart:i}=CT(t,e),o=()=>{const{store:e}=n.value,{settings:{zoomLevel:t}}=e.state;let i=$w.toString();return i=t>.6?$w.toString():t>.5?Pw.toString():t>.4?Bw.toString():t>.3?Aw.toString():Qw.toString(),i},l=t=>{const{emitter:i}=n.value;i.emit(wY({x:t.clientX,y:t.clientY,color:e.table.ui.color}))};return()=>{const{store:t}=n.value,{editor:r}=t.state,{table:a}=e,s=!!r.selectedMap[a.id],c=HG(a,t.state),u=JG(a),d=by(a.name.trim());return ac`
      <div
        class=${["table",qw]}
        style=${{top:`${a.ui.y}px`,left:`${a.ui.x}px`,"z-index":`${a.ui.zIndex}`,width:`${c.width}px`,height:`${u}px`}}
        ?data-selected=${s}
        data-id=${a.id}
        @mousedown=${i}
        @touchstart=${i}
      >
        <div class=${eT}>
          <div
            class=${["table-header-color",tT]}
            style=${{"background-color":a.ui.color}}
            @click=${l}
          ></div>
        </div>
        <div
          class=${["scrollbar",LT,o(),{isEmptyName:d}]}
        >
          ${d?"unnamed":a.name}
        </div>
      </div>
    `}},YT=Cc`
  position: absolute;

  &.vertical {
    width: ${5}px;
    height: 100%;
    cursor: ew-resize;
  }

  &.horizontal {
    width: 100%;
    height: ${5}px;
    cursor: ns-resize;
  }

  &.edge {
    width: ${5}px;
    height: ${5}px;
  }
`,wT="vertical",TT="horizontal",NT="edge",KT=(e,t)=>{const n=()=>{const t=e.top??0;return 0===t&&e.type===wT?t:t-2.5},i=()=>{const t=e.left??0;return 0===t&&e.type===TT?t:t-2.5},o=t=>{var n;null==(n=e.onMousedown)||n.call(e,t),ST.subscribe((t=>{var n;"mousemove"===t.event.type&&t.event.preventDefault(),null==(n=e.onMove)||n.call(e,t)}))};return()=>{const t=e.type===wT,l=e.type===TT,r=e.type===NT;return ac`
      <div
        class=${["sash",YT,{vertical:t,horizontal:l,edge:r}]}
        style=${{top:`${n()}px`,left:`${i()}px`,cursor:r?e.cursor:""}}
        @mousedown=${o}
      ></div>
    `}},zT="left",HT="right",MT="top",JT="bottom",jT="lt",FT="rt",UT="lb",OT="rb",ET=(e,t)=>{const n=Lw(t);let i=0,o=0;const l=({movementX:t,x:n},o)=>{const l=Object.assign({change:!1},e.memo.ui),r=t<0?rV.left:rV.right,a=o===rV.left?l.width-t:l.width+t;switch(r){case rV.left:116<a&&n<i&&(o===rV.left&&(l.x+=t),i+=t,l.width=a,l.change=!0);break;case rV.right:116<a&&n>i&&(o===rV.left&&(l.x+=t),i+=t,l.width=a,l.change=!0)}return l},r=({movementY:t,y:n},i)=>{const l=Object.assign({change:!1},e.memo.ui),r=t<0?rV.top:rV.bottom,a=i===rV.top?l.height-t:l.height+t;switch(r){case rV.top:100<a&&n<o&&(i===rV.top&&(l.y+=t),o+=t,l.height=a,l.change=!0);break;case rV.bottom:100<a&&n>o&&(i===rV.top&&(l.y+=t),o+=t,l.height=a,l.change=!0)}return l},a=(t,a)=>{i=t.clientX,o=t.clientY,ST.subscribe((t=>((t,i)=>{t.event.preventDefault();const{store:o}=n.value;let a=null,s=null;switch(i){case zT:case HT:a=l(t,i);break;case MT:case JT:s=r(t,i);break;case jT:a=l(t,rV.left),s=r(t,rV.top);break;case FT:a=l(t,rV.right),s=r(t,rV.top);break;case UT:a=l(t,rV.left),s=r(t,rV.bottom);break;case OT:a=l(t,rV.right),s=r(t,rV.bottom)}null!=a&&a.change&&null!=s&&s.change?o.dispatch(Vx({id:e.memo.id,x:a.x,y:s.y,width:a.width,height:s.height})):null!=a&&a.change?o.dispatch(Vx({id:e.memo.id,x:a.x,y:a.y,width:a.width,height:a.height})):null!=s&&s.change&&o.dispatch(Vx({id:e.memo.id,x:s.x,y:s.y,width:s.width,height:s.height}))})(t,a)))};return()=>ac`${((e,t)=>[{type:wT,position:zT},{type:wT,position:HT,left:t},{type:TT,position:JT,top:e},{type:NT,position:jT,cursor:"nwse-resize"},{type:NT,position:FT,cursor:"nesw-resize",left:t},{type:NT,position:UT,cursor:"nesw-resize",top:e},{type:NT,position:OT,cursor:"nwse-resize",top:e,left:t}])(e.top,e.left).map((e=>ac`
        <${KT}
          ...${e}
          .onMousedown=${t=>{a(t,e.position)}}
        />
      `))}`};function $T(e){return Object.keys(e).reduce(((t,n)=>{const i=Reflect.get(e,n);return!ed(i)&&""!==i&&Reflect.set(t,n,i),t}),{})}const PT=Cc`
  display: inline-flex;
  height: 100%;
  align-items: center;
`,BT=Cc`
  transition: fill 0.15s;
`;const AT=(e,t)=>({prefix:"mdi",iconName:e,icon:[24,24,,,t]}),QT=[{prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V448h40c13.3 0 24-10.7 24-24V384h40c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},{prefix:"fas",iconName:"table",icon:[512,512,[],"f0ce","M64 256V160H224v96H64zm0 64H224v96H64V320zm224 96V320H448v96H288zM448 256H288V160H448v96zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},{prefix:"fas",iconName:"note-sticky",icon:[448,512,[62026,"sticky-note"],"f249","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H288V368c0-26.5 21.5-48 48-48H448V96c0-35.3-28.7-64-64-64H64zM448 352H402.7 336c-8.8 0-16 7.2-16 16v66.7V480l32-32 64-64 32-32z"]},{prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},{prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},{prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},{prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},{prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"]},{prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224H40c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H48.5z"]},{prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},{prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64h32c35.3 0 64 28.7 64 64v3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74V320c0 17.7 14.3 32 32 32s32-14.3 32-32v-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7V160c0-70.7-57.3-128-128-128H144C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},{prefix:"fas",iconName:"diagram-project",icon:[576,512,["project-diagram"],"f542","M0 80C0 53.5 21.5 32 48 32h96c26.5 0 48 21.5 48 48V96H384V80c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H432c-26.5 0-48-21.5-48-48V160H192v16c0 1.7-.1 3.4-.3 5L272 288h96c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V336c0-1.7 .1-3.4 .3-5L144 224H48c-26.5 0-48-21.5-48-48V80z"]},{prefix:"fas",iconName:"file-image",icon:[384,512,[128443],"f1c5","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM64 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm152 32c5.3 0 10.2 2.6 13.2 6.9l88 128c3.4 4.9 3.7 11.3 1 16.5s-8.2 8.6-14.2 8.6H216 176 128 80c-5.8 0-11.1-3.1-13.9-8.1s-2.8-11.2 .2-16.1l48-80c2.9-4.8 8.1-7.8 13.7-7.8s10.8 2.9 13.7 7.8l12.8 21.4 48.3-70.2c3-4.3 7.9-6.9 13.2-6.9z"]},{prefix:"fas",iconName:"file-export",icon:[576,512,["arrow-right-from-file"],"f56e","M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V288H216c-13.3 0-24 10.7-24 24s10.7 24 24 24H384V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zM384 336V288H494.1l-39-39c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l80 80c9.4 9.4 9.4 24.6 0 33.9l-80 80c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l39-39H384zm0-208H256V0L384 128z"]},{prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},{prefix:"fas",iconName:"file-import",icon:[512,512,["arrow-right-to-file"],"f56f","M128 64c0-35.3 28.7-64 64-64H352V128c0 17.7 14.3 32 32 32H512V448c0 35.3-28.7 64-64 64H192c-35.3 0-64-28.7-64-64V336H302.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39H128V64zm0 224v48H24c-13.3 0-24-10.7-24-24s10.7-24 24-24H128zM512 128H384V0L512 128z"]},{prefix:"fas",iconName:"file-code",icon:[384,512,[],"f1c9","M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM153 289l-31 31 31 31c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L71 337c-9.4-9.4-9.4-24.6 0-33.9l48-48c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9zM265 255l48 48c9.4 9.4 9.4 24.6 0 33.9l-48 48c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l31-31-31-31c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z"]},{prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},{prefix:"fas",iconName:"arrow-pointer",icon:[320,512,["mouse-pointer"],"f245","M0 55.2V426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320H297.9c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"]},{prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},{prefix:"fas",iconName:"rotate",icon:[512,512,[128260,"sync-alt"],"f2f1","M142.9 142.9c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5c0 0 0 0 0 0H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5c7.7-21.8 20.2-42.3 37.8-59.8zM16 312v7.6 .7V440c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l41.6-41.6c87.6 86.5 228.7 86.2 315.8-1c24.4-24.4 42.1-53.1 52.9-83.7c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.2 62.2-162.7 62.5-225.3 1L185 329c6.9-6.9 8.9-17.2 5.2-26.2s-12.5-14.8-22.2-14.8H48.4h-.7H40c-13.3 0-24 10.7-24 24z"]},{prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3H344c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},{prefix:"fas",iconName:"table-columns",icon:[512,512,["columns"],"f0db","M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm64 64V416H224V160H64zm384 0H288V416H448V160z"]},{prefix:"far",iconName:"copy",icon:[448,512,[],"f0c5","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"]},{prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},{prefix:"fas",iconName:"location-dot",icon:[384,512,["map-marker-alt"],"f3c5","M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},{prefix:"fas",iconName:"circle-half-stroke",icon:[512,512,[9680,"adjust"],"f042","M448 256c0-106-86-192-192-192V448c106 0 192-86 192-192zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]},AT("code-json","M5,3H7V5H5V10A2,2 0 0,1 3,12A2,2 0 0,1 5,14V19H7V21H5C3.93,20.73 3,20.1 3,19V15A2,2 0 0,0 1,13H0V11H1A2,2 0 0,0 3,9V5A2,2 0 0,1 5,3M19,3A2,2 0 0,1 21,5V9A2,2 0 0,0 23,11H24V13H23A2,2 0 0,0 21,15V19A2,2 0 0,1 19,21H17V19H19V14A2,2 0 0,1 21,12A2,2 0 0,1 19,10V5H17V3H19M12,15A1,1 0 0,1 13,16A1,1 0 0,1 12,17A1,1 0 0,1 11,16A1,1 0 0,1 12,15M8,15A1,1 0 0,1 9,16A1,1 0 0,1 8,17A1,1 0 0,1 7,16A1,1 0 0,1 8,15M16,15A1,1 0 0,1 17,16A1,1 0 0,1 16,17A1,1 0 0,1 15,16A1,1 0 0,1 16,15Z"),AT("database","M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z"),AT("database-import","M12,3C8.59,3 5.69,4.07 4.54,5.57L9.79,10.82C10.5,10.93 11.22,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M3.92,7.08L2.5,8.5L5,11H0V13H5L2.5,15.5L3.92,16.92L8.84,12M20,9C20,11.21 16.42,13 12,13C11.34,13 10.7,12.95 10.09,12.87L7.62,15.34C8.88,15.75 10.38,16 12,16C16.42,16 20,14.21 20,12M20,14C20,16.21 16.42,18 12,18C9.72,18 7.67,17.5 6.21,16.75L4.53,18.43C5.68,19.93 8.59,21 12,21C16.42,21 20,19.21 20,17"),AT("database-export","M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C12.5,11 13,10.97 13.5,10.92V9.5H16.39L15.39,8.5L18.9,5C17.5,3.8 14.94,3 12,3M18.92,7.08L17.5,8.5L20,11H15V13H20L17.5,15.5L18.92,16.92L23.84,12M4,9V12C4,14.21 7.58,16 12,16C13.17,16 14.26,15.85 15.25,15.63L16.38,14.5H13.5V12.92C13,12.97 12.5,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C14.94,21 17.5,20.2 18.9,19L17,17.1C15.61,17.66 13.9,18 12,18C7.58,18 4,16.21 4,14Z"),AT("format-letter-case","M20.06,18C20,17.83 19.91,17.54 19.86,17.11C19.19,17.81 18.38,18.16 17.45,18.16C16.62,18.16 15.93,17.92 15.4,17.45C14.87,17 14.6,16.39 14.6,15.66C14.6,14.78 14.93,14.1 15.6,13.61C16.27,13.12 17.21,12.88 18.43,12.88H19.83V12.24C19.83,11.75 19.68,11.36 19.38,11.07C19.08,10.78 18.63,10.64 18.05,10.64C17.53,10.64 17.1,10.76 16.75,11C16.4,11.25 16.23,11.54 16.23,11.89H14.77C14.77,11.46 14.92,11.05 15.22,10.65C15.5,10.25 15.93,9.94 16.44,9.71C16.95,9.5 17.5,9.36 18.13,9.36C19.11,9.36 19.87,9.6 20.42,10.09C20.97,10.58 21.26,11.25 21.28,12.11V16C21.28,16.8 21.38,17.42 21.58,17.88V18H20.06M17.66,16.88C18.11,16.88 18.54,16.77 18.95,16.56C19.35,16.35 19.65,16.07 19.83,15.73V14.16H18.7C16.93,14.16 16.04,14.63 16.04,15.57C16.04,16 16.19,16.3 16.5,16.53C16.8,16.76 17.18,16.88 17.66,16.88M5.46,13.71H9.53L7.5,8.29L5.46,13.71M6.64,6H8.36L13.07,18H11.14L10.17,15.43H4.82L3.86,18H1.93L6.64,6Z"),AT("table-cog","M3 3H17C18.11 3 19 3.9 19 5V12.08C17.45 11.82 15.92 12.18 14.68 13H11V17H12.08C11.97 17.68 11.97 18.35 12.08 19H3C1.9 19 1 18.11 1 17V5C1 3.9 1.9 3 3 3M3 7V11H9V7H3M11 7V11H17V7H11M3 13V17H9V13H3M22.78 19.32L21.71 18.5C21.73 18.33 21.75 18.17 21.75 18S21.74 17.67 21.71 17.5L22.77 16.68C22.86 16.6 22.89 16.47 22.83 16.36L21.83 14.63C21.77 14.5 21.64 14.5 21.5 14.5L20.28 15C20 14.82 19.74 14.65 19.43 14.53L19.24 13.21C19.23 13.09 19.12 13 19 13H17C16.88 13 16.77 13.09 16.75 13.21L16.56 14.53C16.26 14.66 15.97 14.82 15.71 15L14.47 14.5C14.36 14.5 14.23 14.5 14.16 14.63L13.16 16.36C13.1 16.47 13.12 16.6 13.22 16.68L14.28 17.5C14.26 17.67 14.25 17.83 14.25 18S14.26 18.33 14.28 18.5L13.22 19.32C13.13 19.4 13.1 19.53 13.16 19.64L14.16 21.37C14.22 21.5 14.35 21.5 14.47 21.5L15.71 21C15.97 21.18 16.25 21.35 16.56 21.47L16.75 22.79C16.77 22.91 16.87 23 17 23H19C19.12 23 19.23 22.91 19.25 22.79L19.44 21.47C19.74 21.34 20 21.18 20.28 21L21.5 21.5C21.64 21.5 21.77 21.5 21.84 21.37L22.84 19.64C22.9 19.53 22.87 19.4 22.78 19.32M18 19.5C17.17 19.5 16.5 18.83 16.5 18S17.18 16.5 18 16.5 19.5 17.17 19.5 18 18.84 19.5 18 19.5Z"),AT("code-brackets","M15,4V6H18V18H15V20H20V4M4,4V20H9V18H6V6H9V4H4Z"),AT("vector-line","M15,3V7.59L7.59,15H3V21H9V16.42L16.42,9H21V3M17,5H19V7H17M5,17H7V19H5"),AT("atom","M12,11A1,1 0 0,1 13,12A1,1 0 0,1 12,13A1,1 0 0,1 11,12A1,1 0 0,1 12,11M4.22,4.22C5.65,2.79 8.75,3.43 12,5.56C15.25,3.43 18.35,2.79 19.78,4.22C21.21,5.65 20.57,8.75 18.44,12C20.57,15.25 21.21,18.35 19.78,19.78C18.35,21.21 15.25,20.57 12,18.44C8.75,20.57 5.65,21.21 4.22,19.78C2.79,18.35 3.43,15.25 5.56,12C3.43,8.75 2.79,5.65 4.22,4.22M15.54,8.46C16.15,9.08 16.71,9.71 17.23,10.34C18.61,8.21 19.11,6.38 18.36,5.64C17.62,4.89 15.79,5.39 13.66,6.77C14.29,7.29 14.92,7.85 15.54,8.46M8.46,15.54C7.85,14.92 7.29,14.29 6.77,13.66C5.39,15.79 4.89,17.62 5.64,18.36C6.38,19.11 8.21,18.61 10.34,17.23C9.71,16.71 9.08,16.15 8.46,15.54M5.64,5.64C4.89,6.38 5.39,8.21 6.77,10.34C7.29,9.71 7.85,9.08 8.46,8.46C9.08,7.85 9.71,7.29 10.34,6.77C8.21,5.39 6.38,4.89 5.64,5.64M9.88,14.12C10.58,14.82 11.3,15.46 12,16.03C12.7,15.46 13.42,14.82 14.12,14.12C14.82,13.42 15.46,12.7 16.03,12C15.46,11.3 14.82,10.58 14.12,9.88C13.42,9.18 12.7,8.54 12,7.97C11.3,8.54 10.58,9.18 9.88,9.88C9.18,10.58 8.54,11.3 7.97,12C8.54,12.7 9.18,13.42 9.88,14.12M18.36,18.36C19.11,17.62 18.61,15.79 17.23,13.66C16.71,14.29 16.15,14.92 15.54,15.54C14.92,16.15 14.29,16.71 13.66,17.23C15.79,18.61 17.62,19.11 18.36,18.36Z"),AT("chart-scatter-plot","M2,2H4V20H22V22H2V2M9,10A3,3 0 0,1 12,13A3,3 0 0,1 9,16A3,3 0 0,1 6,13A3,3 0 0,1 9,10M13,2A3,3 0 0,1 16,5A3,3 0 0,1 13,8A3,3 0 0,1 10,5A3,3 0 0,1 13,2M18,12A3,3 0 0,1 21,15A3,3 0 0,1 18,18A3,3 0 0,1 15,15A3,3 0 0,1 18,12Z"),AT("white-balance-sunny","M3.55 19.09L4.96 20.5L6.76 18.71L5.34 17.29M12 6C8.69 6 6 8.69 6 12S8.69 18 12 18 18 15.31 18 12C18 8.68 15.31 6 12 6M20 13H23V11H20M17.24 18.71L19.04 20.5L20.45 19.09L18.66 17.29M20.45 5L19.04 3.6L17.24 5.39L18.66 6.81M13 1H11V4H13M6.76 5.39L4.96 3.6L3.55 5L5.34 6.81L6.76 5.39M1 13H4V11H1M13 20H11V23H13"),AT("weather-might","M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.64 6.35,17.66C9.37,20.67 14.19,20.78 17.33,17.97Z"),AT("plus-minus-box","M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3H5M11,6H13V9H16V11H13V14H11V11H8V9H11V6M8,16H16V18H8V16Z"),AT("plus-minus","M11,4V9H6V11H11V16H13V11H18V9H13V4H11M6,18V20H18V18H6Z"),AT("plus","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),AT("minus","M19,13H5V11H19V13Z"),AT("av-timer","M11,17A1,1 0 0,0 12,18A1,1 0 0,0 13,17A1,1 0 0,0 12,16A1,1 0 0,0 11,17M11,3V7H13V5.08C16.39,5.57 19,8.47 19,12A7,7 0 0,1 12,19A7,7 0 0,1 5,12C5,10.32 5.59,8.78 6.58,7.58L12,13L13.41,11.59L6.61,4.79V4.81C4.42,6.45 3,9.05 3,12A9,9 0 0,0 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M18,12A1,1 0 0,0 17,11A1,1 0 0,0 16,12A1,1 0 0,0 17,13A1,1 0 0,0 18,12M6,12A1,1 0 0,0 7,13A1,1 0 0,0 8,12A1,1 0 0,0 7,11A1,1 0 0,0 6,12Z"),((e,t)=>({prefix:"radix",iconName:e,icon:[15,15,,,t]}))("timer","M7.49998 0.849976C7.22383 0.849976 6.99998 1.07383 6.99998 1.34998V3.52234C6.99998 3.79848 7.22383 4.02234 7.49998 4.02234C7.77612 4.02234 7.99998 3.79848 7.99998 3.52234V1.8718C10.8862 2.12488 13.15 4.54806 13.15 7.49998C13.15 10.6204 10.6204 13.15 7.49998 13.15C4.37957 13.15 1.84998 10.6204 1.84998 7.49998C1.84998 6.10612 2.35407 4.83128 3.19049 3.8459C3.36919 3.63538 3.34339 3.31985 3.13286 3.14115C2.92234 2.96245 2.60681 2.98825 2.42811 3.19877C1.44405 4.35808 0.849976 5.86029 0.849976 7.49998C0.849976 11.1727 3.82728 14.15 7.49998 14.15C11.1727 14.15 14.15 11.1727 14.15 7.49998C14.15 3.82728 11.1727 0.849976 7.49998 0.849976ZM6.74049 8.08072L4.22363 4.57237C4.15231 4.47295 4.16346 4.33652 4.24998 4.25C4.33649 4.16348 4.47293 4.15233 4.57234 4.22365L8.08069 6.74051C8.56227 7.08599 8.61906 7.78091 8.19998 8.2C7.78089 8.61909 7.08597 8.56229 6.74049 8.08072Z"),...Object.entries({ZeroOneN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0RFRDI1RjI0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0RFRDI1RjM0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQTE2QzQzRDQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQTE2QzQzRTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnTT5ywAAAJMSURBVHja7Fc9T2JBFB3MZq1IqLSgsRM6G6TcAmK7VNoRK4yBxE6XP/CsNxBohc6G5w+AoCU0aEWpBfAD4AeM55AZMjvvg2dClsRwkxOeb+7ce+6dmTPPmJRSbNP2xJZtR2DrBH6k0+ndEkSxBHAD9AGpMAJc4Lfh1zDGn4GLgHglNb8kqANhSKVSTiaTkY7jyMFgILWNx2PZ7XZluVyW8BkBJWA1PhwO+f7ZinUO9DmH8xl3XfIGnefzuQwzBsvlcjKIAH4PWAh9zCLq9Xp48mq16knGwASTmkaShULBQ0B1ZlSr1TyFtFqtwOS3xWLxH2eyZctUUOKVFTGRtslk4iHAODZZ/k2yLDKIwLsZjJ2gM3Bo+V0wieu6vsvCCu0ucS+RPHC1vId8kp+YrWRwvHsIWaosO7Nun3DDqn1yD+zr+RQiz3WYz+dXz6iCP82g84lKB4jxF0Rv0G7P+Gw2E6ha9Ho9/eoPsRJAucbUzl53Wi79NmwU25QSJuLx+ObugkqlInD+l8+oTsAny1aHxDlKJpOBgzhBot1ui8Vi4R3cwCY8jbIJeap4JOHvAmd6flDQj+l06ncMD/yktdPp+AoW59nEeBqUnjjAzyACd7YQUcnUxL7CyJZWk7QWIs6xdcLQg6cvSzETEl+Q4iyXkAWZBHU3/stlpLvKpaWkm0sb5Tq+19exqfvWdbyU1gjX8SGLIlnKNJ9jPGYRP0gugQLwS717Az6AB+DJ+CC5Vs8vSkEffeIdK79mVALf95swtvvXbEdg2wQ+BRgAvLABcxKvek4AAAAASUVORK5CYII=",ZeroOne:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkExNkM0M0I0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkExNkM0M0M0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQTE2QzQzOTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQTE2QzQzQTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PomEhhsAAAKSSURBVHja7FexbhpBED0ipFRI7ixBQwlV0nCUWKJIydEkFSRpHCGQ0iXgBqfBbQrAShXzA4BLJJCdEip3UDoSUFvwAZv30B5a1ncHBiSk2CONdrU3O/N2dt6w+IQQxiHllXFgeQFwcAD+aDT6zDPwBNsjaAoaVtbuoNcee46hOSi5/hd6pRv41vUBXJFJJ4FA4FMymTRCodDy22g0Mnq93gOml8Ph8Mxhb71QKOQYYzqdGq1W6zPsVkHwo5tGIpFvsVhMNJtN4Saz2UwUi0UB299QU9u/tBsMBrS51WN4BrcsS4zHY7GJEKQOYmsAMIzz5GrwyWQiSqWSwDXQkchms6LRaCwyoIPYB4Ar3NdyM+cEhPXv0LC0OYH+ZJZUEASG9fdbA2AAnlI9uQwedwF7waC29Pt92t5sCoCN6FzSZCmsdluq1aoxn8+LqN6+E0uwXoKPKNiQ4j7TNA0w5gRLZRdWraz7QZOyTkU6saXb7XL4taZH3IGSKRs4asVA5s5Vg2AwaOTz+QSmCZ2GniLTuI6uFpyLbcRfq9UeHYcZwL0v5mw8SFsYqb73yMBb9Tel3W4zA4s5gC1G2Yget2Lc8Q99MZ1Ol20AmLMOTjE9c7nT1xgstW4qlQrrhn7LNgACgp8/mN56dkKk84hVb1OLo+T+qUv66wi4QlnSeNc+cAG0y81IvyDfZaf7CE1Av5JubE6qSLDxXQEc05ib9HbLvp/JZARPTc6rQjDMyL5+Cz7wKkDDjapZD74zAOngHbRN57wGJyFAmfa6w/71ndCruyBoB0MHlf4FxZUDJd+o7wF8Z7Vfy/dAx8HFJWies1ng+CABqqe8oMIOL6KHDV5ElPt9APj/HqW+l/+Gzx7APwEGACfjkeXK58xsAAAAAElFTkSuQmCC",ZeroN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDc5MkNFMEM0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDc5MkNFMEQ0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NzkyQ0UwQTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NzkyQ0UwQjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpR0ImIAAALlSURBVHja7Fe/jxJBGF0MyVUk2HgJFJ6NQqUNWEoCkfKWxusozxBI7Eiw8ardKy/hxyVWQqcF8AdA9Eqg8DqwuwJI7Aj8AeN7OEuGhd09tCBRvuTLzA4z37z53rxvF58QQtunPdD2bAcA/mg0+p9nYMf5Qfhz5fnmbwH47iND0PQaTS4QCOiRSGQ1PhgMZmja8OvhcNi/z4aIdc5Ycs1HjQCcHJu9hH/KZrOi0+kIu83nc9FsNkUymRSYZ3jEegqv6bousLHI5/NcU3RbkIa3W62W8DICKZVKDFhziFWMxWKiXq+v1ozHY8Exv0OajpmmSqVyitOtxrvdrjYajZZ90KGlUiktFAot+4ZhcDiHtTOc8L1KHWLoAKiFw+FVrOl0+rvjgNjA5msnJA3MCPxC+hX8DhuvzZN0kDqDfTt1nCPT/w1+tm3zIFPDidYC8oZxc8vcI6ZdBUHKMPadY1YMy0gBY6uxfHhIMBEKAw+BvIUMLB+q1aqG/iXSWnKg6wjND9DzmHQsFgttMploqlpIm2maWr/fv8bj5zUZMrV2KWYymaXTyDMCPgGAOxdpXRQKhQ9I7cZv2FSzDrPVvG44TiLc5CWp0Mnrn5gfxWQDFG8r02nddpwwiAzMXOrLC6d3CtNPWhxLMSjYKKcYe0XZ0OLxOOVHOX1xA6Bybj8MKWg0GjdOFNjTeUL5WNbr9UjDV3jcIf3nVIllrHK8V2xVYxypphr8kbXeidO2ql+WWwnijQrU0rq6mdT4W/gta4ldiuVy2ZJi0Q1AmoHVxTyBDL50/m7XOkETvIxxTL1zHpSwBoJlWBa2mtvNNpky+wmcjJvIk6Vtcc5Y9QjeHovxveRlbiun9tLKVFul1S2W+kJiywx4fg9AXmm+UDD5lIqg3HizwftSYgBHmV1izhXGfnrEeobmHeLkuB7rIj4n+WyTGjwh2xP4rXR+kMx2/BBKyLWzXQD8mx+lvsNfswOAfQP4JcAAK/At0HQvwB8AAAAASUVORK5CYII=",OneOnly:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJCNTBCRDA0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkExNkM0MzQ0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkI1MEJDRTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkI1MEJDRjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pur5d4QAAAE1SURBVHjaYvz//z/DQAImhgEGow4YcAewaGpqjvAQoJI5CUAsD2VPB+JXULY4EGcCMSivPwTiBRgOuH79OkU2A6MwITAwcL6UlBSYP3XqVHGgmVlQufqcnJxMUFnz7NkzhvXr1zMA5VAdAZKkBGtoaBw4derUfxgA8v8jycHFQWpAatH1j2bDUQeACqIGaDahGgClfmLlWIDZpJ7SKhmWBUEgOzsbRDVgUwOUswcy7ZHFGf8PcIOABVhwUGwIsCBiQCqIUOSgIQIviNABI7BwaKDQfodFixbZm5qawuIYRDVC5ephJe3p06cZ4uLiDgKZB0ZLwtGCaNg1SBYAs5c9MJExIDVI4GxgtgQ1SBiePn3KgK1BAsqG1GoRKSA54CVaiwgEHtDSAUM3DTCO9g1HvAMAAgwAvvwYPnW1JuQAAAAASUVORK5CYII=",OneN:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkExNkM0Mzc0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkExNkM0Mzg0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCQTE2QzQzNTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCQTE2QzQzNjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt+BFx8AAAIISURBVHja7Fc9TwJBEF0MLYkdBgot4QdwLSaQSAmNdkCrR61CI9Ud1oCUIB0NYElBtJU/QIkmQKIVgcpqfXPekQNBYu7WM4FJJvs1x87Ovnk7uDjnzEnZYw7LzgHHHXAFAoHtjoDbpt9JQw/1fgX6vsH+CDohdVnlgWAwmE4kElWfz6eNy+Vypd/vX6yx9aK58fv959PplM1mswNGDlhRYOip1+txQzDma+wuoYNSqaTZUYvxnXAHMJag1WQyyYfDITdLJBLhbpEAQ8gVj8eThTBc03weoWeqqrLRaFQREgHoKfQRG3Pc9cKpW60WD4VCZKPS90IiAJA1FEVhkiTN58bjMaNIwNl7yhQA9VlLQ4Qpj9a2J1GWZZbJZBbmkBkMoHtFt6pPxbBvTGNCHZWWNqX7xalXriHkdNfrqZg7XBC4KTxWhSJgENGy0Onb7faPj1He4v7H9Xo9DGRrg1QqpaWY2SEAj+Vyua+0W6ZpQWn4YjCeWYrFIq0NiBWN70U54CWajcfj3LxGQmxIrEjsSCwplIrRP6N1cMI3Qmo2mxohCa0HQDYNNCfASAG8z7rd7nwtGo3+TUECJz6gWfB/DAT1QCAlViSgYq5gBxXXQDZhQrqpIFnlSAdNBwx4BWwUsPk15m7tqgnTepVjOPC2wX5fr4hse4xqv7Sf/J+yfPffcOsd+BRgAOvawAWTC+PMAAAAAElFTkSuQmCC",One:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUJCNTBCQ0M0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUJCNTBCQ0Q0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQkI1MEJDQTQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQkI1MEJDQjQ4NjQxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnOhfCQAAADcSURBVHjaYvz//z/DQAImhgEGow4YcAewaGpqjvAQoJI5CUAsD2VPB+JXxGpkpLQcAEZhQmBg4HwpKSkwf+rUqdOvX7+eRbQBIAdQgjU0NA6cOnXqPwwA+f9J0T+aDUcdACqIGkBpkZqGAs2sJzobTpky5T+lWRGYDRmkpaXBbKB5JOll/D/ADQIWYMFBsSGgEEAqiEgLAWDB0UCh/Q6LFi2yNzU1hcU/iGocLQlHC6IR1SBZsH79entgQmRAapCQlA2p1SJSQHLAS3o3yRYM2TTAONo3HPEOAAgwAJh583IRUllDAAAAAElFTkSuQmCC",N:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDc5MkNFMDg0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDc5MkNFMDk0ODY0MTFFN0JEQTA4NTA5QjY4NEI4MzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNDQwRjc3NTQ4M0MxMUU3QkRBMDg1MDlCNjg0QjgzMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNDQwRjc3NjQ4M0MxMUU3QkRBMDg1MDlCNjg0QjgzMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkbQDKwAAAGjSURBVHja7Jcxb4JQEMefLl272cjSUbYu0g+gSVemdpPZwKzRRSf4AGg70k8AfACTdqx+ibYJLp2MfoDr/wg0vJp2Al6TeskFeQ+4e/fufvdsEJFQKU2hWE4OKHeg0el0TlugQi6h5+kW1MkBXddbuMw0TRvu93txOBwumjUaH+Hy4jjOcLVaCcuyeHgmOAJVKpLcgAaDwYCSJKGi9Hq9yo273W6XwjCUDCP8NJlMCPP3VRm+hT6xETZWlCiKiJ3CvJfmX8mGW7wqDu16vZYMb7db4m3A/CP0On+HQTRHMpRVCiaS7Mq2bWlwuVyKxWLxjp/BEQkxQWWVYr/fF9/JipALrP5nFJPiA0EagbI+BsAI0zSlMV59HMe/NqN5mYg1DMPyPE+02+2vwc1mI6bTKTvzgNsP6Y0KSnAMfctySxLf97kKXqGj/PmqOJCWI7aDsHrJCaZhVo4BU7JqEt5Bn13XPQIS05GBVEcvOGPqsTE0IQnHtThQcOQGGnP4mYpZL/Bqc6CYpFkvGOcoVsEfPg3tVB7Jdn/nWH76b/jvHfgUYADeZNmzPgOYQQAAAABJRU5ErkJggg=="}).map((([e,t])=>((e,t)=>({prefix:"base64",iconName:e,icon:[24,24,,,t]}))(e,t)))],DT={};function _T(e,t){return DT[`${e}-${t}`]}!function(e){e.reduce(((e,t)=>(e[`${t.prefix}-${t.iconName}`]=t,e)),DT)}(QT);const qT=(e,t)=>()=>{const t=e.prefix??"fas",n=e.name??"",i=e.size??18,o=_T(t,n);if(!o)return sc``;const[l,r,,,a]=o.icon,s=i/24*1.5;return ac`
    <div
      class=${["icon",PT,e.class]}
      style=${{transform:`rotate(${e.rotate??0}deg)`}}
      ...${$T({title:e.title})}
      @click=${e.onClick}
    >
      ${"base64"===t?ac`
            <img
              style=${{width:`${i}px`,height:`${i}px`}}
              src=${a}
            />
          `:sc`
            <svg
              class=${e.useTransition?BT:null}
              style=${{width:"fas"===t?`${s}rem`:`${i}px`,height:"fas"===t?`${s}rem`:`${i}px`}}
              viewBox="0 0 ${l} ${r}"
            >
              ${e.color?sc`<path d=${a} fill=${e.color}></path>`:sc`<path d=${a}></path>`}
            </svg>
    `}
    </div>
  `},eN=Cc`
  position: absolute;
  background-color: var(--memo-background);
  border-radius: 6px;
  border: 1px solid var(--memo-border);
  fill: transparent;
  color: transparent;

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
  }

  &[data-selected] {
    border: 1px solid var(--memo-select);
  }
`,tN=Cc`
  position: relative;
  display: flex;
  flex-direction: column;
  padding: ${8}px;
  width: 100%;
  height: 100%;
`,nN=Cc`
  display: flex;
  flex-direction: column;
  position: relative;
`,iN=Cc`
  position: absolute;
  top: -${9}px;
  left: -${8}px;
  width: calc(100% + ${16}px);
  min-height: 4px;
  border-radius: 6px 6px 0 0;
  cursor: pointer;
`,oN=Cc`
  display: flex;
  height: ${12}px;
  justify-content: flex-end;
  margin-bottom: ${4}px;
  cursor: move;

  & > .icon {
    margin-left: 4px;
    cursor: pointer;
  }

  & > .icon:hover {
    fill: var(--active);
    color: var(--active);
  }
`,lN=Cc`
  resize: none;
  background-color: transparent;
  ${_w};
  line-height: normal;
`,rN=(e,t)=>{const n=Lw(t),i=({event:e,movementX:t,movementY:i})=>{"mousemove"===e.type&&e.preventDefault();const{store:o}=n.value;o.dispatch(RW(t,i))},o=t=>{const o=t.target;if(!o)return;const{store:l}=n.value;l.dispatch(NX(e.memo.id,kw(t))),!o.closest(".memo-header-color")&&!o.closest(".memo-textarea")&&!o.closest(".icon")&&!o.closest(".sash")&&ST.subscribe(i)},l=()=>{const{store:t}=n.value;t.dispatch(TX(e.memo.id))},r=t=>{const i=t.target;if(!i)return;const{store:o}=n.value;o.dispatch(Wx({id:e.memo.id,value:i.value}))},a=()=>{t.host.dispatchEvent(dT())},s=t=>{const{emitter:i}=n.value;i.emit(wY({x:t.clientX,y:t.clientY,color:e.memo.ui.color}))};return()=>{var t;const{store:i,keyBindingMap:c}=n.value,{editor:u}=i.state,{memo:d}=e,p=!!u.selectedMap[d.id],h=tI(d),m=nI(d);return ac`
      <div
        class=${["memo",eN]}
        style=${{top:`${d.ui.y}px`,left:`${d.ui.x}px`,"z-index":`${d.ui.zIndex}`,width:`${h}px`,height:`${m}px`}}
        ?data-selected=${p}
        ?data-focus-border=${p}
        @mousedown=${o}
        @touchstart=${o}
      >
        <div class=${tN}>
          <div class=${nN}>
            <div
              class=${["memo-header-color",iN]}
              style=${{"background-color":d.ui.color}}
              @click=${s}
            ></div>
            <div class=${oN}>
              <${qT}
                size=${12}
                name="xmark"
                title=${Vw(null==(t=c.removeTable[0])?void 0:t.shortcut)}
                useTransition=${!0}
                .onClick=${l}
              />
            </div>
          </div>
          <textarea
            class=${["memo-textarea","scrollbar",lN]}
            style=${{width:`${d.ui.width}px`,height:`${d.ui.height}px`}}
            spellcheck="false"
            .value=${d.value}
            @input=${r}
            @wheel=${rT}
            @blur=${a}
          ></textarea>
          <${ET} memo=${d} top=${m} left=${h} />
        </div>
      </div>
    `}},aN=Cc`
  position: absolute;
  max-width: 100px;
  overflow: hidden;
  display: flex;
  pointer-events: none;
  z-index: 2147483647;

  & > span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,sN=(e,t)=>{const n=Vo({x:e.tracker.x,y:e.tracker.y}),{addUnsubscribe:i}=Hw();return uo((()=>{i(xT.subscribe((()=>{const{tracker:t}=e;n.x+=.05*(t.x-n.x),n.y+=.05*(t.y-n.y)})))})),()=>{const{tracker:{nickname:t}}=e;return ac`
      <div
        class=${aN}
        style=${{left:`${n.x}px`,top:`${n.y}px`}}
      >
        <${qT} name="arrow-pointer" size=${16} />
        <span>${t}</span>
      </div>
    `}},cN=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=Vo({force:!1}),l=()=>{o.force=!o.force};return uo((()=>{const{store:e}=n.value,{editor:{sharedMouseTrackerMap:t}}=e.state;i(So(t).subscribe(l))})),()=>{const{store:e}=n.value,{editor:{sharedMouseTrackerMap:t}}=e.state;return o.force,ac`
      ${Ja(Object.values(t),(e=>e.id),(e=>ac`<${sN} tracker=${e} />`))}
    `}};function uN(e){return Array.isArray?Array.isArray(e):"[object Array]"===vN(e)}const dN=1/0;function pN(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-dN?"-0":t}(e)}function hN(e){return"string"==typeof e}function mN(e){return"number"==typeof e}function bN(e){return!0===e||!1===e||function(e){return fN(e)&&null!==e}(e)&&"[object Boolean]"==vN(e)}function fN(e){return"object"==typeof e}function yN(e){return null!=e}function gN(e){return!e.trim().length}function vN(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ZN=e=>`Missing ${e} property in key`,xN=e=>`Property 'weight' in key '${e}' must be a positive integer`,GN=Object.prototype.hasOwnProperty;class XN{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=IN(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function IN(e){let t=null,n=null,i=null,o=1,l=null;if(hN(e)||uN(e))i=e,t=WN(e),n=kN(e);else{if(!GN.call(e,"name"))throw new Error(ZN("name"));const r=e.name;if(i=r,GN.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(xN(r));t=WN(r),n=kN(r),l=e.getFn}return{path:t,id:n,weight:o,src:i,getFn:l}}function WN(e){return uN(e)?e:e.split(".")}function kN(e){return uN(e)?e.join("."):e}const VN={useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const o=(e,t,l)=>{if(yN(e))if(t[l]){const r=e[t[l]];if(!yN(r))return;if(l===t.length-1&&(hN(r)||mN(r)||bN(r)))n.push(pN(r));else if(uN(r)){i=!0;for(let e=0,n=r.length;e<n;e+=1)o(r[e],t,l+1)}else t.length&&o(r,t,l+1)}else n.push(e)};return o(e,hN(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var SN={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...VN};const CN=/[^ ]+/g;class LN{constructor({getFn:e=SN.getFn,fieldNormWeight:t=SN.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,i=Math.pow(10,t);return{get(t){const o=t.match(CN).length;if(n.has(o))return n.get(o);const l=1/Math.pow(o,.5*e),r=parseFloat(Math.round(l*i)/i);return n.set(o,r),r},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,hN(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();hN(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!yN(e)||gN(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,i)=>{let o=t.getFn?t.getFn(e):this.getFn(e,t.path);if(yN(o))if(uN(o)){let e=[];const t=[{nestedArrIndex:-1,value:o}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(yN(i))if(hN(i)&&!gN(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else uN(i)&&i.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[i]=e}else if(hN(o)&&!gN(o)){let e={v:o,n:this.norm.get(o)};n.$[i]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function RN(e,t,{getFn:n=SN.getFn,fieldNormWeight:i=SN.fieldNormWeight}={}){const o=new LN({getFn:n,fieldNormWeight:i});return o.setKeys(e.map(IN)),o.setSources(t),o.create(),o}function YN(e,{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:o=SN.distance,ignoreLocation:l=SN.ignoreLocation}={}){const r=t/e.length;if(l)return r;const a=Math.abs(i-n);return o?r+a/o:a?1:r}const wN=32;function TN(e,t,n,{location:i=SN.location,distance:o=SN.distance,threshold:l=SN.threshold,findAllMatches:r=SN.findAllMatches,minMatchCharLength:a=SN.minMatchCharLength,includeMatches:s=SN.includeMatches,ignoreLocation:c=SN.ignoreLocation}={}){if(t.length>wN)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(wN));const u=t.length,d=e.length,p=Math.max(0,Math.min(i,d));let h=l,m=p;const b=a>1||s,f=b?Array(d):[];let y;for(;(y=e.indexOf(t,m))>-1;){let e=YN(t,{currentLocation:y,expectedLocation:p,distance:o,ignoreLocation:c});if(h=Math.min(e,h),m=y+u,b){let e=0;for(;e<u;)f[y+e]=1,e+=1}}m=-1;let g=[],v=1,Z=u+d;const x=1<<u-1;for(let i=0;i<u;i+=1){let l=0,a=Z;for(;l<a;)YN(t,{errors:i,currentLocation:p+a,expectedLocation:p,distance:o,ignoreLocation:c})<=h?l=a:Z=a,a=Math.floor((Z-l)/2+l);Z=a;let s=Math.max(1,p-a+1),y=r?d:Math.min(p+a,d)+u,G=Array(y+2);G[y+1]=(1<<i)-1;for(let l=y;l>=s;l-=1){let r=l-1,a=n[e.charAt(r)];if(b&&(f[r]=+!!a),G[l]=(G[l+1]<<1|1)&a,i&&(G[l]|=(g[l+1]|g[l])<<1|1|g[l+1]),G[l]&x&&(v=YN(t,{errors:i,currentLocation:r,expectedLocation:p,distance:o,ignoreLocation:c}),v<=h)){if(h=v,m=r,m<=p)break;s=Math.max(1,2*p-m)}}if(YN(t,{errors:i+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:c})>h)break;g=G}const G={isMatch:m>=0,score:Math.max(.001,v)};if(b){const e=function(e=[],t=SN.minMatchCharLength){let n=[],i=-1,o=-1,l=0;for(let r=e.length;l<r;l+=1){let r=e[l];r&&-1===i?i=l:!r&&-1!==i&&(o=l-1,o-i+1>=t&&n.push([i,o]),i=-1)}return e[l-1]&&l-i>=t&&n.push([i,l-1]),n}(f,a);e.length?s&&(G.indices=e):G.isMatch=!1}return G}function NN(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const o=e.charAt(n);t[o]=(t[o]||0)|1<<i-n-1}return t}class KN{constructor(e,{location:t=SN.location,threshold:n=SN.threshold,distance:i=SN.distance,includeMatches:o=SN.includeMatches,findAllMatches:l=SN.findAllMatches,minMatchCharLength:r=SN.minMatchCharLength,isCaseSensitive:a=SN.isCaseSensitive,ignoreLocation:s=SN.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:i,includeMatches:o,findAllMatches:l,minMatchCharLength:r,isCaseSensitive:a,ignoreLocation:s},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:NN(e),startIndex:t})},u=this.pattern.length;if(u>wN){let e=0;const t=u%wN,n=u-t;for(;e<n;)c(this.pattern.substr(e,wN),e),e+=wN;if(t){const e=u-wN;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:o,threshold:l,findAllMatches:r,minMatchCharLength:a,ignoreLocation:s}=this.options;let c=[],u=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:p,startIndex:h})=>{const{isMatch:m,score:b,indices:f}=TN(e,t,p,{location:i+h,distance:o,threshold:l,findAllMatches:r,minMatchCharLength:a,includeMatches:n,ignoreLocation:s});m&&(d=!0),u+=b,m&&f&&(c=[...c,...f])}));let p={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(p.indices=c),p}}class zN{constructor(e){this.pattern=e}static isMultiMatch(e){return HN(e,this.multiRegex)}static isSingleMatch(e){return HN(e,this.singleRegex)}search(){}}function HN(e,t){const n=e.match(t);return n?n[1]:null}class MN extends zN{constructor(e,{location:t=SN.location,threshold:n=SN.threshold,distance:i=SN.distance,includeMatches:o=SN.includeMatches,findAllMatches:l=SN.findAllMatches,minMatchCharLength:r=SN.minMatchCharLength,isCaseSensitive:a=SN.isCaseSensitive,ignoreLocation:s=SN.ignoreLocation}={}){super(e),this._bitapSearch=new KN(e,{location:t,threshold:n,distance:i,includeMatches:o,findAllMatches:l,minMatchCharLength:r,isCaseSensitive:a,ignoreLocation:s})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class JN extends zN{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],o=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+o,i.push([t,n-1]);const l=!!i.length;return{isMatch:l,score:l?0:1,indices:i}}}const jN=[class extends zN{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},JN,class extends zN{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends zN{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends zN{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends zN{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends zN{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},MN],FN=jN.length,UN=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const ON=new Set([MN.type,JN.type]);const EN=[];function $N(e,t){for(let n=0,i=EN.length;n<i;n+=1){let i=EN[n];if(i.condition(e,t))return new i(e,t)}return new KN(e,t)}const PN="$and",BN="$or",AN="$path",QN="$val",DN=e=>!(!e[PN]&&!e[BN]),_N=e=>({[PN]:Object.keys(e).map((t=>({[t]:e[t]})))});function qN(e,t,{auto:n=!0}={}){const i=e=>{let o=Object.keys(e);const l=(e=>!!e[AN])(e);if(!l&&o.length>1&&!DN(e))return i(_N(e));if((e=>!uN(e)&&fN(e)&&!DN(e))(e)){const i=l?e[AN]:o[0],r=l?e[QN]:e[i];if(!hN(r))throw new Error((e=>`Invalid value for key ${e}`)(i));const a={keyId:kN(i),pattern:r};return n&&(a.searcher=$N(r,t)),a}let r={children:[],operator:o[0]};return o.forEach((t=>{const n=e[t];uN(n)&&n.forEach((e=>{r.children.push(i(e))}))})),r};return DN(e)||(e=_N(e)),i(e)}function eK(e,t){const n=e.matches;t.matches=[],yN(n)&&n.forEach((e=>{if(!yN(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let o={indices:n,value:i};e.key&&(o.key=e.key.src),e.idx>-1&&(o.refIndex=e.idx),t.matches.push(o)}))}function tK(e,t){t.score=e.score}class nK{constructor(e,t={},n){this.options={...SN,...t},this.options.useExtendedSearch,this._keyStore=new XN(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof LN))throw new Error("Incorrect 'index' type");this._myIndex=t||RN(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){yN(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,i-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:o,sortFn:l,ignoreFieldNorm:r}=this.options;let a=hN(e)?hN(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=SN.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:i,score:o})=>{const l=e?e.weight:null;n*=Math.pow(0===o&&l?Number.EPSILON:o,(l||1)*(t?1:i))})),e.score=n}))}(a,{ignoreFieldNorm:r}),o&&a.sort(l),mN(t)&&t>-1&&(a=a.slice(0,t)),function(e,t,{includeMatches:n=SN.includeMatches,includeScore:i=SN.includeScore}={}){const o=[];return n&&o.push(eK),i&&o.push(tK),e.map((e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return o.length&&o.forEach((t=>{t(e,i)})),i}))}(a,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=$N(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach((({v:e,i:n,n:o})=>{if(!yN(e))return;const{isMatch:l,score:r,indices:a}=t.searchIn(e);l&&i.push({item:e,idx:n,matches:[{score:r,value:e,norm:o,indices:a}]})})),i}_searchLogical(e){const t=qN(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:o}=e,l=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:o});return l&&l.length?[{idx:i,item:t,matches:l}]:[]}const o=[];for(let l=0,r=e.children.length;l<r;l+=1){const r=e.children[l],a=n(r,t,i);if(a.length)o.push(...a);else if(e.operator===PN)return[]}return o},i=this._myIndex.records,o={},l=[];return i.forEach((({$:e,i:i})=>{if(yN(e)){let r=n(t,e,i);r.length&&(o[i]||(o[i]={idx:i,item:e,matches:[]},l.push(o[i])),r.forEach((({matches:e})=>{o[i].matches.push(...e)})))}})),l}_searchObjectList(e){const t=$N(e,this.options),{keys:n,records:i}=this._myIndex,o=[];return i.forEach((({$:e,i:i})=>{if(!yN(e))return;let l=[];n.forEach(((n,i)=>{l.push(...this._findMatches({key:n,value:e[i],searcher:t}))})),l.length&&o.push({idx:i,item:e,matches:l})})),o}_findMatches({key:e,value:t,searcher:n}){if(!yN(t))return[];let i=[];if(uN(t))t.forEach((({v:t,i:o,n:l})=>{if(!yN(t))return;const{isMatch:r,score:a,indices:s}=n.searchIn(t);r&&i.push({score:a,key:e,value:t,idx:o,norm:l,indices:s})}));else{const{v:o,n:l}=t,{isMatch:r,score:a,indices:s}=n.searchIn(o);r&&i.push({score:a,key:e,value:o,norm:l,indices:s})}return i}}nK.version="7.0.0",nK.createIndex=RN,nK.parseIndex=function(e,{getFn:t=SN.getFn,fieldNormWeight:n=SN.fieldNormWeight}={}){const{keys:i,records:o}=e,l=new LN({getFn:t,fieldNormWeight:n});return l.setKeys(i),l.setIndexRecords(o),l},nK.config=SN,nK.parseQuery=qN,function(...e){EN.push(...e)}(class{constructor(e,{isCaseSensitive:t=SN.isCaseSensitive,includeMatches:n=SN.includeMatches,minMatchCharLength:i=SN.minMatchCharLength,ignoreLocation:o=SN.ignoreLocation,findAllMatches:l=SN.findAllMatches,location:r=SN.location,threshold:a=SN.threshold,distance:s=SN.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:r,threshold:a,distance:s},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(UN).filter((e=>e&&!!e.trim())),i=[];for(let e=0,o=n.length;e<o;e+=1){const o=n[e];let l=!1,r=-1;for(;!l&&++r<FN;){const e=jN[r];let n=e.isMultiMatch(o);n&&(i.push(new e(n,t)),l=!0)}if(!l)for(r=-1;++r<FN;){const e=jN[r];let n=e.isSingleMatch(o);if(n){i.push(new e(n,t));break}}}return i}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,l=[],r=0;for(let i=0,a=t.length;i<a;i+=1){const a=t[i];l.length=0,o=0;for(let t=0,i=a.length;t<i;t+=1){const i=a[t],{isMatch:s,indices:c,score:u}=i.search(e);if(!s){r=0,o=0,l.length=0;break}if(o+=1,r+=u,n){const e=i.constructor.type;ON.has(e)?l=[...l,...c]:l.push(c)}}if(o){let e={isMatch:!0,score:r/o};return n&&(e.indices=l),e}}return{isMatch:!1,score:1}}});function iK(e){const t=e.value.length;e.selectionStart=t,e.selectionEnd=t,e.focus()}const oK=Cc`
  display: inline-flex;
  height: 20px;
  box-sizing: border-box;
  align-items: center;
  vertical-align: middle;
  color: var(--active);
  background-color: transparent;
  border-bottom: solid transparent 1.5px;
  ${_w};
  line-height: normal;

  &.placeholder {
    color: var(--placeholder);
  }

  &.focus {
    border-bottom: solid var(--focus) 1.5px;
  }

  &.edit {
    border-bottom: solid var(--input-active) 1.5px;
  }
`,lK=Cc`
  cursor: default;
`,rK=Cc`
  user-select: none;
`,aK=Cc`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,sK=(e,t)=>{const n=Ta(),{addUnsubscribe:i}=Hw(),o=()=>{const t=!e.edit;return{placeholder:t&&!e.value.trim(),focus:t&&e.focus,edit:e.edit}},l=n=>{var i;null==(i=e.onBlur)||i.call(e,n),t.host.dispatchEvent(dT())};return co((()=>{i(So(e).subscribe((t=>{const i=n.value;"edit"!==t||!e.edit||!i||iK(i)})),So(e).subscribe((n=>{"edit"===n&&(e.edit||t.host.dispatchEvent(dT()))})))})),uo((()=>{const t=n.value;!e.autofocus||!t||iK(t)})),()=>{const t=e.focus||e.edit;return e.edit?ac`
          <input
            ${Na(n)}
            class=${["edit-input",oK,o(),e.class]}
            style=${{width:`${e.width}px`,"min-width":`${e.width}px`}}
            ...${$T({title:e.title,placeholder:e.placeholder})}
            type="text"
            spellcheck="false"
            ?data-focus-border-bottom=${t}
            .value=${e.value??""}
            @input=${e.onInput}
            @blur=${l}
            @keydown=${e.onKeydown}
          />
        `:ac`
          <div
            class=${["edit-input",oK,lK,rK,o(),e.class]}
            style=${{width:`${e.width}px`,"min-width":`${e.width}px`}}
            ...${$T({title:e.title})}
            ?data-focus-border-bottom=${t}
          >
            <span class=${aK}>
              ${e.value.trim()?e.value:e.placeholder}
            </span>
          </div>
        `}};var cK={exports:{}};cK.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return i.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return i.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return i.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return i.findChunks}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(e){var t=e.autoEscape,l=e.caseSensitive,r=void 0!==l&&l,a=e.findChunks,s=void 0===a?i:a,c=e.sanitize,u=e.searchWords,d=e.textToHighlight;return o({chunksToHighlight:n({chunks:s({autoEscape:t,caseSensitive:r,sanitize:c,searchWords:u,textToHighlight:d})}),totalLength:d?d.length:0})};var n=t.combineChunks=function(e){var t=e.chunks;return t=t.sort((function(e,t){return e.start-t.start})).reduce((function(e,t){if(0===e.length)return[t];var n=e.pop();if(t.start<=n.end){var i=Math.max(n.end,t.end);e.push({highlight:!1,start:n.start,end:i})}else e.push(n,t);return e}),[]),t},i=function(e){var t=e.autoEscape,n=e.caseSensitive,i=e.sanitize,o=void 0===i?l:i,r=e.searchWords,a=e.textToHighlight;return a=o(a),r.filter((function(e){return e})).reduce((function(e,i){i=o(i),t&&(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var l=new RegExp(i,n?"g":"gi"),r=void 0;r=l.exec(a);){var s=r.index,c=l.lastIndex;c>s&&e.push({highlight:!1,start:s,end:c}),r.index===l.lastIndex&&l.lastIndex++}return e}),[])};t.findChunks=i;var o=t.fillInChunks=function(e){var t=e.chunksToHighlight,n=e.totalLength,i=[],o=function(e,t,n){t-e>0&&i.push({start:e,end:t,highlight:n})};if(0===t.length)o(0,n,!1);else{var l=0;t.forEach((function(e){o(l,e.start,!1),o(e.start,e.end,!0),l=e.end})),o(l,n,!1)}return i};function l(e){return e}}]);var uK=cK.exports;const dK=Cc`
  color: var(--active);
`,pK=(e,t)=>()=>uK.findAll({...e,autoEscape:!0}).map((({end:t,highlight:n,start:i})=>{const o=e.textToHighlight.substring(i,t);return n?ac`<span class=${dK}>${o}</span>`:o})),hK=Cc`
  display: flex;
`,mK=Cc`
  display: inline-flex;
  align-items: center;

  padding-left: 0.5em;
  padding-right: 0.5em;
  padding-bottom: 0.05em;
  margin-right: 4px;
  ${_w};

  white-space: nowrap;
  color: var(--foreground);
  border: 1px solid var(--foreground);
  border-radius: 3px;

  &:last-child {
    margin-right: 0;
  }
`,bK=Cc`
  padding-left: 0.25em;
  padding-right: 0.25em;
  padding-bottom: 0.05em;
  margin-right: 2px;
  font-size: 10px;

  white-space: nowrap;
  color: var(--placeholder);
  border: 1px solid var(--placeholder);
  border-radius: 3px;

  &:last-child {
    margin-right: 0;
  }
`,fK=(e,t)=>()=>{const t=Ww(e.shortcut).map((([e,t])=>[...e,t].join(" + ")));return ac`
      <div class=${["kbd",hK]}>
        ${t.map((t=>ac`<div class=${e.mini?bK:mK}>
              ${t}
            </div>`))}
      </div>
    `},yK={[dg.MariaDB]:[{name:"BIGINT",primitiveType:"long"},{name:"BINARY",primitiveType:"string"},{name:"BIT",primitiveType:"int"},{name:"BLOB",primitiveType:"lob"},{name:"BOOL",primitiveType:"boolean"},{name:"BOOLEAN",primitiveType:"boolean"},{name:"CHAR",primitiveType:"string"},{name:"DATE",primitiveType:"date"},{name:"DATETIME",primitiveType:"dateTime"},{name:"DEC",primitiveType:"decimal"},{name:"DECIMAL",primitiveType:"decimal"},{name:"DOUBLE PRECISION",primitiveType:"double"},{name:"DOUBLE",primitiveType:"double"},{name:"ENUM",primitiveType:"string"},{name:"FIXED",primitiveType:"decimal"},{name:"FLOAT",primitiveType:"float"},{name:"GEOMETRY",primitiveType:"string"},{name:"GEOMETRYCOLLECTION",primitiveType:"string"},{name:"INT",primitiveType:"int"},{name:"INTEGER",primitiveType:"int"},{name:"JSON",primitiveType:"lob"},{name:"LINESTRING",primitiveType:"string"},{name:"LONGBLOB",primitiveType:"lob"},{name:"LONGTEXT",primitiveType:"lob"},{name:"MEDIUMBLOB",primitiveType:"lob"},{name:"MEDIUMINT",primitiveType:"int"},{name:"MEDIUMTEXT",primitiveType:"lob"},{name:"MULTILINESTRING",primitiveType:"string"},{name:"MULTIPOINT",primitiveType:"string"},{name:"MULTIPOLYGON",primitiveType:"string"},{name:"NUMERIC",primitiveType:"decimal"},{name:"POINT",primitiveType:"string"},{name:"POLYGON",primitiveType:"string"},{name:"REAL",primitiveType:"double"},{name:"SET",primitiveType:"string"},{name:"SMALLINT",primitiveType:"int"},{name:"TEXT",primitiveType:"lob"},{name:"TIME",primitiveType:"time"},{name:"TIMESTAMP",primitiveType:"dateTime"},{name:"TINYBLOB",primitiveType:"lob"},{name:"TINYINT",primitiveType:"int"},{name:"TINYTEXT",primitiveType:"lob"},{name:"VARBINARY",primitiveType:"string"},{name:"VARCHAR",primitiveType:"string"},{name:"YEAR",primitiveType:"int"}],[dg.MSSQL]:[{name:"bigint",primitiveType:"long"},{name:"binary",primitiveType:"lob"},{name:"bit",primitiveType:"int"},{name:"char",primitiveType:"string"},{name:"date",primitiveType:"date"},{name:"datetime",primitiveType:"dateTime"},{name:"datetime2",primitiveType:"dateTime"},{name:"datetimeoffset",primitiveType:"dateTime"},{name:"decimal",primitiveType:"decimal"},{name:"float",primitiveType:"double"},{name:"geography",primitiveType:"string"},{name:"geometry",primitiveType:"string"},{name:"image",primitiveType:"lob"},{name:"int",primitiveType:"int"},{name:"money",primitiveType:"double"},{name:"nchar",primitiveType:"string"},{name:"ntext",primitiveType:"lob"},{name:"numeric",primitiveType:"float"},{name:"nvarchar",primitiveType:"string"},{name:"real",primitiveType:"float"},{name:"smalldatetime",primitiveType:"dateTime"},{name:"smallint",primitiveType:"int"},{name:"smallmoney",primitiveType:"float"},{name:"sql_variant",primitiveType:"string"},{name:"text",primitiveType:"lob"},{name:"time",primitiveType:"time"},{name:"tinyint",primitiveType:"int"},{name:"uniqueidentifier",primitiveType:"string"},{name:"varbinary",primitiveType:"string"},{name:"varchar",primitiveType:"string"},{name:"xml",primitiveType:"lob"}],[dg.MySQL]:[{name:"BIGINT",primitiveType:"long"},{name:"BINARY",primitiveType:"string"},{name:"BIT",primitiveType:"int"},{name:"BLOB",primitiveType:"lob"},{name:"BOOL",primitiveType:"boolean"},{name:"BOOLEAN",primitiveType:"boolean"},{name:"CHAR",primitiveType:"string"},{name:"DATE",primitiveType:"date"},{name:"DATETIME",primitiveType:"dateTime"},{name:"DEC",primitiveType:"decimal"},{name:"DECIMAL",primitiveType:"decimal"},{name:"DOUBLE PRECISION",primitiveType:"double"},{name:"DOUBLE",primitiveType:"double"},{name:"ENUM",primitiveType:"string"},{name:"FLOAT",primitiveType:"float"},{name:"GEOMETRY",primitiveType:"string"},{name:"GEOMETRYCOLLECTION",primitiveType:"string"},{name:"INT",primitiveType:"int"},{name:"INTEGER",primitiveType:"int"},{name:"JSON",primitiveType:"lob"},{name:"LINESTRING",primitiveType:"string"},{name:"LONGBLOB",primitiveType:"lob"},{name:"LONGTEXT",primitiveType:"lob"},{name:"MEDIUMBLOB",primitiveType:"lob"},{name:"MEDIUMINT",primitiveType:"int"},{name:"MEDIUMTEXT",primitiveType:"lob"},{name:"MULTILINESTRING",primitiveType:"string"},{name:"MULTIPOINT",primitiveType:"string"},{name:"MULTIPOLYGON",primitiveType:"string"},{name:"NUMERIC",primitiveType:"decimal"},{name:"POINT",primitiveType:"string"},{name:"POLYGON",primitiveType:"string"},{name:"SET",primitiveType:"string"},{name:"SMALLINT",primitiveType:"int"},{name:"TEXT",primitiveType:"lob"},{name:"TIME",primitiveType:"time"},{name:"TIMESTAMP",primitiveType:"dateTime"},{name:"TINYBLOB",primitiveType:"lob"},{name:"TINYINT",primitiveType:"int"},{name:"TINYTEXT",primitiveType:"lob"},{name:"VARBINARY",primitiveType:"string"},{name:"VARCHAR",primitiveType:"string"},{name:"YEAR",primitiveType:"int"}],[dg.Oracle]:[{name:"BFILE",primitiveType:"lob"},{name:"BINARY_DOUBLE",primitiveType:"double"},{name:"BINARY_FLOAT",primitiveType:"float"},{name:"BLOB",primitiveType:"lob"},{name:"CHAR",primitiveType:"string"},{name:"CLOB",primitiveType:"lob"},{name:"DATE",primitiveType:"date"},{name:"DATETIME",primitiveType:"dateTime"},{name:"LONG RAW",primitiveType:"lob"},{name:"LONG",primitiveType:"lob"},{name:"NCHAR",primitiveType:"string"},{name:"NCLOB",primitiveType:"lob"},{name:"NUMBER",primitiveType:"long"},{name:"NVARCHAR2",primitiveType:"string"},{name:"RAW",primitiveType:"lob"},{name:"TIMESTAMP WITH LOCAL TIME ZONE",primitiveType:"dateTime"},{name:"TIMESTAMP WITH TIME ZONE",primitiveType:"dateTime"},{name:"TIMESTAMP",primitiveType:"dateTime"},{name:"UriType",primitiveType:"string"},{name:"VARCHAR",primitiveType:"string"},{name:"VARCHAR2",primitiveType:"string"},{name:"XMLType",primitiveType:"string"}],[dg.PostgreSQL]:[{name:"bigint",primitiveType:"long"},{name:"bigserial",primitiveType:"long"},{name:"bit varying",primitiveType:"int"},{name:"bit",primitiveType:"int"},{name:"bool",primitiveType:"boolean"},{name:"boolean",primitiveType:"boolean"},{name:"box",primitiveType:"string"},{name:"bytea",primitiveType:"string"},{name:"char",primitiveType:"string"},{name:"character varying",primitiveType:"string"},{name:"character",primitiveType:"string"},{name:"cidr",primitiveType:"string"},{name:"circle",primitiveType:"string"},{name:"date",primitiveType:"date"},{name:"decimal",primitiveType:"decimal"},{name:"double precision",primitiveType:"double"},{name:"float4",primitiveType:"float"},{name:"float8",primitiveType:"double"},{name:"inet",primitiveType:"string"},{name:"int",primitiveType:"int"},{name:"int2",primitiveType:"int"},{name:"int4",primitiveType:"int"},{name:"int8",primitiveType:"long"},{name:"integer",primitiveType:"int"},{name:"interval",primitiveType:"time"},{name:"json",primitiveType:"lob"},{name:"jsonb",primitiveType:"lob"},{name:"line",primitiveType:"string"},{name:"lseg",primitiveType:"string"},{name:"macaddr",primitiveType:"string"},{name:"macaddr8",primitiveType:"string"},{name:"money",primitiveType:"double"},{name:"numeric",primitiveType:"decimal"},{name:"path",primitiveType:"string"},{name:"pg_lsn",primitiveType:"int"},{name:"point",primitiveType:"string"},{name:"polygon",primitiveType:"string"},{name:"real",primitiveType:"float"},{name:"serial",primitiveType:"int"},{name:"serial2",primitiveType:"int"},{name:"serial4",primitiveType:"int"},{name:"serial8",primitiveType:"long"},{name:"smallint",primitiveType:"int"},{name:"smallserial",primitiveType:"int"},{name:"text",primitiveType:"string"},{name:"time with time zone",primitiveType:"time"},{name:"time",primitiveType:"time"},{name:"timestamp with time zone",primitiveType:"dateTime"},{name:"timestamp",primitiveType:"dateTime"},{name:"timestamptz",primitiveType:"dateTime"},{name:"timetz",primitiveType:"time"},{name:"tsquery",primitiveType:"string"},{name:"tsvector",primitiveType:"string"},{name:"txid_snapshot",primitiveType:"string"},{name:"uuid",primitiveType:"string"},{name:"varbit",primitiveType:"int"},{name:"varchar",primitiveType:"string"},{name:"xml",primitiveType:"lob"}],[dg.SQLite]:[{name:"BLOB",primitiveType:"lob"},{name:"INTEGER",primitiveType:"int"},{name:"NUMERIC",primitiveType:"decimal"},{name:"REAL",primitiveType:"double"},{name:"TEXT",primitiveType:"string"}]},gK=Cc`
  position: relative;
  outline: none;
`,vK=Cc`
  position: absolute;
  z-index: 1;
  top: ${20}px;
  left: 0;
  color: var(--foreground);
  background-color: var(--table-background);
  border: 1px solid var(--table-border);
  white-space: nowrap;
  ${_w};
`,ZK=Cc`
  display: flex;
  align-items: center;
  padding: 0 4px;
  height: 20px;
  cursor: pointer;

  &:hover {
    background-color: var(--column-hover);
  }

  &.selected {
    background-color: var(--column-select);

    .kbd {
      visibility: visible;
    }
  }

  & > .kbd {
    margin-left: auto;
    padding-left: 6px;
    visibility: hidden;
  }
`,xK=Pu(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","Enter"]),GK=(e,t)=>{var n;const i=Lw(t,null==(n=e.app)?void 0:n.value),o=Vo({hints:[],index:-1}),l=Ta(),{addUnsubscribe:r}=Hw(),a=e=>{const{store:t}=i.value,{settings:n}=t.state,l=yK[n.database]??[],r=e.trim();o.index=-1,o.hints=by(r)?[]:new nK(l,{keys:["name"]}).search(r).map((e=>e.item))},s=t=>{const n=o.hints[t];if(!n)return;const{store:l}=i.value;l.dispatch(DX({id:e.columnId,tableId:e.tableId,value:n.name})),a("")},c={ArrowUp:e=>{if(!o.hints.length)return;e.preventDefault();const t=o.index-1;o.index=t<0?o.hints.length-1:t},ArrowDown:e=>{if(!o.hints.length)return;e.preventDefault();const t=o.index+1;o.index=t>o.hints.length-1?0:t},ArrowLeft:e=>{o.index=-1},ArrowRight:e=>{-1!==o.index&&(e.preventDefault(),s(o.index))},Tab:e=>{-1!==o.index&&(e.preventDefault(),e.stopPropagation(),s(o.index))},Enter:t=>{var n;-1!==o.index&&(t.stopPropagation(),s(o.index),null==(n=e.onEditEnd)||n.call(e))}},u=e=>{var t;xK(e.key)&&(null==(t=c[e.key])||t.call(c,e))};let d=!1,p=-1;const h=()=>{d=!0},m=t=>{e.edit&&(d=!1,clearTimeout(p),p=setTimeout((()=>{var n,i;const o=null==(n=l.value)?void 0:n.querySelector("input");d&&o&&e.edit?iK(o):null==(i=e.onBlur)||i.call(e,t)}),1))},b=t=>{var n;const i=t.target;i&&a(i.value),null==(n=e.onInput)||n.call(e,t)};return uo((()=>{const{store:t}=i.value,{settings:n}=t.state;r(So(e).subscribe((t=>{"edit"===t&&!e.edit&&a("")})),So(n).subscribe((t=>{"database"===t&&a(e.value)})))})),()=>ac`
    <div
      class=${gK}
      ${Na(l)}
      tabindex="-1"
      @focus=${h}
      @focusin=${h}
      @focusout=${m}
    >
      <${sK}
        placeholder="dataType"
        width=${e.width}
        value=${e.value}
        focus=${e.focus}
        edit=${e.edit}
        autofocus=${!0}
        .onInput=${b}
        .onKeydown=${u}
      />
      ${e.edit?ac`
            <div class=${vK}>
              ${Ja(o.hints,(e=>e.name),((t,n)=>ac`
                  <div
                    class=${[ZK,{selected:n===o.index}]}
                    @click=${()=>s(n)}
                  >
                    <${pK}
                      searchWords=${[e.value]}
                      textToHighlight=${t.name}
                    />
                    <${fK} mini=${!0} shortcut="Tab" />
                  </div>
                `))}
            </div>
          `:null}
    </div>
  `},XK=Cc`
  fill: transparent;

  &.pk {
    fill: var(--key-pk);
  }

  &.fk {
    fill: var(--key-fk);
  }

  &.pfk {
    fill: var(--key-pfk);
  }
`,IK=(e,t)=>{const n=()=>{const t=Kg(e.keys,Xg.primaryKey),n=Kg(e.keys,Xg.foreignKey);return{pk:t&&!n,fk:!t&&n,pfk:t&&n}};return()=>ac`
    <${qT}
      class=${["column-col",XK,n()]}
      size=${12}
      name="key"
    />
  `},WK=Cc`
  display: inline-flex;
  height: 20px;
  box-sizing: border-box;
  align-items: center;
  color: var(--active);
  background-color: transparent;
  border-bottom: solid transparent 1.5px;
  ${_w};
  line-height: normal;
  cursor: default;
  user-select: none;

  &.focus {
    border-bottom: solid var(--focus) 1.5px;
  }
`,kK=(e,t)=>()=>ac`
    <div
      class=${[WK,{focus:e.focus}]}
      style=${{width:`${Dg}px`,"min-width":`${Dg}px`}}
      title="Not Null"
      ?data-focus-border-bottom=${e.focus}
    >
      ${Kg(e.options,Gg.notNull)?"N-N":"NULL"}
    </div>
  `,VK=Cc`
  display: inline-flex;
  height: 20px;
  box-sizing: border-box;
  align-items: center;
  color: var(--placeholder);
  background-color: transparent;
  border-bottom: solid transparent 1.5px;
  ${_w};
  line-height: normal;
  cursor: default;
  user-select: none;

  &.focus {
    border-bottom: solid var(--focus) 1.5px;
  }

  &.checked {
    color: var(--active);
  }
`,SK=(e,t)=>()=>ac`
    <div
      class=${[VK,{focus:e.focus,checked:e.checked},e.class]}
      style=${{width:`${e.width}px`,"min-width":`${e.width}px`}}
      title=${e.title}
      ?data-focus-border-bottom=${e.focus}
    >
      ${e.text}
    </div>
  `,CK=Cc`
  display: flex;
  width: 100%;
  height: ${ev}px;
  align-items: center;
  fill: transparent;
  color: transparent;
  padding: 0 ${Eg}px;

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
    background-color: var(--column-hover);
  }

  &[data-hover] {
    background-color: var(--column-hover);
  }

  &[data-selected] {
    background-color: var(--column-select);
  }

  & > .column-col {
    padding: ${2}px ${Ug}px ${2}px 0;
  }

  &.none-hover {
    background-color: transparent;
  }

  &[data-dragging] {
    opacity: 0.5;
  }

  &[data-ghost] {
    visibility: hidden;
  }
`,LK=Cc`
  cursor: pointer;
  margin-left: auto;

  &:hover {
    fill: var(--active);
    color: var(--active);
  }
`,RK=(e,t)=>{var n;const i=Lw(t,null==(n=e.app)?void 0:n.value),o=()=>{const{store:t}=i.value;t.dispatch(AX(e.column.tableId,[e.column.id]))},l=(t,n)=>{const{store:o}=i.value;o.dispatch(pZ({tableId:e.column.tableId,columnId:e.column.id,focusType:n,$mod:kw(t),shiftKey:t.shiftKey}))},r=t=>{const{store:n}=i.value;n.dispatch($X(t)?QX(t,e.column.tableId,e.column.id):bZ())},a=()=>{const{store:e}=i.value;e.dispatch(fZ())},s=(t,n)=>{const{store:o}=i.value,l=t.target;l&&o.dispatch(_X(n,e.column.tableId,e.column.id,l.value))};return()=>{var t;const{store:n,keyBindingMap:c}=i.value,{editor:u}=n.state,{column:d,selected:p}=e,h=!!u.hoverColumnMap[d.id],m=u.draggingColumnMap[d.id];return ac`
      <div
        class=${["column-row",CK]}
        data-id=${d.id}
        data-table-id=${d.tableId}
        ?data-selected=${p}
        ?data-hover=${h}
        ?data-dragging=${m}
        ?data-ghost=${e.ghost}
        draggable=${e.draggable?"true":"false"}
        @dragstart=${e.onDragstart}
        @dragend=${e.onDragend}
      >
        <${IK} keys=${d.ui.keys} />
        ${Ja((()=>{const{store:t}=i.value,{settings:n}=t.state,{column:o,widthName:c,widthDataType:u,widthDefault:d,widthComment:p}=e;return n.columnOrder.map((t=>{let h=null;switch(t){case cg.columnName:h=ac`
              <div
                class="column-col"
                data-type="columnName"
                @mousedown=${e=>{l(e,kv.columnName)}}
                @dblclick=${()=>{r(kv.columnName)}}
              >
                <${sK}
                  placeholder="column"
                  width=${c}
                  value=${o.name}
                  focus=${e.focusName}
                  edit=${e.editName}
                  autofocus=${!0}
                  .onBlur=${a}
                  .onInput=${e=>{s(e,kv.columnName)}}
                />
              </div>
            `;break;case cg.columnDefault:h=Kg(n.show,sg.columnDefault)?ac`
                  <div
                    class="column-col"
                    data-type="columnDefault"
                    @mousedown=${e=>{l(e,kv.columnDefault)}}
                    @dblclick=${()=>{r(kv.columnDefault)}}
                  >
                    <${sK}
                      placeholder="default"
                      width=${d}
                      value=${o.default}
                      focus=${e.focusDefault}
                      edit=${e.editDefault}
                      autofocus=${!0}
                      .onBlur=${a}
                      .onInput=${e=>{s(e,kv.columnDefault)}}
                    />
                  </div>
                `:null;break;case cg.columnComment:h=Kg(n.show,sg.columnComment)?ac`
                  <div
                    class="column-col"
                    data-type="columnComment"
                    @mousedown=${e=>{l(e,kv.columnComment)}}
                    @dblclick=${()=>{r(kv.columnComment)}}
                  >
                    <${sK}
                      title=${o.comment}
                      placeholder="comment"
                      width=${p}
                      value=${o.comment}
                      focus=${e.focusComment}
                      edit=${e.editComment}
                      autofocus=${!0}
                      .onBlur=${a}
                      .onInput=${e=>{s(e,kv.columnComment)}}
                    />
                  </div>
                `:null;break;case cg.columnDataType:h=Kg(n.show,sg.columnDataType)?ac`
                  <div
                    class="column-col"
                    data-type="columnDataType"
                    @mousedown=${e=>{l(e,kv.columnDataType)}}
                    @dblclick=${()=>{r(kv.columnDataType)}}
                  >
                    <${GK}
                      app=${i}
                      tableId=${o.tableId}
                      columnId=${o.id}
                      width=${u}
                      value=${o.dataType}
                      focus=${e.focusDataType}
                      edit=${e.editDataType}
                      .onBlur=${a}
                      .onEditEnd=${a}
                      .onInput=${e=>{s(e,kv.columnDataType)}}
                    />
                  </div>
                `:null;break;case cg.columnNotNull:h=Kg(n.show,sg.columnNotNull)?ac`
                  <div
                    class="column-col"
                    data-type="columnNotNull"
                    @mousedown=${e=>{l(e,kv.columnNotNull)}}
                    @dblclick=${()=>{r(kv.columnNotNull)}}
                  >
                    <${kK}
                      options=${o.options}
                      focus=${e.focusNotNull}
                    />
                  </div>
                `:null;break;case cg.columnUnique:h=Kg(n.show,sg.columnUnique)?ac`
                  <div
                    class="column-col"
                    data-type="columnUnique"
                    @mousedown=${e=>{l(e,kv.columnUnique)}}
                    @dblclick=${()=>{r(kv.columnUnique)}}
                  >
                    <${SK}
                      checked=${Kg(o.options,Gg.unique)}
                      width=${_g}
                      text="UQ"
                      title="Unique"
                      focus=${e.focusUnique}
                    />
                  </div>
                `:null;break;case cg.columnAutoIncrement:h=Kg(n.show,sg.columnAutoIncrement)?ac`
                  <div
                    class="column-col"
                    data-type="columnAutoIncrement"
                    @mousedown=${e=>{l(e,kv.columnAutoIncrement)}}
                    @dblclick=${()=>{r(kv.columnAutoIncrement)}}
                  >
                    <${SK}
                      checked=${Kg(o.options,Gg.autoIncrement)}
                      width=${qg}
                      text="AI"
                      title="Auto Increment"
                      focus=${e.focusAutoIncrement}
                    />
                  </div>
                `:null}return{columnType:t,template:h}})).filter((({template:e})=>!!e))})(),(({columnType:e})=>e),(({template:e})=>e))}
        <${qT}
          class=${LK}
          size=${12}
          name="xmark"
          title=${Vw(null==(t=c.removeColumn[0])?void 0:t.shortcut)}
          .onClick=${o}
        />
      </div>
    `}};class YK{constructor(e,t,n){Object.defineProperty(this,"flipSnapshots",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.root=e,this.selector=t,this.animationName=n}snapshot(){var e;this.flipSnapshots=[],null==(e=this.root.value)||e.querySelectorAll(this.selector).forEach((e=>{if(e instanceof HTMLElement){const{top:t,left:n}=e.getBoundingClientRect();this.flipSnapshots.push({el:e,top:t,left:n})}}))}play(){this.flipSnapshots.length&&(this.flipSnapshots.forEach((e=>{const t=e.el,{top:n,left:i}=t.getBoundingClientRect(),o=e.left-i,l=e.top-n;(o||l)&&(t.style.transform=`translate(${o}px,${l}px)`,t.style.transitionDuration="0s",requestAnimationFrame((()=>{t.classList.add(this.animationName),t.style.transform="",t.style.transitionDuration="";const e=()=>{t.classList.remove(this.animationName),t.removeEventListener("transitionend",e)};t.addEventListener("transitionend",e)})))})),this.flipSnapshots=[])}}const wK=(e,t)=>nY(...e.map((e=>eY(e,"dragover").pipe($u(300),Mu((()=>t(e))))))).pipe(Ou(50),oY(nY(...e.map((e=>eY(e,"dragend"))))));function TK(e,t){const n=Lw(e),i=()=>n.value.store.state.editor.focusTable;return{hasFocus:(e,n)=>function(e,t,n,i=null){if(!e||n!==e.tableId)return!1;switch(t){case"tableName":case"tableComment":return t===e.focusType}return i===e.columnId&&t===e.focusType}(i(),e,t,n),hasEdit:(e,n)=>function(e,t,n,i=null){if((null==e?void 0:e.tableId)!==n)return!1;switch(t){case kv.tableName:case kv.tableComment:return t===e.focusType&&e.edit}return i===e.columnId&&t===e.focusType&&e.edit}(i(),e,t,n),hasSelectColumn:e=>((e,t,n)=>(null==e?void 0:e.tableId)===t&&e.selectColumnIds.includes(n))(i(),t,e)}}const NK=(e,t)=>{const n=Lw(t),i=Ta(),{hasEdit:o,hasFocus:l,hasSelectColumn:r}=TK(t,e.table.id),{onMoveStart:a}=CT(t,e),{addUnsubscribe:s}=Hw(),c=Vo({dragstartId:null}),u=new YK(i,".column-row","column-row-move"),d=()=>{const{store:t}=n.value;t.dispatch(BX(e.table.id))},p=()=>{const{store:t}=n.value;t.dispatch(jX(e.table.id))},h=t=>{const{store:i}=n.value;i.dispatch(dZ({tableId:e.table.id,focusType:t}))},m=()=>{const{store:e}=n.value;e.dispatch(bZ())},b=()=>{const{store:e}=n.value;e.dispatch(fZ())},f=(t,i)=>{const{store:o}=n.value,l=t.target;if(l)switch(i){case kv.tableName:o.dispatch(PG({id:e.table.id,value:l.value}));break;case kv.tableComment:o.dispatch(BG({id:e.table.id,value:l.value}))}},y=t=>{const{emitter:i}=n.value;i.emit(wY({x:t.clientX,y:t.clientY,color:e.table.ui.color}))};let g=null;const v=()=>{const e=i.value;if(!e||g)return;const t=Array.from(e.querySelectorAll(".column-row"));t.forEach((e=>e.classList.add("none-hover")));const o=()=>{t.forEach((e=>e.classList.remove("none-hover"))),g=null,c.dragstartId=null};g=wK(t,(e=>({targetId:e.dataset.id,targetTableId:e.dataset.tableId}))).pipe((e=>t=>new uu((n=>{const i=t.subscribe({next:e=>n.next(e),error:e=>n.error(e),complete:()=>n.complete()});return()=>{i.unsubscribe(),e()}})))(o)).subscribe({next:({targetId:e,targetTableId:t})=>{((e,t)=>{const{store:i}=n.value,{editor:{draggableColumn:o}}=i.state;!o||o.columnIds.includes(e)||(u.snapshot(),i.dispatch(jW(e,t)))})(e,t)},complete:o})},Z=e=>{var t;const{store:i}=n.value,{editor:{focusTable:o}}=i.state,l=e.target;if(!l||!o||!o.columnId)return;const r=null==(t=l.dataset)?void 0:t.id;r&&(c.dragstartId=r,i.dispatch(JW(kw(e))),v())},x=()=>{const{store:e,emitter:t}=n.value;e.dispatch(WZ()),t.emit(HY())},G=()=>{const{store:e}=n.value,{editor:{draggableColumn:t}}=e.state;t&&v()};return mo((()=>u.play())),uo((()=>{const{emitter:e}=n.value;s(e.on({dragendColumnAll:()=>{null==g||g.unsubscribe()}}))})),()=>{var t,s;const{store:u,keyBindingMap:g}=n.value,{editor:v,settings:X,collections:I}=u.state,{table:W}=e,k=!!v.selectedMap[W.id],V=HG(W,u.state),S=JG(W),C=null!==c.dragstartId&&!W.columnIds.includes(c.dragstartId),L=Vn(I).collection("tableColumnEntities").selectByIds(C?[...W.columnIds,c.dragstartId]:W.columnIds);return ac`
      <div
        class=${["table",qw]}
        style=${{top:`${W.ui.y}px`,left:`${W.ui.x}px`,"z-index":`${W.ui.zIndex}`,width:`${V.width}px`,height:`${S}px`}}
        ${Na(i)}
        ?data-selected=${k}
        ?data-focus-border=${k}
        data-id=${W.id}
        @mousedown=${a}
        @touchstart=${a}
      >
        <div class=${eT}>
          <div
            class=${["table-header-color",tT]}
            style=${{"background-color":W.ui.color}}
            @click=${y}
          ></div>
          <div class=${nT}>
            <${qT}
              size=${12}
              name="plus"
              title=${Vw(null==(t=g.addColumn[0])?void 0:t.shortcut)}
              useTransition=${!0}
              .onClick=${d}
            />
            <${qT}
              size=${12}
              name="xmark"
              title=${Vw(null==(s=g.removeTable[0])?void 0:s.shortcut)}
              useTransition=${!0}
              .onClick=${p}
            />
          </div>
          <div class=${iT}>
            <div
              class="input-padding"
              data-type="tableName"
              @mousedown=${()=>{h(kv.tableName)}}
              @dblclick=${m}
            >
              <${sK}
                placeholder="table"
                width=${W.ui.widthName}
                value=${W.name}
                focus=${l(kv.tableName)}
                edit=${o(kv.tableName)}
                autofocus=${!0}
                .onBlur=${b}
                .onInput=${e=>{f(e,kv.tableName)}}
              />
            </div>
            ${Kg(X.show,sg.tableComment)?ac`
                  <div
                    class="input-padding"
                    data-type="tableComment"
                    @mousedown=${()=>{h(kv.tableComment)}}
                    @dblclick=${m}
                  >
                    <${sK}
                      placeholder="comment"
                      width=${-1===X.maxWidthComment?W.ui.widthComment:X.maxWidthComment<W.ui.widthComment?X.maxWidthComment:W.ui.widthComment}
                      value=${W.comment}
                      focus=${l(kv.tableComment)}
                      edit=${o(kv.tableComment)}
                      autofocus=${!0}
                      .onBlur=${b}
                      .onInput=${e=>{f(e,kv.tableComment)}}
                    />
                  </div>
                `:null}
          </div>
        </div>
        <div
          @dragenter=${G}
          @dragenter=${lT}
          @dragover=${lT}
        >
          ${Ja(L,(e=>e.id),(e=>ac`
              <${RK}
                app=${n}
                column=${e}
                selected=${r(e.id)}
                widthName=${V.name}
                widthDataType=${V.dataType}
                widthDefault=${V.default}
                widthComment=${V.comment}
                focusName=${l(kv.columnName,e.id)}
                focusDataType=${l(kv.columnDataType,e.id)}
                focusNotNull=${l(kv.columnNotNull,e.id)}
                focusDefault=${l(kv.columnDefault,e.id)}
                focusComment=${l(kv.columnComment,e.id)}
                focusUnique=${l(kv.columnUnique,e.id)}
                focusAutoIncrement=${l(kv.columnAutoIncrement,e.id)}
                editName=${o(kv.columnName,e.id)}
                editDataType=${o(kv.columnDataType,e.id)}
                editDefault=${o(kv.columnDefault,e.id)}
                editComment=${o(kv.columnComment,e.id)}
                draggable=${!0}
                ghost=${C&&e.id===c.dragstartId}
                .onDragstart=${Z}
                .onDragend=${x}
              />
            `))}
        </div>
      </div>
    `}},KK=Cc`
  position: relative;
  background-color: var(--canvas-background);
  top: 0;
  left: 0;
  will-change: transform;
`,zK=Cc`
  will-change: transform;
`,HK=(e,t)=>{const n=Lw(t);return()=>{const{store:t}=n.value,{settings:{width:i,height:o,scrollTop:l,scrollLeft:r,zoomLevel:a,show:s},doc:{tableIds:c,memoIds:u},editor:{drawRelationship:d},collections:p}=t.state,h=Vn(p).collection("tableEntities").selectByIds(c),m=Vn(p).collection("memoEntities").selectByIds(u);return ac`
      <div
        class=${zK}
        style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`,transform:`translate(${r}px, ${l}px) scale(${a})`,"pointer-events":e.grabMove?"none":"auto"}}
      >
        <div
          class=${KK}
          ${Na(e.canvas)}
          style=${{width:`${i}px`,height:`${o}px`,"min-width":`${i}px`,"min-height":`${o}px`}}
        >
          ${za(Xv(a)?ac`${Ja(h,(e=>e.id),(e=>ac`<${RT} table=${e} />`))}`:ac`${Ja(h,(e=>e.id),(e=>ac`<${NK} table=${e} />`))}`)}
          ${Ja(m,(e=>e.id),(e=>ac`<${rN} memo=${e} />`))}
          ${Kg(s,sg.relationship)?ac`<${zw} />`:null}
          ${null!=d&&d.start?ac`
                <${jw}
                  root=${e.root}
                  draw=${d}
                />
              `:null}
          <${cN} />
        </div>
      </div>
    `}},MK=(e,t)=>()=>{const{memo:t}=e,n=tI(t),i=nI(t);return ac`
      <div
        class=${["memo",eN]}
        style=${{top:`${t.ui.y}px`,left:`${t.ui.x}px`,"z-index":`${t.ui.zIndex}`,width:`${n}px`,height:`${i}px`}}
      ></div>
    `},JK=(e,t)=>{const n=Lw(t);return()=>{const{store:t}=n.value,{table:i}=e,o=HG(i,t.state),l=JG(i);return ac`
      <div
        class=${["table",qw]}
        style=${{top:`${i.ui.y}px`,left:`${i.ui.x}px`,"z-index":`${i.ui.zIndex}`,width:`${o.width}px`,height:`${l}px`}}
      ></div>
    `}};function jK(e){const t=Lw(e),n=Vo({selected:!1});let i=0,o=0;const l=e=>{const n=(()=>{const{store:e}=t.value,{settings:{width:n}}=e.state;return tv/n})();return e/n*-1},r=e=>{const{event:n}=e;"mousemove"===n.type&&n.preventDefault();const r=(({movementX:e,x:n})=>{const{store:o}=t.value,{settings:r,editor:{viewport:a}}=o.state,s=r.scrollLeft+l(e),c=a.width-r.width;let u=!1;switch(e<0?rV.left:rV.right){case rV.left:s<0&&n<i&&(i+=e,u=!0);break;case rV.right:s>c&&n>i&&(i+=e,u=!0)}return u?e:0})(e),a=(({movementY:e,y:n})=>{const{store:i}=t.value,{settings:r,editor:{viewport:a}}=i.state,s=r.scrollTop+l(e),c=a.height-r.height;let u=!1;switch(e<0?rV.top:rV.bottom){case rV.top:s<0&&n<o&&(o+=e,u=!0);break;case rV.bottom:s>c&&n>o&&(o+=e,u=!0)}return u?e:0})(e);if(0===r&&0===a)return;const{store:s}=t.value;s.dispatch(pG({movementX:l(r),movementY:l(a)}))};return{state:n,onScrollStart:e=>{n.selected=!0,i=aT(e)?e.clientX:e.touches[0].clientX,o=aT(e)?e.clientY:e.touches[0].clientY,ST.subscribe({next:r,complete:()=>{n.selected=!1}})}}}const FK=Cc`
  position: absolute;
  border: solid 1.5px var(--minimap-viewport-border);
  cursor: pointer;

  &:hover {
    border-color: var(--minimap-viewport-border-hover);
  }

  &.selected {
    border-color: var(--minimap-viewport-border-hover);
  }
`,UK=(e,t)=>{const n=Lw(t),{state:i,onScrollStart:o}=jK(t),l=()=>{const{store:e}=n.value,{settings:{scrollTop:t,scrollLeft:i},editor:{viewport:o}}=e.state,l=(()=>{const{store:e}=n.value,{settings:{width:t}}=e.state;return tv/t})(),r=i*l,a=t*l,s=o.width*l;return{width:`${s}px`,height:`${o.height*l}px`,right:`${r-s+tv+20}px`,top:`${20-a}px`}};return()=>ac`
    <div
      class=${["minimap-viewport",FK,{selected:i.selected||e.selected}]}
      style=${l()}
      data-focus-border
      @mousedown=${o}
      @touchstart=${o}
    ></div>
  `},OK=Cc`
  position: absolute;
  overflow: hidden;
  background-color: var(--canvas-boundary-background);
`,EK=Cc`
  position: absolute;
  box-sizing: content-box;
  pointer-events: none;
  border: 1px solid var(--minimap-border);
  box-shadow: 0 1px 6px var(--minimap-shadow);
  background-color: transparent;
`,$K=Cc`
  pointer-events: none;
`,PK=(e,t)=>{const n=Lw(t),i=Ta(),{state:o,onScrollStart:l}=jK(t),r=()=>{const{store:e}=n.value,{settings:{width:t}}=e.state;return tv/t},a=e=>{const{store:t}=n.value,{editor:{viewport:o}}=t.state,a=r(),s=i.value.getBoundingClientRect(),c=aT(e)?e.clientX:e.touches[0].clientX,u=aT(e)?e.clientY:e.touches[0].clientY,d=c-s.x,p=(u-s.y)/a,h=d/a-o.width/2,m=p-o.height/2;t.dispatch(dG({scrollLeft:-1*h,scrollTop:-1*m})),l(e)};return()=>{const{store:e}=n.value,{settings:{width:t,height:l,zoomLevel:s,show:c},doc:{tableIds:u,memoIds:d},collections:p}=e.state,h=Vn(p).collection("tableEntities").selectByIds(u),m=Vn(p).collection("memoEntities").selectByIds(d);return ac`
      <div
        class=${["minimap",OK]}
        style=${(()=>{const{store:e}=n.value,{settings:{width:t,height:i}}=e.state,o=r();return{transform:`scale(${o})`,width:`${t}px`,height:`${i}px`,right:-1*t/2+t*o/2+20+"px",top:-1*i/2+i*o/2+20+"px"}})()}
        ${Na(i)}
        @mousedown=${a}
        @touchstart=${a}
      >
        <div
          class=${KK}
          style=${{width:`${t}px`,height:`${l}px`,"min-width":`${t}px`,"min-height":`${l}px`,transform:`scale(${s})`}}
        >
          ${Ja(h,(e=>e.id),(e=>ac`<${JK} table=${e} />`))}
          ${Ja(m,(e=>e.id),(e=>ac`<${MK} memo=${e} />`))}
          ${Kg(c,sg.relationship)?ac`<${zw} class=${$K} strokeWidth=${12} />`:null}
        </div>
      </div>
      <div class=${EK} style=${{width:"150px",height:"150px",right:"19px",top:"19px"}}></div>
      <${UK} selected=${o.selected} />
    `}},BK=Cc`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border-radius: 6px;
  cursor: pointer;
`,AK=Cc`
  background-color: var(--accent-color-3);
  color: var(--accent-color-11);
  fill: var(--accent-color-11);

  &:hover {
    background-color: var(--accent-color-4);
  }

  &:active {
    background-color: var(--accent-color-5);
  }
`,QK=Cc`
  background-color: var(--accent-color-9);
  color: #fff;
  fill: #fff;

  &:hover {
    background-color: var(--accent-color-10);
  }

  &:active {
    background-color: var(--accent-color-10);
  }
`,DK=Cc`
  font-weight: var(--font-weight-medium);
  padding: 0 8px;
  height: 24px;
  ${Uw};
`,_K=Cc`
  font-weight: var(--font-weight-medium);
  padding: 0 12px;
  height: 32px;
  ${Ow};
`,qK=Cc`
  font-weight: var(--font-weight-medium);
  padding: 0 16px;
  height: 40px;
  ${Ew};
`,ez=Object.freeze(Object.defineProperty({__proto__:null,button:BK,size1:DK,size2:_K,size3:qK,soft:AK,solid:QK},Symbol.toStringTag,{value:"Module"})),tz=(e,t)=>()=>ac`
    <button
      class=${[BK,Reflect.get(ez,e.variant??"solid"),Reflect.get(ez,`size${e.size??"2"}`)]}
      type="button"
      @click=${e.onClick}
    >
      ${e.text}
    </button>
  `,nz=Cc`
  display: flex;
  align-items: center;
  border-radius: 6px;
  width: fit-content;
  padding: 15px;
  background-color: var(--toast-background);
  border: 1px solid var(--toast-border);
`,iz=Cc`
  word-break: break-all;

  & > div {
    margin-bottom: 5px;
  }

  & > div:last-child {
    margin-bottom: 0;
  }
`,oz=Cc`
  color: var(--active);
  font-weight: var(--font-weight-medium);
  ${Ow};
`,lz=Cc`
  ${_w};
`,rz=Cc`
  display: flex;
  margin-left: 15px;

  & > button {
    margin-left: 8px;
  }

  & > button:first-child {
    margin-left: 0;
  }
`,az=(e,t)=>()=>{const t=e.title||e.description,n=e.action;return ac`
      <div class=${nz}>
        ${t?ac`
              <div class=${iz}>
                ${e.title?ac`<div class=${oz}>${e.title}</div>`:null}
                ${e.description?ac`<div class=${lz}>
                      ${e.description}
                    </div>`:null}
              </div>
            `:null}
        ${n?ac`<div class=${rz}>${e.action}</div>`:null}
      </div>
    `},sz="automaticTablePlacement",cz="tableProperties",uz="search",dz="themeBuilder",pz="diffViewer",hz="timeTravel";function mz(){let e=()=>{};return[new Promise((t=>{e=t})),()=>e()]}const bz=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background-color: var(--canvas-boundary-background);
`,fz=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  pointer-events: none;
`;class yz extends Map{constructor(e,t=vz){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(gz(this,e))}has(e){return super.has(gz(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}(this,e))}}function gz({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function vz(e){return null!==e&&"object"==typeof e?e.valueOf():e}var Zz={value:()=>{}};function xz(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new Gz(i)}function Gz(e){this._=e}function Xz(e,t){for(var n,i=0,o=e.length;i<o;++i)if((n=e[i]).name===t)return n.value}function Iz(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Zz,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}Gz.prototype=xz.prototype={constructor:Gz,on:function(e,t){var n,i=this._,o=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",i),l=-1,r=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++l<r;)if(n=(e=o[l]).type)i[n]=Iz(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Iz(i[n],e.name,null);return this}for(;++l<r;)if((n=(e=o[l]).type)&&(n=Xz(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gz(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),l=0;l<n;++l)o[l]=arguments[l+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=0,n=(i=this._[e]).length;l<n;++l)i[l].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,l=i.length;o<l;++o)i[o].value.apply(t,n)}};var Wz="http://www.w3.org/1999/xhtml";const kz={svg:"http://www.w3.org/2000/svg",xhtml:Wz,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vz(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),kz.hasOwnProperty(t)?{space:kz[t],local:e}:e}function Sz(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wz&&t.documentElement.namespaceURI===Wz?t.createElement(e):t.createElementNS(n,e)}}function Cz(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lz(e){var t=Vz(e);return(t.local?Cz:Sz)(t)}function Rz(){}function Yz(e){return null==e?Rz:function(){return this.querySelector(e)}}function wz(){return[]}function Tz(e){return null==e?wz:function(){return this.querySelectorAll(e)}}function Nz(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function Kz(e){return function(){return this.matches(e)}}function zz(e){return function(t){return t.matches(e)}}var Hz=Array.prototype.find;function Mz(){return this.firstElementChild}var Jz=Array.prototype.filter;function jz(){return Array.from(this.children)}function Fz(e){return new Array(e.length)}function Uz(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Oz(e,t,n,i,o,l){for(var r,a=0,s=t.length,c=l.length;a<c;++a)(r=t[a])?(r.__data__=l[a],i[a]=r):n[a]=new Uz(e,l[a]);for(;a<s;++a)(r=t[a])&&(o[a]=r)}function Ez(e,t,n,i,o,l,r){var a,s,c,u=new Map,d=t.length,p=l.length,h=new Array(d);for(a=0;a<d;++a)(s=t[a])&&(h[a]=c=r.call(s,s.__data__,a,t)+"",u.has(c)?o[a]=s:u.set(c,s));for(a=0;a<p;++a)c=r.call(e,l[a],a,l)+"",(s=u.get(c))?(i[a]=s,s.__data__=l[a],u.delete(c)):n[a]=new Uz(e,l[a]);for(a=0;a<d;++a)(s=t[a])&&u.get(h[a])===s&&(o[a]=s)}function $z(e){return e.__data__}function Pz(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Bz(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Az(e){return function(){this.removeAttribute(e)}}function Qz(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dz(e,t){return function(){this.setAttribute(e,t)}}function _z(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qz(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function eH(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function tH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function nH(e){return function(){this.style.removeProperty(e)}}function iH(e,t,n){return function(){this.style.setProperty(e,t,n)}}function oH(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function lH(e,t){return e.style.getPropertyValue(t)||tH(e).getComputedStyle(e,null).getPropertyValue(t)}function rH(e){return function(){delete this[e]}}function aH(e,t){return function(){this[e]=t}}function sH(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function cH(e){return e.trim().split(/^|\s+/)}function uH(e){return e.classList||new dH(e)}function dH(e){this._node=e,this._names=cH(e.getAttribute("class")||"")}function pH(e,t){for(var n=uH(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function hH(e,t){for(var n=uH(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function mH(e){return function(){pH(this,e)}}function bH(e){return function(){hH(this,e)}}function fH(e,t){return function(){(t.apply(this,arguments)?pH:hH)(this,e)}}function yH(){this.textContent=""}function gH(e){return function(){this.textContent=e}}function vH(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ZH(){this.innerHTML=""}function xH(e){return function(){this.innerHTML=e}}function GH(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function XH(){this.nextSibling&&this.parentNode.appendChild(this)}function IH(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WH(){return null}function kH(){var e=this.parentNode;e&&e.removeChild(this)}function VH(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SH(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function CH(e){return function(){var t=this.__on;if(t){for(var n,i=0,o=-1,l=t.length;i<l;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function LH(e,t,n){return function(){var i,o=this.__on,l=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var r=0,a=o.length;r<a;++r)if((i=o[r]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=l,i.options=n),void(i.value=t);this.addEventListener(e.type,l,n),i={type:e.type,name:e.name,value:t,listener:l,options:n},o?o.push(i):this.__on=[i]}}function RH(e,t,n){var i=tH(e),o=i.CustomEvent;"function"==typeof o?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function YH(e,t){return function(){return RH(this,e,t)}}function wH(e,t){return function(){return RH(this,e,t.apply(this,arguments))}}Uz.prototype={constructor:Uz,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},dH.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var TH=[null];function NH(e,t){this._groups=e,this._parents=t}function KH(){return new NH([[document.documentElement]],TH)}function zH(e){return"string"==typeof e?new NH([[document.querySelector(e)]],[document.documentElement]):new NH([[e]],TH)}function HH(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}NH.prototype=KH.prototype={constructor:NH,select:function(e){"function"!=typeof e&&(e=Yz(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l,r,a=t[o],s=a.length,c=i[o]=new Array(s),u=0;u<s;++u)(l=a[u])&&(r=e.call(l,l.__data__,u,a))&&("__data__"in l&&(r.__data__=l.__data__),c[u]=r);return new NH(i,this._parents)},selectAll:function(e){e="function"==typeof e?Nz(e):Tz(e);for(var t=this._groups,n=t.length,i=[],o=[],l=0;l<n;++l)for(var r,a=t[l],s=a.length,c=0;c<s;++c)(r=a[c])&&(i.push(e.call(r,r.__data__,c,a)),o.push(r));return new NH(i,o)},selectChild:function(e){return this.select(null==e?Mz:function(e){return function(){return Hz.call(this.children,e)}}("function"==typeof e?e:zz(e)))},selectChildren:function(e){return this.selectAll(null==e?jz:function(e){return function(){return Jz.call(this.children,e)}}("function"==typeof e?e:zz(e)))},filter:function(e){"function"!=typeof e&&(e=Kz(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l,r=t[o],a=r.length,s=i[o]=[],c=0;c<a;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&s.push(l);return new NH(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,$z);var n=t?Ez:Oz,i=this._parents,o=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var l=o.length,r=new Array(l),a=new Array(l),s=new Array(l),c=0;c<l;++c){var u=i[c],d=o[c],p=d.length,h=Pz(e.call(u,u&&u.__data__,c,i)),m=h.length,b=a[c]=new Array(m),f=r[c]=new Array(m);n(u,d,b,f,s[c]=new Array(p),h,t);for(var y,g,v=0,Z=0;v<m;++v)if(y=b[v]){for(v>=Z&&(Z=v+1);!(g=f[Z])&&++Z<m;);y._next=g||null}}return(r=new NH(r,i))._enter=a,r._exit=s,r},enter:function(){return new NH(this._enter||this._groups.map(Fz),this._parents)},exit:function(){return new NH(this._exit||this._groups.map(Fz),this._parents)},join:function(e,t,n){var i=this.enter(),o=this,l=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&((o=t(o))&&(o=o.selection())),null==n?l.remove():n(l),i&&o?i.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,l=i.length,r=Math.min(o,l),a=new Array(o),s=0;s<r;++s)for(var c,u=n[s],d=i[s],p=u.length,h=a[s]=new Array(p),m=0;m<p;++m)(c=u[m]||d[m])&&(h[m]=c);for(;s<o;++s)a[s]=n[s];return new NH(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,o=e[t],l=o.length-1,r=o[l];--l>=0;)(i=o[l])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Bz);for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var r,a=n[l],s=a.length,c=o[l]=new Array(s),u=0;u<s;++u)(r=a[u])&&(c[u]=r);c.sort(t)}return new NH(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,l=i.length;o<l;++o){var r=i[o];if(r)return r}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o,l=t[n],r=0,a=l.length;r<a;++r)(o=l[r])&&e.call(o,o.__data__,r,l);return this},attr:function(e,t){var n=Vz(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?Qz:Az:"function"==typeof t?n.local?eH:qz:n.local?_z:Dz)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?nH:"function"==typeof t?oH:iH)(e,t,n??"")):lH(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?rH:"function"==typeof t?sH:aH)(e,t)):this.node()[e]},classed:function(e,t){var n=cH(e+"");if(arguments.length<2){for(var i=uH(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?fH:t?mH:bH)(n,t))},text:function(e){return arguments.length?this.each(null==e?yH:("function"==typeof e?vH:gH)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ZH:("function"==typeof e?GH:xH)(e)):this.node().innerHTML},raise:function(){return this.each(XH)},lower:function(){return this.each(IH)},append:function(e){var t="function"==typeof e?e:Lz(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Lz(e),i=null==t?WH:"function"==typeof t?t:Yz(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(kH)},clone:function(e){return this.select(e?SH:VH)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,o,l=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),r=l.length;if(!(arguments.length<2)){for(a=t?LH:CH,i=0;i<r;++i)this.each(a(l[i],t,n));return this}var a=this.node().__on;if(a)for(var s,c=0,u=a.length;c<u;++c)for(i=0,s=a[c];i<r;++i)if((o=l[i]).type===s.type&&o.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?wH:YH)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,o=e[t],l=0,r=o.length;l<r;++l)(i=o[l])&&(yield i)}};const MH={passive:!1},JH={capture:!0,passive:!1};function jH(e){e.stopImmediatePropagation()}function FH(e){e.preventDefault(),e.stopImmediatePropagation()}const UH=e=>()=>e;function OH(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:l,x:r,y:a,dx:s,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function EH(e){return!e.ctrlKey&&!e.button}function $H(){return this.parentNode}function PH(e,t){return t??{x:e.x,y:e.y}}function BH(){return navigator.maxTouchPoints||"ontouchstart"in this}function AH(){var e,t,n,i,o=EH,l=$H,r=PH,a=BH,s={},c=xz("start","drag","end"),u=0,d=0;function p(e){e.on("mousedown.drag",h).filter(a).on("touchstart.drag",f).on("touchmove.drag",y,MH).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(r,a){if(!i&&o.call(this,r,a)){var s=v(this,l.call(this,r,a),r,a,"mouse");s&&(zH(r.view).on("mousemove.drag",m,JH).on("mouseup.drag",b,JH),function(e){var t=e.document.documentElement,n=zH(e).on("dragstart.drag",FH,JH);"onselectstart"in t?n.on("selectstart.drag",FH,JH):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(r.view),jH(r),n=!1,e=r.clientX,t=r.clientY,s("start",r))}}function m(i){if(FH(i),!n){var o=i.clientX-e,l=i.clientY-t;n=o*o+l*l>d}s.mouse("drag",i)}function b(e){zH(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,i=zH(e).on("dragstart.drag",null);t&&(i.on("click.drag",FH,JH),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),FH(e),s.mouse("end",e)}function f(e,t){if(o.call(this,e,t)){var n,i,r=e.changedTouches,a=l.call(this,e,t),s=r.length;for(n=0;n<s;++n)(i=v(this,a,e,t,r[n].identifier,r[n]))&&(jH(e),i("start",e,r[n]))}}function y(e){var t,n,i=e.changedTouches,o=i.length;for(t=0;t<o;++t)(n=s[i[t].identifier])&&(FH(e),n("drag",e,i[t]))}function g(e){var t,n,o=e.changedTouches,l=o.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),t=0;t<l;++t)(n=s[o[t].identifier])&&(jH(e),n("end",e,o[t]))}function v(e,t,n,i,o,l){var a,d,h,m=c.copy(),b=HH(l||n,t);if(null!=(h=r.call(e,new OH("beforestart",{sourceEvent:n,target:p,identifier:o,active:u,x:b[0],y:b[1],dx:0,dy:0,dispatch:m}),i)))return a=h.x-b[0]||0,d=h.y-b[1]||0,function n(l,r,c){var f,y=b;switch(l){case"start":s[o]=n,f=u++;break;case"end":delete s[o],--u;case"drag":b=HH(c||r,t),f=u}m.call(l,e,new OH(l,{sourceEvent:r,subject:h,target:p,identifier:o,active:f,x:b[0]+a,y:b[1]+d,dx:b[0]-y[0],dy:b[1]-y[1],dispatch:m}),i)}}return p.filter=function(e){return arguments.length?(o="function"==typeof e?e:UH(!!e),p):o},p.container=function(e){return arguments.length?(l="function"==typeof e?e:UH(e),p):l},p.subject=function(e){return arguments.length?(r="function"==typeof e?e:UH(e),p):r},p.touchable=function(e){return arguments.length?(a="function"==typeof e?e:UH(!!e),p):a},p.on=function(){var e=c.on.apply(c,arguments);return e===c?p:e},p.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,p):Math.sqrt(d)},p}function QH(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function DH(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function _H(){}OH.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var qH=.7,eM=1/qH,tM="\\s*([+-]?\\d+)\\s*",nM="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",iM="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oM=/^#([0-9a-f]{3,8})$/,lM=new RegExp(`^rgb\\(${tM},${tM},${tM}\\)$`),rM=new RegExp(`^rgb\\(${iM},${iM},${iM}\\)$`),aM=new RegExp(`^rgba\\(${tM},${tM},${tM},${nM}\\)$`),sM=new RegExp(`^rgba\\(${iM},${iM},${iM},${nM}\\)$`),cM=new RegExp(`^hsl\\(${nM},${iM},${iM}\\)$`),uM=new RegExp(`^hsla\\(${nM},${iM},${iM},${nM}\\)$`),dM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pM(){return this.rgb().formatHex()}function hM(){return this.rgb().formatRgb()}function mM(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oM.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?bM(t):3===n?new gM(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?fM(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?fM(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=lM.exec(e))?new gM(t[1],t[2],t[3],1):(t=rM.exec(e))?new gM(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=aM.exec(e))?fM(t[1],t[2],t[3],t[4]):(t=sM.exec(e))?fM(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cM.exec(e))?IM(t[1],t[2]/100,t[3]/100,1):(t=uM.exec(e))?IM(t[1],t[2]/100,t[3]/100,t[4]):dM.hasOwnProperty(e)?bM(dM[e]):"transparent"===e?new gM(NaN,NaN,NaN,0):null}function bM(e){return new gM(e>>16&255,e>>8&255,255&e,1)}function fM(e,t,n,i){return i<=0&&(e=t=n=NaN),new gM(e,t,n,i)}function yM(e,t,n,i){return 1===arguments.length?function(e){return e instanceof _H||(e=mM(e)),e?new gM((e=e.rgb()).r,e.g,e.b,e.opacity):new gM}(e):new gM(e,t,n,i??1)}function gM(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function vM(){return`#${XM(this.r)}${XM(this.g)}${XM(this.b)}`}function ZM(){const e=xM(this.opacity);return`${1===e?"rgb(":"rgba("}${GM(this.r)}, ${GM(this.g)}, ${GM(this.b)}${1===e?")":`, ${e})`}`}function xM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function GM(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function XM(e){return((e=GM(e))<16?"0":"")+e.toString(16)}function IM(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kM(e,t,n,i)}function WM(e){if(e instanceof kM)return new kM(e.h,e.s,e.l,e.opacity);if(e instanceof _H||(e=mM(e)),!e)return new kM;if(e instanceof kM)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),l=Math.max(t,n,i),r=NaN,a=l-o,s=(l+o)/2;return a?(r=t===l?(n-i)/a+6*(n<i):n===l?(i-t)/a+2:(t-n)/a+4,a/=s<.5?l+o:2-l-o,r*=60):a=s>0&&s<1?0:r,new kM(r,a,s,e.opacity)}function kM(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function VM(e){return(e=(e||0)%360)<0?e+360:e}function SM(e){return Math.max(0,Math.min(1,e||0))}function CM(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}QH(_H,mM,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pM,formatHex:pM,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return WM(this).formatHsl()},formatRgb:hM,toString:hM}),QH(gM,yM,DH(_H,{brighter(e){return e=null==e?eM:Math.pow(eM,e),new gM(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?qH:Math.pow(qH,e),new gM(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gM(GM(this.r),GM(this.g),GM(this.b),xM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vM,formatHex:vM,formatHex8:function(){return`#${XM(this.r)}${XM(this.g)}${XM(this.b)}${XM(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ZM,toString:ZM})),QH(kM,(function(e,t,n,i){return 1===arguments.length?WM(e):new kM(e,t,n,i??1)}),DH(_H,{brighter(e){return e=null==e?eM:Math.pow(eM,e),new kM(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?qH:Math.pow(qH,e),new kM(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new gM(CM(e>=240?e-240:e+120,o,i),CM(e,o,i),CM(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new kM(VM(this.h),SM(this.s),SM(this.l),xM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xM(this.opacity);return`${1===e?"hsl(":"hsla("}${VM(this.h)}, ${100*SM(this.s)}%, ${100*SM(this.l)}%${1===e?")":`, ${e})`}`}}));const LM=e=>()=>e;function RM(e){return 1==(e=+e)?YM:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):LM(isNaN(t)?n:t)}}function YM(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):LM(isNaN(e)?t:e)}const wM=function e(t){var n=RM(t);function i(e,t){var i=n((e=yM(e)).r,(t=yM(t)).r),o=n(e.g,t.g),l=n(e.b,t.b),r=YM(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=l(t),e.opacity=r(t),e+""}}return i.gamma=e,i}(1);function TM(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var NM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,KM=new RegExp(NM.source,"g");function zM(e,t){var n,i,o,l=NM.lastIndex=KM.lastIndex=0,r=-1,a=[],s=[];for(e+="",t+="";(n=NM.exec(e))&&(i=KM.exec(t));)(o=i.index)>l&&(o=t.slice(l,o),a[r]?a[r]+=o:a[++r]=o),(n=n[0])===(i=i[0])?a[r]?a[r]+=i:a[++r]=i:(a[++r]=null,s.push({i:r,x:TM(n,i)})),l=KM.lastIndex;return l<t.length&&(o=t.slice(l),a[r]?a[r]+=o:a[++r]=o),a.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,i=0;i<t;++i)a[(n=s[i]).i]=n.x(e);return a.join("")})}var HM,MM=180/Math.PI,JM={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jM(e,t,n,i,o,l){var r,a,s;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(s=e*n+t*i)&&(n-=e*s,i-=t*s),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,s/=a),e*i<t*n&&(e=-e,t=-t,s=-s,r=-r),{translateX:o,translateY:l,rotate:Math.atan2(t,e)*MM,skewX:Math.atan(s)*MM,scaleX:r,scaleY:a}}function FM(e,t,n,i){function o(e){return e.length?e.pop()+" ":""}return function(l,r){var a=[],s=[];return l=e(l),r=e(r),function(e,i,o,l,r,a){if(e!==o||i!==l){var s=r.push("translate(",null,t,null,n);a.push({i:s-4,x:TM(e,o)},{i:s-2,x:TM(i,l)})}else(o||l)&&r.push("translate("+o+t+l+n)}(l.translateX,l.translateY,r.translateX,r.translateY,a,s),function(e,t,n,l){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),l.push({i:n.push(o(n)+"rotate(",null,i)-2,x:TM(e,t)})):t&&n.push(o(n)+"rotate("+t+i)}(l.rotate,r.rotate,a,s),function(e,t,n,l){e!==t?l.push({i:n.push(o(n)+"skewX(",null,i)-2,x:TM(e,t)}):t&&n.push(o(n)+"skewX("+t+i)}(l.skewX,r.skewX,a,s),function(e,t,n,i,l,r){if(e!==n||t!==i){var a=l.push(o(l)+"scale(",null,",",null,")");r.push({i:a-4,x:TM(e,n)},{i:a-2,x:TM(t,i)})}else(1!==n||1!==i)&&l.push(o(l)+"scale("+n+","+i+")")}(l.scaleX,l.scaleY,r.scaleX,r.scaleY,a,s),l=r=null,function(e){for(var t,n=-1,i=s.length;++n<i;)a[(t=s[n]).i]=t.x(e);return a.join("")}}}var UM,OM,EM=FM((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?JM:jM(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),$M=FM((function(e){return null!=e&&(HM||(HM=document.createElementNS("http://www.w3.org/2000/svg","g")),HM.setAttribute("transform",e),e=HM.transform.baseVal.consolidate())?jM((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):JM}),", ",")",")"),PM=0,BM=0,AM=0,QM=1e3,DM=0,_M=0,qM=0,eJ="object"==typeof performance&&performance.now?performance:Date,tJ="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nJ(){return _M||(tJ(iJ),_M=eJ.now()+qM)}function iJ(){_M=0}function oJ(){this._call=this._time=this._next=null}function lJ(e,t,n){var i=new oJ;return i.restart(e,t,n),i}function rJ(){_M=(DM=eJ.now())+qM,PM=BM=0;try{!function(){nJ(),++PM;for(var e,t=UM;t;)(e=_M-t._time)>=0&&t._call.call(void 0,e),t=t._next;--PM}()}finally{PM=0,function(){for(var e,t,n=UM,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:UM=t);OM=e,sJ(i)}(),_M=0}}function aJ(){var e=eJ.now(),t=e-DM;t>QM&&(qM-=t,DM=e)}function sJ(e){PM||(BM&&(BM=clearTimeout(BM)),e-_M>24?(e<1/0&&(BM=setTimeout(rJ,e-eJ.now()-qM)),AM&&(AM=clearInterval(AM))):(AM||(DM=eJ.now(),AM=setInterval(aJ,QM)),PM=1,tJ(rJ)))}function cJ(e,t,n){var i=new oJ;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}oJ.prototype=lJ.prototype={constructor:oJ,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?nJ():+n)+(null==t?0:+t),!this._next&&OM!==this&&(OM?OM._next=this:UM=this,OM=this),this._call=e,this._time=n,sJ()},stop:function(){this._call&&(this._call=null,this._time=1/0,sJ())}};var uJ=xz("start","end","cancel","interrupt"),dJ=[],pJ=0,hJ=1,mJ=2,bJ=3,fJ=4,yJ=5,gJ=6;function vJ(e,t,n,i,o,l){var r=e.__transition;if(r){if(n in r)return}else e.__transition={};!function(e,t,n){var i,o=e.__transition;function l(e){n.state=hJ,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)}function r(l){var c,u,d,p;if(n.state!==hJ)return s();for(c in o)if((p=o[c]).name===n.name){if(p.state===bJ)return cJ(r);p.state===fJ?(p.state=gJ,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=gJ,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(cJ((function(){n.state===bJ&&(n.state=fJ,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=mJ,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mJ){for(n.state=bJ,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=p);i.length=u+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=yJ,1),l=-1,r=i.length;++l<r;)i[l].call(e,o);n.state===yJ&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var i in n.state=gJ,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=lJ(l,0,n.time)}(e,n,{name:t,index:i,group:o,on:uJ,tween:dJ,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:pJ})}function ZJ(e,t){var n=GJ(e,t);if(n.state>pJ)throw new Error("too late; already scheduled");return n}function xJ(e,t){var n=GJ(e,t);if(n.state>bJ)throw new Error("too late; already running");return n}function GJ(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function XJ(e,t){var n,i;return function(){var o=xJ(this,e),l=o.tween;if(l!==n)for(var r=0,a=(i=n=l).length;r<a;++r)if(i[r].name===t){(i=i.slice()).splice(r,1);break}o.tween=i}}function IJ(e,t,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var l=xJ(this,e),r=l.tween;if(r!==i){o=(i=r).slice();for(var a={name:t,value:n},s=0,c=o.length;s<c;++s)if(o[s].name===t){o[s]=a;break}s===c&&o.push(a)}l.tween=o}}function WJ(e,t,n){var i=e._id;return e.each((function(){var e=xJ(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return GJ(e,i).value[t]}}function kJ(e,t){var n;return("number"==typeof t?TM:t instanceof mM?wM:(n=mM(t))?(t=n,wM):zM)(e,t)}function VJ(e){return function(){this.removeAttribute(e)}}function SJ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function CJ(e,t,n){var i,o,l=n+"";return function(){var r=this.getAttribute(e);return r===l?null:r===i?o:o=t(i=r,n)}}function LJ(e,t,n){var i,o,l=n+"";return function(){var r=this.getAttributeNS(e.space,e.local);return r===l?null:r===i?o:o=t(i=r,n)}}function RJ(e,t,n){var i,o,l;return function(){var r,a,s=n(this);return null==s?void this.removeAttribute(e):(r=this.getAttribute(e))===(a=s+"")?null:r===i&&a===o?l:(o=a,l=t(i=r,s))}}function YJ(e,t,n){var i,o,l;return function(){var r,a,s=n(this);return null==s?void this.removeAttributeNS(e.space,e.local):(r=this.getAttributeNS(e.space,e.local))===(a=s+"")?null:r===i&&a===o?l:(o=a,l=t(i=r,s))}}function wJ(e,t){var n,i;function o(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function TJ(e,t){var n,i;function o(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function NJ(e,t){return function(){ZJ(this,e).delay=+t.apply(this,arguments)}}function KJ(e,t){return t=+t,function(){ZJ(this,e).delay=t}}function zJ(e,t){return function(){xJ(this,e).duration=+t.apply(this,arguments)}}function HJ(e,t){return t=+t,function(){xJ(this,e).duration=t}}var MJ=KH.prototype.constructor;function JJ(e){return function(){this.style.removeProperty(e)}}var jJ=0;function FJ(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function UJ(){return++jJ}var OJ=KH.prototype;FJ.prototype={constructor:FJ,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Yz(e));for(var i=this._groups,o=i.length,l=new Array(o),r=0;r<o;++r)for(var a,s,c=i[r],u=c.length,d=l[r]=new Array(u),p=0;p<u;++p)(a=c[p])&&(s=e.call(a,a.__data__,p,c))&&("__data__"in a&&(s.__data__=a.__data__),d[p]=s,vJ(d[p],t,n,p,d,GJ(a,n)));return new FJ(l,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Tz(e));for(var i=this._groups,o=i.length,l=[],r=[],a=0;a<o;++a)for(var s,c=i[a],u=c.length,d=0;d<u;++d)if(s=c[d]){for(var p,h=e.call(s,s.__data__,d,c),m=GJ(s,n),b=0,f=h.length;b<f;++b)(p=h[b])&&vJ(p,t,n,b,h,m);l.push(h),r.push(s)}return new FJ(l,r,t,n)},selectChild:OJ.selectChild,selectChildren:OJ.selectChildren,filter:function(e){"function"!=typeof e&&(e=Kz(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var l,r=t[o],a=r.length,s=i[o]=[],c=0;c<a;++c)(l=r[c])&&e.call(l,l.__data__,c,r)&&s.push(l);return new FJ(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,l=Math.min(i,o),r=new Array(i),a=0;a<l;++a)for(var s,c=t[a],u=n[a],d=c.length,p=r[a]=new Array(d),h=0;h<d;++h)(s=c[h]||u[h])&&(p[h]=s);for(;a<i;++a)r[a]=t[a];return new FJ(r,this._parents,this._name,this._id)},selection:function(){return new MJ(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=UJ(),i=this._groups,o=i.length,l=0;l<o;++l)for(var r,a=i[l],s=a.length,c=0;c<s;++c)if(r=a[c]){var u=GJ(r,t);vJ(r,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new FJ(i,this._parents,e,n)},call:OJ.call,nodes:OJ.nodes,node:OJ.node,size:OJ.size,empty:OJ.empty,each:OJ.each,on:function(e,t){var n=this._id;return arguments.length<2?GJ(this.node(),n).on.on(e):this.each(function(e,t,n){var i,o,l=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?ZJ:xJ;return function(){var r=l(this,e),a=r.on;a!==i&&(o=(i=a).copy()).on(t,n),r.on=o}}(n,e,t))},attr:function(e,t){var n=Vz(e),i="transform"===n?$M:kJ;return this.attrTween(e,"function"==typeof t?(n.local?YJ:RJ)(n,i,WJ(this,"attr."+e,t)):null==t?(n.local?SJ:VJ)(n):(n.local?LJ:CJ)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=Vz(e);return this.tween(n,(i.local?wJ:TJ)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?EM:kJ;return null==t?this.styleTween(e,function(e,t){var n,i,o;return function(){var l=lH(this,e),r=(this.style.removeProperty(e),lH(this,e));return l===r?null:l===n&&r===i?o:o=t(n=l,i=r)}}(e,i)).on("end.style."+e,JJ(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,o,l;return function(){var r=lH(this,e),a=n(this),s=a+"";return null==a&&(this.style.removeProperty(e),s=a=lH(this,e)),r===s?null:r===i&&s===o?l:(o=s,l=t(i=r,a))}}(e,i,WJ(this,"style."+e,t))).each(function(e,t){var n,i,o,l,r="style."+t,a="end."+r;return function(){var s=xJ(this,e),c=s.on,u=null==s.value[r]?l||(l=JJ(t)):void 0;(c!==n||o!==u)&&(i=(n=c).copy()).on(a,o=u),s.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,o,l=n+"";return function(){var r=lH(this,e);return r===l?null:r===i?o:o=t(i=r,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(e,t,n){var i,o;function l(){var l=t.apply(this,arguments);return l!==o&&(i=(o=l)&&function(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}(e,l,n)),i}return l._value=t,l}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(WJ(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,o=GJ(this.node(),n).tween,l=0,r=o.length;l<r;++l)if((i=o[l]).name===e)return i.value;return null}return this.each((null==t?XJ:IJ)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?NJ:KJ)(t,e)):GJ(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?zJ:HJ)(t,e)):GJ(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){xJ(this,e).ease=t}}(t,e)):GJ(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;xJ(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,o=n.size();return new Promise((function(l,r){var a={value:r},s={value:function(){0==--o&&l()}};n.each((function(){var n=xJ(this,i),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),n.on=t})),0===o&&l()}))},[Symbol.iterator]:OJ[Symbol.iterator]};var EJ={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function $J(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function PJ(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var o,l,r,a,s,c,u,d,p,h=e._root,m={data:i},b=e._x0,f=e._y0,y=e._x1,g=e._y1;if(!h)return e._root=m,e;for(;h.length;)if((c=t>=(l=(b+y)/2))?b=l:y=l,(u=n>=(r=(f+g)/2))?f=r:g=r,o=h,!(h=h[d=u<<1|c]))return o[d]=m,e;if(a=+e._x.call(null,h.data),s=+e._y.call(null,h.data),t===a&&n===s)return m.next=h,o?o[d]=m:e._root=m,e;do{o=o?o[d]=new Array(4):e._root=new Array(4),(c=t>=(l=(b+y)/2))?b=l:y=l,(u=n>=(r=(f+g)/2))?f=r:g=r}while((d=u<<1|c)==(p=(s>=r)<<1|a>=l));return o[p]=h,o[d]=m,e}function BJ(e,t,n,i,o){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=o}function AJ(e){return e[0]}function QJ(e){return e[1]}function DJ(e,t,n){var i=new _J(t??AJ,n??QJ,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function _J(e,t,n,i,o,l){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=o,this._y1=l,this._root=void 0}function qJ(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}KH.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,i,o,l=e.__transition,r=!0;if(l){for(o in t=null==t?null:t+"",l)(n=l[o]).name===t?(i=n.state>mJ&&n.state<yJ,n.state=gJ,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete l[o]):r=!1;r&&delete e.__transition}}(this,e)}))},KH.prototype.transition=function(e){var t,n;e instanceof FJ?(t=e._id,e=e._name):(t=UJ(),(n=EJ).time=nJ(),e=null==e?null:e+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var r,a=i[l],s=a.length,c=0;c<s;++c)(r=a[c])&&vJ(r,e,t,c,a,n||$J(r,t));return new FJ(i,this._parents,e,t)};var ej=DJ.prototype=_J.prototype;function tj(e){return function(){return e}}function nj(e){return 1e-6*(e()-.5)}function ij(e){return e.x+e.vx}function oj(e){return e.y+e.vy}function lj(e){return e.index}function rj(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function aj(e){var t,n,i,o,l,r,a=lj,s=function(e){return 1/Math.min(o[e.source.index],o[e.target.index])},c=tj(30),u=1;function d(i){for(var o=0,a=e.length;o<u;++o)for(var s,c,d,p,h,m,b,f=0;f<a;++f)c=(s=e[f]).source,p=(d=s.target).x+d.vx-c.x-c.vx||nj(r),h=d.y+d.vy-c.y-c.vy||nj(r),p*=m=((m=Math.sqrt(p*p+h*h))-n[f])/m*i*t[f],h*=m,d.vx-=p*(b=l[f]),d.vy-=h*b,c.vx+=p*(b=1-b),c.vy+=h*b}function p(){if(i){var r,s,c=i.length,u=e.length,d=new Map(i.map(((e,t)=>[a(e,t,i),e])));for(r=0,o=new Array(c);r<u;++r)(s=e[r]).index=r,"object"!=typeof s.source&&(s.source=rj(d,s.source)),"object"!=typeof s.target&&(s.target=rj(d,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(r=0,l=new Array(u);r<u;++r)s=e[r],l[r]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);t=new Array(u),h(),n=new Array(u),m()}}function h(){if(i)for(var n=0,o=e.length;n<o;++n)t[n]=+s(e[n],n,e)}function m(){if(i)for(var t=0,o=e.length;t<o;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e,t){i=e,r=t,p()},d.links=function(t){return arguments.length?(e=t,p(),d):e},d.id=function(e){return arguments.length?(a=e,d):a},d.iterations=function(e){return arguments.length?(u=+e,d):u},d.strength=function(e){return arguments.length?(s="function"==typeof e?e:tj(+e),h(),d):s},d.distance=function(e){return arguments.length?(c="function"==typeof e?e:tj(+e),m(),d):c},d}ej.copy=function(){var e,t,n=new _J(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=qJ(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var o=0;o<4;++o)(t=i.source[o])&&(t.length?e.push({source:t,target:i.target[o]=new Array(4)}):i.target[o]=qJ(t));return n},ej.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return PJ(this.cover(t,n),t,n,e)},ej.addAll=function(e){var t,n,i,o,l=e.length,r=new Array(l),a=new Array(l),s=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<l;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(r[n]=i,a[n]=o,i<s&&(s=i),i>u&&(u=i),o<c&&(c=o),o>d&&(d=o));if(s>u||c>d)return this;for(this.cover(s,c).cover(u,d),n=0;n<l;++n)PJ(this,r[n],a[n],e[n]);return this},ej.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,o=this._x1,l=this._y1;if(isNaN(n))o=(n=Math.floor(e))+1,l=(i=Math.floor(t))+1;else{for(var r,a,s=o-n||1,c=this._root;n>e||e>=o||i>t||t>=l;)switch(a=(t<i)<<1|e<n,r=new Array(4),r[a]=c,c=r,s*=2,a){case 0:o=n+s,l=i+s;break;case 1:n=o-s,l=i+s;break;case 2:o=n+s,i=l-s;break;case 3:n=o-s,i=l-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=o,this._y1=l,this},ej.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},ej.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ej.find=function(e,t,n){var i,o,l,r,a,s,c,u=this._x0,d=this._y0,p=this._x1,h=this._y1,m=[],b=this._root;for(b&&m.push(new BJ(b,u,d,p,h)),null==n?n=1/0:(u=e-n,d=t-n,p=e+n,h=t+n,n*=n);s=m.pop();)if(!(!(b=s.node)||(o=s.x0)>p||(l=s.y0)>h||(r=s.x1)<u||(a=s.y1)<d))if(b.length){var f=(o+r)/2,y=(l+a)/2;m.push(new BJ(b[3],f,y,r,a),new BJ(b[2],o,y,f,a),new BJ(b[1],f,l,r,y),new BJ(b[0],o,l,f,y)),(c=(t>=y)<<1|e>=f)&&(s=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=s)}else{var g=e-+this._x.call(null,b.data),v=t-+this._y.call(null,b.data),Z=g*g+v*v;if(Z<n){var x=Math.sqrt(n=Z);u=e-x,d=t-x,p=e+x,h=t+x,i=b.data}}return i},ej.remove=function(e){if(isNaN(l=+this._x.call(null,e))||isNaN(r=+this._y.call(null,e)))return this;var t,n,i,o,l,r,a,s,c,u,d,p,h=this._root,m=this._x0,b=this._y0,f=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((c=l>=(a=(m+f)/2))?m=a:f=a,(u=r>=(s=(b+y)/2))?b=s:y=s,t=h,!(h=h[d=u<<1|c]))return this;if(!h.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,p=d)}for(;h.data!==e;)if(i=h,!(h=h.next))return this;return(o=h.next)&&delete h.next,i?(o?i.next=o:delete i.next,this):t?(o?t[d]=o:delete t[d],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[p]=h:this._root=h),this):(this._root=o,this)},ej.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},ej.root=function(){return this._root},ej.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},ej.visit=function(e){var t,n,i,o,l,r,a=[],s=this._root;for(s&&a.push(new BJ(s,this._x0,this._y0,this._x1,this._y1));t=a.pop();)if(!e(s=t.node,i=t.x0,o=t.y0,l=t.x1,r=t.y1)&&s.length){var c=(i+l)/2,u=(o+r)/2;(n=s[3])&&a.push(new BJ(n,c,u,l,r)),(n=s[2])&&a.push(new BJ(n,i,u,c,r)),(n=s[1])&&a.push(new BJ(n,c,o,l,u)),(n=s[0])&&a.push(new BJ(n,i,o,c,u))}return this},ej.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new BJ(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var o=t.node;if(o.length){var l,r=t.x0,a=t.y0,s=t.x1,c=t.y1,u=(r+s)/2,d=(a+c)/2;(l=o[0])&&n.push(new BJ(l,r,a,u,d)),(l=o[1])&&n.push(new BJ(l,u,a,s,d)),(l=o[2])&&n.push(new BJ(l,r,d,u,c)),(l=o[3])&&n.push(new BJ(l,u,d,s,c))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},ej.x=function(e){return arguments.length?(this._x=e,this):this._x},ej.y=function(e){return arguments.length?(this._y=e,this):this._y};const sj=1664525,cj=1013904223,uj=4294967296;function dj(e){return e.x}function pj(e){return e.y}var hj=10,mj=Math.PI*(3-Math.sqrt(5));function bj(e){var t,n=1,i=.001,o=1-Math.pow(i,1/300),l=0,r=.6,a=new Map,s=lJ(d),c=xz("tick","end"),u=function(){let e=1;return()=>(e=(sj*e+cj)%uj)/uj}();function d(){p(),c.call("tick",t),n<i&&(s.stop(),c.call("end",t))}function p(i){var s,c,u=e.length;void 0===i&&(i=1);for(var d=0;d<i;++d)for(n+=(l-n)*o,a.forEach((function(e){e(n)})),s=0;s<u;++s)null==(c=e[s]).fx?c.x+=c.vx*=r:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=r:(c.y=c.fy,c.vy=0);return t}function h(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var o=hj*Math.sqrt(.5+n),l=n*mj;t.x=o*Math.cos(l),t.y=o*Math.sin(l)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function m(t){return t.initialize&&t.initialize(e,u),t}return null==e&&(e=[]),h(),t={tick:p,restart:function(){return s.restart(d),t},stop:function(){return s.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),a.forEach(m),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(o=+e,t):+o},alphaTarget:function(e){return arguments.length?(l=+e,t):l},velocityDecay:function(e){return arguments.length?(r=1-e,t):1-r},randomSource:function(e){return arguments.length?(u=e,a.forEach(m),t):u},force:function(e,n){return arguments.length>1?(null==n?a.delete(e):a.set(e,m(n)),t):a.get(e)},find:function(t,n,i){var o,l,r,a,s,c=0,u=e.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(r=(o=t-(a=e[c]).x)*o+(l=n-a.y)*l)<i&&(s=a,i=r);return s},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function fj(){var e,t,n,i,o,l=tj(-30),r=1,a=1/0,s=.81;function c(n){var o,l=e.length,r=DJ(e,dj,pj).visitAfter(d);for(i=n,o=0;o<l;++o)t=e[o],r.visit(p)}function u(){if(e){var t,n,i=e.length;for(o=new Array(i),t=0;t<i;++t)n=e[t],o[n.index]=+l(n,t,e)}}function d(e){var t,n,i,l,r,a=0,s=0;if(e.length){for(i=l=r=0;r<4;++r)(t=e[r])&&(n=Math.abs(t.value))&&(a+=t.value,s+=n,i+=n*t.x,l+=n*t.y);e.x=i/s,e.y=l/s}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=o[t.data.index]}while(t=t.next)}e.value=a}function p(e,l,c,u){if(!e.value)return!0;var d=e.x-t.x,p=e.y-t.y,h=u-l,m=d*d+p*p;if(h*h/s<m)return m<a&&(0===d&&(m+=(d=nj(n))*d),0===p&&(m+=(p=nj(n))*p),m<r&&(m=Math.sqrt(r*m)),t.vx+=d*e.value*i/m,t.vy+=p*e.value*i/m),!0;if(!(e.length||m>=a)){(e.data!==t||e.next)&&(0===d&&(m+=(d=nj(n))*d),0===p&&(m+=(p=nj(n))*p),m<r&&(m=Math.sqrt(r*m)));do{e.data!==t&&(h=o[e.data.index]*i/m,t.vx+=d*h,t.vy+=p*h)}while(e=e.next)}}return c.initialize=function(t,i){e=t,n=i,u()},c.strength=function(e){return arguments.length?(l="function"==typeof e?e:tj(+e),u(),c):l},c.distanceMin=function(e){return arguments.length?(r=e*e,c):Math.sqrt(r)},c.distanceMax=function(e){return arguments.length?(a=e*e,c):Math.sqrt(a)},c.theta=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c}function yj(e){var t,n,i,o=tj(.1);function l(e){for(var o,l=0,r=t.length;l<r;++l)(o=t[l]).vx+=(i[l]-o.x)*n[l]*e}function r(){if(t){var l,r=t.length;for(n=new Array(r),i=new Array(r),l=0;l<r;++l)n[l]=isNaN(i[l]=+e(t[l],l,t))?0:+o(t[l],l,t)}}return"function"!=typeof e&&(e=tj(null==e?0:+e)),l.initialize=function(e){t=e,r()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:tj(+e),r(),l):o},l.x=function(t){return arguments.length?(e="function"==typeof t?t:tj(+t),r(),l):e},l}function gj(e){var t,n,i,o=tj(.1);function l(e){for(var o,l=0,r=t.length;l<r;++l)(o=t[l]).vy+=(i[l]-o.y)*n[l]*e}function r(){if(t){var l,r=t.length;for(n=new Array(r),i=new Array(r),l=0;l<r;++l)n[l]=isNaN(i[l]=+e(t[l],l,t))?0:+o(t[l],l,t)}}return"function"!=typeof e&&(e=tj(null==e?0:+e)),l.initialize=function(e){t=e,r()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:tj(+e),r(),l):o},l.y=function(t){return arguments.length?(e="function"==typeof t?t:tj(+t),r(),l):e},l}function vj(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const Zj=Symbol("implicit");const xj=function(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Gj(e,t,n){this.k=e,this.x=t,this.y=n}function Xj(e){const{settings:t}=e,n=t.width/2,i=t.height/2,[o,l]=function(e,t,n){const{doc:{tableIds:i,relationshipIds:o},collections:l}=e,r=Vn(l).collection("tableEntities").selectByIds(i),a=Vn(l).collection("relationshipEntities").selectByIds(o),s=[],c=[],u=new Set;return r.forEach((i=>{const o=HG(i,e).width,l=JG(i);s.push({id:i.id,r:(o+l)/4,x:t,y:n,ref:i})})),a.forEach((e=>{const{start:t,end:n}=e,i=`${t.tableId}-${n.tableId}`;t.tableId!==n.tableId&&!u.has(i)&&(c.push({source:t.tableId,target:n.tableId}),u.add(i))})),[s,c]}(e,n,i);return bj(o).force("link",aj(l).id((e=>e.id))).force("collide",function(e){var t,n,i,o=1,l=1;function r(){for(var e,r,s,c,u,d,p,h=t.length,m=0;m<l;++m)for(r=DJ(t,ij,oj).visitAfter(a),e=0;e<h;++e)s=t[e],d=n[s.index],p=d*d,c=s.x+s.vx,u=s.y+s.vy,r.visit(b);function b(e,t,n,l,r){var a=e.data,h=e.r,m=d+h;if(!a)return t>c+m||l<c-m||n>u+m||r<u-m;if(a.index>s.index){var b=c-a.x-a.vx,f=u-a.y-a.vy,y=b*b+f*f;y<m*m&&(0===b&&(y+=(b=nj(i))*b),0===f&&(y+=(f=nj(i))*f),y=(m-(y=Math.sqrt(y)))/y*o,s.vx+=(b*=y)*(m=(h*=h)/(p+h)),s.vy+=(f*=y)*m,a.vx-=b*(m=1-m),a.vy-=f*m)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var i,o,l=t.length;for(n=new Array(l),i=0;i<l;++i)o=t[i],n[o.index]=+e(o,i,t)}}return"function"!=typeof e&&(e=tj(null==e?1:+e)),r.initialize=function(e,n){t=e,i=n,s()},r.iterations=function(e){return arguments.length?(l=+e,r):l},r.strength=function(e){return arguments.length?(o=+e,r):o},r.radius=function(t){return arguments.length?(e="function"==typeof t?t:tj(+t),s(),r):e},r}().radius((e=>100+e.r))).force("charge",fj()).force("x",yj(n)).force("y",gj(i)).on("tick",(()=>{o.forEach((({r:e,x:t,y:n,ref:i})=>{i.ui.x=t-e,i.ui.y=n-e})),fV(e)}))}Gj.prototype={constructor:Gj,scale:function(e){return 1===e?this:new Gj(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Gj(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Gj.prototype;const Ij=(e,t)=>{const n=Ta(),i=Ta(),o=e.app.value,l=Sw({toWidth:o.toWidth}),{addUnsubscribe:r}=Hw(),a=Lo(t,Cw,l),{store:{state:s}}=o,{store:c}=l,u=()=>({...o.store.state.editor.viewport});r(So(o.store.state.editor.viewport).subscribe((()=>{l.store.dispatch(rZ(u()))})),(()=>{a.destroy(),Rw(l)}));const d=od(Cg,.7);var p;c.dispatchSync(LW(ai(s)),rZ(u()),cG({value:(p=s.editor.viewport.width/s.settings.width,Cy(d(p),2))}),dG({scrollLeft:-1*(s.settings.width/2-s.editor.viewport.width/2),scrollTop:-1*(s.settings.height/2-s.editor.viewport.height/2)}));const{doc:{tableIds:h},collections:m}=c.state,b=Vn(m).collection("tableEntities").selectByIds(h),[f,y]=mz();let g=!1;const v=()=>{g=!0,y(),o.store.dispatch(XZ({[sz]:!1}))};if(!b.length)return v(),o.emitter.emit(NY({message:ac`<${az} description="Not found tables" />`})),()=>null;try{const t=Xj(c.state),n=()=>{g||(t.stop(),e.onChange(b.map((e=>({id:e.id,x:e.ui.x,y:e.ui.y})))),v())},i=()=>{t.stop(),v()};o.emitter.emit(NY({close:f,message:ac`
          <${az}
            description="Automatic Table Placement..."
            action=${ac`
              <${tz}
                variant="soft"
                size="1"
                text="Stop"
                .onClick=${n}
              />
              <${tz} size="1" text="Cancel" .onClick=${i} />
            `}
          />
        `})),t.on("end",n),r(o.shortcut$.subscribe((({type:e})=>{e===bw.stop&&i()})))}catch{return v(),()=>null}return()=>ac`
    <div class=${bz}>
      <div class=${fz} ${Na(n)}>
        <${HK} root=${n} canvas=${i} grabMove=${!0} />
        <${PK} />
      </div>
    </div>
  `},Wj=1,kj=2;function Vj({doc:{tableIds:e},collections:t}){const n=new Map;return Vn(t).collection("tableEntities").selectByIds(e).forEach((e=>{const i=new Map;n.set(e.name,{table:e,nameToColumnMap:i}),Vn(t).collection("tableColumnEntities").selectByIds(e.columnIds).forEach((e=>{i.set(e.name,e)}))})),n}function Sj({doc:{tableIds:e},collections:t},n,i){const o=new Map;return Vn(t).collection("tableEntities").selectByIds(e).forEach((e=>{const l=n.get(e.name),r=new Map;o.set(e.id,["tableEntities",r]),r.set("tableName",Cj(i,e.name,null==l?void 0:l.table.name)),r.set("tableComment",Cj(i,e.comment,null==l?void 0:l.table.comment)),Vn(t).collection("tableColumnEntities").selectByIds(e.columnIds).forEach((e=>{const t=null==l?void 0:l.nameToColumnMap.get(e.name),n=new Map;o.set(e.id,["tableColumnEntities",n]),n.set("columnName",Cj(i,e.name,null==t?void 0:t.name)),n.set("columnComment",Cj(i,e.comment,null==t?void 0:t.comment)),n.set("columnDataType",Cj(i,e.dataType,null==t?void 0:t.dataType)),n.set("columnDefault",Cj(i,e.default,null==t?void 0:t.default)),n.set("columnAutoIncrement",t?Cj(i,Kg(e.options,Gg.autoIncrement),Kg(t.options,Gg.autoIncrement)):i),n.set("columnPrimaryKey",t?Cj(i,Kg(e.options,Gg.primaryKey),Kg(t.options,Gg.primaryKey)):i),n.set("columnUnique",t?Cj(i,Kg(e.options,Gg.unique),Kg(t.options,Gg.unique)):i),n.set("columnNotNull",t?Cj(i,Kg(e.options,Gg.notNull),Kg(t.options,Gg.notNull)):i)}))})),Array.from(o).forEach((([e,[t,n]])=>{Array.from(n).forEach((([e,t])=>{0===t&&n.delete(e)})),0===n.size&&o.delete(e)})),o}function Cj(e,t,n){return t===n?0:e}function Lj(e){const t=Lw(e),n=Vo({selected:null});let i=0,o=0;const l=()=>{const{store:e}=t.value,{editor:{viewport:n},settings:{width:i}}=e.state;return n.width/i},r=()=>{const{store:e}=t.value,{editor:{viewport:n},settings:{height:i}}=e.state;return n.height/i},a=(e,t)=>e/t*-1,s=e=>{const{event:s}=e;"mousemove"===s.type&&s.preventDefault();const c="vertical"===n.selected,u="horizontal"===n.selected,d=(({movementX:e,x:n})=>{const{store:o}=t.value,{settings:r,editor:{viewport:s}}=o.state,c=r.scrollLeft+a(e,l()),u=s.width-r.width;let d=!1;switch(e<0?rV.left:rV.right){case rV.left:c<0&&n<i&&(i+=e,d=!0);break;case rV.right:c>u&&n>i&&(i+=e,d=!0)}return d?e:0})(e),p=(({movementY:e,y:n})=>{const{store:i}=t.value,{settings:l,editor:{viewport:s}}=i.state,c=l.scrollTop+a(e,r()),u=s.height-l.height;let d=!1;switch(e<0?rV.top:rV.bottom){case rV.top:c<0&&n<o&&(o+=e,d=!0);break;case rV.bottom:c>u&&n>o&&(o+=e,d=!0)}return d?e:0})(e),{store:h}=t.value;c&&0!==p?h.dispatch(pG({movementX:0,movementY:a(p,r())})):u&&0!==d&&h.dispatch(pG({movementX:a(d,l()),movementY:0}))};return{state:n,onScrollLeftStart:e=>{n.selected="horizontal",i=e.clientX,ST.subscribe({next:s,complete:()=>{n.selected=null}})},onScrollTopStart:e=>{n.selected="vertical",o=e.clientY,ST.subscribe({next:s,complete:()=>{n.selected=null}})},getWidthRatio:l,getHeightRatio:r}}const Rj=Cc`
  position: absolute;
  top: 0;
  right: 0;
  width: 8px;
  height: calc(100% - 8px);
  overflow: hidden;
  padding-top: 4px;
`,Yj=Cc`
  position: absolute;
  left: 0;
  bottom: 0;
  width: calc(100% - 8px);
  height: 8px;
  overflow: hidden;
  padding-left: 4px;
`,wj=Cc`
  will-change: transform;
  cursor: pointer;

  &:hover > div {
    background-color: var(--scrollbar-thumb-hover);
  }

  &[data-selected] > div {
    background-color: var(--scrollbar-thumb-hover);
  }
`,Tj=Cc`
  background-color: var(--scrollbar-thumb);
  border-radius: 4px;
`,Nj=Cc`
  width: 4px;
  height: 100%;
  ${Tj};
`,Kj=Cc`
  width: 100%;
  height: 4px;
  ${Tj};
`,zj=(e,t)=>{const n=Lw(t),{state:i,getWidthRatio:o,getHeightRatio:l,onScrollLeftStart:r,onScrollTopStart:a}=Lj(t),s=Ta(),c=Ta(),u=e=>{const t=e.target;if(!t||t.closest(".virtual-scroll-ghost-thumb"))return;const{store:i}=n.value,{editor:{viewport:l},settings:a}=i.state,c=o(),u=s.value.getBoundingClientRect(),d=(e.clientX-u.x)/c-l.width/2;i.dispatch(dG({scrollLeft:-1*d,scrollTop:a.scrollTop})),r(e)},d=e=>{const t=e.target;if(!t||t.closest(".virtual-scroll-ghost-thumb"))return;const{store:i}=n.value,{editor:{viewport:o}}=i.state,r=l(),s=c.value.getBoundingClientRect(),u=(e.clientY-s.y)/r-o.height/2;i.dispatch(dG({scrollLeft:i.state.settings.scrollLeft,scrollTop:-1*u})),a(e)};return()=>{const{store:e}=n.value,{editor:{viewport:t},settings:{width:p,height:h,scrollLeft:m,scrollTop:b}}=e.state,f=o(),y=l(),g=t.width*f,v=t.height*y,Z=-1*m*f,x=-1*b*y,G=t.width<p,X=t.height<h;return ac`
      ${G?ac`
            <div
              class=${["virtual-scroll",Yj]}
              ${Na(s)}
              @mousedown=${u}
            >
              <div
                class=${["virtual-scroll-ghost-thumb",wj]}
                style=${{width:`${g}px`,height:"100%",transform:`translate(${Z}px, 0px)`}}
                ?data-selected=${"horizontal"===i.selected}
                @mousedown=${r}
              >
                <div class=${Kj}></div>
              </div>
            </div>
          `:null}
      ${X?ac`
            <div
              class=${["virtual-scroll",Rj]}
              ${Na(c)}
              @mousedown=${d}
            >
              <div
                class=${["virtual-scroll-ghost-thumb",wj]}
                style=${{width:"100%",height:`${v}px`,transform:`translate(0px, ${x}px)`}}
                ?data-selected=${"vertical"===i.selected}
                @mousedown=${a}
              >
                <div class=${Nj}></div>
              </div>
            </div>
          `:null}
    `}},Hj=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`,Mj=(e,t)=>{const n=Ta(),i=Ta(),o=e.app,l=Lo(t,Cw,o),r=Vo({grabCursor:"grab"}),{addUnsubscribe:a}=Hw(),s=function(e,t){const n=document.createElement("style"),i=e===Wj?".diff-viewer-insert":".diff-viewer-delete",o=Array.from(t).map((([e,[t,n]])=>{const o=`${i} [data-id="${e}"]`;return Array.from(n).map((([e,t])=>0!==t?`\n              ${o} [data-type="${e}"] {\n                background-color: ${t===Wj?"var(--diff-insert-background)":"var(--diff-delete-background)"};\n              }\n            `:"")).join("\n")})).join("\n");return n.textContent=o,n}(e.diff,e.diffMap);a((()=>{l.destroy()}));const c=e=>{e.preventDefault();const t=kw(e),{store:n}=o;n.dispatch(t?qW(e.deltaY<0?.1:-.1):pG({movementX:-1*e.deltaX,movementY:-1*e.deltaY}))},u=({event:e,movementX:t,movementY:i})=>{const{store:l}=o;"mousemove"===e.type&&e.preventDefault(),(0!==t||0!==i)&&(l.dispatch(pG({movementX:t,movementY:i})),0===n.value.scrollTop&&0===n.value.scrollLeft||(n.value.scrollTop=0,n.value.scrollLeft=0))},d=e=>{const t=e.target;if(!t)return;const n=!t.closest(".color-picker"),i=!t.closest(".table")&&!t.closest(".memo")&&!t.closest(".edit-input")&&!t.closest(".context-menu-content")&&!t.closest(".hide-sign")&&n,l=i&&n&&!t.closest(".minimap")&&!t.closest(".minimap-viewport")&&!t.closest(".virtual-scroll");if(i){const{store:e}=o;e.dispatch(TW())}if(n){const{emitter:e}=o;e.emit(TY())}l&&(r.grabCursor="grabbing",ST.subscribe({next:u,complete:()=>{r.grabCursor="grab"}}))};return()=>ac`
    <div
      class=${[Hj,e.diff===Wj?"diff-viewer-insert":"diff-viewer-delete"]}
      style=${{cursor:r.grabCursor}}
      ${Na(n)}
      @contextmenu=${lT}
      @mousedown=${d}
      @touchstart=${d}
      @wheel=${c}
    >
      ${s}
      <${HK} root=${n} canvas=${i} grabMove=${!0} />
      <${zj} />
      <${PK} />
    </div>
  `};function Jj(e,t,n){const i=[];return e.forEach(((o,l)=>{t?n?i.push(`${t}${o.name}${n}`):i.push(`${t}${o.name}${t}`):i.push(o.name),e.length!==l+1&&i.push(", ")})),i.join("")}function jj(e){let t=0,n=0;return e.forEach((e=>{t<e.name.length&&(t=e.name.length),n<e.dataType.length&&(n=e.dataType.length)})),{name:t,dataType:n}}function Fj(e){const t=[];for(let n=0;n<e;n++)t.push(" ");return t.join("")}function Uj(e){return e.some((({options:e})=>Kg(e,Gg.primaryKey)))}function Oj(e){return e.filter((({options:e})=>Kg(e,Gg.primaryKey)))}function Ej(e){return e.some((({options:e})=>Kg(e,Gg.unique)))}function $j(e){return e.filter((({options:e})=>Kg(e,Gg.unique)))}function Pj(e){return Lg[e]??""}function Bj(e,t){const n=e.name.toLowerCase(),i=t.name.toLowerCase();return n<i?-1:n>i?1:0}function Aj(e,t,n,i=1){let o=!0;for(const i of e)if(n===i.name&&i.id!==t&&""!==n){o=!1;break}return o?n:Aj(e,t,n.replace(/[0-9]/g,"")+i,i+1)}function Qj(e){switch(e){case Ig.ASC:return"ASC";case Ig.DESC:return"DESC";default:return""}}const Dj=Cc`
  display: flex;
  flex-direction: column;
  width: ${200}px;
  min-width: ${200}px;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  background-color: var(--context-menu-background);
  padding: 14px 0;
`,_j=Cc`
  display: flex;
  align-items: center;
  cursor: pointer;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }
`,qj=Cc`
  display: flex;
  align-items: center;
  min-width: 14px;
  margin-right: 8px;

  &.diff-insert {
    fill: var(--diff-insert-foreground);
  }

  &.diff-delete {
    fill: var(--diff-delete-foreground);
  }

  &.diff-cross {
    fill: var(--diff-cross-foreground);
  }
`,eF=Cc`
  ${_j};
  height: 36px;
  min-height: 36px;
  padding: 0 12px;
`,tF=Cc`
  ${_j};
  height: 24px;
  min-height: 24px;
  padding: 0 12px 0 24px;
`,nF=Cc`
  width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`,iF=(e,t)=>{const{prevApp:n,prevDiffMap:i,app:o,diffMap:l}=e,r=Vj(n.store.state),a=Vj(o.store.state),s=Vn(n.store.state.collections).collection("tableEntities"),c=Vn(n.store.state.collections).collection("tableColumnEntities"),u=Vn(o.store.state.collections).collection("tableEntities"),d=Vn(o.store.state.collections).collection("tableColumnEntities"),p=[],h=[],m=[],b=[];Array.from(i).forEach((([e,[t,n]])=>{"tableEntities"===t?p.push(e):m.push(e)})),Array.from(l).forEach((([e,[t,n]])=>{"tableEntities"===t?h.push(e):b.push(e)}));const f=Pu(p),y=Pu(h),g=Pu(m),v=Pu(b);c.selectByIds(m).forEach((e=>{f(e.tableId)||p.push(e.tableId)})),d.selectByIds(b).forEach((e=>{y(e.tableId)||h.push(e.tableId)}));const Z=s.selectByIds(p),x=u.selectByIds(h),G=[];Z.forEach((e=>{const t=i.get(e.id),n=r.get(e.name),o=a.get(e.name),l={diff:0,prevId:e.id,id:null==o?void 0:o.table.id,name:e.name,columns:[]};G.push(l),t&&(l.diff|=kj,o&&(l.diff|=Wj)),c.selectByIds(e.columnIds.filter(g)).forEach((e=>{const t=null==o?void 0:o.nameToColumnMap.get(e.name),n={diff:kj,prevId:e.id,id:null==t?void 0:t.id,name:e.name};l.columns.push(n),t&&(n.diff|=Wj)})),o&&d.selectByIds(o.table.columnIds.filter(v)).forEach((e=>{if(null==n?void 0:n.nameToColumnMap.get(e.name))return;const t={diff:Wj,id:e.id,name:e.name};l.columns.push(t)}))})),x.forEach((e=>{if(r.get(e.name))return;const t={diff:Wj,id:e.id,name:e.name,columns:[]};G.push(t),d.selectByIds(e.columnIds.filter(v)).forEach((e=>{const n={diff:Wj,id:e.id,name:e.name};t.columns.push(n)}))})),G.sort(Bj);const X=({store:e},t)=>{const{settings:{width:n,height:i,zoomLevel:o},collections:l}=e.state,r=Vn(l).collection("tableEntities").selectById(t);if(!r)return;const{x:a,y:s}=Mg({x:r.ui.x-jg,y:r.ui.y-Fg},n,i,o);e.dispatch(dG({scrollLeft:-1*a,scrollTop:-1*s}),FX(r.id,!1))},I=e=>{e.prevId&&X(n,e.prevId),e.id&&X(o,e.id)};return()=>ac`
    <div class=${Dj}>
      ${G.map((e=>{const t=e.name.trim()?e.name:"unnamed",n=Kg(e.diff,Wj),i=Kg(e.diff,kj);return ac`
          <div class=${eF} @click=${()=>I(e)}>
            <div class=${[qj,{"diff-cross":n&&i,"diff-insert":n&&!i,"diff-delete":!n&&i}]}>
              ${n&&i?ac`<${qT} prefix="mdi" name="plus-minus" size=${14} />`:n?ac`<${qT} prefix="mdi" name="plus" size=${14} />`:i?ac`<${qT} prefix="mdi" name="minus" size=${14} />`:ac`<${qT} name="table" size=${14} />`}
            </div>
            <span class=${nF}>${t}</span>
          </div>
          ${e.columns.map((t=>{const n=t.name.trim()?t.name:"unnamed",i=Kg(t.diff,Wj),o=Kg(t.diff,kj);return ac`
              <div class=${tF} @click=${()=>I(e)}>
                <div class=${[qj,{"diff-cross":i&&o,"diff-insert":i&&!o,"diff-delete":!i&&o}]}>
                  ${i&&o?ac`<${qT}
                        prefix="mdi"
                        name="plus-minus"
                        size=${14}
                      />`:i?ac`<${qT} prefix="mdi" name="plus" size=${14} />`:o?ac`<${qT} prefix="mdi" name="minus" size=${14} />`:null}
                </div>
                <span class=${nF}>${n}</span>
              </div>
            `}))}
        `}))}
    </div>
  `},oF=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background-color: var(--canvas-boundary-background);
`,lF=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`,rF=Cc`
  display: flex;
  width: 50%;
  height: 100%;
  overflow: hidden;
  border-left: 1px solid var(--context-menu-border);
`,aF=(e,t)=>{const n=e.app.value,i=()=>!0,o=Sw({toWidth:n.toWidth},{getReadonly:i}),l=Sw({toWidth:n.toWidth},{getReadonly:i}),{addUnsubscribe:r}=Hw(),a=()=>{const{store:e}=n,{editor:{viewport:t}}=e.state;return{width:(t.width-200)/2-1,height:t.height}};o.store.dispatchSync(LW(e.initialValue),rZ(a())),l.store.dispatchSync(LW(ai(n.store.state)),rZ(a()));const[s,c]=function(e,t){const n=Vj(e);return[Sj(e,Vj(t),kj),Sj(t,n,Wj)]}(o.store.state,l.store.state),[u,d]=mz(),p=()=>{d(),e.onClose()};return n.emitter.emit(NY({close:u,message:ac`
        <${az}
          description="Diff Viewer..."
          action=${ac`
            <${tz} size="1" text="Close" .onClick=${p} />
          `}
        />
      `})),uo((()=>{r(n.shortcut$.subscribe((({type:e})=>{e===bw.stop&&p()})),So(n.store.state.editor.viewport).subscribe((()=>{const e=a();o.store.dispatch(rZ(e)),l.store.dispatch(rZ(e))})),(()=>{Rw(o),Rw(l)}))})),()=>ac`
    <div class=${oF}>
      <div class=${lF}>
        <${iF}
          prevApp=${o}
          prevDiffMap=${s}
          app=${l}
          diffMap=${c}
        />
        <div class=${rF}>
          <${Mj}
            app=${o}
            diff=${kj}
            diffMap=${s}
          />
        </div>
        <div class=${rF}>
          <${Mj} app=${l} diff=${Wj} diffMap=${c} />
        </div>
      </div>
    </div>
  `},sF=Cc`
  position: absolute;
  stroke: var(--darg-select-border);
  fill: var(--darg-select-background);
  pointer-events: none;
`,cF=(e,t)=>{const n=Lw(t),i=Vo({width:0,height:0,top:0,left:0}),{addUnsubscribe:o}=Hw();return co((()=>{const{store:t}=n.value,l=e.root.value;o(yT.subscribe(e.onDragSelectEnd),eY(l,"mousemove").subscribe((n=>{n.preventDefault();const{settings:{width:o,height:r,zoomLevel:a,scrollLeft:s,scrollTop:c}}=t.state,u=l.getBoundingClientRect(),d=n.clientX-u.x,p=n.clientY-u.y,h={x:e.x<d?e.x:d,y:e.y<p?e.y:p},m={x:e.x>d?e.x:d,y:e.y>p?e.y:p};i.left=h.x,i.width=m.x-h.x,i.width<0&&(i.width=0),i.top=h.y,i.height=m.y-h.y,i.height<0&&(i.height=0);const b=Object.assign({},h),f=Object.assign({},m);b.x-=s,b.y-=c,f.x-=s,f.y-=c;const y=Jg(b,o,r,a),g=Jg(f,o,r,a);t.dispatch(wW({...y,w:g.x-y.x,h:g.y-y.y}))})))})),()=>sc`
    <svg
      class=${sF}
      style=${{top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,height:`${i.height}px`}}
    >
      <rect
        width=${i.width}
        height=${i.height}
        stroke-width="1"
        stroke-opacity="1"
        stroke-dasharray="3"
        fill-opacity="0.3"
      >
      </rect>
    </svg>
  `},uF=Cc`
  position: fixed;
  display: flex;
  flex-direction: column;
  border-radius: 6px;
  min-width: max-content;
  padding: 8px;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
`,dF=(e,t)=>()=>ac`
    <div
      class=${["context-menu-content",uF]}
      style=${{left:`${e.x}px`,top:`${e.y}px`}}
      data-id=${e.id}
    >
      ${e.children}
    </div>
  `,pF=si({show:!1,x:0,y:0,change$:new fu}),hF=e=>Co(e,pF);function mF(e){const t=Vo({show:!1,x:0,y:0,change$:new fu});return{provider:Lo(e,pF,t),state:t,onContextmenu:e=>{e.preventDefault(),t.x=e.clientX,t.y=e.clientY,t.show=!1,zi((()=>{t.show=!0}))},onMousedown:e=>{const n=e.target;n&&(n.closest(".context-menu-content")||(t.show=!1))}}}const bF=Cc`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  cursor: default;
  border-radius: 4px;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
  }
`,fF=Cc`
  display: flex;
  align-items: center;
  width: 100%;
`,yF=Cc`
  display: flex;
  align-items: center;
  min-width: 14px;
  margin-right: 8px;
`,gF=Cc`
  display: flex;
  align-items: center;
  margin-left: auto;
  padding-left: 24px;
`,vF=(e,t)=>()=>ac`
  <div class=${fF}>
    <div class=${yF}>${e.icon}</div>
    <div>${e.name}</div>
    ${e.right?ac`<div class=${gF}>${e.right}</div>`:null}
  </div>
`,ZF=(e,t)=>{const n=hF(t);return()=>n.value.show?ac`
          <${dF}
            id="root"
            x=${n.value.x}
            y=${n.value.y}
            children=${e.children}
          />
        `:null},xF=(e,t)=>{const n=hF(t),i=id(),o=Ta(),l=Vo({selected:!1,show:!1,x:0,y:0}),{addUnsubscribe:r}=Hw(),a=()=>{var e;const{width:t,x:r,y:a}=o.value.getBoundingClientRect();l.x=t+r,l.y=a-8,l.show=!0;const s=null==(e=o.value.parentElement)?void 0:e.dataset.id;s&&n.value.change$.next({parentId:s,id:i})};return uo((()=>{e.subChildren&&r(n.value.change$.subscribe((e=>{var t;(null==(t=o.value.parentElement)?void 0:t.dataset.id)===e.parentId&&i!==e.id&&(l.show=!1),l.selected=i===e.parentId})))})),()=>ac`
    <div
      ${Na(o)}
      class=${[bF,{selected:l.selected}]}
      data-id=${i}
      @mouseenter=${a}
      @click=${e.onClick}
    >
      ${e.children}
    </div>
    ${e.subChildren&&l.show?ac`
          <${dF}
            id=${i}
            x=${l.x}
            y=${l.y}
            children=${e.subChildren}
          />
        `:null}
  `},GF=vF,XF=/\.(json|erd|vuerd)$/i,IF=/\.sql$/i;let WF=null;function kF(e){WF=e}function VF({store:e,emitter:t}){if(WF)return void WF({type:"json",op:"set",accept:".json,.erd,.vuerd"});const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".json,.erd,.vuerd"),n.addEventListener("change",(()=>{var i;const o=null==(i=n.files)?void 0:i[0];if(!o)return;if(!XF.test(o.name))return void t.emit(NY({message:ac`<${az} description="Just import the json file" />`}));const l=new FileReader;l.readAsText(o),l.onload=()=>{const t=l.result;_u(t)&&e.dispatch(CW(t))}})),n.click()}function SF({store:e,emitter:t}){if(WF)return void WF({type:"sql",op:"set",accept:".sql"});const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".sql"),n.addEventListener("change",(()=>{var i;const o=null==(i=n.files)?void 0:i[0];if(!o)return;if(!IF.test(o.name))return void t.emit(NY({message:ac`<${az} description="Just import the sql file" />`}));const l=new FileReader;l.readAsText(o),l.onload=()=>{const t=l.result;_u(t)&&e.dispatch(MW(t))}})),n.click()}const CF=[{name:"MSSQL",value:dg.MSSQL},{name:"MariaDB",value:dg.MariaDB},{name:"MySQL",value:dg.MySQL},{name:"Oracle",value:dg.Oracle},{name:"PostgreSQL",value:dg.PostgreSQL},{name:"SQLite",value:dg.SQLite}];function LF({store:e}){const{settings:t}=e.state;return CF.map((n=>({checked:n.value===t.database,name:n.name,onClick:()=>{e.dispatch(mG({value:n.value}))}})))}const RF=[{iconName:"ZeroOne",name:"Zero One",keyBindingName:bw.relationshipZeroOne,relationshipType:vg.ZeroOne},{iconName:"ZeroN",name:"Zero N",keyBindingName:bw.relationshipZeroN,relationshipType:vg.ZeroN},{iconName:"OneOnly",name:"One Only",keyBindingName:bw.relationshipOneOnly,relationshipType:vg.OneOnly},{iconName:"OneN",name:"One N",keyBindingName:bw.relationshipOneN,relationshipType:vg.OneN}];const YF=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function wF(e){const t=[];for(let n=0,i=e.length;n<i;n++)t.push(e[n]);return t}function TF(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function NF(e,t={}){const n=t.width||function(e){const t=TF(e,"border-left-width"),n=TF(e,"border-right-width");return e.clientWidth+t+n}(e),i=t.height||function(e){const t=TF(e,"border-top-width"),n=TF(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:n,height:i}}const KF=16384;function zF(e){return new Promise(((t,n)=>{const i=new Image;i.decode=()=>t(i),i.onload=()=>t(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=e}))}async function HF(e,t,n){const i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${t} ${n}`),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("externalResourcesRequired","true"),o.appendChild(l),l.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(o)}const MF=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||MF(n,t))};function JF(e,t,n){const i=`.${e}:${t}`,o=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e){return wF(e).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${i}{${o}}`)}function jF(e,t,n){const i=window.getComputedStyle(e,n),o=i.getPropertyValue("content");if(""===o||"none"===o)return;const l=YF();try{t.className=`${t.className} ${l}`}catch{return}const r=document.createElement("style");r.appendChild(JF(l,n,i)),t.appendChild(r)}const FF="application/font-woff",UF="image/jpeg",OF={woff:FF,woff2:FF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:UF,jpeg:UF,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function EF(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return OF[t]||""}function $F(e){return-1!==e.search(/^(data:)/)}function PF(e,t){return`data:${t};base64,${e}`}async function BF(e,t,n){const i=await fetch(e,t);if(404===i.status)throw new Error(`Resource "${i.url}" not found`);const o=await i.blob();return new Promise(((e,t)=>{const l=new FileReader;l.onerror=t,l.onloadend=()=>{try{e(n({res:i,result:l.result}))}catch(e){t(e)}},l.readAsDataURL(o)}))}const AF={};async function QF(e,t,n){const i=function(e,t,n){let i=e.replace(/\?.*/,"");return n&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),t?`[${t}]${i}`:i}(e,t,n.includeQueryParams);if(null!=AF[i])return AF[i];let o;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const i=await BF(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n))));o=PF(i,t)}catch(t){o=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;t&&(i="string"==typeof t?t:t.message),i&&console.warn(i)}return AF[i]=o,o}async function DF(e,t){return MF(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):zF(t)}(e):MF(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),zF(t.toDataURL())}const n=e.poster,i=EF(n);return zF(await QF(n,i,t))}(e,t):MF(e,HTMLIFrameElement)?async function(e){var t;try{if(null!==(t=null==e?void 0:e.contentDocument)&&void 0!==t&&t.body)return await eU(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}(e):e.cloneNode(!1)}const _F=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();function qF(e,t){return MF(t,Element)&&(function(e,t){const n=t.style;if(!n)return;const i=window.getComputedStyle(e);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):wF(i).forEach((o=>{let l=i.getPropertyValue(o);"font-size"===o&&l.endsWith("px")&&(l=Math.floor(parseFloat(l.substring(0,l.length-2)))-.1+"px"),MF(e,HTMLIFrameElement)&&"display"===o&&"inline"===l&&(l="block"),"d"===o&&t.getAttribute("d")&&(l=`path(${t.getAttribute("d")})`),n.setProperty(o,l,i.getPropertyPriority(o))}))}(e,t),function(e,t){jF(e,t,":before"),jF(e,t,":after")}(e,t),function(e,t){MF(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),MF(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(MF(e,HTMLSelectElement)){const n=t,i=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));i&&i.setAttribute("selected","")}}(e,t)),t}async function eU(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>DF(e,t))).then((n=>async function(e,t,n){var i,o;let l=[];return l=_F(e)&&e.assignedNodes?wF(e.assignedNodes()):MF(e,HTMLIFrameElement)&&null!==(i=e.contentDocument)&&void 0!==i&&i.body?wF(e.contentDocument.body.childNodes):wF((null!==(o=e.shadowRoot)&&void 0!==o?o:e).childNodes),0===l.length||MF(e,HTMLVideoElement)||await l.reduce(((e,i)=>e.then((()=>eU(i,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((t=>qF(e,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const i={};for(let o=0;o<n.length;o++){const l=n[o].getAttribute("xlink:href");if(l){const n=e.querySelector(l),o=document.querySelector(l);!n&&o&&!i[l]&&(i[l]=await eU(o,t,!0))}}const o=Object.values(i);if(o.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const i=document.createElementNS(t,"defs");n.appendChild(i);for(let e=0;e<o.length;e++)i.appendChild(o[e]);e.appendChild(n)}return e}(e,t))):null}const tU=/url\((['"]?)([^'"]+?)\1\)/g,nU=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,iU=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function oU(e,t,n,i,o){try{const l=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(o),t&&(i.href=t),o.href=e,o.href}(t,n):t,r=EF(t);let a;if(o){a=PF(await o(l),r)}else a=await QF(l,r,i);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${a}$3`)}catch{}return e}function lU(e){return-1!==e.search(tU)}async function rU(e,t,n){if(!lU(e))return e;const i=function(e,{preferredFontFormat:t}){return t?e.replace(iU,(e=>{for(;;){const[n,,i]=nU.exec(e)||[];if(!i)return"";if(i===t)return`src: ${n};`}})):e}(e,n);return function(e){const t=[];return e.replace(tU,((e,n,i)=>(t.push(i),e))),t.filter((e=>!$F(e)))}(i).reduce(((e,i)=>e.then((e=>oU(e,i,t,n)))),Promise.resolve(i))}async function aU(e,t,n){var i;const o=null===(i=t.style)||void 0===i?void 0:i.getPropertyValue(e);if(o){const i=await rU(o,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function sU(e,t){MF(e,Element)&&(await async function(e,t){await aU("background",e,t)||await aU("background-image",e,t),await aU("mask",e,t)||await aU("mask-image",e,t)}(e,t),await async function(e,t){const n=MF(e,HTMLImageElement);if((!n||$F(e.src))&&(!MF(e,SVGImageElement)||$F(e.href.baseVal)))return;const i=n?e.src:e.href.baseVal,o=await QF(i,EF(i),t);await new Promise(((t,i)=>{e.onload=t,e.onerror=i;const l=e;l.decode&&(l.decode=t),"lazy"===l.loading&&(l.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o}))}(e,t),await async function(e,t){const n=wF(e.childNodes).map((e=>sU(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const cU={};async function uU(e){let t=cU[e];if(null!=t)return t;return t={url:e,cssText:await(await fetch(e)).text()},cU[e]=t,t}async function dU(e,t){let n=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let l=o.replace(i,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),BF(l,t.fetchRequestInit,(({result:e})=>(n=n.replace(o,`url(${e})`),[o,e])))}));return Promise.all(o).then((()=>n))}function pU(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=i.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=o.exec(n);if(null===e){if(e=l.exec(n),null===e)break;o.lastIndex=l.lastIndex}else l.lastIndex=o.lastIndex;t.push(e[0])}return t}async function hU(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=wF(e.ownerDocument.styleSheets),i=await async function(e,t){const n=[],i=[];return e.forEach((n=>{if("cssRules"in n)try{wF(n.cssRules||[]).forEach(((e,o)=>{if(e.type===CSSRule.IMPORT_RULE){let l=o+1;const r=uU(e.href).then((e=>dU(e,t))).then((e=>pU(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?l+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));i.push(r)}}))}catch(o){const l=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&i.push(uU(n.href).then((e=>dU(e,t))).then((e=>pU(e).forEach((e=>{l.insertRule(e,n.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",o)}})),Promise.all(i).then((()=>(e.forEach((e=>{if("cssRules"in e)try{wF(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}})),n)))}(n,t);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>lU(e.style.getPropertyValue("src"))))}(i)}async function mU(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await hU(e,t);return(await Promise.all(n.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return rU(e.cssText,n,t)})))).join("\n")}(e,t);if(n){const t=document.createElement("style"),i=document.createTextNode(n);t.appendChild(i),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function bU(e,t={}){const{width:n,height:i}=NF(e,t),o=await eU(e,t,!0);return await mU(o,t),await sU(o,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const i=t.style;null!=i&&Object.keys(i).forEach((e=>{n[e]=i[e]}))}(o,t),await HF(o,n,i)}async function fU(e,t={}){const{width:n,height:i}=NF(e,t),o=await bU(e,t),l=await zF(o),r=document.createElement("canvas"),a=r.getContext("2d"),s=t.pixelRatio||function(){let e,t;try{t=I}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,u=t.canvasHeight||i;return r.width=c*s,r.height=u*s,t.skipAutoScale||function(e){(e.width>KF||e.height>KF)&&(e.width>KF&&e.height>KF?e.width>e.height?(e.height*=KF/e.width,e.width=KF):(e.width*=KF/e.height,e.height=KF):e.width>KF?(e.height*=KF/e.width,e.width=KF):(e.width*=KF/e.height,e.height=KF))}(r),r.style.width=`${c}`,r.style.height=`${u}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,r.width,r.height)),a.drawImage(l,0,0,r.width,r.height),r}async function yU(e,t={}){const n=await fU(e,t);return await function(e,t={}){return e.toBlob?new Promise((n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)})):new Promise((n=>{const i=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),o=i.length,l=new Uint8Array(o);for(let e=0;e<o;e+=1)l[e]=i.charCodeAt(e);n(new Blob([l],{type:t.type?t.type:"image/png"}))}))}(n)}let gU=null;function vU(e){gU=e}function ZU(e,t){(gU||xU)(e,t)}function xU(e,t){const n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=t.fileName,n.click()}function GU(e,t){const n=wR.now().toFormat("yyyy-MM-dd'T'HH_mm_ss");return null!=t&&t.trim()?`${t}-${n}${e}`:`unnamed-${n}${e}`}function XU(e,t){ZU(new Blob([e],{type:"application/json"}),{fileName:GU(".erd.json",t)})}function IU(e,t){ZU(new Blob([e]),{fileName:GU(".sql",t)})}function WU(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=Pj(i),r=Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Uj(r),s=jj(r);if(r.forEach(((n,i)=>{kU(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Oj(r);t.push(`  PRIMARY KEY (${Jj(e,l)})`)}""===n.comment.trim()?t.push(");"):t.push(`) COMMENT '${n.comment}';`)}function kU({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=Pj(e),r=[];r.push(`  ${l}${n.name}${l}`+Fj(o.name-n.name.length)),r.push(`${n.dataType}`+Fj(o.dataType-n.dataType.length)),r.push(""+(Kg(n.options,Gg.notNull)?"NOT NULL":"NULL    ")),Kg(n.options,Gg.autoIncrement)?r.push("AUTO_INCREMENT"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),""!==n.comment.trim()&&r.push(`COMMENT '${n.comment}'`),t.push(r.join(" ")+""+(i?",":""))}function VU({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities"),a=Vn(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Aj(o,"",e),o.push({id:id(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Jj(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Jj(t.start,l)});`)}}function SU({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Vn(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Vn(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Qj(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Aj(o,"",e),o.push({id:id(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Jj(a)});`)}}function CU(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[""],c=Pj(t),u=Vn(l).collection("tableEntities").selectByIds(n).sort(Bj),d=Vn(l).collection("relationshipEntities").selectByIds(i),p=Vn(l).collection("indexEntities").selectByIds(o);return u.forEach((t=>{LU(e,{table:t,buffer:s}),s.push("");const n=Vn(l).collection("tableColumnEntities").selectByIds(t.columnIds);Ej(n)&&$j(n).forEach((e=>{s.push(`ALTER TABLE ${c}${t.name}${c}`),s.push(`  ADD CONSTRAINT ${c}UQ_${e.name}${c} UNIQUE (${c}${e.name}${c})\nGO`),s.push("")})),function({collections:e},{table:t,buffer:n}){""!==t.comment.trim()&&(n.push("EXECUTE sys.sp_addextendedproperty 'MS_Description',"),n.push(`  '${t.comment}', 'user', dbo, 'table', '${t.name}'\nGO`),n.push("")),Vn(e).collection("tableColumnEntities").selectByIds(t.columnIds).forEach((e=>{""!==e.comment.trim()&&(n.push("EXECUTE sys.sp_addextendedproperty 'MS_Description',"),n.push(`  '${e.comment}', 'user', dbo, 'table', '${t.name}', 'column', '${e.name}'\nGO`),n.push(""))}))}(e,{table:t,buffer:s})})),d.forEach((t=>{YU(e,{relationship:t,buffer:s,fkNames:r}),s.push("")})),p.forEach((t=>{wU(e,{index:t,buffer:s,indexNames:a}),s.push("")})),s.join("\n")}function LU(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=Pj(i),r=Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Uj(r),s=jj(r);if(r.forEach(((n,i)=>{RU(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Oj(r);t.push(`  CONSTRAINT ${l}PK_${n.name}${l} PRIMARY KEY (${Jj(e,l)})`)}t.push(")\nGO")}function RU({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=Pj(e),r=[];r.push(`  ${l}${n.name}${l}`+Fj(o.name-n.name.length)),r.push(`${n.dataType}`+Fj(o.dataType-n.dataType.length)),Kg(n.options,Gg.notNull)&&r.push("NOT NULL"),Kg(n.options,Gg.autoIncrement)?r.push("IDENTITY(1,1)"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),t.push(r.join(" ")+""+(i?",":""))}function YU({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities"),a=Vn(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Aj(o,"",e),o.push({id:id(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Jj(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Jj(t.start,l)})\nGO`)}}function wU({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Vn(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Vn(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Qj(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Aj(o,"",e),o.push({id:id(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Jj(a)})\nGO`)}}function TU(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=Pj(i),r=Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Uj(r),s=jj(r);if(r.forEach(((n,i)=>{NU(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Oj(r);t.push(`  PRIMARY KEY (${Jj(e,l)})`)}""===n.comment.trim()?t.push(");"):t.push(`) COMMENT '${n.comment}';`)}function NU({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=Pj(e),r=[];r.push(`  ${l}${n.name}${l}`+Fj(o.name-n.name.length)),r.push(`${n.dataType}`+Fj(o.dataType-n.dataType.length)),r.push(""+(Kg(n.options,Gg.notNull)?"NOT NULL":"NULL    ")),Kg(n.options,Gg.autoIncrement)?r.push("AUTO_INCREMENT"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),""!==n.comment.trim()&&r.push(`COMMENT '${n.comment}'`),t.push(r.join(" ")+""+(i?",":""))}function KU({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities"),a=Vn(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Aj(o,"",e),o.push({id:id(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Jj(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Jj(t.start,l)});`)}}function zU({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Vn(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Vn(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Qj(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Aj(o,"",e),o.push({id:id(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Jj(a)});`)}}function HU(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[],c=[],u=[""],d=Pj(t),p=Vn(l).collection("tableEntities").selectByIds(n).sort(Bj),h=Vn(l).collection("relationshipEntities").selectByIds(i),m=Vn(l).collection("indexEntities").selectByIds(o);return p.forEach((t=>{MU(e,{table:t,buffer:u}),u.push("");const n=Vn(l).collection("tableColumnEntities").selectByIds(t.columnIds);Ej(n)&&$j(n).forEach((e=>{u.push(`ALTER TABLE ${d}${t.name}${d}`),u.push(`  ADD CONSTRAINT ${d}UQ_${e.name}${d} UNIQUE (${d}${e.name}${d});`),u.push("")})),n.forEach((e=>{if(Kg(e.options,Gg.autoIncrement)){let n=`SEQ_${t.name}`;n=Aj(a,"",n),a.push({id:id(),name:n}),u.push(`CREATE SEQUENCE ${n}`),u.push("START WITH 1"),u.push("INCREMENT BY 1;"),u.push("");let i=`SEQ_TRG_${t.name}`;i=Aj(a,"",i),s.push({id:id(),name:i}),u.push(`CREATE OR REPLACE TRIGGER ${i}`),u.push(`BEFORE INSERT ON ${t.name}`),u.push("REFERENCING NEW AS NEW FOR EACH ROW"),u.push("BEGIN"),u.push(`  SELECT ${n}.NEXTVAL`),u.push(`  INTO: NEW.${e.name}`),u.push("  FROM DUAL;"),u.push("END;"),u.push("")}})),function({settings:{bracketType:e},collections:t},{table:n,buffer:i}){const o=Pj(e);""!==n.comment.trim()&&(i.push(`COMMENT ON TABLE ${o}${n.name}${o} IS '${n.comment}';`),i.push("")),Vn(t).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((e=>{""!==e.comment.trim()&&(i.push(`COMMENT ON COLUMN ${o}${n.name}${o}.${o}${e.name}${o} IS '${e.comment}';`),i.push(""))}))}(e,{table:t,buffer:u})})),h.forEach((t=>{(function({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities"),a=Vn(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Aj(o,"",e),o.push({id:id(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Jj(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Jj(t.start,l)});`)}})(e,{relationship:t,buffer:u,fkNames:r}),u.push("")})),m.forEach((t=>{jU(e,{index:t,buffer:u,indexNames:c}),u.push("")})),u.join("\n")}function MU(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=Pj(i),r=Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Uj(r),s=jj(r);if(r.forEach(((n,i)=>{JU(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Oj(r);t.push(`  CONSTRAINT ${l}PK_${n.name}${l} PRIMARY KEY (${Jj(e,l)})`)}t.push(");")}function JU({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=Pj(e),r=[];r.push(`  ${l}${n.name}${l}`+Fj(o.name-n.name.length)),r.push(`${n.dataType}`+Fj(o.dataType-n.dataType.length)),""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),Kg(n.options,Gg.notNull)&&r.push("NOT NULL"),t.push(r.join(" ")+""+(i?",":""))}function jU({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Vn(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Vn(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Qj(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Aj(o,"",e),o.push({id:id(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Jj(a)});`)}}function FU(e){const{doc:{tableIds:t,relationshipIds:n,indexIds:i},collections:o}=e,l=[],r=[],a=[""],s=Vn(o).collection("tableEntities").selectByIds(t).sort(Bj),c=Vn(o).collection("relationshipEntities").selectByIds(n),u=Vn(o).collection("indexEntities").selectByIds(i);return s.forEach((t=>{UU(e,{table:t,buffer:a}),a.push(""),function({settings:{bracketType:e},collections:t},{buffer:n,table:i}){const o=Pj(e);""!==i.comment.trim()&&(n.push(`COMMENT ON TABLE ${o}${i.name}${o} IS '${i.comment}';`),n.push("")),Vn(t).collection("tableColumnEntities").selectByIds(i.columnIds).forEach((e=>{""!==e.comment.trim()&&(n.push(`COMMENT ON COLUMN ${o}${i.name}${o}.${o}${e.name}${o} IS '${e.comment}';`),n.push(""))}))}(e,{table:t,buffer:a})})),c.forEach((t=>{(function({settings:{bracketType:e},collections:t},{buffer:n,relationship:i,fkNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities"),a=Vn(t).collection("tableColumnEntities"),s=r.selectById(i.start.tableId),c=r.selectById(i.end.tableId);if(s&&c){n.push(`ALTER TABLE ${l}${c.name}${l}`);let e=`FK_${s.name}_TO_${c.name}`;e=Aj(o,"",e),o.push({id:id(),name:e}),n.push(`  ADD CONSTRAINT ${l}${e}${l}`);const t={start:[],end:[]};i.end.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.end.push(n)})),i.start.columnIds.forEach((e=>{const n=a.selectById(e);n&&t.start.push(n)})),n.push(`    FOREIGN KEY (${Jj(t.end,l)})`),n.push(`    REFERENCES ${l}${s.name}${l} (${Jj(t.start,l)});`)}})(e,{relationship:t,buffer:a,fkNames:l}),a.push("")})),u.forEach((t=>{EU(e,{index:t,buffer:a,indexNames:r}),a.push("")})),a.join("\n")}function UU(e,{buffer:t,table:n}){const{settings:{bracketType:i},collections:o}=e,l=Pj(i),r=Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds);t.push(`CREATE TABLE ${l}${n.name}${l}`),t.push("(");const a=Uj(r),s=jj(r);if(r.forEach(((n,i)=>{OU(e,a?{column:n,isComma:!0,spaceSize:s,buffer:t}:{column:n,isComma:r.length!==i+1,spaceSize:s,buffer:t})})),a){const e=Oj(r);t.push(`  PRIMARY KEY (${Jj(e,l)})`)}t.push(");")}function OU({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=Pj(e),r=[];r.push(`  ${l}${n.name}${l}`+Fj(o.name-n.name.length)),r.push(`${n.dataType}`+Fj(o.dataType-n.dataType.length)),Kg(n.options,Gg.notNull)&&r.push("NOT NULL"),Kg(n.options,Gg.autoIncrement)?r.push("GENERATED ALWAYS AS IDENTITY"):""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),Kg(n.options,Gg.unique)&&r.push("UNIQUE"),t.push(r.join(" ")+""+(i?",":""))}function EU({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Vn(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Vn(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Qj(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Aj(o,"",e),o.push({id:id(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Jj(a)});`)}}function $U(e,{buffer:t,table:n}){const{settings:{bracketType:i},doc:{relationshipIds:o},collections:l}=e,r=Pj(i),a=Vn(l).collection("tableEntities"),s=Vn(l).collection("tableColumnEntities"),c=s.selectByIds(n.columnIds),u=Vn(l).collection("relationshipEntities").selectByIds(o).filter((({end:e})=>e.tableId===n.id));""!==n.comment.trim()&&t.push(`-- ${n.comment}`),t.push(`CREATE TABLE ${r}${n.name}${r}`),t.push("(");const d=Uj(c),p=jj(c);if(c.forEach(((n,i)=>{PU(e,d?{column:n,isComma:!0,spaceSize:p,buffer:t}:{column:n,isComma:c.length!==i+1,spaceSize:p,buffer:t})})),d){const e=Oj(c);if(0!==u.length)if(1===e.length){const n=Kg(e[0].options,Gg.autoIncrement)?" AUTOINCREMENT":"";t.push(`  PRIMARY KEY (${Jj(e,r)}${n}),`)}else t.push(`  PRIMARY KEY (${Jj(e,r)}),`);else if(1===e.length){const n=Kg(e[0].options,Gg.autoIncrement)?" AUTOINCREMENT":"";t.push(`  PRIMARY KEY (${Jj(e,r)}${n})`)}else t.push(`  PRIMARY KEY (${Jj(e,r)})`)}u.forEach(((e,n)=>{const i=a.selectById(e.start.tableId),o=a.selectById(e.end.tableId);if(i&&o){const o={start:[],end:[]};e.end.columnIds.forEach((e=>{const t=s.selectById(e);t&&o.end.push(t)})),e.start.columnIds.forEach((e=>{const t=s.selectById(e);t&&o.start.push(t)})),u.length-1>n?t.push(`  FOREIGN KEY (${Jj(o.end,r)}) REFERENCES ${r}${i.name}${r} (${Jj(o.start,r)}),`):t.push(`  FOREIGN KEY (${Jj(o.end,r)}) REFERENCES ${r}${i.name}${r} (${Jj(o.start,r)})`)}})),t.push(");")}function PU({settings:{bracketType:e}},{buffer:t,column:n,isComma:i,spaceSize:o}){const l=Pj(e),r=[];""!==n.comment.trim()&&t.push(`  -- ${n.comment}`),r.push(`  ${l}${n.name}${l}`+Fj(o.name-n.name.length)),r.push(`${n.dataType}`+Fj(o.dataType-n.dataType.length)),r.push(""+(Kg(n.options,Gg.notNull)?"NOT NULL":"NULL    ")),Kg(n.options,Gg.unique)&&r.push("UNIQUE"),!Kg(n.options,Gg.autoIncrement)&&""!==n.default.trim()&&r.push(`DEFAULT ${n.default}`),t.push(r.join(" ")+""+(i?",":""))}function BU({settings:{bracketType:e},collections:t},{buffer:n,index:i,indexNames:o}){const l=Pj(e),r=Vn(t).collection("tableEntities").selectById(i.tableId);if(!r)return;const a=Vn(t).collection("indexColumnEntities").selectByIds(i.indexColumnIds).map((e=>{const n=Vn(t).collection("tableColumnEntities").selectById(e.columnId);return n?{name:`${l}${n.name}${l} ${Qj(e.orderType)}`}:null})).filter((e=>null!==e));if(0!==a.length){let e=i.name;""===i.name.trim()&&(e=`IDX_${r.name}`,e=Aj(o,"",e),o.push({id:id(),name:e})),i.unique?n.push(`CREATE UNIQUE INDEX ${l}${e}${l}`):n.push(`CREATE INDEX ${l}${e}${l}`),n.push(`  ON ${l}${r.name}${l} (${Jj(a)});`)}}function AU(e,t){switch(t||e.settings.database){case dg.MariaDB:return function(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[""],c=Pj(t),u=Vn(l).collection("tableEntities").selectByIds(n).sort(Bj),d=Vn(l).collection("relationshipEntities").selectByIds(i),p=Vn(l).collection("indexEntities").selectByIds(o);return u.forEach((t=>{WU(e,{table:t,buffer:s}),s.push("");const n=Vn(l).collection("tableColumnEntities").selectByIds(t.columnIds);Ej(n)&&$j(n).forEach((e=>{s.push(`ALTER TABLE ${c}${t.name}${c}`),s.push(`  ADD CONSTRAINT ${c}UQ_${e.name}${c} UNIQUE (${c}${e.name}${c});`),s.push("")}))})),d.forEach((t=>{VU(e,{relationship:t,buffer:s,fkNames:r}),s.push("")})),p.forEach((t=>{SU(e,{index:t,buffer:s,indexNames:a}),s.push("")})),s.join("\n")}(e);case dg.MSSQL:return CU(e);case dg.MySQL:return function(e){const{settings:{bracketType:t},doc:{tableIds:n,relationshipIds:i,indexIds:o},collections:l}=e,r=[],a=[],s=[""],c=Pj(t),u=Vn(l).collection("tableEntities").selectByIds(n).sort(Bj),d=Vn(l).collection("relationshipEntities").selectByIds(i),p=Vn(l).collection("indexEntities").selectByIds(o);return u.forEach((t=>{TU(e,{table:t,buffer:s}),s.push("");const n=Vn(l).collection("tableColumnEntities").selectByIds(t.columnIds);Ej(n)&&$j(n).forEach((e=>{s.push(`ALTER TABLE ${c}${t.name}${c}`),s.push(`  ADD CONSTRAINT ${c}UQ_${e.name}${c} UNIQUE (${c}${e.name}${c});`),s.push("")}))})),d.forEach((t=>{KU(e,{relationship:t,buffer:s,fkNames:r}),s.push("")})),p.forEach((t=>{zU(e,{index:t,buffer:s,indexNames:a}),s.push("")})),s.join("\n")}(e);case dg.Oracle:return HU(e);case dg.PostgreSQL:return FU(e);case dg.SQLite:return function(e){const{doc:{tableIds:t,indexIds:n},collections:i}=e,o=[],l=[""],r=Vn(i).collection("tableEntities").selectByIds(t).sort(Bj),a=Vn(i).collection("indexEntities").selectByIds(n);return r.forEach((t=>{$U(e,{table:t,buffer:l}),l.push("")})),a.forEach((t=>{BU(e,{index:t,buffer:l,indexNames:o}),l.push("")})),l.join("\n")}(e)}return""}function QU(e,t,n){const{store:i}=e,o=i.state.settings.databaseName;return[{icon:{prefix:"mdi",name:"code-json"},name:"json",onClick:()=>{t(),XU(ai(i.state),o)}},{icon:{prefix:"mdi",name:"database-export"},name:"Schema SQL",onClick:()=>{t(),IU(AU(i.state),o)}},{icon:{prefix:"fas",name:"file-image"},name:"png",onClick:()=>{t(),function(e,t){yU(e).then((e=>{e&&ZU(e,{fileName:GU(".png",t)})}))}(n,o)}}]}const DU=[{iconName:"ZeroOne",name:"Zero One",relationshipType:vg.ZeroOne},{iconName:"ZeroN",name:"Zero N",relationshipType:vg.ZeroN},{iconName:"OneOnly",name:"One Only",relationshipType:vg.OneOnly},{iconName:"OneN",name:"One N",relationshipType:vg.OneN}];function _U({store:e},t){if(!t)return[];const{collections:n}=e.state,i=Vn(n).collection("relationshipEntities").selectById(t);return i?DU.map((n=>({checked:n.relationshipType===i.relationshipType,iconName:n.iconName,name:n.name,onClick:()=>{e.dispatch(Mx({id:t,value:n.relationshipType}))}}))):[]}const qU=[{name:"Table Comment",show:sg.tableComment},{name:"Column Comment",show:sg.columnComment},{name:"DataType",show:sg.columnDataType},{name:"Default",show:sg.columnDefault},{name:"Not Null",show:sg.columnNotNull},{name:"Unique",show:sg.columnUnique},{name:"Auto Increment",show:sg.columnAutoIncrement},{name:"Relationship",show:sg.relationship}];const eO="ERD",tO="table",nO="relationship",iO=(e,t)=>{const n=Lw(t),i=ac`<${qT} name="chevron-right" size=${14} />`,{addUnsubscribe:o}=Hw(),l=()=>{const{store:t}=n.value;t.dispatch(JX()),e.onClose()},r=()=>{const{store:t}=n.value;t.dispatch(wX()),e.onClose()},a=()=>{const{store:t}=n.value;t.dispatch(XZ({[sz]:!0})),e.onClose()},s=()=>{(function({emitter:e}){if(WF)return void WF({type:"json",op:"diff",accept:".json,.erd,.vuerd"});const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",".json,.erd,.vuerd"),t.addEventListener("change",(()=>{var n;const i=null==(n=t.files)?void 0:n[0];if(!i)return;if(!XF.test(i.name))return void e.emit(NY({message:ac`<${az} description="Just import the json file" />`}));const o=new FileReader;o.readAsText(i),o.onload=()=>{const t=o.result;_u(t)&&e.emit(PY({value:t}))}})),t.click()})(n.value),e.onClose()},c=()=>{if(!e.relationshipId)return;const{store:t}=n.value;t.dispatch(Hx({id:e.relationshipId})),e.onClose()},u=()=>{if(!e.tableId)return;const{store:t}=n.value,{editor:i}=t.state;!i.focusTable||!i.focusTable.columnId||(t.dispatch(qX(i.focusTable.tableId,i.focusTable.columnId)),e.onClose())},d=()=>{if(!e.tableId)return;const{store:t,emitter:i}=n.value;i.emit(zY({tableId:e.tableId})),t.dispatch(XZ({[cz]:!0})),e.onClose()},p=t=>{if(!e.tableId)return;const{store:i,emitter:o}=n.value,{collections:l}=i.state,r=Vn(l).collection("tableEntities").selectById(e.tableId);r&&(o.emit(wY({x:t.clientX,y:t.clientY,color:r.ui.color})),e.onClose())};return uo((()=>{const{shortcut$:t}=n.value;o(t.subscribe((({type:t})=>{t===bw.stop&&e.onClose()})))})),()=>{var t,o,h,m;const{keyBindingMap:b}=n.value;return ac`
      <${ZF}
        children=${e.type===tO?ac`
              <${xF}
                .onClick=${u}
                children=${ac`
                  <${GF}
                    icon=${ac`<${qT} name="key" size=${14} />`}
                    name="Primary Key"
                    right=${ac`
                      <${fK}
                        shortcut=${null==(t=b.primaryKey[0])?void 0:t.shortcut}
                      />
                    `}
                  />
                `}
              />
              <${xF}
                .onClick=${d}
                children=${ac`
                  <${GF}
                    icon=${ac`
                      <${qT} prefix="mdi" name="table-cog" size=${14} />
                    `}
                    name="Table Properties"
                    right=${ac`
                      <${fK}
                        shortcut=${null==(o=b.tableProperties[0])?void 0:o.shortcut}
                      />
                    `}
                  />
                `}
              />
              <${xF}
                .onClick=${p}
                children=${ac`
                  <${GF}
                    icon=${ac`<${qT} name="palette" size=${14} />`}
                    name="Color"
                  />
                `}
              />
            `:e.type===nO?ac`
                <${xF}
                  children=${ac`
                    <${GF}
                      icon=${ac`
                        <${qT} prefix="mdi" name="vector-line" size=${14} />
                      `}
                      name="Relationship Type"
                      right=${i}
                    />
                  `}
                  subChildren=${ac`${_U(n.value,e.relationshipId).map((e=>ac`
                      <${xF}
                        .onClick=${e.onClick}
                        children=${ac`
                          <${GF}
                            icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                            name=${ac`
                              <${GF}
                                icon=${ac` <${qT}
                                  prefix="base64"
                                  name=${e.iconName}
                                  size=${14}
                                />`}
                                name=${e.name}
                              />
                            `}
                          />
                        `}
                      />
                    `))}`}
                />
                <${xF}
                  .onClick=${c}
                  children=${ac`<${GF} name="Delete" />`}
                />
              `:ac`
                <${xF}
                  .onClick=${l}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT} name="table" size=${14} />`}
                      name="New Table"
                      right=${ac`
                        <${fK}
                          shortcut=${null==(h=b.addTable[0])?void 0:h.shortcut}
                        />
                      `}
                    />
                  `}
                />
                <${xF}
                  .onClick=${r}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT} name="note-sticky" size=${14} />`}
                      name="New Memo"
                      right=${ac`
                        <${fK}
                          shortcut=${null==(m=b.addMemo[0])?void 0:m.shortcut}
                        />
                      `}
                    />
                  `}
                />
                <${xF}
                  children=${ac`
                    <${GF}
                      icon=${ac`
                        <${qT} prefix="mdi" name="vector-line" size=${14} />
                      `}
                      name="Relationship"
                      right=${i}
                    />
                  `}
                  subChildren=${ac`${function({store:e,keyBindingMap:t},n){return RF.map((i=>{var o;return{iconName:i.iconName,name:i.name,shortcut:null==(o=t[i.keyBindingName][0])?void 0:o.shortcut,onClick:()=>{e.dispatch(KW(i.relationshipType)),n()}}}))}(n.value,e.onClose).map((e=>ac`
                      <${xF}
                        .onClick=${e.onClick}
                        children=${ac`
                          <${GF}
                            icon=${ac`
                              <${qT}
                                prefix="base64"
                                name=${e.iconName}
                                size=${14}
                              />
                            `}
                            name=${e.name}
                            right=${ac`
                              <${fK} shortcut=${e.shortcut} />
                            `}
                          />
                        `}
                      />
                    `))}`}
                />
                <${xF}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT} name="eye" size=${14} />`}
                      name="View Option"
                      right=${i}
                    />
                  `}
                  subChildren=${ac`${function({store:e}){const{settings:t}=e.state;return qU.map((n=>{const i=Kg(t.show,n.show);return{checked:i,name:n.name,onClick:()=>{e.dispatch(hG({show:n.show,value:!i}))}}}))}(n.value).map((e=>ac`
                      <${xF}
                        .onClick=${e.onClick}
                        children=${ac`
                          <${GF}
                            icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${xF}
                  children=${ac`
                    <${GF}
                      icon=${ac`
                        <${qT} prefix="mdi" name="database" size=${14} />
                      `}
                      name="Database"
                      right=${i}
                    />
                  `}
                  subChildren=${ac`${LF(n.value).map((e=>ac`
                      <${xF}
                        .onClick=${e.onClick}
                        children=${ac`
                          <${GF}
                            icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${xF}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT} name="file-import" size=${14} />`}
                      name="Import"
                      right=${i}
                    />
                  `}
                  subChildren=${ac`${function(e,t){return[{icon:{prefix:"mdi",name:"code-json"},name:"json",onClick:()=>{VF(e),t()}},{icon:{prefix:"mdi",name:"database-import"},name:"Schema SQL",onClick:()=>{SF(e),t()}}]}(n.value,e.onClose).map((e=>ac`
                      <${xF}
                        .onClick=${e.onClick}
                        children=${ac`
                          <${GF}
                            icon=${ac`<${qT}
                              prefix=${e.icon.prefix}
                              name=${e.icon.name}
                              size=${14}
                            />`}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${xF}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT} name="file-export" size=${14} />`}
                      name="Export"
                      right=${i}
                    />
                  `}
                  subChildren=${ac`${QU(n.value,e.onClose,e.canvas.value).map((e=>ac`
                      <${xF}
                        .onClick=${e.onClick}
                        children=${ac`
                          <${GF}
                            icon=${ac`<${qT}
                              prefix=${e.icon.prefix}
                              name=${e.icon.name}
                              size=${14}
                            />`}
                            name=${e.name}
                          />
                        `}
                      />
                    `))}`}
                />
                <${xF}
                  .onClick=${a}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT}
                        prefix="mdi"
                        name="atom"
                        size=${14}
                      />`}
                      name="Automatic Table Placement"
                    />
                  `}
                />
                <${xF}
                  .onClick=${s}
                  children=${ac`
                    <${GF}
                      icon=${ac`<${qT}
                        prefix="mdi"
                        name="plus-minus-box"
                        size=${14}
                      />`}
                      name="Diff Viewer"
                    />
                  `}
                />
              `}
      />
    `}},oO=Cc`
  position: absolute;
  cursor: pointer;

  &:hover {
    fill: var(--active);
  }
`,lO=45,rO="left",aO="right",sO="top",cO="bottom",uO="lt",dO="rt",pO="lb",hO="rb",mO={[uO]:135,[dO]:225,[pO]:lO,[hO]:315,[rO]:90,[aO]:270,[sO]:180,[cO]:0},bO=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=Vo({scrollLeft:0,scrollTop:0}),l=({x:e,y:t})=>{const{store:i}=n.value,{settings:{width:o,height:l}}=i.state;return e<0&&t<0?uO:e>o&&t<0?dO:e<0&&t>l?pO:e>o&&t>l?hO:e<0?rO:e>o?aO:t<0?sO:cO},r=e=>{const{store:t}=n.value,{settings:{width:i,height:r,zoomLevel:a}}=t.state,{scrollLeft:s,scrollTop:c}=o,{x:u,y:d}=Mg(e,i,r,a),p=`${d+c}px`,h=`${u+s}px`,m=l(e),b=mO[m];switch(m){case uO:return[{left:"0",top:"0"},b];case dO:return[{right:"0",top:"0"},b];case pO:return[{left:"0",bottom:"0"},b];case hO:return[{right:"0",bottom:"0"},b];case rO:return[{left:"0",top:p},b];case aO:return[{right:"0",top:p},b];case sO:return[{left:h,top:"0"},b];case cO:return[{left:h,bottom:"0"},b]}},a=t=>{const i=e.root.value,{store:o}=n.value,{settings:{width:l,height:r,zoomLevel:a,scrollLeft:s,scrollTop:c}}=o.state,u=i.getBoundingClientRect();return Jg({x:t.clientX-u.x-s,y:t.clientY-u.y-c},l,r,a)};return uo((()=>{const{store:e}=n.value,{settings:t}=e.state,l=new uu((e=>So(t).subscribe((n=>{("scrollLeft"===n||"scrollTop"===n)&&e.next({scrollLeft:t.scrollLeft,scrollTop:t.scrollTop})}))));i(l.pipe(Ou(100)).subscribe((({scrollLeft:e,scrollTop:t})=>{o.scrollLeft=e,o.scrollTop=t})))})),()=>{const{store:e}=n.value,{doc:{tableIds:t,memoIds:i},settings:{zoomLevel:o,width:s,height:c},collections:u}=e.state,d=Jg({x:0,y:0},s,c,o),p=Jg({x:s,y:c},s,c,o),h={...d,w:p.x-d.x,h:p.y-d.y},m=Vn(u).collection("tableEntities").selectByIds(t).filter((t=>!zg(h,{x:t.ui.x,y:t.ui.y,w:HG(t,e.state).width,h:JG(t)}))),b=Vn(u).collection("memoEntities").selectByIds(i).filter((e=>!zg(h,{x:e.ui.x,y:e.ui.y,w:tI(e),h:nI(e)})));return 0===m.length&&0===b.length?null:ac`
      ${Ja(m,(e=>e.id),(e=>{const[t,i]=r(e.ui),o=by(e.name.trim());return ac`
            <div
              class=${["hide-sign",oO]}
              title=${o?"unnamed":e.name}
              style=${t}
              @click=${t=>((e,t)=>{const{store:i}=n.value,o=l(t.ui),{x:r,y:s}=a(e);let c=0,u=0;switch(o){case dO:c=HG(t,i.state).width;break;case pO:u=JG(t);break;case hO:c=HG(t,i.state).width,u=JG(t);break;case aO:c=HG(t,i.state).width;break;case cO:u=JG(t)}i.dispatch(EG({id:t.id,x:r-c,y:s-u}),FX(t.id,kw(e)))})(t,e)}
            >
              <${qT} name="location-dot" rotate=${i} />
            </div>
          `}))}
      ${Ja(b,(e=>e.id),(e=>{const[t,i]=r(e.ui);return ac`
            <div
              class=${["hide-sign",oO]}
              title="Memo"
              style=${t}
              @click=${t=>((e,t)=>{const{store:i}=n.value,o=l(t.ui),{x:r,y:s}=a(e);let c=0,u=0;switch(o){case dO:c=tI(t);break;case pO:u=nI(t);break;case hO:c=tI(t),u=nI(t);break;case aO:c=tI(t);break;case cO:u=nI(t)}i.dispatch(Xx({id:t.id,x:r-c,y:s-u}),NX(t.id,kw(e)))})(t,e)}
            >
              <${qT} name="location-dot" rotate=${i} />
            </div>
          `}))}
    `}},fO=(e,t)=>{const n=Ta();return uo((()=>{const t=n.value;!e.autofocus||!t||iK(t)})),()=>ac`
    <input
      ${Na(n)}
      class=${e.class}
      style=${{width:e.width?`${e.width}px`:""}}
      ...${$T({title:e.title,placeholder:e.placeholder})}
      type="text"
      spellcheck="false"
      ?readonly=${e.readonly}
      ?disabled=${e.disabled}
      .value=${e.value??""}
      @input=${e.numberOnly?oT:null}
      @input=${e.onInput}
      @change=${e.onChange}
      @blur=${e.onBlur}
      @keyup=${e.onKeyup}
      @keydown=${e.onKeydown}
    />
  `},yO=Cc`
  display: flex;
  width: 100%;
  height: ${ev}px;
  align-items: center;
  fill: transparent;
  color: transparent;
  padding: 0 ${Eg}px;

  &:hover {
    fill: var(--foreground);
    color: var(--foreground);
    background-color: var(--column-hover);
  }

  &.selected {
    background-color: var(--column-select);
  }

  & > .column-col {
    padding: ${2}px ${Ug}px ${2}px 0;
  }
`,gO=Cc`
  width: 100%;
`,vO=Cc`
  cursor: pointer;
`,ZO=Cc`
  cursor: pointer;
  margin-left: auto;

  &:hover {
    fill: var(--active);
    color: var(--active);
  }
`,xO=(e,t)=>{const n=Lw(t),i=()=>{e.onSelect(e.index)},o=t=>{t.stopPropagation(),e.onSelect(null);const{store:i}=n.value;i.dispatch(Ng(PZ({id:e.index.id})))},l=()=>{const{store:t}=n.value;t.dispatch(Ng(OW(e.index.id)))},r=t=>{const i=t.target;if(!i)return;const{store:o}=n.value;o.dispatch(Ng(BZ({id:e.index.id,tableId:e.index.tableId,value:i.value})))};return()=>{const{index:t}=e;return ac`
      <div
        class=${[yO,{selected:e.selected}]}
        @click=${i}
      >
        <div class="column-col" @click=${l}>
          <${SK}
            class=${vO}
            checked=${t.unique}
            width=${_g}
            text="UQ"
            title="Unique"
          />
        </div>
        <div class=${["column-col",gO]}>
          <${fO}
            class=${gO}
            placeholder="name"
            value=${t.name}
            .onInput=${r}
          />
        </div>
        <${qT}
          class=${ZO}
          size=${12}
          name="xmark"
          title="Remove"
          .onClick=${o}
        />
      </div>
    `}},GO=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-height: 240px;
  overflow: auto;
`,XO=(e,t)=>{const n=Lw(t);return()=>{const{tableId:t,index:i}=e,{store:o}=n.value,{collections:l}=o.state,r=Vn(l).collection("tableEntities").selectById(t);if(!r)return null;const a=Vn(l).collection("tableColumnEntities").selectByIds(r.columnIds),s=HG(r,o.state),c=Vn(l).collection("indexColumnEntities").selectByIds((null==i?void 0:i.indexColumnIds)??[]).map((e=>e.columnId)),u=Pu(c);return ac`
      <div class=${["scrollbar",GO]}>
        ${Ja(a,(e=>e.id),(t=>ac`
            <div class=${["column-row",CK]}>
              <div class="column-col">
                <input
                  type="checkbox"
                  ?disabled=${!i}
                  ?checked=${u(t.id)}
                  @change=${i=>((t,i)=>{const o=t.target;if(!o)return;const{store:l}=n.value,r=o.checked?$W:PW;l.dispatch(Ng(r(e.index.id,i.id)))})(i,t)}
                />
              </div>
              <${IK} keys=${t.ui.keys} />
              ${Ja(((e,t)=>{const{store:i}=n.value,{settings:o}=i.state;return o.columnOrder.map((n=>{let i=null;switch(n){case cg.columnName:i=ac`
              <div class="column-col">
                <${sK}
                  placeholder="column"
                  width=${t.name}
                  value=${e.name}
                />
              </div>
            `;break;case cg.columnDefault:i=Kg(o.show,sg.columnDefault)?ac`
                  <div class="column-col">
                    <${sK}
                      placeholder="default"
                      width=${t.default}
                      value=${e.default}
                    />
                  </div>
                `:null;break;case cg.columnComment:i=Kg(o.show,sg.columnComment)?ac`
                  <div class="column-col">
                    <${sK}
                      placeholder="comment"
                      width=${t.comment}
                      value=${e.comment}
                    />
                  </div>
                `:null;break;case cg.columnDataType:i=Kg(o.show,sg.columnDataType)?ac`
                  <div class="column-col">
                    <${GK}
                      tableId=${e.tableId}
                      columnId=${e.id}
                      width=${t.dataType}
                      value=${e.dataType}
                    />
                  </div>
                `:null;break;case cg.columnNotNull:i=Kg(o.show,sg.columnNotNull)?ac`
                  <div class="column-col">
                    <${kK} options=${e.options} />
                  </div>
                `:null;break;case cg.columnUnique:i=Kg(o.show,sg.columnUnique)?ac`
                  <div class="column-col">
                    <${SK}
                      checked=${Kg(e.options,Gg.unique)}
                      width=${_g}
                      text="UQ"
                      title="Unique"
                    />
                  </div>
                `:null;break;case cg.columnAutoIncrement:i=Kg(o.show,sg.columnAutoIncrement)?ac`
                  <div class="column-col">
                    <${SK}
                      checked=${Kg(e.options,Gg.autoIncrement)}
                      width=${qg}
                      text="AI"
                      title="Auto Increment"
                    />
                  </div>
                `:null}return{columnType:n,template:i}})).filter((({template:e})=>!!e))})(t,s),(({columnType:e})=>e),(({template:e})=>e))}
            </div>
          `))}
      </div>
    `}},IO=Cc`
  padding-top: 12px;

  .index-column-order-move {
    transition: transform 0.3s;
  }
`,WO=Cc`
  display: flex;
  width: 100%;
  height: ${ev}px;
  align-items: center;
  color: var(--active);
  fill: var(--active);
  padding: 0 ${Eg}px;
  cursor: move;

  &:hover {
    background-color: var(--column-hover);
  }

  & > .column-col {
    padding: ${2}px ${Ug}px ${2}px 0;
  }

  &.none-hover {
    background-color: transparent;
  }

  &.dragging {
    opacity: 0.5;
  }
`,kO=Cc`
  cursor: pointer;
`,VO=(e,t)=>{const n=Lw(t),i=Ta(),o=new YK(i,`.${WO}`,"index-column-order-move"),l=e=>{var t;const l=i.value,r=e.target;if(!l||!r)return;const a=null==(t=r.dataset)?void 0:t.id;if(!a)return;const s=Array.from(l.querySelectorAll(`.${WO}`));s.forEach((e=>e.classList.add("none-hover"))),r.classList.add("dragging"),wK(s,(e=>e.dataset.id)).subscribe({next:e=>{((e,t)=>{const{store:i}=n.value;e!==t&&(o.snapshot(),i.dispatch(Ng(AW(e,t))))})(a,e)},complete:()=>{r.classList.remove("dragging"),s.forEach((e=>e.classList.remove("none-hover")))}})};return mo((()=>o.play())),()=>{const{store:t}=n.value,{collections:o}=t.state,r=Vn(o).collection("indexColumnEntities").selectByIds(e.index.indexColumnIds).map((e=>({...e,column:Vn(o).collection("tableColumnEntities").selectById(e.columnId)})));return ac`
      <div
        class=${IO}
        ${Na(i)}
        @dragenter=${lT}
        @dragover=${lT}
      >
        ${Ja(r,(e=>e.id),(e=>{var t;return ac`
            <div
              class=${WO}
              draggable="true"
              data-id=${e.id}
              @dragstart=${l}
            >
              <${qT} class=${"column-col"} name="bars" size=${14} />
              <div
                class="column-col"
                @click=${()=>(e=>{const{store:t}=n.value;t.dispatch(Ng(BW(e.id)))})(e)}
              >
                <${SK}
                  class=${kO}
                  checked=${!0}
                  width=${40}
                  text=${Qj(e.orderType)}
                  title=${(e=>{switch(e){case Ig.ASC:return"Ascending";case Ig.DESC:return"Descending";default:return""}})(e.orderType)}
                />
              </div>
              <div class="column-col">${null==(t=e.column)?void 0:t.name}</div>
            </div>
          `}))}
      </div>
    `}},SO=Cc`
  width: 30%;
  min-width: 240px;
  height: 100%;
  padding-right: 12px;
`,CO=Cc`
  width: 70%;
  min-width: 560px;
  height: 100%;
`,LO=Cc`
  display: flex;
  width: 100%;
  height: ${ev}px;
  align-items: center;
  padding: 0 ${Eg}px;
  cursor: pointer;

  &:hover {
    background-color: var(--column-hover);
    fill: var(--active);
    color: var(--active);
  }
`,RO=(e,t)=>{const n=Lw(t),i=Vo({index:null}),o=e=>{i.index=e},l=()=>{const{store:t}=n.value;t.dispatch(Ng(UW(e.tableId)))};return()=>{const{tableId:t}=e,{store:r}=n.value,{doc:{indexIds:a},collections:s}=r.state,c=Vn(s).collection("indexEntities").selectByIds(a).filter((e=>e.tableId===t));return ac`
      <div class=${SO}>
        ${Ja(c,(e=>e.id),(e=>{var t;return ac`
            <${xO}
              index=${e}
              selected=${e.id===(null==(t=i.index)?void 0:t.id)}
              .onSelect=${o}
            />
          `}))}
        <div
          class=${LO}
          title="Add Index"
          @click=${l}
        >
          <${qT} size=${12} name="plus" />
        </div>
      </div>
      <div class=${CO}>
        <${XO} tableId=${t} index=${i.index} />
        ${i.index?ac`<${VO} index=${i.index} />`:null}
      </div>
    `}},YO=Cc`
  display: flex;
  padding: 12px;
  min-height: 56px;
`,wO=Cc`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  border-radius: 4px;
  cursor: default;
  white-space: nowrap;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
    color: var(--active);
    fill: var(--active);
  }
`,TO={Indexes:"Indexes",SchemaSQL:"Schema SQL",GeneratorCode:"Generator Code"},NO=Object.values(TO),KO=(e,t)=>()=>ac`
    <div class=${YO}>
      ${NO.map((t=>ac`
          <div
            class=${[wO,{selected:t===e.value}]}
            @click=${()=>e.onChange(t)}
          >
            ${t}
          </div>
        `))}
    </div>
  `,zO=[{name:"Pascal",value:bg.pascalCase},{name:"Camel",value:bg.camelCase},{name:"Snake",value:bg.snakeCase},{name:"None",value:bg.none}];const HO=[{name:"GraphQL",value:hg.GraphQL},{name:"C#",value:hg.csharp},{name:"Java",value:hg.Java},{name:"Kotlin",value:hg.Kotlin},{name:"TypeScript",value:hg.TypeScript},{name:"JPA",value:hg.JPA},{name:"Scala",value:hg.Scala}];const MO=[{name:"Pascal",value:bg.pascalCase},{name:"Camel",value:bg.camelCase},{name:"Snake",value:bg.snakeCase},{name:"None",value:bg.none}];const JO=(e,t)=>{const n=Lw(t),i=ac`<${qT} name="chevron-right" size=${14} />`,{addUnsubscribe:o}=Hw();return uo((()=>{const{shortcut$:t}=n.value;o(t.subscribe((({type:t})=>{t===bw.stop&&e.onClose()})))})),()=>ac`
    <${ZF}
      children=${ac`
        <${xF}
          children=${ac`
            <${GF}
              icon=${ac`<${qT} name="code" size=${14} />`}
              name="Language"
              right=${i}
            />
          `}
          subChildren=${ac`${function({store:e}){const{settings:t}=e.state;return HO.map((n=>({checked:n.value===t.language,name:n.name,onClick:()=>{e.dispatch(fG({value:n.value}))}})))}(n.value).map((e=>ac`
              <${xF}
                .onClick=${e.onClick}
                children=${ac`
                  <${GF}
                    icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
        <${xF}
          children=${ac`
            <${GF}
              icon=${ac`
                <${qT} prefix="mdi" name="format-letter-case" size=${14} />
              `}
              name="Table Name Case"
              right=${i}
            />
          `}
          subChildren=${ac`${function({store:e}){const{settings:t}=e.state;return MO.map((n=>({checked:n.value===t.tableNameCase,name:n.name,onClick:()=>{e.dispatch(yG({value:n.value}))}})))}(n.value).map((e=>ac`
              <${xF}
                .onClick=${e.onClick}
                children=${ac`
                  <${GF}
                    icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
        <${xF}
          children=${ac`
            <${GF}
              icon=${ac`<${qT}
                prefix="mdi"
                name="format-letter-case"
                size=${14}
              />`}
              name="Column Name Case"
              right=${i}
            />
          `}
          subChildren=${ac`${function({store:e}){const{settings:t}=e.state;return zO.map((n=>({checked:n.value===t.columnNameCase,name:n.name,onClick:()=>{e.dispatch(gG({value:n.value}))}})))}(n.value).map((e=>ac`
              <${xF}
                .onClick=${e.onClick}
                children=${ac`
                  <${GF}
                    icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
      `}
    />
  `},jO=new YY;let FO=()=>null;function UO(e){FO=e,jO.emit(KY())}const OO=Cc`
  position: absolute;
  top: 0;
  right: 0;
  padding: 8px;
  margin: 8px;
  cursor: pointer;
  fill: var(--foreground);
  color: var(--foreground);
  opacity: 0;
  transition: opacity 0.15s;
  user-select: none;

  &:hover {
    fill: var(--active);
    color: var(--active);
  }
`,EO=Cc`
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  min-height: 40px;
  outline: none;

  &:hover {
    ${OO} {
      opacity: 1;
    }
  }
`,$O=Cc`
  width: 100%;
  height: 100%;
  white-space: pre;
  overflow: auto;
  outline: none;
  font-family: var(--code-font-family) !important;
  color: var(--active);
  padding: 16px;
`,PO=Pu(["value","lang","theme"]),BO=(e,t)=>{const n=Ta(),{addUnsubscribe:i}=Hw(),o=Vo({highlight:"",backgroundColor:""}),l=()=>{var t;null==(t=e.onCopy)||t.call(e,e.value)},r=()=>{zi((()=>{o.backgroundColor=(()=>{const e=n.value;if(!e)return null;const t=e.querySelector("pre.shiki");return t&&t.style.backgroundColor||null})()||""}))},a=()=>{var t;null==(t=FO())||t.codeToHtml(e.value,{lang:e.lang,theme:e.theme}).then((e=>{o.highlight=e,r()}))};return co((()=>{a(),i(jO.on({loadShikiService:a}),So(e).subscribe((e=>{PO(e)&&a()})),(()=>{o.highlight=""}))})),()=>ac`
    <div class=${EO} ${Na(n)}>
      <div
        class=${["scrollbar",$O]}
        style=${{"background-color":o.backgroundColor}}
      >
        ${Ha(o.highlight?o.highlight:e.value)}
      </div>
      <div class=${OO} title="Copy" @click=${l}>
        <${qT} prefix="far" name="copy" useTransition=${!0} />
      </div>
    </div>
  `},AO={[hg.TypeScript]:"typescript",[hg.GraphQL]:"graphql",[hg.csharp]:"csharp",[hg.Java]:"java",[hg.Kotlin]:"kotlin",[hg.Scala]:"scala",[hg.JPA]:"java"};function QO(e){return new Promise(((t,n)=>{const i=document.createElement("textarea");i.style.fontSize="12pt",i.style.border="0",i.style.padding="0",i.style.margin="0",i.style.position="fixed",i.style.left="-9999px",i.style.top="-9999px",i.setAttribute("readonly",""),i.value=e,document.body.appendChild(i),i.select(),i.setSelectionRange(0,99999);try{document.execCommand("copy"),t()}catch(e){n(e)}i.setSelectionRange(0,0),document.body.removeChild(i)}))}async function DO(e){if(!navigator.clipboard)return QO(e);try{await navigator.clipboard.writeText(e)}catch{return QO(e)}}const _O=Pu([vg.ZeroOne,vg.OneOnly]),qO=Pu([vg.ZeroN,vg.OneN]);function eE(e,t){const n=function(e){return yK[e]??[]}(t);for(const t of n)if(0===e.toLocaleLowerCase().indexOf(t.name.toLocaleLowerCase()))return t.primitiveType;return"string"}function tE(e,t){let n=e;switch(t){case bg.camelCase:n=Jm(e);break;case bg.pascalCase:n=function(e){return am(Jm(e))}(e);break;case bg.snakeCase:n=cY(e)}return n}const nE={int:"int",long:"long",float:"float",double:"double",decimal:"decimal",boolean:"bool",string:"string",lob:"string",date:"DateTime",dateTime:"DateTime",time:"TimeSpan"};function iE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=tE(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push(`public class ${l} {`),Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=tE(i.name,e),l=eE(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),n.push(`  public ${nE[l]} ${o.charAt(0).toLocaleUpperCase()+o.slice(1)} { get; set; }`)}(e,{buffer:t,column:n})})),t.push("}")}const oE={int:"Int",long:"Int",float:"Float",double:"Float",decimal:"Float",boolean:"Boolean",string:"String",lob:"String",date:"String",dateTime:"String",time:"String"};function lE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=tE(n.name,i);""!==n.comment.trim()&&t.push(`# ${n.comment}`),t.push(`type ${l} {`),Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=Kg(i.ui.keys,Xg.primaryKey),l=Kg(i.ui.keys,Xg.foreignKey);if(!o&&l)return;const r=tE(i.name,e);if(""!==i.comment.trim()&&n.push(`  # ${i.comment}`),Kg(i.options,Gg.primaryKey)||l)n.push(`  ${r}: ID${Kg(i.options,Gg.notNull)?"!":""}`);else{const e=eE(i.dataType,t);n.push(`  ${r}: ${oE[e]}${Kg(i.options,Gg.notNull)?"!":""}`)}}(e,{buffer:t,column:n})})),function({doc:{relationshipIds:e},collections:t,settings:{tableNameCase:n,columnNameCase:i}},{buffer:o,table:l}){const r=Vn(t).collection("tableEntities"),a=Vn(t).collection("relationshipEntities").selectByIds(e);a.filter((e=>e.end.tableId===l.id)).forEach((e=>{const t=r.selectById(e.start.tableId);if(t){const e=tE(t.name,n),l=tE(t.name,i);""!==t.comment.trim()&&o.push(`  # ${t.comment}`),o.push(`  ${l}: ${e}`)}})),a.filter((e=>e.start.tableId===l.id)).forEach((e=>{const t=r.selectById(e.end.tableId);if(t){const l=tE(t.name,n),r=tE(t.name,i);""!==t.comment.trim()&&o.push(`  # ${t.comment}`),_O(e.relationshipType)?o.push(`  ${r}: ${l}`):qO(e.relationshipType)&&o.push(`  ${tE(`${r}List`,i)}: [${l}!]!`)}}))}(e,{buffer:t,table:n}),t.push("}")}const rE={int:"Integer",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function aE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=tE(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push("@Data"),t.push(`public class ${l} {`),Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=tE(i.name,e),l=eE(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),n.push(`  private ${rE[l]} ${o};`)}(e,{buffer:t,column:n})})),t.push("}")}const sE={int:"Integer",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function cE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i,columnNameCase:o,database:l},doc:{relationshipIds:r},collections:a}=e,s=tE(n.name,i),c=Vn(a).collection("tableEntities"),u=Vn(a).collection("tableColumnEntities").selectByIds(n.columnIds),d=Vn(a).collection("relationshipEntities").selectByIds(r),p=Oj(u);if(p.length>1){t.push("@Data"),t.push(`public class ${tE(`${n.name}Id`,i)} implements Serializable {`);const e=[];p.forEach((n=>{if(Kg(n.ui.keys,Xg.primaryKey)&&Kg(n.ui.keys,Xg.foreignKey))c.selectByIds(d.filter((e=>e.end.columnIds.includes(n.id))).map((e=>e.start.tableId))).forEach((t=>{e.some((e=>e.id===t.id))||e.push(t)}));else{const e=tE(n.name,o),i=eE(n.dataType,l);t.push(`  private ${sE[i]} ${e};`)}})),e.forEach((e=>{t.push(`  private ${tE(e.name,i)} ${tE(e.name,o)};`)})),t.push("}")}""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push("@Data"),t.push("@Entity"),p.length>1&&t.push(`@IdClass(${tE(`${n.name}Id`,i)}.class)`),t.push(`public class ${s} {`),u.forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=Kg(i.ui.keys,Xg.primaryKey),l=Kg(i.ui.keys,Xg.foreignKey);if(!o&&l||o&&l)return;const r=tE(i.name,e),a=eE(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),Kg(i.options,Gg.primaryKey)?(n.push("  @Id"),Kg(i.options,Gg.autoIncrement)&&n.push("  @GeneratedValue")):Kg(i.options,Gg.notNull)&&n.push("  @Column(nullable = false)"),"lob"===a&&n.push("  @Lob"),n.push(`  private ${sE[a]} ${r};`)}(e,{buffer:t,column:n})})),function({doc:{relationshipIds:e},collections:t,settings:{tableNameCase:n,columnNameCase:i}},{buffer:o,table:l}){const r=Vn(t).collection("tableEntities"),a=Vn(t).collection("tableColumnEntities"),s=Vn(t).collection("relationshipEntities").selectByIds(e);s.filter((e=>e.end.tableId===l.id)).forEach((e=>{const t=r.selectById(e.start.tableId),l=a.selectByIds(e.end.columnIds);if(t&&0!==l.length){const r=tE(t.name,n),a=tE(t.name,i);""!==t.comment.trim()&&o.push(`  // ${t.comment}`),Uj(l)&&o.push("  @Id"),_O(e.relationshipType)?o.push("  @OneToOne"):qO(e.relationshipType)&&o.push("  @ManyToOne"),l.length>1?(o.push("  @JoinColumns(value = {"),l.forEach(((e,t)=>{o.push(`    @JoinColumn(name = "${tE(e.name,bg.snakeCase)}")${l.length-1>t?",":""}`)})),o.push("  })")):o.push(`  @JoinColumn(name = "${tE(l[0].name,bg.snakeCase)}")`),o.push(`  private ${r} ${a};`)}})),s.filter((e=>e.start.tableId===l.id)).forEach((e=>{const t=r.selectById(e.end.tableId);if(t){const r=tE(t.name,n),a=tE(t.name,i);""!==t.comment.trim()&&o.push(`  // ${t.comment}`),_O(e.relationshipType)?(o.push(`  @OneToOne(mappedBy = "${tE(l.name,i)}")`),o.push(`  private ${r} ${a};`)):qO(e.relationshipType)&&(o.push(`  @OneToMany(mappedBy = "${tE(l.name,i)}")`),o.push(`  private List<${r}> ${tE(`${a}List`,i)} = new ArrayList<>();`))}}))}(e,{buffer:t,table:n}),t.push("}")}const uE={int:"Int",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function dE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=tE(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push(`class ${l} {`),Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=tE(i.name,e),l=eE(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),Kg(i.options,Gg.notNull)&&"date"!==l&&"dateTime"!==l&&"time"!==l?n.push(`  var ${o}: ${uE[l]} = ${function(e){switch(e){case"int":case"long":return 0;case"float":return"0.0f";case"double":return"0.0";case"boolean":return!1;case"string":case"lob":return'""';case"decimal":return"BigDecimal.ZERO";case"date":case"dateTime":case"time":return null}}(l)}`):n.push(`  var ${o}: ${uE[l]}? = null`)}(e,{buffer:t,column:n})})),t.push("}")}const pE={int:"Int",long:"Long",float:"Float",double:"Double",decimal:"BigDecimal",boolean:"Boolean",string:"String",lob:"String",date:"LocalDate",dateTime:"LocalDateTime",time:"LocalTime"};function hE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=tE(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push("@Data"),t.push(`case class ${l}(`),Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach(((n,i,o)=>{let l=!0;i===o.length-1&&(l=!1),function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i},o){const l=tE(i.name,e),r=eE(i.dataType,t);""!==i.comment.trim()&&n.push(` // ${i.comment}`),n.push(` ${l}: ${pE[r]}${o?",":""}`)}(e,{buffer:t,column:n},l)})),t.push(")")}const mE={int:"number",long:"number",float:"number",double:"number",decimal:"number",boolean:"boolean",string:"string",lob:"string",date:"string",dateTime:"string",time:"string"};function bE(e,{buffer:t,table:n}){const{settings:{tableNameCase:i},collections:o}=e,l=tE(n.name,i);""!==n.comment.trim()&&t.push(`// ${n.comment}`),t.push(`export interface ${l} {`),Vn(o).collection("tableColumnEntities").selectByIds(n.columnIds).forEach((n=>{!function({settings:{columnNameCase:e,database:t}},{buffer:n,column:i}){const o=tE(i.name,e),l=eE(i.dataType,t);""!==i.comment.trim()&&n.push(`  // ${i.comment}`),n.push(`  ${o}: ${mE[l]}${Kg(i.options,Gg.notNull)?"":" | null"};`)}(e,{buffer:t,column:n})})),t.push("}")}function fE(e){const{settings:{language:t}}=e;switch(t){case hg.GraphQL:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{lE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case hg.JPA:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{cE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case hg.TypeScript:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{bE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case hg.csharp:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{iE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case hg.Java:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{aE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case hg.Kotlin:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{dE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e);case hg.Scala:return function(e){const{doc:{tableIds:t},collections:n}=e,i=[""];return Vn(n).collection("tableEntities").selectByIds(t).sort(Bj).forEach((t=>{hE(e,{buffer:i,table:t}),i.push("")})),i.join("\n")}(e)}return""}const yE=Cc`
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--canvas-background);
`,gE=Pu(["language","tableNameCase","columnNameCase"]),vE=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=mF(t),l=Vo({code:""}),r=()=>{const{store:t}=n.value;if(e.tableId){const{collections:n}=t.state,i=Vn(n).collection("tableEntities").selectById(e.tableId);i&&(l.code=function(e,t){const n=[""],{settings:{language:i}}=e;switch(i){case hg.GraphQL:lE(e,{buffer:n,table:t}),n.push("");break;case hg.JPA:cE(e,{buffer:n,table:t}),n.push("");break;case hg.TypeScript:bE(e,{buffer:n,table:t}),n.push("");break;case hg.csharp:iE(e,{buffer:n,table:t}),n.push("");break;case hg.Java:aE(e,{buffer:n,table:t}),n.push("");break;case hg.Kotlin:dE(e,{buffer:n,table:t}),n.push("");break;case hg.Scala:hE(e,{buffer:n,table:t}),n.push("")}return n.join("\n")}(t.state,i))}else l.code=fE(t.state)},a=()=>{const{emitter:e}=n.value;DO(l.code).then((()=>{e.emit(NY({close:Dk(2e3),message:ac`<${az} title="Copied!" />`}))}))},s=()=>{o.state.show=!1};return co((()=>{const{store:t}=n.value,{settings:o}=t.state;r(),i(So(o).subscribe((e=>{gE(e)&&r()})),So(e).subscribe((e=>{"tableId"===e&&r()})))})),()=>{const{store:t}=n.value,{settings:{language:i}}=t.state,r=AO[i];return ac`
      <div
        class=${yE}
        @contextmenu=${o.onContextmenu}
        @mousedown=${o.onMousedown}
      >
        <${BO}
          lang=${r}
          theme=${e.isDarkMode?"dark":"light"}
          value=${l.code}
          .onCopy=${a}
        />
        ${o.state.show?ac`
              <${JO} .onClose=${s} />
            `:null}
      </div>
    `}},ZE=[{name:"SingleQuote",value:yg.singleQuote},{name:"DoubleQuote",value:yg.doubleQuote},{name:"Backtick",value:yg.backtick},{name:"None",value:yg.none}];const xE=(e,t)=>{const n=Lw(t),i=ac`<${qT} name="chevron-right" size=${14} />`,{addUnsubscribe:o}=Hw();return uo((()=>{const{shortcut$:t}=n.value;o(t.subscribe((({type:t})=>{t===bw.stop&&e.onClose()})))})),()=>ac`
    <${ZF}
      children=${ac`
        <${xF}
          children=${ac`
            <${GF}
              icon=${ac`
                <${qT} prefix="mdi" name="database" size=${14} />
              `}
              name="Database"
              right=${i}
            />
          `}
          subChildren=${ac`${LF(n.value).map((e=>ac`
              <${xF}
                .onClick=${e.onClick}
                children=${ac`
                  <${GF}
                    icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
        <${xF}
          children=${ac`
            <${GF}
              icon=${ac`
                <${qT} prefix="mdi" name="code-brackets" size=${14} />
              `}
              name="Bracket"
              right=${i}
            />
          `}
          subChildren=${ac`${function({store:e}){const{settings:t}=e.state;return ZE.map((n=>({checked:n.value===t.bracketType,name:n.name,onClick:()=>{e.dispatch(vG({value:n.value}))}})))}(n.value).map((e=>ac`
              <${xF}
                .onClick=${e.onClick}
                children=${ac`
                  <${GF}
                    icon=${e.checked?ac`<${qT} name="check" size=${14} />`:null}
                    name=${e.name}
                  />
                `}
              />
            `))}`}
        />
      `}
    />
  `},GE=Cc`
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--canvas-background);
`,XE=Pu(["database","bracketType"]),IE=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=mF(t),l=Vo({sql:""}),r=()=>{const{store:t}=n.value;if(e.tableId){const{collections:n}=t.state,i=Vn(n).collection("tableEntities").selectById(e.tableId);i&&(l.sql=function(e,t){const{settings:n,doc:{indexIds:i},collections:o}=e,l=[""],r=n.database,a=[],s=Vn(o).collection("indexEntities").selectByIds(i).filter((e=>e.tableId===t.id));switch(r){case dg.MariaDB:WU(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{SU(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case dg.MSSQL:LU(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{wU(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case dg.MySQL:TU(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{zU(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case dg.Oracle:MU(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{jU(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case dg.PostgreSQL:UU(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{EU(e,{index:t,buffer:l,indexNames:a}),l.push("")}));break;case dg.SQLite:$U(e,{buffer:l,table:t}),l.push(""),s.forEach((t=>{BU(e,{index:t,buffer:l,indexNames:a}),l.push("")}))}return l.join("\n")}(t.state,i))}else l.sql=AU(t.state)},a=()=>{const{emitter:e}=n.value;DO(l.sql).then((()=>{e.emit(NY({close:Dk(2e3),message:ac`<${az} title="Copied!" />`}))}))},s=()=>{o.state.show=!1};return co((()=>{const{store:t}=n.value,{settings:o}=t.state;r(),i(So(o).subscribe((e=>{XE(e)&&r()})),So(e).subscribe((e=>{"tableId"===e&&r()})))})),()=>ac`
    <div
      class=${GE}
      @contextmenu=${o.onContextmenu}
      @mousedown=${o.onMousedown}
    >
      <${BO}
        lang="sql"
        theme=${e.isDarkMode?"dark":"light"}
        value=${l.sql}
        .onCopy=${a}
      />
      ${o.state.show?ac`<${xE} .onClose=${s} />`:null}
    </div>
  `},WE=Cc`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.4);
  }
`,kE=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 900px;
  max-height: calc(100% - 32px);
  position: relative;
  z-index: 1;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  overflow: hidden;
`,VE=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow: auto;
  padding: 0 12px 12px 12px;
`,SE=Cc`
  display: flex;
  padding: 0 8px;
  min-height: 32px;
  overflow-x: auto;
`,CE=Cc`
  display: flex;
  max-width: 200px;
  height: 32px;
  padding: 0 12px;
  border-radius: 4px;
  cursor: default;
  align-items: center;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
    color: var(--active);
    fill: var(--active);
  }

  & > span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,LE=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  min-height: 450px;
`,RE=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=Vo({tab:TO.Indexes}),l=()=>{const{store:e}=n.value;e.dispatch(XZ({[cz]:!1}))},r=e=>{const t=e.target;t&&!t.closest(".table-properties")&&l()},a=e=>{o.tab=e};return uo((()=>{const{shortcut$:e}=n.value;i(e.subscribe((({type:e})=>{e===bw.stop&&l()})))})),()=>{const{store:t}=n.value,{collections:i}=t.state,{tableIds:l}=e,s=Vn(i).collection("tableEntities").selectByIds(l);return ac`
      <div
        class=${WE}
        @contextmenu=${rT}
        @mousedown=${rT}
        @touchstart=${rT}
        @wheel=${rT}
        @click=${r}
      >
        <div class=${["table-properties",kE]}>
          <div class=${["scrollbar",SE]}>
            ${s.map((t=>ac`
                <div
                  class=${[CE,{selected:t.id===e.tableId}]}
                  title=${t.name}
                  @click=${()=>e.onChange(t.id)}
                >
                  <span>${t.name.trim()?t.name:"unnamed"}</span>
                </div>
              `))}
          </div>
          <${KO}
            value=${o.tab}
            .onChange=${a}
          />
          <div class=${["scrollbar",VE]}>
            ${o.tab===TO.Indexes?ac`
                  <div class=${LE}>
                    <${RO} tableId=${e.tableId} />
                  </div>
                `:o.tab===TO.SchemaSQL?ac`
                    <div class=${LE}>
                      <${IE}
                        isDarkMode=${e.isDarkMode}
                        tableId=${e.tableId}
                      />
                    </div>
                  `:o.tab===TO.GeneratorCode?ac`
                      <div class=${LE}>
                        <${vE}
                          isDarkMode=${e.isDarkMode}
                          tableId=${e.tableId}
                        />
                      </div>
                    `:null}
          </div>
        </div>
      </div>
    `}},YE=Cc`
  display: flex;
  width: 100%;
  height: 12px;
  position: relative;
  align-items: center;
  user-select: none;
  touch-action: none;
`,wE=Cc`
  width: 100%;
  height: 8px;
  background-color: var(--gray-color-3);
  box-shadow: inset 0 0 0 1px var(--gray-color-6);
  overflow: hidden;
  position: relative;
  border-radius: 9999px;
`,TE=Cc`
  position: absolute;
  border-radius: inherit;
  background-color: var(--accent-color-9);
  box-shadow: inset 0 0 0 1px var(--gray-color-6);
  top: 0;
  width: 100%;
  height: 100%;
`,NE=Cc`
  position: absolute;
  width: 12px;
  height: 12px;
  background-color: white;
  border-radius: 9999px;

  &::before {
    content: '';
    position: absolute;
    width: calc(12px * 3);
    height: calc(12px * 3);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  &::after {
    content: '';
    position: absolute;
    background-color: white;
    border-radius: 9999px;
    inset: calc(-0.25 * 8px);
    box-shadow: inset 0 0 0 1px var(--gray-color-6);
    cursor: pointer;
  }
`,KE=(e,t)=>{const n=Ta(),i=t=>{const i=n.value.getBoundingClientRect(),o=t-i.x,l=Cy(o/i.width,2),r=e.max-e.min;return od(e.min,e.max)(Cy(r*l)+e.min)},o=({event:t,x:n})=>{"mousemove"===t.type&&t.preventDefault();const o=i(n);o!==e.value&&e.onChange(o)},l=e=>{ST.subscribe(o)},r=t=>{const n=i(t.clientX);n!==e.value&&e.onChange(n),l()};return()=>{const t=e.max-e.min,i=e.value-e.min,o=Cy(i/t,2),a=100*o,s=100-a+"%",c=`calc(${a}% - ${12*o}px)`;return ac`
      <div class=${YE} ${Na(n)} @mousedown=${r}>
        <div class=${wE}>
          <div class=${TE} style=${{right:s}}></div>
        </div>
        <div
          class=${NE}
          style=${{left:c}}
          @mousedown=${l}
        ></div>
      </div>
    `}},zE=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background-color: var(--canvas-boundary-background);
`,HE=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  pointer-events: none;
`,ME=Cc`
  padding: 0 15px;
  display: flex;
  width: 100%;
  height: 30px;
  overflow: hidden;
  position: absolute;
  left: 0;
  bottom: 0;
  background-color: var(--canvas-boundary-background);
  align-items: center;

  & > button:last-child {
    margin-left: 8px;
  }
`,JE=Cc`
  width: 24px;
  height: 100%;
`,jE=(e,t)=>{const n=Ta(),i=Ta(),o=e.app.value,l=Sw({toWidth:o.toWidth},{getHistory:o.store.history.clone}),{store:r}=l,{history:a}=r,{addUnsubscribe:s}=Hw(),c=Lo(t,Cw,l);s((()=>{c.destroy()}));const u=()=>({...o.store.state.editor.viewport}),d=Vo({cursor:a.cursor});r.dispatchSync(LW(ai(o.store.state)),rZ(u()));const p=()=>{e.onClose()},h=()=>{e.onChange(d.cursor),p()},m=e=>{d.cursor=e,(e=>{let t=0;for(;a.cursor!==e&&t<=mY;)a.cursor<e?a.redo():a.undo(),t++})(e)};return uo((()=>{s(o.shortcut$.subscribe((({type:e})=>{e===bw.stop&&p()})),So(o.store.state.editor.viewport).subscribe((()=>{l.store.dispatch(rZ(u()))})),(()=>{Rw(l)}))})),()=>ac`
    <div class=${zE}>
      <div class=${HE} ${Na(n)}>
        <${HK} root=${n} canvas=${i} grabMove=${!0} />
        <${PK} />
      </div>
    </div>
    <div class=${ME}>
      <${KE}
        min=${-1}
        max=${a.size-1}
        value=${d.cursor}
        .onChange=${m}
      />
      <div class=${JE}></div>
      <${tz} variant="soft" size="1" text="Apply" .onClick=${h} />
      <${tz} size="1" text="Cancel" .onClick=${p} />
    </div>
  `};var FE={exports:{}};FE.exports=function(){function e(e,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(0, 0, 0, 0)";return Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),"hex"==o?t(e):"rgb"==o?n(e,l):"hsl"==o?i(e):e}function t(e){Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]});var t=e.r.toString(16);e.r<16&&(t="0"+t);var n=e.g.toString(16);e.g<16&&(n="0"+n);var i=e.b.toString(16);e.b<16&&(i="0"+i);var o="";if(e.a<1){var l=Math.floor(255*e.a);o=l.toString(16),l<16&&(o="0"+o)}return"#"+t+n+i+o}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(0, 0, 0, 0)";if(Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),!(typeof e>"u"))return 1==e.a||typeof e.a>"u"?isNaN(e.r)?t:"rgb("+e.r+","+e.g+","+e.b+")":"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"}function i(e){return Array.isArray(e)&&(e={r:e[0],g:e[1],b:e[2],a:e[3]}),1==e.a||typeof e.a>"u"?"hsl("+e.h+","+e.s+"%,"+e.l+"%)":"hsla("+e.h+","+e.s+"%,"+e.l+"%,"+e.a+")"}var o={format:e,rgb:n,hsl:i,hex:t};function l(e,t){return t=typeof t>"u"?1:t,Math.round(e*t)/t}function r(e){return e*Math.PI/180}function a(e){var t=180*e/Math.PI;return t<0&&(t=360+t),t}function s(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+t*Math.cos(r(e))}function c(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+t*Math.sin(r(e))}function u(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:s(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),y:c(e,t,n)}}function d(e,t){return a(Math.atan2(t,e))}var p={round:l,radianToDegree:a,degreeToRadian:r,getXInCircle:s,getYInCircle:c,caculateAngle:d},h={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",aqua:"rgb(0, 255, 255)",aquamarine:"rgb(127, 255, 212)",azure:"rgb(240, 255, 255)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",burlywood:"rgb(222, 184, 135)",cadetblue:"rgb(95, 158, 160)",chartreuse:"rgb(127, 255, 0)",chocolate:"rgb(210, 105, 30)",coral:"rgb(255, 127, 80)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",crimson:"rgb(237, 20, 61)",cyan:"rgb(0, 255, 255)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgray:"rgb(169, 169, 169)",darkgrey:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkorange:"rgb(255, 140, 0)",darkorchid:"rgb(153, 50, 204)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",deeppink:"rgb(255, 20, 147)",deepskyblue:"rgb(0, 191, 255)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",firebrick:"rgb(178, 34, 34)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",fuchsia:"rgb(255, 0, 255)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",goldenrod:"rgb(218, 165, 32)",gray:"rgb(128, 128, 128)",grey:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",greenyellow:"rgb(173, 255, 47)",honeydew:"rgb(240, 255, 240)",hotpink:"rgb(255, 105, 180)",indianred:"rgb(205, 92, 92)",indigo:"rgb(75, 0, 130)",ivory:"rgb(255, 255, 240)",khaki:"rgb(240, 230, 140)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lightblue:"rgb(173, 216, 230)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgreen:"rgb(144, 238, 144)",lightgray:"rgb(211, 211, 211)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightsalmon:"rgb(255, 160, 122)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightyellow:"rgb(255, 255, 224)",lime:"rgb(0, 255, 0)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",maroon:"rgb(128, 0, 0)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumpurple:"rgb(147, 112, 219)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navy:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olive:"rgb(128, 128, 0)",olivedrab:"rgb(107, 142, 35)",orange:"rgb(255, 165, 0)",orangered:"rgb(255, 69, 0)",orchid:"rgb(218, 112, 214)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",paleturquoise:"rgb(175, 238, 238)",palevioletred:"rgb(219, 112, 147)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",plum:"rgb(221, 160, 221)",powderblue:"rgb(176, 224, 230)",purple:"rgb(128, 0, 128)",rebeccapurple:"rgb(102, 51, 153)",red:"rgb(255, 0, 0)",rosybrown:"rgb(188, 143, 143)",royalblue:"rgb(65, 105, 225)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",sienna:"rgb(160, 82, 45)",silver:"rgb(192, 192, 192)",skyblue:"rgb(135, 206, 235)",slateblue:"rgb(106, 90, 205)",slategray:"rgb(112, 128, 144)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",springgreen:"rgb(0, 255, 127)",steelblue:"rgb(70, 130, 180)",tan:"rgb(210, 180, 140)",teal:"rgb(0, 128, 128)",thistle:"rgb(216, 191, 216)",tomato:"rgb(255, 99, 71)",turquoise:"rgb(64, 224, 208)",violet:"rgb(238, 130, 238)",wheat:"rgb(245, 222, 179)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellowgreen:"rgb(154, 205, 50)",transparent:"rgba(0, 0, 0, 0)"};function m(e){return!!h[e]}function b(e){return h[e]}var f={isColorName:m,getColorByName:b};function y(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function g(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.l}var o=v(e,t,n);return j(o.r,o.g,o.b)}function v(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.l}var o,r,a;if(e/=360,n/=100,0==(t/=100))o=r=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;o=y(c,s,e+1/3),r=y(c,s,e),a=y(c,s,e-1/3)}return{r:l(255*o),g:l(255*r),b:l(255*a)}}var Z={HUEtoRGB:y,HSLtoHSV:g,HSLtoRGB:v},x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},G=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),X=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var l=Object.getPrototypeOf(t);return null===l?void 0:e(l,n,i)}if("value"in o)return o.value;var r=o.get;return void 0===r?void 0:r.call(i)},k=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},S=function(){function e(e,t){var n=[],i=!0,o=!1,l=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,l=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw l}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(e){return Array.isArray(e)?e:Array.from(e)},L=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},R=/(#(?:[\da-f]{3}){1,2}|#(?:[\da-f]{8})|rgb\((?:\s*\d{1,3},\s*){2}\d{1,3}\s*\)|rgba\((?:\s*\d{1,3},\s*){3}\d*\.?\d+\s*\)|hsl\(\s*\d{1,3}(?:,\s*\d{1,3}%){2}\s*\)|hsla\(\s*\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\s*\)|([\w_\-]+))/gi,Y=",";function w(e){var t=e.match(R),n=[];if(!t)return n;for(var i=0,o=t.length;i<o;i++)if(t[i].indexOf("#")>-1||t[i].indexOf("rgb")>-1||t[i].indexOf("hsl")>-1)n.push({color:t[i]});else{var l=f.getColorByName(t[i]);l&&n.push({color:t[i],nameColor:l})}var r={next:0};return n.forEach((function(t){var n=e.indexOf(t.color,r.next);t.startIndex=n,t.endIndex=n+t.color.length,r.next=t.endIndex})),n}function T(e){var t=w(e);return t.forEach((function(t,n){e=e.replace(t.color,"@"+n)})),{str:e,matches:t}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=T(e);return n.str.split(t).map((function(e,t){return e=z(e),n.matches[t]&&(e=e.replace("@"+t,n.matches[t].color)),e}))}function K(e,t){return t.forEach((function(t,n){e=e.replace("@"+n,t.color)})),e}function z(e){return e.replace(/^\s+|\s+$/g,"")}function H(e){if("string"==typeof e){if(f.isColorName(e)&&(e=f.getColorByName(e)),e.indexOf("rgb(")>-1){for(var t=0,n=(o=e.replace("rgb(","").replace(")","").split(",")).length;t<n;t++)o[t]=parseInt(z(o[t]),10);var i={type:"rgb",r:o[0],g:o[1],b:o[2],a:1};return i=Object.assign(i,U(i))}if(e.indexOf("rgba(")>-1){for(t=0,n=(o=e.replace("rgba(","").replace(")","").split(",")).length;t<n;t++)o[t]=n-1==t?parseFloat(z(o[t])):parseInt(z(o[t]),10);return i={type:"rgb",r:o[0],g:o[1],b:o[2],a:o[3]},i=Object.assign(i,U(i))}if(e.indexOf("hsl(")>-1){for(t=0,n=(o=e.replace("hsl(","").replace(")","").split(",")).length;t<n;t++)o[t]=parseFloat(z(o[t]));return i={type:"hsl",h:o[0],s:o[1],l:o[2],a:1},i=Object.assign(i,v(i))}if(e.indexOf("hsla(")>-1){for(t=0,n=(o=e.replace("hsla(","").replace(")","").split(",")).length;t<n;t++)o[t]=n-1==t?parseFloat(z(o[t])):parseInt(z(o[t]),10);return i={type:"hsl",h:o[0],s:o[1],l:o[2],a:o[3]},i=Object.assign(i,v(i))}if(0==e.indexOf("#")){var o=[],l=1;if(3==(e=e.replace("#","")).length)for(t=0,n=e.length;t<n;t++){var r=e.substr(t,1);o.push(parseInt(r+r,16))}else if(8===e.length){for(t=0,n=e.length;t<n;t+=2)o.push(parseInt(e.substr(t,2),16));l=o.pop()/255}else for(t=0,n=e.length;t<n;t+=2)o.push(parseInt(e.substr(t,2),16));return i={type:"hex",r:o[0],g:o[1],b:o[2],a:l},i=Object.assign(i,U(i))}}else if("number"==typeof e){if(0<=e&&e<=16777215)return i={type:"hex",r:(16711680&e)>>16,g:(65280&e)>>8,b:(255&e)>>0,a:1},i=Object.assign(i,U(i));if(0<=e&&e<=4294967295)return i={type:"hex",r:(4278190080&e)>>24,g:(16711680&e)>>16,b:(65280&e)>>8,a:(255&e)/255},i=Object.assign(i,U(i))}return e}function M(e){"string"==typeof e&&(e=N(e));var t=(e=e.map((function(e){if("string"==typeof e){var t=T(e),n=z(t.str).split(" ");return n[1]?n[1].includes("%")?n[1]=parseFloat(n[1].replace(/%/,""))/100:n[1]=parseFloat(n[1]):n[1]="*",n[0]=K(n[0],t.matches),n}if(Array.isArray(e))return e[1]?"string"==typeof e[1]&&(e[1].includes("%")?e[1]=parseFloat(e[1].replace(/%/,""))/100:e[1]=+e[1]):e[1]="*",[].concat(L(e))}))).filter((function(e){return"*"===e[1]})).length;if(t>0){var n=(1-e.filter((function(e){return"*"!=e[1]&&1!=e[1]})).map((function(e){return e[1]})).reduce((function(e,t){return e+t}),0))/t;e.forEach((function(t,i){"*"==t[1]&&i>0&&(e.length-1==i||(t[1]=n))}))}return e}var J={matches:w,convertMatches:T,convertMatchesArray:N,reverseMatches:K,parse:H,parseGradient:M,trim:z,color_regexp:R,color_split:Y};function j(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=e/255,l=t/255,r=n/255,a=Math.max(o,l,r),s=a-Math.min(o,l,r),c=0;return 0==s?c=0:a==o?c=(l-r)/s%6*60:a==l?c=60*((r-o)/s+2):a==r&&(c=60*((o-l)/s+4)),c<0&&(c=360+c),{h:c,s:0==a?0:s/a,v:a}}function F(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=e/255,l=t/255,r=n/255,a=1-Math.max(o,l,r);return{c:(1-o-a)/(1-a),m:(1-l-a)/(1-a),y:(1-r-a)/(1-a),k:a}}function U(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}e/=255,t/=255,n/=255;var o,r,a=Math.max(e,t,n),s=Math.min(e,t,n),c=(a+s)/2;if(a==s)o=r=0;else{var u=a-s;switch(r=c>.5?u/(2-a-s):u/(a+s),a){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:l(360*o),s:l(100*r),l:l(100*c)}}function O(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return E((e+t+n)/3>90?0:255)}function E(e){return{r:e,g:e,b:e}}function $(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return E(Math.ceil((e+t+n)/3))}function P(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return E(A(e,t,n).y)}function B(e,t,n){return Math.ceil(.2126*e+.7152*t+.0722*n)}function A(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=B(e,t,n);return{y:o,cr:.713*(e-o),cb:.564*(n-o)}}function Q(e){return 100*(e>(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.04045)?Math.pow((e+.055)/1.055,2.4):e/12.92)}function D(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}var o=e/255,l=t/255,r=n/255;return{x:.4124*(o=Q(o))+.3576*(l=Q(l))+.1805*(r=Q(r)),y:.2126*o+.7152*l+.0722*r,z:.0193*o+.1192*l+.9505*r}}function _(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.r,t=i.g,n=i.b}return XYZtoLAB(D(e,t,n))}var q={RGBtoCMYK:F,RGBtoGray:P,RGBtoHSL:U,RGBtoHSV:j,RGBtoLAB:_,RGBtoSimpleGray:$,RGBtoXYZ:D,RGBtoYCrCb:A,c:O,brightness:B,gray:E};function ee(e,t,n,i){if(1==arguments.length){var o=arguments[0];e=o.c,t=o.m,n=o.y,i=o.k}return{r:255*(1-e)*(1-i),g:255*(1-t)*(1-i),b:255*(1-n)*(1-i)}}var te={CMYKtoRGB:ee};function ne(e){return Math.pow(e,3)>.008856?Math.pow(e,3):(e-16/116)/7.787}function ie(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}function oe(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.x,t=i.y,n=i.z}var o=e/100,r=t/100,a=n/100,s=3.2406*o+-1.5372*r+-.4986*a,c=-.9689*o+1.8758*r+.0415*a,u=.0557*o+-.204*r+1.057*a;return s=ie(s),c=ie(c),u=ie(u),{r:l(255*s),g:l(255*c),b:l(255*u)}}function le(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.l,t=i.a,n=i.b}var o=(e+16)/116,l=t/500+o,r=o-n/200;return o=ne(o),{x:95.047*(l=ne(l)),y:100*o,z:108.883*(r=ne(r))}}function re(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.l,t=i.a,n=i.b}return oe(le(e,t,n))}var ae={XYZtoRGB:oe,LABtoRGB:re,LABtoXYZ:le};function se(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.v}var o=e,r=n;o>=360&&(o=0);var a=t*r,s=a*(1-Math.abs(o/60%2-1)),c=r-a,u=[];return 0<=o&&o<60?u=[a,s,0]:60<=o&&o<120?u=[s,a,0]:120<=o&&o<180?u=[0,a,s]:180<=o&&o<240?u=[0,s,a]:240<=o&&o<300?u=[s,0,a]:300<=o&&o<360&&(u=[a,0,s]),{r:l(255*(u[0]+c)),g:l(255*(u[1]+c)),b:l(255*(u[2]+c))}}function ce(e,t,n){if(1==arguments.length){var i=arguments[0];e=i.h,t=i.s,n=i.v}var o=se(e,t,n);return U(o.r,o.g,o.b)}var ue={HSVtoHSL:ce,HSVtoRGB:se};function de(e,t,n,i){if(1==arguments.length){var o=arguments[0];e=o.y,t=o.cr,n=o.cb,i=(i=o.bit)||0}var l=e+1.402*(t-i),r=e-.344*(n-i)-.714*(t-i),a=e+1.772*(n-i);return{r:Math.ceil(l),g:Math.ceil(r),b:Math.ceil(a)}}var pe={YCrCbtoRGB:de};function he(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex",r={r:l(t.r+(n.r-t.r)*i),g:l(t.g+(n.g-t.g)*i),b:l(t.b+(n.b-t.b)*i),a:l(t.a+(n.a-t.a)*i,100)};return e(r,r.a<1?"rgb":o)}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return[];"string"==typeof e&&(e=N(e));for(var n=(e=e||[]).length,i=[],o=0;o<n-1;o++)for(var l=0;l<t;l++)i.push(be(e[o],e[o+1],l/t));return i}function be(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex";return he(H(e),H(t),n,i)}function fe(e,t){return be(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex")}function ye(e){return e=H(e),(Math.round(299*e.r)+Math.round(587*e.g)+Math.round(114*e.b))/1e3}function ge(e){return ye(e)>=128?"black":"white"}function ve(e){for(var t=[],n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:10)-((e=M(e)).length-1),i=n,o=1,l=e.length;o<l;o++){var r=e[o-1][0],a=e[o][0],s=1==o?e[o][1]:e[o][1]-e[o-1][1],c=o==e.length-1?i:Math.floor(s*n);t=t.concat(me([r,a],c),[a]),i-=c}return t}function Ze(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,s=j(H(t)),c=(r-l)*a/i,u=[],d=1;d<=i;d++)s[n]=Math.abs((a-c*d)/a),u.push(e(se(s),o));return u}function xe(e){return Ze(e,"h",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:360,1)}function Ge(e){return Ze(e,"s",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,100)}function Xe(e){return Ze(e,"v",arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb",arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,100)}me.parula=function(e){return me(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],e)},me.jet=function(e){return me(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],e)},me.hsv=function(e){return me(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],e)},me.hot=function(e){return me(["#0b0000","#ff0000","#ffff00","#ffffff"],e)},me.pink=function(e){return me(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],e)},me.bone=function(e){return me(["#000000","#4a4a68","#a6c6c6","#ffffff"],e)},me.copper=function(e){return me(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],e)};var Ie={interpolateRGB:he,blend:be,mix:fe,scale:me,contrast:ye,contrastColor:ge,gradient:ve,scaleHSV:Ze,scaleH:xe,scaleS:Ge,scaleV:Xe};function We(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;++n)if(e[n]!==t[n])return!1;return!0}function ke(e,t){for(var n=0,i=0,o=e.length;i<o;i++)n+=Math.pow(t[i]-e[i],2);return Math.sqrt(n)}function Ve(e,t){for(var n=0,i=0,o=e.length;i<o;i++)n+=Math.abs(t[i]-e[i]);return n}function Se(e,t){for(var n=0,i=0,o=e.length;i<o;i++)n=Math.max(n,Math.abs(t[i]-e[i]));return n}var Ce={euclidean:ke,manhattan:Ve,max:Se},Le={linear:function(e,t){var n=[],i=Math.round(Math.random()*e),o=Math.floor(e/t);do{n.push(i),i=(i+o)%e}while(n.length<t);return n},shuffle:function(e,t){for(var n=[];n.length<t;){var i=Math.round(Math.random()*e);-1==n.indexOf(i)&&n.push(i)}return n}};function Re(e,t){return Le[arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear"](e.length,t).map((function(t){return e[t]}))}function Ye(e,t,n){var i=1/0,o=0;return t.forEach((function(t,l){var r=n(e,t);r<i&&(i=r,o=l)})),o}function we(e){if(!e.length)return[];for(var t=new Array(e[0].length),n=0,i=t.length;n<i;n++)t[n]=0;var o=0;for(i=e.length;o<i;o++)for(var l=e[o],r=o+1,a=0,s=l.length;a<s;a++)t[a]+=(l[a]-t[a])/r;return t=t.map((function(e){return Math.floor(e)}))}function Te(e,t,n,i){for(var o=new Array(e),l=0;l<e;l++)o[l]=[];for(var r=0,a=t.length;r<a;r++){var s=t[r];o[Ye(s,n,i)].push(s)}return o}function Ne(e,t,n,i,o,l){for(var r=0;r<e;r++){var a=n[r],s=i[r],c=new Array(s.length);o=!We(c=a.length>0?we(a):t[Math.floor(l()*t.length)],s),i[r]=c}return o}function Ke(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"linear";t=t||Math.max(2,Math.ceil(Math.sqrt(e.length/2)));var l=n||"euclidean";"string"==typeof l&&(l=Ce[l]);for(var r=0,a=function(){return(r=(9301*r+49297)%233280)/233280},s=Re(e,t,o),c=!0,u=0;c&&(c=Ne(t,e,Te(t,e,s,l),s,!1,a),++u%i!=0););return s}function ze(e,t){for(var n=0;n<e;n+=4)t(n)}function He(e,t){ze(e.pixels.length,(function(n){t(e.pixels,n)}))}var Me={create:function(e,t){var n=document.createElement("canvas");return n.width=e||0,n.height=t||0,n},drawPixels:function(e){var t=this.create(e.width,e.height),n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height);return i.data.set(e.pixels),n.putImageData(i,0,0),t},createHistogram:function(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{black:!0,red:!1,green:!1,blue:!1},l=this.create(e,t),r=l.getContext("2d");r.clearRect(0,0,e,t),r.fillStyle="white",r.fillRect(0,0,e,t),r.globalAlpha=.7;var a={black:!1};o.black?a.black=!1:a.black=!0,o.red?a.red=!1:a.red=!0,o.green?a.green=!1:a.green=!0,o.blue?a.blue=!1:a.blue=!0,Object.keys(n).forEach((function(i){if(!a[i]){var o=n[i],l=Math.max.apply(Math,o),s=e/o.length;r.fillStyle=i,o.forEach((function(e,n){var i=t*(e/l),o=n*s;r.fillRect(o,t-i,s,i)}))}})),"function"==typeof i&&i(l)},getHistogram:function(e){for(var t=new Array(256),n=new Array(256),i=new Array(256),o=new Array(256),l=0;l<256;l++)t[l]=0,n[l]=0,i[l]=0,o[l]=0;return He(e,(function(e,l){var r=Math.round(Ae.brightness(e[l],e[l+1],e[l+2]));t[r]++,n[e[l]]++,i[e[l+1]]++,o[e[l+2]]++})),{black:t,red:n,green:i,blue:o}},getBitmap:function(e,t){var n=this.drawPixels(e);return{pixels:n.getContext("2d").getImageData(t.x||0,t.y||0,t.width||n.width,t.height||n.height).data,width:t.width,height:t.height}},putBitmap:function(e,t,n){var i=this.drawPixels(e),o=this.drawPixels(t),l=i.getContext("2d");return l.drawImage(o,n.x,n.y),e.pixels=l.getImageData(0,0,e.width,e.height).data,e}},Je=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,e),this.isLoaded=!1,this.imageUrl=t,this.opt=n,this.initialize()}return G(e,[{key:"initialize",value:function(){this.canvas=this.createCanvas(),this.context=this.canvas.getContext("2d")}},{key:"createCanvas",value:function(){return document.createElement("canvas")}},{key:"load",value:function(e){this.loadImage(e)}},{key:"loadImage",value:function(e){var t=this,n=this.context;this.newImage=new Image;var i=this.newImage;i.onload=function(){var o=i.height/i.width;t.opt.canvasWidth&&t.opt.canvasHeight?(t.canvas.width=t.opt.canvasWidth,t.canvas.height=t.opt.canvasHeight):(t.canvas.width=t.opt.maxWidth?t.opt.maxWidth:i.width,t.canvas.height=t.canvas.width*o),n.drawImage(i,0,0,i.width,i.height,0,0,t.canvas.width,t.canvas.height),t.isLoaded=!0,e&&e()},this.getImageUrl((function(e){i.src=e}))}},{key:"load",value:function(e){var t=this;this.newImage=new Image;var n=this.newImage;n.onload=function(){t.isLoaded=!0,e&&e()},this.getImageUrl((function(e){n.src=e}))}},{key:"getImageUrl",value:function(e){if("string"==typeof this.imageUrl)return e(this.imageUrl);if(this.imageUrl instanceof Blob){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.readAsDataURL(this.imageUrl)}}},{key:"getRGBA",value:function(e,t,n,i){return[e,t,n,i]}},{key:"toArray",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),o=i.width,l=i.height,r={pixels:new Uint8ClampedArray(i.data),width:o,height:l};e||(e=function(){return function(e,t){t(e)}}()),e(r,(function(e){var i=Me.drawPixels(e);"canvas"==n.returnTo?t(i):t(i.toDataURL(n.outputFormat||"image/png"))}),n)}},{key:"toHistogram",value:function(e){var t=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),n=t.width,i=t.height,o={pixels:new Uint8ClampedArray(t.data),width:n,height:i};return Me.getHistogram(o)}},{key:"toRGB",value:function(){for(var e=this.context.getImageData(0,0,this.canvas.width,this.canvas.height).data,t=[],n=0,i=e.length;n<i;n+=4)t[t.length]=[e[n+0],e[n+1],e[n+2],e[n+3]];return t}}]),e}();function je(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return t.length>n&&(t=Ke(t,n)),t.map((function(t){return e(t,i)}))}function Fe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];i?i&&(t=new Je(e,n)).loadImage((function(){"function"==typeof i&&i(t.toRGB())})):(t=new Je(e)).loadImage((function(){"function"==typeof n&&n(t.toRGB())}))}function Ue(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{frameTimer:"full"};Oe(e,t,n,Object.assign({returnTo:"canvas"},i))}function Oe(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{frameTimer:"full"},o=new Je(e);o.loadImage((function(){o.toArray(t,(function(e){"function"==typeof n&&n(e)}),i)}))}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Je(e);i.loadImage((function(){"function"==typeof t&&t(i.toHistogram(n))}))}function $e(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=[],i=0;i<e.length;i++){var o=e[i];if(0!=i)if(i!=e.length-1){var l=e[i-1],r=e[i+1];r[1],l[1],r[0],l[0];var a=[l[0]+(r[0]-l[0])*t,l[1]+(r[1]-l[1])*t],s=[[].concat(L(l)),[].concat(a)],c=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2))/Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)),u=s[0][0]+(s[1][0]-s[0][0])*c,d=s[0][1]+(s[1][1]-s[0][1])*c;s[0][0]+=o[0]-u,s[0][1]+=o[1]-d,s[1][0]+=o[0]-u,s[1][1]+=o[1]-d,n[i]=s}else n[i]=[];else n[i]=[]}return n}function Pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:200,height:100},i=new Je(e);i.loadImage((function(){Me.createHistogram(n.width||200,n.height||100,i.toHistogram(n),(function(e){"function"==typeof t&&t(e.toDataURL("image/png"))}),n)}))}var Be={palette:je,ImageToCanvas:Ue,ImageToHistogram:Pe,ImageToRGB:Fe,ImageToURL:Oe,histogram:Ee,histogramToPoints:$e},Ae=I({},o,p,Ie,J,pe,q,te,ue,Z,ae,Be);function Qe(e){return typeof e>"u"||null===e}function De(e){return!1===Qe(e)}function _e(e){return"string"==typeof e}function qe(e){return"function"==typeof e}function et(e){return"number"==typeof e}var tt=[{rgb:"#ff0000",start:0},{rgb:"#ffff00",start:.17},{rgb:"#00ff00",start:.33},{rgb:"#00ffff",start:.5},{rgb:"#0000ff",start:.67},{rgb:"#ff00ff",start:.83},{rgb:"#ff0000",start:1}];function nt(e){for(var t,n,i=0;i<tt.length;i++)if(tt[i].start>=e){t=tt[i-1],n=tt[i];break}return t&&n?Ae.mix(t.rgb,n.rgb,(e-t.start)/(n.start-t.start)):tt[0].rgb}function it(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments[2],i=Qe(n)?e-t:t,o=Qe(n)?e+scale:n,l=[],r=0;r<tt.length;r++){var a=tt[r];i<=a.start&&a.start<o?l.push({rgb:a.rgb,start:a.start}):tt[r+1]&&a.start<i&&i<tt[r+1].start?l.push({rgb:nt(i),start:i}):tt[r-1]&&tt[r-1].start<o&&o<a.start?l.push({rgb:nt(o),start:o}):a.start<i||a.start>o||l.push({rgb:a.rgb,start:a.start})}return l}function ot(){for(var e=0,t=tt.length;e<t;e++){var n=tt[e],i=Ae.parse(n.rgb);n.r=i.r,n.g=i.g,n.b=i.b}}ot();var lt={colors:tt,checkHueColor:nt,getHueScale:it},rt={identity:function(){return[1,0,0,0,1,0,0,0,1]},stretching:function(e){return[e,0,0,0,1,0,0,0,1]},squeezing:function(e){return[e,0,0,0,1/e,0,0,0,1]},scale:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[e=e||0===e?e:1,0,0,0,t=t||0===t?t:1,0,0,0,1]},scaleX:function(e){return this.scale(e)},scaleY:function(e){return this.scale(1,e)},translate:function(e,t){return[1,0,e,0,1,t,0,0,1]},rotate:function(e){var t=this.radian(e);return[Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1]},rotate90:function(){return[0,-1,0,1,0,0,0,0,1]},rotate180:function(){return[-1,0,0,0,-1,0,0,0,1]},rotate270:function(){return[0,1,0,-1,0,0,0,0,1]},radian:function(e){return e*Math.PI/180},skew:function(e,t){var n=this.radian(e),i=this.radian(t);return[1,Math.tan(n),0,Math.tan(i),1,0,0,0,1]},skewX:function(e){var t=this.radian(e);return[1,Math.tan(t),0,0,1,0,0,0,1]},skewY:function(e){var t=this.radian(e);return[1,0,0,Math.tan(t),1,0,0,0,1]},shear1:function(e){return[1,-Math.tan(this.radian(e)/2),0,0,1,0,0,0,1]},shear2:function(e){return[1,0,0,Math.sin(this.radian(e)),1,0,0,0,1]}},at={CONSTANT:rt,radian:function(e){return rt.radian(e)},multiply:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]},identity:function(e){return this.multiply(rt.identity(),e)},translate:function(e,t,n){return this.multiply(rt.translate(e,t),n)},rotate:function(e,t){return this.multiply(rt.rotate(e),t)},shear1:function(e,t){return this.multiply(rt.shear1(e),t)},shear2:function(e,t){return this.multiply(rt.shear2(e),t)},rotateShear:function(e,t){var n=t;return n=this.shear1(e,n),n=this.shear2(e,n),n=this.shear1(e,n)}};function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=arguments[3],o=wn(n*i*4,n,i);return function(l,r){for(var a=t,s=0;a<i;a++,s++)for(var c=e,u=0;c<n;c++,u++)o.pixels[s*n*u]=l.pixels[a*n*c];r(o)}}function ct(e,t){return function(n,i){var o=Me.drawPixels(n),l=o.getContext("2d");o.width=e,o.height=t,i({pixels:new Uint8ClampedArray(l.getImageData(0,0,e,t).data),width:e,height:t})}}function ut(){return function(e,t){for(var n=e.width,i=e.height,o=i%2==1?Math.floor(i/2):i/2,l=0;l<o;l++)for(var r=0;r<n;r++){var a=l*n+r<<2,s=(i-1-l)*n+r<<2;Pn(e.pixels,a,s)}t(e)}}function dt(){return function(e,t){for(var n=e.width,i=e.height,o=n%2==1?Math.floor(n/2):n/2,l=0;l<i;l++)for(var r=0;r<o;r++){var a=l*n+r<<2,s=l*n+(n-1-r)<<2;Pn(e.pixels,a,s)}t(e)}}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";return function(i,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=wn(i.pixels.length,i.width,i.height),a=i.width,s=i.height;"center"==t&&(t=Math.floor(a/2)),"center"==n&&(n=Math.floor(s/2));var c=at.CONSTANT.translate(-t,-n),u=at.CONSTANT.translate(t,n),d=at.CONSTANT.shear1(e),p=at.CONSTANT.shear2(e);Bn((function(e,t,n,o){var l=at.multiply(c,[n,o,1]);l=at.multiply(d,l).map(Math.round),l=at.multiply(p,l).map(Math.round),l=at.multiply(d,l).map(Math.round),l=at.multiply(u,l);var r=S(l,2),h=r[0],m=r[1];h<0||m<0||h>a-1||m>s-1||_n(e,m*a+h<<2,i.pixels,t)}))(r,(function(){o(r)}),l)}}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=Mn(e),e%=360,function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0==e)return t;if(90==e||270==e)var o=wn(t.pixels.length,t.height,t.width);else{if(180!=e)return pt(e)(t,n,i);o=wn(t.pixels.length,t.width,t.height)}Bn((function(n,i,l,r){if(90==e)var a=l*o.width+(o.width-1-r)<<2;else 270==e?a=(o.height-1-l)*o.width+r<<2:180==e&&(a=(o.height-1-r)*o.width+(o.width-1-l)<<2);_n(o.pixels,a,t.pixels,i)}))(t,(function(){n(o)}),i)}}function mt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gray",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=0;i<t.length-1;i++)for(var o=t[i],l=t[i+1],r=l[0]-o[0],a=(l[1]-o[1])/r,s=0,c=o[0];s<r;s++,c++)n[c]=o[1]+s*a;return n[255]=255,En("red"===e?function(){$r=n[$r]}:"green"===e?function(){$g=n[$g]}:"blue"===e?function(){$b=n[$b]}:function(){var e=Color.RGBtoYCrCb($r,$g,$b),t=Color.YCrCbtoRGB(clamp(n[clamp(e.y)]),e.cr,e.cb,0);$r=t.r,$g=t.g,$b=t.b},{},{$realPoints:n})}var bt={crop:st,resize:ct,flipH:dt,flipV:ut,rotate:ht,rotateDegree:pt,histogram:mt,"rotate-degree":pt};function ft(e,t){return En("        \n        const thresholdColor = ( $r + $g + $b ) <= $threshold ? $darkColor : $lightColor\n\n        $r = thresholdColor.r;\n        $g = thresholdColor.g;\n        $b = thresholdColor.b; \n    ",{$threshold:arguments.length>2&&void 0!==arguments[2]?arguments[2]:100},{$darkColor:Ae.parse(e),$lightColor:Ae.parse(t)})}function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e=Mn(e),En("\n        $r += $C;\n        $g += $C;\n        $b += $C;\n    ",{$C:Math.floor(e/100*255)})}function gt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[.5997023498159715,.34553243048391263,-.2708298674538042,0,-.037703249837783157,.8609577587992641,.15059552388459913,0,.24113635128153335,-.07441037908422492,.44972182064877153,0,0,0,0,1]})}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=Mn(e),En("\n\n        $r = ($r > 255 - $C) ? 255 : 0;\n        $g = ($g > 255 - $C) ? 255 : 0;\n        $b = ($b > 255 - $C) ? 255 : 0;\n\n    ",{$C:2.55*Math.abs(e)})}function Zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e=Mn(e),En("\n        $r *= $C;\n        $g *= $C;\n        $b *= $C;\n    ",{$C:Math.max((128+e)/128,0)})}function xt(){return En("\n        $r = Math.pow($r / 255, $C) * 255;\n        $g = Math.pow($g / 255, $C) * 255;\n        $b = Math.pow($b / 255, $C) * 255;\n    ",{$C:Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)})}function Gt(){var e=[].concat(Array.prototype.slice.call(arguments));1===e.length&&"string"==typeof e[0]&&(e=Ae.convertMatchesArray(e[0]));var t=(e=e.map((function(e){return Ae.matches(e).length?{type:"param",value:e}:{type:"scale",value:e}}))).filter((function(e){return"scale"==e.type}))[0];return t=t?+t.value:256,e=e.filter((function(e){return"param"==e.type})).map((function(e){return e.value})).join(","),En("\n        const colorIndex = clamp(Math.ceil($r * 0.2126 + $g * 0.7152 + $b * 0.0722));\n        const newColorIndex = clamp(Math.floor(colorIndex * ($scale / 256)));\n        const color = $colors[newColorIndex];\n\n        $r = color.r; \n        $g = color.g; \n        $b = color.b; \n        $a = clamp(Math.floor(color.a * 256));\n    ",{},{$colors:Ae.gradient(e,t).map((function(e){var t=Ae.parse(e);return{r:t.r,g:t.g,b:t.b,a:t.a}})),$scale:t})}function Xt(e){var t=(e=Mn(e))/100;return t>1&&(t=1),En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[.2126+.7874*(1-t),.7152-.7152*(1-t),.0722-.0722*(1-t),0,.2126-.2126*(1-t),.7152+.2848*(1-t),.0722-.0722*(1-t),0,.2126-.2126*(1-t),.7152-.7152*(1-t),.0722+.9278*(1-t),0,0,0,0,1]})}function It(){return En("\n        var hsv = Color.RGBtoHSV($r, $g, $b);\n\n        // 0 ~ 360 \n        var h = hsv.h;\n        h += Math.abs($C);\n        h = h % 360;\n        hsv.h = h;\n\n        var rgb = Color.HSVtoRGB(hsv);\n\n        $r = rgb.r;\n        $g = rgb.g;\n        $b = rgb.b;\n    ",{$C:Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:360)})}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return En("\n        $r = (255 - $r) * $C;\n        $g = (255 - $g) * $C;\n        $b = (255 - $b) * $C;\n    ",{$C:(e=Mn(e))/100})}function kt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,0,0,0,1]})}function Vt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,arguments.length>15&&void 0!==arguments[15]?arguments[15]:0]})}function St(){return En("\n        const C = Math.abs($C) * 5;\n        const min = -C;\n        const max = C;\n        const noiseValue = Math.round(min + (Math.random() * (max - min)));\n\n        $r += noiseValue;\n        $g += noiseValue;\n        $b += noiseValue;\n    ",{$C:Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)})}function Ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return En("\n        $a *= $C; \n    ",{$C:(e=Mn(e))/100})}function Lt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1]})}function Rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=(e=Mn(e))/100,n=1-Math.abs(t);return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[n,0,0,0,0,n,0,0,0,0,n,0,0,0,0,n]})}function Yt(){var e=Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);return e>1&&(e=1),En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),0,.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),0,.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e),0,0,0,0,1]})}function wt(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return En("\n        $r *= $redValue;\n        $g *= $greenValue;\n        $b *= $blueValue;\n    ",{$redValue:Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),$greenValue:Mn(e),$blueValue:Mn(t)})}function Tt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;        \n    ",{$matrix:[1.438,-.062,-.062,0,-.122,1.378,-.122,0,-.016,-.016,1.483,0,0,0,0,1]})}function Nt(e,t,n){return En("\n        $r = ($r < $redValue) ? 255 - $r: $r;\n        $g = ($g < $greenValue) ? 255 - $g: $g;\n        $b = ($b < $blueValue) ? 255 - $b: $b;\n    ",{$redValue:Mn(e),$greenValue:Mn(t),$blueValue:Mn(n)})}function Kt(){return En("\n        $r = $matrix[0] * $r + $matrix[1] * $g + $matrix[2] * $b + $matrix[3] * $a;\n        $g = $matrix[4] * $r + $matrix[5] * $g + $matrix[6] * $b + $matrix[7] * $a;\n        $b = $matrix[8] * $r + $matrix[9] * $g + $matrix[10] * $b + $matrix[11] * $a;\n        $a = $matrix[12] * $r + $matrix[13] * $g + $matrix[14] * $b + $matrix[15] * $a;\n    ",{$matrix:[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-.231103377548616,-.7501899197440212,1.847597816108189,0,0,0,0,1]})}function zt(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200);return En("\n        // refer to Color.brightness \n        const v = ($C * Math.ceil($r * 0.2126 + $g * 0.7152 + $b * 0.0722) ) >= $scale ? 255 : 0;\n\n        if ($hasColor) {\n\n            if (v == 0) {\n                $r = 0; \n                $g = 0; \n                $b = 0;\n            }\n            \n        } else {\n            const value = Math.round(v);\n            $r = value; \n            $g = value;\n            $b = value; \n        }\n        \n    ",{$C:(e=Mn(e))/100,$scale:n,$hasColor:t})}function Ht(){return zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,!1)}function Mt(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return En("\n\n        $r += (255 - $r) * $redTint;\n        $g += (255 - $g) * $greenTint;\n        $b += (255 - $b) * $blueTint;\n\n    ",{$redTint:Mn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),$greenTint:Mn(e),$blueTint:Mn(t)})}var Jt={bitonal:ft,brightness:yt,brownie:gt,clip:vt,contrast:Zt,gamma:xt,gradient:Gt,grayscale:Xt,hue:It,invert:Wt,kodachrome:kt,matrix:Vt,noise:St,opacity:Ct,polaroid:Lt,saturation:Rt,sepia:Yt,shade:wt,shift:Tt,solarize:Nt,technicolor:Kt,threshold:Ht,"threshold-color":zt,tint:Mt};function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return ti(Qn(e=Mn(e)))}function Ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return ti([-2*(e=Mn(e)),-e,0,-e,1,e,0,e,2*e])}function Ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([1,2,1,2,4,2,1,2,1],1/16*((e=Mn(e))/100)))}function Ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1],1/256*((e=Mn(e))/100)))}function Et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([.3,.3,.3,0,0,.59,.59,.59,0,0,.11,.11,.11,0,0,0,0,0,0,0,0,0,0,0,0],(e=Mn(e))/100))}function $t(){return ti([0,0,0,0,1,0,0,0,0])}function Pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e=Mn(e),ti([5,5,5,-3,0,-3,-3,-3,-3])}function Bt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e=Mn(e),ti([5,-3,-3,5,0,-3,5,-3,-3])}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([-1,-1,-1,-1,8,-1,-1,-1,-1],(e=Mn(e))/100))}function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],(e=Mn(e))/100))}function Dt(){return ti(In([1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1],1/9))}function _t(){return ti(In([1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1],1/9))}function qt(){return ti(In([1,0,0,0,1,0,0,0,1,0,1,0,0,1,0,0,1,0,0,0,1,0,1,0,1,0,0,0,0,0,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,1,0,1,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0,1,0,0,0,1],1/9))}function en(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([-1,0,0,0,0,0,-1,0,0,0,0,0,-1,0,0,0,0,0,1,0,1,1,1,1,1],(e=Mn(e))/100))}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([.393,.349,.272,0,0,.769,.686,.534,0,0,.189,.168,.131,0,0,0,0,0,0,0,0,0,0,0,0],(e=Mn(e))/100))}function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([0,-1,0,-1,5,-1,0,-1,0],(e=Mn(e))/100))}function on(){return ti([-1,-2,-1,0,0,0,1,2,1])}function ln(){return ti([-1,0,1,-2,0,2,-1,0,1])}var rn=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],an=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function sn(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function cn(e,t,n){return n?un(e,0,0,t):stackBlurCanvasRGB(e,0,0,t)}function un(e,t,n,i){if(isNaN(i)||i<1)return e;i|=0;var o,l,r,a,s,c,u,d,p,h,m,b,f,y,g,v,Z,x,G,X,I=e.pixels,W=e.width,k=e.height,V=i+i+1,S=W-1,C=k-1,L=i+1,R=L*(L+1)/2,Y=new sn,w=Y;for(r=1;r<V;r++)if(w=w.next=new sn,r==L)var T=w;w.next=Y;var N=null,K=null;u=c=0;var z=rn[i],H=an[i];for(l=0;l<k;l++){for(y=g=v=d=p=h=0,m=L*(Z=I[c]),b=L*(x=I[c+1]),f=L*(G=I[c+2]),d+=R*Z,p+=R*x,h+=R*G,w=Y,r=0;r<L;r++)w.r=Z,w.g=x,w.b=G,w=w.next;for(r=1;r<L;r++)a=c+((S<r?S:r)<<2),d+=(w.r=Z=I[a])*(X=L-r),p+=(w.g=x=I[a+1])*X,h+=(w.b=G=I[a+2])*X,y+=Z,g+=x,v+=G,w=w.next;for(N=Y,K=T,o=0;o<W;o++)I[c]=d*z>>H,I[c+1]=p*z>>H,I[c+2]=h*z>>H,d-=m,p-=b,h-=f,m-=N.r,b-=N.g,f-=N.b,a=u+((a=o+i+1)<S?a:S)<<2,d+=y+=N.r=I[a],p+=g+=N.g=I[a+1],h+=v+=N.b=I[a+2],N=N.next,m+=Z=K.r,b+=x=K.g,f+=G=K.b,y-=Z,g-=x,v-=G,K=K.next,c+=4;u+=W}for(o=0;o<W;o++){for(g=v=y=p=h=d=0,m=L*(Z=I[c=o<<2]),b=L*(x=I[c+1]),f=L*(G=I[c+2]),d+=R*Z,p+=R*x,h+=R*G,w=Y,r=0;r<L;r++)w.r=Z,w.g=x,w.b=G,w=w.next;for(s=W,r=1;r<=i;r++)c=s+o<<2,d+=(w.r=Z=I[c])*(X=L-r),p+=(w.g=x=I[c+1])*X,h+=(w.b=G=I[c+2])*X,y+=Z,g+=x,v+=G,w=w.next,r<C&&(s+=W);for(c=o,N=Y,K=T,l=0;l<k;l++)I[a=c<<2]=d*z>>H,I[a+1]=p*z>>H,I[a+2]=h*z>>H,d-=m,p-=b,h-=f,m-=N.r,b-=N.g,f-=N.b,a=o+((a=l+L)<C?a:C)*W<<2,d+=y+=N.r=I[a],p+=g+=N.g=I[a+1],h+=v+=N.b=I[a+2],N=N.next,m+=Z=K.r,b+=x=K.g,f+=G=K.b,y-=Z,g-=x,v-=G,K=K.next,c+=W}return e}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=Mn(e),function(n,i){i(cn(n,e,t))}}function pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return ti(In([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,.3,0,0,0,0,0,1],(e=Mn(e))/100))}function hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;return ti(In([1,4,6,4,1,4,16,24,16,4,6,24,-476,24,6,4,16,24,16,4,1,4,6,4,1],-1/(e=Mn(e))))}var mn={blur:jt,emboss:Ft,gaussianBlur:Ut,"gaussian-blur":Ut,gaussianBlur5x:Ot,"gaussian-blur-5x":Ot,grayscale2:Et,normal:$t,kirschHorizontal:Pt,"kirsch-horizontal":Pt,kirschVertical:Bt,"kirsch-vertical":Bt,laplacian:At,laplacian5x:Qt,"laplacian-5x":Qt,motionBlur:Dt,"motion-blur":Dt,motionBlur2:_t,"motion-blur-2":_t,motionBlur3:qt,"motion-blur-3":qt,negative:en,sepia2:tn,sharpen:nn,sobelHorizontal:on,"sobel-horizontal":on,sobelVertical:ln,"sobel-vertical":ln,stackBlur:dn,"stack-blur":dn,transparency:pn,unsharpMasking:hn,"unsharp-masking":hn};function bn(){return li("kirsch-horizontal kirsch-vertical")}function fn(){return li("sobel-horizontal sobel-vertical")}function yn(){return li("brightness(15) saturation(-20) gamma(1.8)")}var gn,vn={kirsch:bn,sobel:fn,vintage:yn},Zn=I({},bt,Jt,mn,vn),xn=0,Gn=(X(gn={partial:ci,multi:ai,merge:si,weight:In,repeat:Wn,colorMatrix:kn,each:Cn,eachXY:Ln,createRandomCount:Yn,createRandRange:Rn,createBitmap:wn,createBlurMatrix:Qn,pack:jn,packXY:Bn,pixel:En,getBitmap:zn,putBitmap:Hn,radian:An,convolution:ti,parseParamNumber:Mn,filter:li,clamp:oi,fillColor:Dn,fillPixelColor:_n},"multi",ai),X(gn,"merge",si),X(gn,"matches",ni),X(gn,"parseFilter",ii),X(gn,"partial",ci),gn),Xn=Gn;function In(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){return e*t}))}function Wn(e,t){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n}function kn(e,t,n){var i=e[t],o=e[t+1],l=e[t+2],r=e[t+3];Dn(e,t,n[0]*i+n[1]*o+n[2]*l+n[3]*r,n[4]*i+n[5]*o+n[6]*l+n[7]*r,n[8]*i+n[9]*o+n[10]*l+n[11]*r,n[12]*i+n[13]*o+n[14]*l+n[15]*r)}function Vn(e){if("function"==typeof e)return e;"string"==typeof e&&(e=[e]);var t=(e=e.slice(0)).shift();if("function"==typeof t)return t;var n=e,i=Zn[t]||Xn[t];if(!i)throw new Error(t+" is not filter. please check filter name.");return i.apply(i,n)}function Sn(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments[3],i=arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e4,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"full",r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=function(e){setTimeout(e,0)};function c(){var e=[].concat(L(Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:50))).map((function(e){return"cri = ri + i * s; if (cri >= mx) return {currentRunIndex: cri, i: null}; c(cri); i++;"})).join("\n");return new Function("ri","i","s","mx","c","\n            let cri = ri;\n            \n            "+e+"\n            \n            return {currentRunIndex: cri, i: i} \n        ")}function u(){for(var i=c(r),l=a,s={},u=0;u<o;){if(null==(s=i(a,u,t,e,n)).i){l=s.currentRunIndex;break}u=s.i,l=s.currentRunIndex}d(l)}function d(n){n?a=n:a+=t,a>=e?i():s?s(u):u()}"requestAnimationFrame"==l&&(s=requestAnimationFrame,o=1e3),"full"==l&&(s=null,o=e),u()}function Cn(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Sn(e,0,4,(function(e){t(e,e>>2)}),(function(){n()}),i.functionDumpCount,i.frameTimer,i.loopCount)}function Ln(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};Sn(e,0,4,(function(e){var i=e>>2;n(e,i%t,Math.floor(i/t))}),(function(){i()}),o.functionDumpCount,o.frameTimer,o.loopCount)}function Rn(e,t,n){for(var i=[],o=1;o<=n;o++){var l=Math.random()*(t-e)+e,r=Math.floor(10*Math.random())%2==0?-1:1;i.push(r*l)}i.sort();var a=Math.floor(n>>1),s=i[a];return i[a]=i[0],i[0]=s,i}function Yn(){return[9,16,25,36,49,64,81,100].sort((function(e,t){return.5-Math.random()}))[0]}function wn(e,t,n){return{pixels:new Uint8ClampedArray(e),width:t,height:n}}function Tn(e,t,n,i){for(var o=t.pixels.length/4,l=0,r=0,a=0,s=0,c=0,u=0,d=0;d<o;d++)a=d%t.width,r=i+(s=Math.floor(d/t.width)),!((l=n+a)>e.width)&&(r>e.height||(c=s*t.width+a<<2,u=r*e.width+l<<2,e.pixels[u]=t.pixels[c],e.pixels[u+1]=t.pixels[c+1],e.pixels[u+2]=t.pixels[c+2],e.pixels[u+3]=t.pixels[c+3]))}function Nn(e,t,n,i){for(var o=t.pixels.length>>2,l=0,r=0,a=0,s=0,c=0,u=0,d=0;d<o;d++)a=d%t.width,r=i+(s=Math.floor(d/t.width)),!((l=n+a)>e.width)&&(r>e.height||(c=r*e.width+l<<2,u=s*t.width+a<<2,t.pixels[u]=e.pixels[c],t.pixels[u+1]=e.pixels[c+1],t.pixels[u+2]=e.pixels[c+2],t.pixels[u+3]=e.pixels[c+3]))}function Kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width+t,i=e.height+t;return{pixels:new Uint8ClampedArray(n*i*4),width:n,height:i}}function zn(e,t){return Me.getBitmap(e,t)}function Hn(e,t,n){return Me.putBitmap(e,t,n)}function Mn(e){return"string"==typeof e&&(e=(e=e.replace(/deg/,"")).replace(/px/,"")),+e}var Jn=/(([\w_\-]+)(\(([^\)]*)\))?)+/gi;function jn(e){return function(t,n){Cn(t.pixels.length,(function(n,i){e(t.pixels,n,i,t.pixels[n],t.pixels[n+1],t.pixels[n+2],t.pixels[n+3])}),(function(){n(t)}))}}function Fn(e){var t=e.map((function(e){return" \n            "+e.userFunction.$preContext+"\n\n            "+e.userFunction.$preCallbackString+"\n\n            $r = clamp($r); $g = clamp($g); $b = clamp($b); $a = clamp($a);\n        "})).join("\n\n"),n={clamp:oi,Color:Ae};e.forEach((function(e){Object.assign(n,e.userFunction.rootContextObject)}));var i="const "+Object.keys(n).map((function(e){return" "+e+" = $rc."+e+" "})).join(","),o=new Function("$p","$pi","$rc"," \n    let $r = $p[$pi], $g = $p[$pi+1], $b = $p[$pi+2], $a = $p[$pi+3];\n    \n    "+i+"\n\n    "+t+"\n    \n    $p[$pi] = $r; $p[$pi+1] = $g; $p[$pi+2] = $b; $p[$pi+3] = $a;\n    ");return function(e,t){o(e,t,n)}}function Un(e){var t={},n=e.map((function(e){var n=[];Object.keys(e.context).forEach((function(e,t){n[e]="n$"+xn+++e+"$"})),Object.keys(e.rootContext).forEach((function(i,o){n[i]="r$"+xn+++i+"$",t[n[i]]=e.rootContext[i]}));var i=Object.keys(e.context).filter((function(t){return"number"!=typeof e.context[t]&&"string"!=typeof e.context[t]&&!(Array.isArray(e.context[t])&&("number"==typeof e.context[t][0]||"string"==typeof e.context[t][0]))})).map((function(t,i){return[n[t],JSON.stringify(e.context[t])].join(" = ")})),o=e.callback;return"function"==typeof e.callback&&((o=e.callback.toString().split("{")).shift(),(o=(o=o.join("{")).split("}")).pop(),o=o.join("}")),Object.keys(n).forEach((function(t){var i=n[t];"number"==typeof e.context[t]||"string"==typeof e.context[t]?o=o.replace(new RegExp("\\"+t,"g"),e.context[t]):!Array.isArray(e.context[t])||"number"!=typeof e.context[t][0]&&"string"!=typeof e.context[t][0]?o=o.replace(new RegExp("\\"+t,"g"),i):e.context[t].forEach((function(e,n){o=o.replace(new RegExp("\\"+t+"\\["+n+"\\]","g"),e)}))})),{preCallbackString:o,preContext:i}})),i=n.map((function(e,t){return e.preContext.length?"const "+e.preContext+";":""})).join("\n\n"),o=n.map((function(e){return e.preCallbackString})).join("\n\n"),l=new Function("$pixels","$pixelIndex","$clamp","$Color"," \n    let $r = $pixels[$pixelIndex], $g = $pixels[$pixelIndex+1], $b = $pixels[$pixelIndex+2], $a = $pixels[$pixelIndex+3];\n\n    "+i+"\n\n    "+o+"\n    \n    $pixels[$pixelIndex] = $r\n    $pixels[$pixelIndex+1] = $g \n    $pixels[$pixelIndex+2] = $b   \n    $pixels[$pixelIndex+3] = $a   \n    ");return l.$preCallbackString=o,l.$preContext=i,l.rootContextObject=t,l}function On(e){return Un([{callback:e,context:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},rootContext:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}])}function En(e){var t=On(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=function(e,t){};return n.userFunction=t,n}var $n=[0,1,2,3];function Pn(e,t,n){$n.forEach((function(i){var o=e[t+i];e[t+i]=e[n+i],e[n+i]=o}))}function Bn(e){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ln(t.pixels.length,t.width,(function(n,i,o){e(t.pixels,n,i,o)}),(function(){n(t)}),i)}}function An(e){return at.CONSTANT.radian(e)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=Math.pow(e,2);return Wn(1/t,t)}function Dn(e,t,n,i,o,l){if(3==arguments.length){var r=arguments[2];n=r.r,i=r.g,o=r.b,l=r.a}"number"==typeof n&&(e[t]=n),"number"==typeof i&&(e[t+1]=i),"number"==typeof o&&(e[t+2]=o),"number"==typeof l&&(e[t+3]=l)}function _n(e,t,n,i){Dn(e,t,n[i],n[i+1],n[i+2],n[i+3])}function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,i=[];return i=e.map((function(e,t){return[]})),e.forEach((function(e,o){if(0!=e){var l=i[o];for(o=t;o<=n;o++)l[o]=e*o}})),i}function ei(e,t,n,i,o){var l=Math.round(Math.sqrt(e.length)),r=Math.floor(l/2),a=o?1:0,s="let r = 0, g = 0, b = 0, a = 0, scy = 0, scx =0, si = 0; ",c=[],u=[],d=[],p=[];e.forEach((function(e,t){var i=Math.floor(t/l)-r,o=t%l-r;0!=e&&(c.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4]]"),u.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4 + 1]]"),d.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4 + 2]]"),p.push("$t["+t+"][$sp[(($sy + ("+i+")) * "+n+" + ($sx + ("+o+"))) * 4 + 3]]"))})),s+="r = "+c.join(" + ")+"; g = "+u.join(" + ")+"; b = "+d.join(" + ")+"; a = "+p.join(" + ")+";",s+="$dp[$di] = r; $dp[$di+1] = g;$dp[$di+2] = b;$dp[$di+3] = a + ("+a+")*(255-a); ";var h=new Function("$dp","$sp","$di","$sx","$sy","$t",s);return function(e,n,i,o,l){h(e,n,i,o,l,t)}}function ti(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=qn(e);return function(i,o){var l=Math.round(Math.sqrt(e.length)),r=Kn(i,2*l);Tn(r,i,l,l);for(var a=wn(r.pixels.length,r.width,r.height),s=wn(i.pixels.length,i.width,i.height),c=ei(e,n,r.width,r.height,t),u=i.pixels.length/4,d=0;d<u;d++){var p=d,h=p%i.width+l,m=Math.floor(p/i.width)+l;c(a.pixels,r.pixels,4*(m*r.width+h),h,m)}Nn(a,s,l,l),o(s)}}function ni(e){var t=Ae.convertMatches(e),n=t.str.match(Jn),i=[];if(!n)return i;i=n.map((function(e){return{filter:e,origin:Ae.reverseMatches(e,t.matches)}}));var o={next:0};return i=i.map((function(t){var n=e.indexOf(t.origin,o.next);return t.startIndex=n,t.endIndex=n+t.origin.length,t.arr=ii(t.origin),o.next=t.endIndex,t})).filter((function(e){return!!e.arr.length}))}function ii(e){var t=Ae.convertMatches(e),n=t.str.match(Jn);if(!n[0])return[];var i=n[0].split("("),o=i.shift(),l=[];return i.length&&(l=i.shift().split(")")[0].split(",").map((function(e){return Ae.reverseMatches(e,t.matches)}))),[o].concat(L(l)).map(Ae.trim)}function oi(e){return Math.min(255,e)}function li(e){return si(ni(e).map((function(e){return e.arr})))}function ri(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[],i=0,o=e.length;i<o;i++){var l=e[i];l.userFunction?n.push(l):(n.length&&t.push([].concat(L(n))),t.push(l),n=[])}return n.length&&t.push([].concat(L(n))),t.forEach((function(e,n){var i;Array.isArray(e)&&(t[n]=(i=Fn(e),function(e,t){for(var n=0,o=e.pixels.length;n<o;n+=4)i(e.pixels,n);t(e)}))})),t}function ai(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(t=ri(t=t.map((function(e){return Vn(e)})).filter((function(e){return e})))).length;return function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=e,r=0;function a(){t[r].call(null,l,(function(e){l=e,s()}),o)}function s(){++r>=i?n(l):a()}a()}}function si(e){return ai.apply(void 0,L(e))}function ci(e){for(var t=null,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t=1==i.length&&"string"==typeof i[0]?li(i[0]):si(i),function(n,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t(zn(n,e),(function(t){i(Hn(n,t,e))}),o)}}var ui=I({},Zn,Gn),di={Color:Ae,HueColor:lt,ColorNames:f,ImageFilter:ui,Canvas:Me,ImageLoader:Je};Ae.color;var pi=0,hi=[],mi=function(){function e(t,n,i){if(x(this,e),"string"!=typeof t)this.el=t;else{var o=document.createElement(t);for(var l in this.uniqId=pi++,n&&(o.className=n),i=i||{})o.setAttribute(l,i[l]);this.el=o}}return G(e,[{key:"attr",value:function(e,t){return 1==arguments.length?this.el.getAttribute(e):(this.el.setAttribute(e,t),this)}},{key:"closest",value:function(t){for(var n=this,i=!1;!(i=n.hasClass(t));){if(!n.el.parentNode)return null;n=new e(n.el.parentNode)}return i?n:null}},{key:"checked",value:function(){return this.el.checked}},{key:"removeClass",value:function(e){return this.el.className=(" "+this.el.className+" ").replace(" "+e+" "," ").trim(),this}},{key:"hasClass",value:function(e){return!!this.el.className&&(" "+this.el.className+" ").indexOf(" "+e+" ")>-1}},{key:"addClass",value:function(e){return this.hasClass(e)||(this.el.className=this.el.className+" "+e),this}},{key:"toggleClass",value:function(e){this.hasClass(e)?this.removeClass(e):this.addClass(e)}},{key:"html",value:function(e){try{"string"==typeof e?this.el.innerHTML=e:this.empty().append(e)}catch{console.log(e)}return this}},{key:"find",value:function(e){return this.el.querySelector(e)}},{key:"$",value:function(t){return new e(this.find(t))}},{key:"findAll",value:function(e){return this.el.querySelectorAll(e)}},{key:"$$",value:function(t){return[].concat(L(this.findAll(t))).map((function(t){return new e(t)}))}},{key:"empty",value:function(){return this.html("")}},{key:"append",value:function(e){return"string"==typeof e?this.el.appendChild(document.createTextNode(e)):this.el.appendChild(e.el||e),this}},{key:"appendTo",value:function(e){return(e.el?e.el:e).appendChild(this.el),this}},{key:"remove",value:function(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this}},{key:"text",value:function(){return this.el.textContent}},{key:"css",value:function(e,t){var n=this;if(2==arguments.length)this.el.style[e]=t;else if(1==arguments.length){if("string"==typeof e)return getComputedStyle(this.el)[e];var i=e||{};Object.keys(i).forEach((function(e){n.el.style[e]=i[e]}))}return this}},{key:"cssFloat",value:function(e){return parseFloat(this.css(e))}},{key:"cssInt",value:function(e){return parseInt(this.css(e))}},{key:"px",value:function(e,t){return this.css(e,t+"px")}},{key:"offset",value:function(){var t=this.el.getBoundingClientRect();return{top:t.top+e.getScrollTop(),left:t.left+e.getScrollLeft()}}},{key:"rect",value:function(){return this.el.getBoundingClientRect()}},{key:"position",value:function(){return this.el.style.top?{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}:this.el.getBoundingClientRect()}},{key:"size",value:function(){return[this.width(),this.height()]}},{key:"width",value:function(){return this.el.offsetWidth||this.el.getBoundingClientRect().width}},{key:"contentWidth",value:function(){return this.width()-this.cssFloat("padding-left")-this.cssFloat("padding-right")}},{key:"height",value:function(){return this.el.offsetHeight||this.el.getBoundingClientRect().height}},{key:"contentHeight",value:function(){return this.height()-this.cssFloat("padding-top")-this.cssFloat("padding-bottom")}},{key:"dataKey",value:function(e){return this.uniqId+"."+e}},{key:"data",value:function(e,t){if(2!=arguments.length){if(1==arguments.length)return hi[this.dataKey(e)];var n=Object.keys(hi),i=this.uniqId+".";return n.filter((function(e){return 0==e.indexOf(i)})).map((function(e){return hi[e]}))}return hi[this.dataKey(e)]=t,this}},{key:"val",value:function(e){return 0==arguments.length?this.el.value:(1==arguments.length&&(this.el.value=e),this)}},{key:"int",value:function(){return parseInt(this.val(),10)}},{key:"float",value:function(){return parseFloat(this.val())}},{key:"show",value:function(){return this.css("display","block")}},{key:"hide",value:function(){return this.css("display","none")}},{key:"toggle",value:function(){return"none"==this.css("display")?this.show():this.hide()}},{key:"scrollTop",value:function(){return this.el===document.body?e.getScrollTop():this.el.scrollTop}},{key:"scrollLeft",value:function(){return this.el===document.body?e.getScrollLeft():this.el.scrollLeft}},{key:"on",value:function(e,t,n,i){return this.el.addEventListener(e,t,n,i),this}},{key:"off",value:function(e,t){return this.el.removeEventListener(e,t),this}},{key:"getElement",value:function(){return this.el}},{key:"createChild",value:function(t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return i.css(n),this.append(i),i}},{key:"firstChild",value:function(){return new e(this.el.firstElementChild)}},{key:"replace",value:function(e,t){return this.el.replaceChild(t,e),this}}],[{key:"getScrollTop",value:function(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}},{key:"getScrollLeft",value:function(){return Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft)}}]),e}(),bi=function(){function e(t){x(this,e),this.$store=t,this.initialize()}return G(e,[{key:"initialize",value:function(){var e=this;this.filterProps().forEach((function(t){e.$store.action(t,e)}))}},{key:"filterProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return Object.getOwnPropertyNames(this.__proto__).filter((function(t){return t.startsWith(e)}))}}]),e}(),fi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.$store.colorSetsList=[{name:"Material",colors:["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"],edit:!0},{name:"Custom",edit:!0,colors:[]},{name:"Color Scale",scale:["red","yellow","black"],count:5}],this.$store.currentColorSets={}}},{key:"/list",value:function(e){return Array.isArray(e.userList)&&e.userList.length?e.userList:e.colorSetsList}},{key:"/setUserPalette",value:function(e,t){e.userList=t,e.dispatch("/resetUserPalette"),e.dispatch("/setCurrentColorSets")}},{key:"/resetUserPalette",value:function(e){e.userList&&e.userList.length&&(e.userList=e.userList.map((function(t,n){if("function"==typeof t.colors){var i=t.colors;t.colors=i(e),t._colors=i}return Object.assign({name:"color-"+n,colors:[]},t)})),e.emit("changeUserList"))}},{key:"/setCurrentColorSets",value:function(e,t){var n=e.dispatch("/list");e.currentColorSets=typeof t>"u"?n[0]:"number"==typeof t?n[t]:n.filter((function(e){return e.name==t}))[0],e.emit("changeCurrentColorSets")}},{key:"/getCurrentColorSets",value:function(e){return e.currentColorSets}},{key:"/addCurrentColor",value:function(e,t){Array.isArray(e.currentColorSets.colors)&&(e.currentColorSets.colors.push(t),e.emit("changeCurrentColorSets"),e.emit("addCurrentColor",t))}},{key:"/setCurrentColorAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.currentColorSets.colors=t,e.emit("changeCurrentColorSets")}},{key:"/removeCurrentColor",value:function(e,t){e.currentColorSets.colors[t]&&(e.currentColorSets.colors.splice(t,1),e.emit("changeCurrentColorSets"))}},{key:"/removeCurrentColorToTheRight",value:function(e,t){e.currentColorSets.colors[t]&&(e.currentColorSets.colors.splice(t,Number.MAX_VALUE),e.emit("changeCurrentColorSets"))}},{key:"/clearPalette",value:function(e){e.currentColorSets.colors&&(e.currentColorSets.colors=[],e.emit("changeCurrentColorSets"))}},{key:"/getCurrentColors",value:function(e){return e.dispatch("/getColors",e.currentColorSets)}},{key:"/getColors",value:function(e,t){return t.scale?Ae.scale(t.scale,t.count):t.colors||[]}},{key:"/getColorSetsList",value:function(e){return e.dispatch("/list").map((function(t){return{name:t.name,edit:t.edit,colors:e.dispatch("/getColors",t)}}))}}]),t}(bi),yi={addEvent:function(e,t,n,i){e&&e.addEventListener(t,n,i)},removeEvent:function(e,t,n){e&&e.removeEventListener(t,n)},pos:function(e){return e.touches&&e.touches[0]?e.touches[0]:e},posXY:function(e){var t=this.pos(e);return{x:t.pageX,y:t.pageY}}},gi=".",vi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,e),this.masterObj=t,this.settingObj=n}return G(e,[{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.settingObj[e]=t||n}},{key:"init",value:function(e){if(!this.has(e)||!this.settingObj[e]){var t=e.split(gi),n=this.masterObj.refs[t[0]]||this.masterObj[t[0]]||this.masterObj,i=t.pop();if(n[i]){for(var o=arguments.length,l=Array(o>1?o-1:0),r=1;r<o;r++)l[r-1]=arguments[r];var a=n[i].apply(n,l);this.set(e,a)}}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.init(e,t),this.settingObj[e]||t}},{key:"has",value:function(e){return!!this.settingObj[e]}}]),e}(),Zi=/^(click|mouse(down|up|move|enter|leave)|touch(start|move|end)|key(down|up|press)|contextmenu|change|input)/gi,xi=/^load (.*)/gi,Gi=" ",Xi=["Control","Shift","Alt","Meta"],Ii=function(){function e(){x(this,e),this.state=new vi(this),this.refs={},this.childComponents=this.components()}return G(e,[{key:"newChildComponents",value:function(){var e=this;Object.keys(this.childComponents).forEach((function(t){var n=e.childComponents[t];e[t]=new n(e)}))}},{key:"render",value:function(){this.$el=this.parseTemplate(this.template()),this.refs.$el=this.$el,this.parseTarget(),this.load(),this.afterRender()}},{key:"afterRender",value:function(){}},{key:"components",value:function(){return{}}},{key:"parseTemplate",value:function(e){var t=this,n=new mi("div").html(e).firstChild(),i=n.findAll("[ref]");return[].concat(L(i)).forEach((function(e){var n=e.getAttribute("ref");t.refs[n]=new mi(e)})),n}},{key:"parseTarget",value:function(){var e=this,t=this.$el.findAll("[target]");[].concat(L(t)).forEach((function(t){var n=t.getAttribute("target"),i=t.getAttribute("ref")||n,o=new(0,e.childComponents[n])(e);e[i]=o,e.refs[i]=o.$el,o&&(o.render(),new mi(t.parentNode).replace(t,o.$el.el))}))}},{key:"load",value:function(){var e=this;this.filterProps(xi).forEach((function(t){var n=t.split("load ")[1];e.refs[n]&&e.refs[n].html(e.parseTemplate(e[t].call(e)))}))}},{key:"template",value:function(){return"<div></div>"}},{key:"initialize",value:function(){}},{key:"initializeEvent",value:function(){var e=this;this.initializeEventMachin(),Object.keys(this.childComponents).forEach((function(t){e[t]&&e[t].initializeEvent()}))}},{key:"destroy",value:function(){var e=this;this.destroyEventMachin(),Object.keys(this.childComponents).forEach((function(t){e[t]&&e[t].destroy()}))}},{key:"destroyEventMachin",value:function(){this.removeEventAll()}},{key:"initializeEventMachin",value:function(){this.filterProps(Zi).forEach(this.parseEvent.bind(this))}},{key:"collectProps",value:function(){if(!this.collapsedProps){var e=this.__proto__,t=[];do{t.push.apply(t,L(Object.getOwnPropertyNames(e))),e=e.__proto__}while(e);this.collapsedProps=t}return this.collapsedProps}},{key:"filterProps",value:function(e){return this.collectProps().filter((function(t){return t.match(e)}))}},{key:"parseEvent",value:function(e){var t=e.split(Gi);this.bindingEvent(t,this[e].bind(this))}},{key:"getDefaultDomElement",value:function(e){var t=void 0;return(t=e?this.refs[e]||this[e]||window[e]:this.el||this.$el||this.$root)instanceof mi?t.getElement():t}},{key:"getDefaultEventObject",value:function(e){var t=this,n=e.split("."),i=n.shift(),o=n.includes("Control"),l=n.includes("Shift"),r=n.includes("Alt"),a=n.includes("Meta");n=n.filter((function(e){return!1===Xi.includes(e)}));var s=n.filter((function(e){return!!t[e]}));return n=n.filter((function(e){return!1===s.includes(e)})).map((function(e){return e.toLowerCase()})),{eventName:i,isControl:o,isShift:l,isAlt:r,isMeta:a,codes:n,checkMethodList:s}}},{key:"bindingEvent",value:function(e,t){var n=C(e),i=n[0],o=n[1],l=n.slice(2);o=this.getDefaultDomElement(o);var r=this.getDefaultEventObject(i);r.dom=o,r.delegate=l.join(Gi),this.addEvent(r,t)}},{key:"matchPath",value:function(e,t){return e?e.matches(t)?e:this.matchPath(e.parentElement,t):null}},{key:"getBindings",value:function(){return this._bindings||this.initBindings(),this._bindings}},{key:"addBinding",value:function(e){this.getBindings().push(e)}},{key:"initBindings",value:function(){this._bindings=[]}},{key:"checkEventType",value:function(e,t){var n=this,i=!t.isControl||e.ctrlKey,o=!t.isShift||e.shiftKey,l=!t.isAlt||e.altKey,r=!t.isMeta||e.metaKey,a=!0;t.codes.length&&(a=t.codes.includes(e.code.toLowerCase())||t.codes.includes(e.key.toLowerCase()));var s=!0;return t.checkMethodList.length&&(s=t.checkMethodList.every((function(t){return n[t].call(n,e)}))),i&&l&&o&&r&&a&&s}},{key:"makeCallback",value:function(e,t){var n=this;return e.delegate?function(i){if(i.xy=yi.posXY(i),n.checkEventType(i,e)){var o=n.matchPath(i.target||i.srcElement,e.delegate);if(o)return i.delegateTarget=o,i.$delegateTarget=new mi(o),t(i)}}:function(i){if(i.xy=yi.posXY(i),n.checkEventType(i,e))return t(i)}}},{key:"addEvent",value:function(e,t){e.callback=this.makeCallback(e,t),this.addBinding(e);var n=!0;"touchstart"===e.eventName&&(n={passive:!0}),yi.addEvent(e.dom,e.eventName,e.callback,n)}},{key:"removeEventAll",value:function(){var e=this;this.getBindings().forEach((function(t){e.removeEvent(t)})),this.initBindings()}},{key:"removeEvent",value:function(e){var t=e.eventName,n=e.dom,i=e.callback;yi.removeEvent(n,t,i)}}]),e}(),Wi=/^@/,ki=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.opt=e||{},e&&e.$store&&(n.$store=e.$store),n.initialize(),n.initializeStoreEvent(),n}return k(t,e),G(t,[{key:"initializeStoreEvent",value:function(){var e=this;this.storeEvents={},this.filterProps(Wi).forEach((function(t){var n=t.split("@");n.shift();var i=n.join("@");e.storeEvents[i]=e[t].bind(e),e.$store.on(i,e.storeEvents[i])}))}},{key:"destoryStoreEvent",value:function(){var e=this;Object.keys(this.storeEvents).forEach((function(t){e.$store.off(t,e.storeEvents[t])}))}}]),t}(Ii);function Vi(e){return typeof e>"u"||null==e}var Si=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.$store.rgb={},this.$store.hsl={},this.$store.hsv={},this.$store.alpha=1,this.$store.format="hex"}},{key:"/changeFormat",value:function(e,t){e.format=t,e.emit("changeFormat")}},{key:"/initColor",value:function(e,t,n){e.dispatch("/changeColor",t,n,!0),e.emit("initColor")}},{key:"/changeColor",value:function(e,t,n,i){"string"==typeof(t=t||"#FF0000")&&(t=Ae.parse(t)),t.source=t.source||n,e.alpha=Vi(t.a)?e.alpha:t.a,e.format="hsv"!=t.type&&t.type||e.format,"hsl"==t.type?(e.hsl=Object.assign(e.hsl,t),e.rgb=Ae.HSLtoRGB(e.hsl),e.hsv=Ae.HSLtoHSV(t)):"hex"==t.type||"rgb"==t.type?(e.rgb=Object.assign(e.rgb,t),e.hsl=Ae.RGBtoHSL(e.rgb),e.hsv=Ae.RGBtoHSV(t)):"hsv"==t.type&&(e.hsv=Object.assign(e.hsv,t),e.rgb=Ae.HSVtoRGB(e.hsv),e.hsl=Ae.HSVtoHSL(e.hsv)),i||e.emit("changeColor",t.source)}},{key:"/getHueColor",value:function(e){return lt.checkHueColor(e.hsv.h/360)}},{key:"/toString",value:function(e,t){var n=e[t=t||e.format]||e.rgb;return Ae.format(I({},n,{a:e.alpha}),t)}},{key:"/toColor",value:function(e,t){return"rgb"==(t=t||e.format)?e.dispatch("/toRGB"):"hsl"==t?e.dispatch("/toHSL"):"hex"==t?e.dispatch("/toHEX"):e.dispatch("/toString",t)}},{key:"/toRGB",value:function(e){return e.dispatch("/toString","rgb")}},{key:"/toHSL",value:function(e){return e.dispatch("/toString","hsl")}},{key:"/toHEX",value:function(e){return e.dispatch("/toString","hex").toUpperCase()}}]),t}(bi),Ci=function(){function e(t){x(this,e),this.callbacks=[],this.actions=[],this.modules=t.modules||[],this.initialize()}return G(e,[{key:"initialize",value:function(){this.initializeModule()}},{key:"initializeModule",value:function(){var e=this;this.modules.forEach((function(t){new t(e)}))}},{key:"action",value:function(e,t){this.actions[e]={context:t,callback:t[e]}}},{key:"dispatch",value:function(e){var t=[].concat(Array.prototype.slice.call(arguments)),n=(e=t.shift(),this.actions[e]);if(n)return n.callback.apply(n.context,[this].concat(L(t)))}},{key:"module",value:function(e){}},{key:"on",value:function(e,t){this.callbacks.push({event:e,callback:t})}},{key:"off",value:function(e,t){0==arguments.length?this.callbacks=[]:1==arguments.length?this.callbacks=this.callbacks.filter((function(t){return t.event!=e})):2==arguments.length&&(this.callbacks=this.callbacks.filter((function(n){return n.event!=e&&n.callback!=t})))}},{key:"emit",value:function(){var e=[].concat(Array.prototype.slice.call(arguments)),t=e.shift();this.callbacks.filter((function(e){return e.event==t})).forEach((function(t){t&&"function"==typeof t.callback&&t.callback.apply(t,L(e))}))}}]),e}(),Li=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isColorPickerShow=!1,n.isShortCut=!1,n.hideDelay=+(typeof n.opt.hideDeplay>"u"?2e3:n.opt.hideDelay),n.timerCloseColorPicker,n.autoHide=n.opt.autoHide||!0,n.outputFormat=n.opt.outputFormat,n.$checkColorPickerClass=n.checkColorPickerClass.bind(n),n}return k(t,e),G(t,[{key:"initialize",value:function(){var e=this;this.$body=null,this.$root=null,this.$store=new Ci({modules:[Si,fi]}),this.callbackChange=function(){e.callbackColorValue()},this.callbackLastUpdate=function(){e.callbackLastUpdateColorValue()},this.callbackAddCurrentColor=function(t){e.callbackAddCurrentColorValue(t)},this.colorpickerShowCallback=function(){},this.colorpickerHideCallback=function(){},this.colorpickerLastUpdateCallback=function(){},this.colorpickerAddCurrentColorCallback=function(){},this.$body=new mi(this.getContainer()),this.$root=new mi("div","easylogic-colorpicker",{tabIndex:-1}),"inline"==this.opt.position&&this.$body.append(this.$root),this.opt.type&&this.$root.addClass(this.opt.type),this.opt.hideInformation&&this.$root.addClass("hide-information"),this.opt.hideColorsets&&this.$root.addClass("hide-colorsets"),this.$arrow=new mi("div","arrow"),this.$root.append(this.$arrow),this.opt.colorSets?this.$store.dispatch("/setUserPalette",this.opt.colorSet):qe(this.opt.onRetrievePreset)?this.$store.dispatch("/setUserPalette",this.opt.onRetrievePreset()):this.$store.dispatch("/setUserPalette",[]),this.render(),this.$root.append(this.$el),this.initColorWithoutChangeEvent(this.opt.color),this.initializeEvent()}},{key:"initColorWithoutChangeEvent",value:function(e){this.$store.dispatch("/initColor",e)}},{key:"show",value:function(e,t,n,i,o,l){this.colorpickerShowCallback=n,this.colorpickerHideCallback=i,this.colorpickerLastUpdateCallback=o,this.colorpickerAddCurrentColorCallback=l,this.$root.css(this.getInitalizePosition()).show(),this.isColorPickerShow=!0,this.isShortCut=e.isShortCut||!1,this.outputFormat=e.outputFormat,this.hideDelay=+(typeof e.hideDelay>"u"?2e3:e.hideDelay),this.hideDelay>0&&this.setHideDelay(this.hideDelay),this.$root.appendTo(this.$body),this.definePosition(e),this.initColorWithoutChangeEvent(t)}},{key:"initColor",value:function(e,t){this.$store.dispatch("/changeColor",e,t)}},{key:"hide",value:function(){this.isColorPickerShow&&(this.$root.hide(),this.$root.remove(),this.isColorPickerShow=!1,this.callbackHideColorValue())}},{key:"setColorsInPalette",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.dispatch("/setCurrentColorAll",e)}},{key:"setUserPalette",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$store.dispatch("/setUserPalette",e)}},{key:"getOption",value:function(e){return this.opt[e]}},{key:"setOption",value:function(e,t){this.opt[e]=t}},{key:"isType",value:function(e){return this.getOption("type")==e}},{key:"isPaletteType",value:function(){return this.isType("palette")}},{key:"isSketchType",value:function(){return this.isType("sketch")}},{key:"getContainer",value:function(){return this.opt.container||document.body}},{key:"getColor",value:function(e){return this.$store.dispatch("/toColor",e)}},{key:"definePositionForArrow",value:function(e,t,n){}},{key:"definePosition",value:function(e){var t=this.$root.width(),n=this.$root.height(),i=e.left-this.$body.scrollLeft();t+i>window.innerWidth&&(i-=t+i-window.innerWidth),i<0&&(i=0);var o=e.top-this.$body.scrollTop();n+o>window.innerHeight&&(o-=n+o-window.innerHeight),o<0&&(o=0),this.$root.css({left:i+"px",top:o+"px"})}},{key:"getInitalizePosition",value:function(){return"inline"==this.opt.position?{position:"relative",left:"auto",top:"auto",display:"inline-block"}:{position:"fixed",left:"-10000px",top:"-10000px"}}},{key:"isAbsolute",value:function(){return"inline"!==this.opt.position}},{key:"mouseup.isAbsolute document",value:function(e){this.__isMouseDown=!1,this.checkInHtml(e.target)||(0==this.checkColorPickerClass(e.target)?this.hide():this.__isMouseIn||(clearTimeout(this.timerCloseColorPicker),this.timerCloseColorPicker=setTimeout(this.hide.bind(this),this.delayTime||this.hideDelay)))}},{key:"keyup.isAbsolute.escape $root",value:function(e){this.hide()}},{key:"mouseover.isAbsolute $root",value:function(e){clearTimeout(this.timerCloseColorPicker)}},{key:"mousemove.isAbsolute $root",value:function(e){clearTimeout(this.timerCloseColorPicker)}},{key:"mouseenter.isAbsolute $root",value:function(e){clearTimeout(this.timerCloseColorPicker),this.__isMouseIn=!0}},{key:"mouseleave.isAbsolute $root",value:function(e){this.__isMouseIn=!1,this.__isMouseDown||(clearTimeout(this.timerCloseColorPicker),this.timerCloseColorPicker=setTimeout(this.hide.bind(this),this.delayTime||this.hideDelay))}},{key:"mousedown.isAbsolute $root",value:function(e){this.__isMouseDown=!0}},{key:"setHideDelay",value:function(e){this.delayTime=e||0}},{key:"runHideDelay",value:function(){this.isColorPickerShow&&this.setHideDelay()}},{key:"callbackColorValue",value:function(e){e=e||this.getCurrentColor(),"function"==typeof this.opt.onChange&&this.opt.onChange.call(this,e),"function"==typeof this.colorpickerShowCallback&&this.colorpickerShowCallback(e)}},{key:"callbackLastUpdateColorValue",value:function(e){e=e||this.getCurrentColor(),"function"==typeof this.opt.onLastUpdate&&this.opt.onLastUpdate.call(this,e),"function"==typeof this.colorpickerLastUpdateCallback&&this.colorpickerLastUpdateCallback(e)}},{key:"callbackAddCurrentColorValue",value:function(e){"function"==typeof this.opt.onLastUpdate&&this.opt.onAddPreset.call(this,e),"function"==typeof this.colorpickerAddCurrentColorCallback&&this.colorpickerAddCurrentColorCallback(e)}},{key:"callbackHideColorValue",value:function(e){e=e||this.getCurrentColor(),"function"==typeof this.opt.onHide&&this.opt.onHide.call(this,e),"function"==typeof this.colorpickerHideCallback&&this.colorpickerHideCallback(e)}},{key:"getCurrentColor",value:function(){return this.$store.dispatch("/toColor",this.outputFormat)}},{key:"checkColorPickerClass",value:function(e){var t=new mi(e).closest("codemirror-colorview"),n=new mi(e).closest("easylogic-colorpicker"),i=new mi(e).closest("CodeMirror");return e.nodeName,!!(n||t||i)}},{key:"checkInHtml",value:function(e){return"HTML"==e.nodeName}},{key:"initializeStoreEvent",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeStoreEvent",this).call(this),this.$store.on("changeColor",this.callbackChange),this.$store.on("lastUpdateColor",this.callbackLastUpdate),this.$store.on("changeFormat",this.callbackChange),this.$store.on("addCurrentColor",this.callbackAddCurrentColor)}},{key:"destroy",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.$store.off("changeColor",this.callbackChange),this.$store.off("lastUpdateColor",this.callbackLastUpdate),this.$store.off("changeFormat",this.callbackChange),this.$store.off("addCurrentColor",this.callbackAddCurrentColor),this.callbackChange=void 0,this.callbackLastUpdate=void 0,this.callbackAddCurrentColor=void 0,this.colorpickerShowCallback=void 0,this.colorpickerHideCallback=void 0}}]),t}(ki),Ri=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source="base-box",n}return k(t,e),G(t,[{key:"refresh",value:function(){}},{key:"refreshColorUI",value:function(e){}},{key:"changeColor",value:function(e){this.$store.dispatch("/changeColor",Object.assign({source:this.source},e||{}))}},{key:"mouseup document",value:function(e){this.onDragEnd(e)}},{key:"mousemove document",value:function(e){this.onDragMove(e)}},{key:"mousedown $bar",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"mousedown $container",value:function(e){this.isDown=!0,this.onDragStart(e)}},{key:"touchend document",value:function(e){this.onDragEnd(e)}},{key:"touchmove document",value:function(e){this.onDragMove(e)}},{key:"touchstart $bar",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"touchstart $container",value:function(e){this.onDragStart(e)}},{key:"onDragStart",value:function(e){this.isDown=!0,this.refreshColorUI(e)}},{key:"onDragMove",value:function(e){this.isDown&&this.refreshColorUI(e)}},{key:"onDragEnd",value:function(e){this.isDown&&(this.$store.emit("lastUpdateColor"),this.isDown=!1)}},{key:"@changeColor",value:function(e){this.source!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),Yi=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=1,n.source="base-slider",n}return k(t,e),G(t,[{key:"getMinMaxPosition",value:function(){var e=this.getMinPosition(),t=this.getMaxDist();return{min:e,max:e+t,width:t}}},{key:"getCurrent",value:function(e){return min+this.getMaxDist()*e}},{key:"getMinPosition",value:function(){return this.refs.$container.offset().left}},{key:"getMaxDist",value:function(){return this.state.get("$container.width")}},{key:"getDist",value:function(e){var t=this.getMinMaxPosition(),n=t.min,i=t.max;return e<n?0:e>i?100:(e-n)/(i-n)*100}},{key:"getCaculatedDist",value:function(e){var t=e?this.getMousePosition(e):this.getCurrent(this.getDefaultValue()/this.maxValue);return this.getDist(t)}},{key:"getDefaultValue",value:function(){return 0}},{key:"setMousePosition",value:function(e){this.refs.$bar.css({left:e+"px"})}},{key:"getMousePosition",value:function(e){return yi.pos(e).pageX}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(e){if(e=e||this.getDefaultValue(),this.lastV===e)return!0;this.lastV=e,e<=this.minValue?this.refs.$bar.addClass("first").removeClass("last"):e>=this.maxValue?this.refs.$bar.addClass("last").removeClass("first"):this.refs.$bar.removeClass("last").removeClass("first"),this.setMousePosition(this.getMaxDist()*((e||0)/this.maxValue))}}]),t}(Ri),wi=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=1,n.source="value-control",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class="value">\n                <div ref="$container" class="value-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$container.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this),this.setBackgroundColor()}},{key:"getDefaultValue",value:function(){return this.$store.hsv.v}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({type:"hsv",v:t/100*this.maxValue})}}]),t}(Yi),Ti=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=1,n.source="opacity-control",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n        <div class="opacity">\n            <div ref="$container" class="opacity-container">\n                <div ref="$colorbar" class="color-bar"></div>\n                <div ref="$bar" class="drag-bar2"></div>\n            </div>\n        </div>\n        '}},{key:"refresh",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this),this.setOpacityColorBar()}},{key:"setOpacityColorBar",value:function(){var e=Object.assign({},this.$store.rgb);e.a=0;var t=Ae.format(e,"rgb");e.a=1;var n=Ae.format(e,"rgb");this.setOpacityColorBarBackground(t,n)}},{key:"setOpacityColorBarBackground",value:function(e,t){this.refs.$colorbar.css("background","linear-gradient(to right, "+e+", "+t+")")}},{key:"getDefaultValue",value:function(){return this.$store.alpha}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({a:Math.floor(t)/100*this.maxValue})}}]),t}(Yi),Ni="macos-control",Ki=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Value:wi,Opacity:Ti}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Value" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Value.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){Ni!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),zi=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.width=214,n.height=214,n.thinkness=0,n.half_thinkness=0,n.source="colorwheel",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n        <div class="wheel">\n            <canvas class="wheel-canvas" ref="$colorwheel" ></canvas>\n            <div class="wheel-canvas" ref="$valuewheel" ></div>\n            <div class="drag-pointer" ref="$drag_pointer"></div>\n        </div>\n        '}},{key:"refresh",value:function(e){this.setColorUI(e)}},{key:"setColorUI",value:function(e){this.renderCanvas(),this.renderValue(),this.setHueColor(null,e)}},{key:"renderValue",value:function(){var e=1-this.$store.hsv.v;this.refs.$valuewheel.css({"background-color":"rgba(0, 0, 0, "+e+")"})}},{key:"renderWheel",value:function(e,t){this.width&&!e&&(e=this.width),this.height&&!t&&(t=this.height);var n=new mi("canvas"),i=n.el.getContext("2d");n.el.width=e,n.el.height=t,n.css({width:e+"px",height:t+"px"});for(var o=i.getImageData(0,0,e,t),l=o.data,r=Math.floor(e/2),a=Math.floor(t/2),s=e>t?a:r,c=r,u=a,p=0;p<t;p++)for(var h=0;h<e;h++){var m=h-c+1,b=p-u+1,f=m*m+b*b,y=d(m,b),g=Ae.HSVtoRGB(y,Math.min(Math.sqrt(f)/s,1),1),v=4*(p*e+h);l[v]=g.r,l[v+1]=g.g,l[v+2]=g.b,l[v+3]=255}return i.putImageData(o,0,0),this.thinkness>0&&(i.globalCompositeOperation="destination-out",i.fillStyle="black",i.beginPath(),i.arc(c,u,s-this.thinkness,0,2*Math.PI),i.closePath(),i.fill()),n}},{key:"renderCanvas",value:function(){if(!this.$store.createdWheelCanvas){var e=this.refs.$colorwheel,t=e.el.getContext("2d"),n=e.size(),i=S(n,2),o=i[0],l=i[1];this.width&&!o&&(o=this.width),this.height&&!l&&(l=this.height),e.el.width=o,e.el.height=l,e.css({width:o+"px",height:l+"px"});var r=this.renderWheel(o,l);t.drawImage(r.el,0,0),this.$store.createdWheelCanvas=!0}}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"getDefaultSaturation",value:function(){return this.$store.hsv.s}},{key:"getCurrentXY",value:function(e,t,n,i,o){return e?yi.posXY(e):u(t,n,i,o)}},{key:"getRectangle",value:function(){var e=this.state.get("$el.width"),t=this.state.get("$el.height"),n=this.state.get("$colorwheel.width")/2,i=this.refs.$el.offset().left,o=i+e/2,l=this.refs.$el.offset().top;return{minX:i,minY:l,width:e,height:t,radius:n,centerX:o,centerY:l+t/2}}},{key:"setHueColor",value:function(e,t){if(this.state.get("$el.width")){var n=this.getRectangle(),i=n.minX,o=n.minY,l=n.radius,r=n.centerX,a=n.centerY,s=this.getCurrentXY(e,this.getDefaultValue(),this.getDefaultSaturation()*l,r,a),c=(b=s.x)-r,u=(f=s.y)-a,p=c*c+u*u,h=d(c,u);if(p>l*l)var m=this.getCurrentXY(null,h,l,r,a),b=m.x,f=m.y;var y=Math.min(Math.sqrt(p)/l,1);this.refs.$drag_pointer.css({left:b-i+"px",top:f-o+"px"}),t||this.changeColor({type:"hsv",h:h,s:y})}}},{key:"changeColor",value:function(e){this.$store.dispatch("/changeColor",Object.assign({source:this.source},e||{}))}},{key:"@changeColor",value:function(e){this.source!=e&&this.refresh(!0)}},{key:"@initColor",value:function(){this.refresh(!0)}},{key:"mouseup document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"mousemove document",value:function(e){this.isDown&&this.setHueColor(e)}},{key:"mousedown $drag_pointer",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"mousedown $el",value:function(e){this.isDown=!0,this.setHueColor(e)}},{key:"touchend document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"touchmove document",value:function(e){this.isDown&&this.setHueColor(e)}},{key:"touchstart $drag_pointer",value:function(e){e.preventDefault(),this.isDown=!0}},{key:"touchstart $el",value:function(e){e.preventDefault(),this.isDown=!0,this.setHueColor(e)}}]),t}(ki),Hi="chromedevtool-information",Mi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n        <div class="information hex">\n            <div ref="$informationChange" class="information-change">\n                <button ref="$formatChangeButton" type="button" class="format-change-button arrow-button"></button>\n            </div>\n            <div class="information-item hex">\n                <div class="input-field hex">\n                    <input ref="$hexCode" class="input" type="text" />\n                    <div class="title">HEX</div>\n                </div>\n            </div>\n            <div class="information-item rgb">\n                <div class="input-field rgb-r">\n                    <input ref="$rgb_r" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">R</div>\n                </div>\n                <div class="input-field rgb-g">\n                    <input ref="$rgb_g" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">G</div>\n                </div>\n                <div class="input-field rgb-b">\n                    <input ref="$rgb_b" class="input" type="number" step="1" min="0" max="255" />\n                    <div class="title">B</div>\n                </div>          \n                <div class="input-field rgb-a">\n                    <input ref="$rgb_a" class="input" type="number" step="0.01" min="0" max="1" />\n                    <div class="title">A</div>\n                </div>                                                            \n            </div>\n            <div class="information-item hsl">\n                <div class="input-field hsl-h">\n                    <input ref="$hsl_h" class="input" type="number" step="1" min="0" max="360" />\n                    <div class="title">H</div>\n                </div>\n                <div class="input-field hsl-s">\n                    <input ref="$hsl_s" class="input" type="number" step="1" min="0" max="100" />\n                    <div class="postfix">%</div>\n                    <div class="title">S</div>\n                </div>\n                <div class="input-field hsl-l">\n                    <input ref="$hsl_l" class="input" type="number" step="1" min="0" max="100" />\n                    <div class="postfix">%</div>                        \n                    <div class="title">L</div>\n                </div>\n                <div class="input-field hsl-a">\n                    <input ref="$hsl_a" class="input" type="number" step="0.01" min="0" max="1" />\n                    <div class="title">A</div>\n                </div>\n            </div>\n        </div>\n        '}},{key:"setCurrentFormat",value:function(e){this.format=e,this.initFormat()}},{key:"initFormat",value:function(){var e=this,t=this.format||"hex";["hex","rgb","hsl"].filter((function(e){return e!==t})).forEach((function(t){e.$el.removeClass(t)})),this.$el.addClass(t)}},{key:"nextFormat",value:function(){var e=this.format||"hex",t="hex";"hex"==e?t="rgb":"rgb"==e?t="hsl":"hsl"==e&&(t="hex"),this.format=t,this.initFormat(),this.$store.dispatch("/changeFormat",this.format),this.$store.emit("lastUpdateColor")}},{key:"goToFormat",value:function(e){this.format=e,("rgb"===e||"hsl"===e)&&this.initFormat(),this.$store.dispatch("/changeFormat",this.format)}},{key:"getFormat",value:function(){return this.format||"hex"}},{key:"checkNumberKey",value:function(e){var t=e.which,n=!1;return(37==t||39==t||8==t||46==t||9==t)&&(n=!0),!(!n&&(t<48||t>57))}},{key:"checkNotNumberKey",value:function(e){return!this.checkNumberKey(e)}},{key:"changeRgbColor",value:function(){this.$store.dispatch("/changeColor",{type:"rgb",r:this.refs.$rgb_r.int(),g:this.refs.$rgb_g.int(),b:this.refs.$rgb_b.int(),a:this.refs.$rgb_a.float(),source:Hi}),this.$store.emit("lastUpdateColor")}},{key:"changeHslColor",value:function(){this.$store.dispatch("/changeColor",{type:"hsl",h:this.refs.$hsl_h.int(),s:this.refs.$hsl_s.int(),l:this.refs.$hsl_l.int(),a:this.refs.$hsl_a.float(),source:Hi}),this.$store.emit("lastUpdateColor")}},{key:"@changeColor",value:function(e){Hi!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}},{key:"input $rgb_r",value:function(e){this.changeRgbColor()}},{key:"input $rgb_g",value:function(e){this.changeRgbColor()}},{key:"input $rgb_b",value:function(e){this.changeRgbColor()}},{key:"input $rgb_a",value:function(e){this.changeRgbColor()}},{key:"input $hsl_h",value:function(e){this.changeHslColor()}},{key:"input $hsl_s",value:function(e){this.changeHslColor()}},{key:"input $hsl_l",value:function(e){this.changeHslColor()}},{key:"input $hsl_a",value:function(e){this.changeHslColor()}},{key:"keyup $hexCode",value:function(e){var t=this.refs.$hexCode.val();"#"==t.charAt(0)&&(7==t.length||9===t.length)&&(this.$store.dispatch("/changeColor",t,Hi),this.$store.emit("lastUpdateColor"))}},{key:"click $formatChangeButton",value:function(e){this.nextFormat()}},{key:"click $el .information-item.hex .input-field .title",value:function(e){this.goToFormat("hex")}},{key:"click $el .information-item.rgb .input-field .title",value:function(e){this.goToFormat("hsl")}},{key:"click $el .information-item.hsl .input-field .title",value:function(e){this.goToFormat("rgb")}},{key:"setRGBInput",value:function(){this.refs.$rgb_r.val(this.$store.rgb.r),this.refs.$rgb_g.val(this.$store.rgb.g),this.refs.$rgb_b.val(this.$store.rgb.b),this.refs.$rgb_a.val(this.$store.alpha)}},{key:"setHSLInput",value:function(){this.refs.$hsl_h.val(this.$store.hsl.h),this.refs.$hsl_s.val(this.$store.hsl.s),this.refs.$hsl_l.val(this.$store.hsl.l),this.refs.$hsl_a.val(this.$store.alpha)}},{key:"setHexInput",value:function(){this.refs.$hexCode.val(this.$store.dispatch("/toHEX"))}},{key:"refresh",value:function(){this.setCurrentFormat(this.$store.format),this.setRGBInput(),this.setHSLInput(),this.setHexInput()}}]),t}(ki),Ji="data-colorsets-index",ji=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class="color-chooser">\n                <div class="color-chooser-container">\n                    <div class="colorsets-item colorsets-item-header">\n                        <h1 class="title">Color Palettes</h1>\n                        <span ref="$toggleButton" class="items">&times;</span>\n                    </div>\n                    <div ref="$colorsetsList" class="colorsets-list"></div>\n                </div>\n            </div>\n        '}},{key:"refresh",value:function(){this.load()}},{key:"@changeCurrentColorSets",value:function(){this.refresh()}},{key:"@toggleColorChooser",value:function(){this.toggle()}},{key:"load $colorsetsList",value:function(){return"\n            <div>\n                "+this.$store.dispatch("/getColorSetsList").map((function(e,t){return'\n                        <div class="colorsets-item" data-colorsets-index="'+t+'" >\n                            <h1 class="title">'+e.name+'</h1>\n                            <div class="items">\n                                <div>\n                                    '+e.colors.filter((function(e,t){return t<5})).map((function(e){return'<div class="color-item" title="'+(e=e||"rgba(255, 255, 255, 1)")+'">\n                                                <div class="color-view" style="background-color: '+e+'"></div>\n                                            </div>'})).join("")+"\n                                </div>\n                            </div>\n                        </div>"})).join("")+"\n            </div>\n        "}},{key:"show",value:function(){this.$el.addClass("open")}},{key:"hide",value:function(){this.$el.removeClass("open")}},{key:"toggle",value:function(){this.$el.toggleClass("open")}},{key:"click $toggleButton",value:function(e){this.toggle()}},{key:"click $colorsetsList .colorsets-item",value:function(e){var t=e.$delegateTarget;if(t){var n=parseInt(t.attr(Ji));this.$store.dispatch("/setCurrentColorSets",n),this.hide()}}},{key:"destroy",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.hide()}}]),t}(ki),Fi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class="colorsets">\n                <div class="menu" title="Open Color Palettes">\n                    <button ref="$colorSetsChooseButton" type="button" class="color-sets-choose-btn arrow-button"></button>\n                </div>\n                <div ref="$colorSetsColorList" class="color-list"></div>\n            </div>\n        '}},{key:"load $colorSetsColorList",value:function(){var e=this.$store.dispatch("/getCurrentColorSets"),t=this.$store.dispatch("/getCurrentColors");return"\n            <div>\n                <h6>"+e.name+'</h6>\n                <div class="current-color-sets">\n                '+t.map((function(e,t){return'<div class="color-item" title="'+e+'" data-index="'+t+'" data-color="'+e+'">\n                        <div class="empty"></div>\n                        <div class="color-view" style="background-color: '+e+'"></div>\n                    </div>'})).join("")+"   \n                "+(e.edit?'<div class="add-color-item">+</div>':"")+"         \n                </div>\n            </div>\n            \n        "}},{key:"refresh",value:function(){this.load()}},{key:"addColor",value:function(e){this.$store.dispatch("/addCurrentColor",e)}},{key:"@changeCurrentColorSets",value:function(){this.refresh()}},{key:"click $colorSetsChooseButton",value:function(e){this.$store.emit("toggleColorChooser")}},{key:"contextmenu $colorSetsColorList",value:function(e){if(e.preventDefault(),this.$store.dispatch("/getCurrentColorSets").edit){var t=new mi(e.target).closest("color-item");if(t){var n=parseInt(t.attr("data-index"));this.$store.emit("showContextMenu",e,n)}else this.$store.emit("showContextMenu",e)}}},{key:"click $colorSetsColorList .add-color-item",value:function(e){this.addColor(this.$store.dispatch("/toColor"))}},{key:"click $colorSetsColorList .color-item",value:function(e){this.$store.dispatch("/changeColor",e.$delegateTarget.attr("data-color")),this.$store.emit("lastUpdateColor")}}]),t}(ki),Ui=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <ul class="colorsets-contextmenu">\n                <li class="menu-item small-hide" data-type="remove-color">Remove color</li>\n                <li class="menu-item small-hide" data-type="remove-all-to-the-right">Remove all to the right</li>\n                <li class="menu-item" data-type="clear-palette">Clear palette</li>\n            </ul>\n        '}},{key:"show",value:function(e,t){var n=yi.pos(e);this.$el.css({top:n.clientY-10+"px",left:n.clientX+"px"}),this.$el.addClass("show"),this.selectedColorIndex=t,typeof this.selectedColorIndex>"u"?this.$el.addClass("small"):this.$el.removeClass("small")}},{key:"hide",value:function(){this.$el.removeClass("show")}},{key:"runCommand",value:function(e){switch(e){case"remove-color":this.$store.dispatch("/removeCurrentColor",this.selectedColorIndex);break;case"remove-all-to-the-right":this.$store.dispatch("/removeCurrentColorToTheRight",this.selectedColorIndex);break;case"clear-palette":this.$store.dispatch("/clearPalette")}}},{key:"@showContextMenu",value:function(e,t){this.show(e,t)}},{key:"click $el .menu-item",value:function(e){e.preventDefault(),this.runCommand(e.$delegateTarget.attr("data-type")),this.hide()}}]),t}(ki),Oi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="colorwheel"></div>\n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>                \n            </div>\n        '}},{key:"components",value:function(){return{colorwheel:zi,control:Ki,information:Mi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Ui}}}]),t}(Li),Ei=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=360,n.source="hue-control",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class="hue"> \n                <div ref="$container" class="hue-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);!0!==this.setColorUI(t/100*this.maxValue)&&this.changeColor({h:t/100*this.maxValue,type:"hsv"})}}]),t}(Yi),$i=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.minValue=0,this.maxValue=360,this.hueScaleDist=.05}},{key:"template",value:function(){return'\n            <div class="hue-scale">\n                <div ref="$container" class="hue-scale-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"getCalculatedDist",value:function(e){var t=e?this.getMousePosition(e):this.getCurrent(this.getDefaultValue()/this.maxValue);return this.getDist(t)}},{key:"refreshColorUI",value:function(e){var t=this.getCalculatedDist(e);!0!==this.setColorUI(t/100)&&this.changeColor({h:360*(this.minValue+this.fullDist*(t/100)),type:"hsv"})}},{key:"setColorUI",value:function(e){var t=void 0;if(e){if(t=this.minValue+e*this.fullDist,this.lastP===t)return!0;this.lastP=t}else{if(t=this.getDefaultValue()/360,this.lastP===t)return!0;this.lastP=t;var n=t+.05,i=t-.05;if(n>1)n=1,i=1-2*this.hueScaleDist;else if(i<0){var o=Math.abs(i);i=0,n+=o}var l=lt.getHueScale(t,i,n);this.list=l;var r=l[0].start,a=l[l.length-1].start;this.minValue=r,this.maxValue=a;var s=this.maxValue-this.minValue;this.fullDist=s;var c=l.map((function(e){return{color:e.rgb,percent:(e.start-r)/s*100,unit:"%"}}));this.refs.$container.css("background-image","linear-gradient(to right, "+c.map((function(e){return e.color+" "+e.percent+e.unit})).join(",")+")")}t<=this.minValue?(t=this.minValue,this.refs.$bar.addClass("first").removeClass("last")):t>=this.maxValue?(t=this.maxValue,this.refs.$bar.addClass("last").removeClass("first")):this.refs.$bar.removeClass("last").removeClass("first"),this.setMousePosition(this.getMaxDist()*((t-this.minValue)/this.fullDist))}}]),t}(Yi),Pi="chromedevtool-control",Bi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Hue:Ei,Opacity:Ti,HueScale:$i}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="HueScale" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n            <div ref="$controlPattern2" class="empty2"></div>\n            <div ref="$controlColor2" class="color2"></div>            \n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"setLastUpdateColor",value:function(){this.refs.$controlColor2.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){Pi!=e&&this.refresh()}},{key:"@lastUpdateColor",value:function(e){Pi!=e&&this.setLastUpdateColor()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),Ai="chromedevtool-palette",Qi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n        <div class="color">\n            <div ref="$saturation" class="saturation">\n                <div ref="$value" class="value">\n                    <div ref="$drag_pointer" class="drag-pointer" data-axis-value="all">\n                        <div ref="$left_saturation" class="left-saturation" data-axis-value="saturation"></div>\n                        <div ref="$right_saturation" class="right-saturation" data-axis-value="saturation"></div>\n                        <div ref="$top_value" class="top-value" data-axis-value="value"></div>\n                        <div ref="$bottom_value" class="bottom-value" data-axis-value="value"></div>\n                    </div>\n                </div>\n            </div>        \n        </div>        \n        '}},{key:"setBackgroundColor",value:function(e){this.$el.css("background-color",e)}},{key:"refresh",value:function(){this.cacheSize(),this.setColorUI()}},{key:"calculateSV",value:function(){var e=this.drag_pointer_pos||{x:0,y:0},t=this.state.get("$el.width"),n=this.state.get("$el.height"),i=e.x/t,o=(n-e.y)/n;this.$store.dispatch("/changeColor",{type:"hsv",s:i,v:o,source:Ai})}},{key:"setColorUI",value:function(){var e=this.w*this.$store.hsv.s,t=this.h*(1-this.$store.hsv.v);this.refs.$drag_pointer.css({left:e+"px",top:t+"px"}),this.drag_pointer_pos={x:e,y:t},this.setBackgroundColor(this.$store.dispatch("/getHueColor"))}},{key:"setSubColor",value:function(e){var t=e.pageX,n=e.pageY,i=t-this.x,o=n-this.y,l=this.$el.contentWidth(),r=this.$el.contentHeight(),a=this.refs.$drag_pointer.cssFloat("left"),s=this.refs.$drag_pointer.cssFloat("top");"saturation"===this.axis?a+=i:"value"===this.axis&&(s+=o),a<0?a=0:a>l&&(a=l),s<0?s=0:s>r&&(s=r),this.refs.$drag_pointer.px("left",a),this.refs.$drag_pointer.px("top",s),this.drag_pointer_pos={x:a,y:s},this.x=t,this.y=n,this.calculateSV()}},{key:"setMainColor",value:function(e){var t=this.$el.offset(),n=this.w,i=this.h,o=yi.pos(e).pageX-t.left,l=yi.pos(e).pageY-t.top;o<0?o=0:o>n&&(o=n),l<0?l=0:l>i&&(l=i),this.refs.$drag_pointer.css({left:o+"px",top:l+"px"}),this.drag_pointer_pos={x:o,y:l},this.calculateSV()}},{key:"@changeColor",value:function(e){Ai!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}},{key:"mouseup document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"mousemove document",value:function(e){this.isDown&&(this.cacheSize(),"saturation"===this.axis||"value"===this.axis?this.setSubColor(e):this.setMainColor(e))}},{key:"mousedown",value:function(e){this.isDown=!0,this.cacheSize(),this.axis=new mi(e.target).attr("data-axis-value"),this.x=e.pageX,this.y=e.pageY,"saturation"===this.axis||"value"===this.axis?this.setSubColor(e):this.setMainColor(e)}},{key:"touchend document",value:function(e){this.isDown&&(this.isDown=!1,this.$store.emit("lastUpdateColor"))}},{key:"touchmove document",value:function(e){this.isDown&&this.setMainColor(e)}},{key:"touchstart",value:function(e){e.preventDefault(),this.isDown=!0,this.cacheSize(),this.setMainColor(e)}},{key:"cacheSize",value:function(){this.w=this.state.get("$el.contentWidth"),this.h=this.state.get("$el.contentHeight")}}]),t}(ki),Di=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:Bi,information:Mi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Ui}}}]),t}(Li),_i="mini-control",qi=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Hue:Ei,Opacity:Ti}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n        </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){_i!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),eo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div>\n                <div target="control"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:qi}}}]),t}(Li),to=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source="vertical-slider",n}return k(t,e),G(t,[{key:"getMaxDist",value:function(){return this.state.get("$container.height")}},{key:"setMousePosition",value:function(e){this.refs.$bar.css({top:e+"px"})}},{key:"getMousePosition",value:function(e){return yi.pos(e).pageY}},{key:"getMinPosition",value:function(){return this.refs.$container.offset().top}},{key:"getCaculatedDist",value:function(e){var t=e?this.getMousePosition(e):this.getCurrent(this.getDefaultValue()/this.maxValue);return 100-this.getDist(t)}},{key:"setColorUI",value:function(e){(e=e||this.getDefaultValue())<=this.minValue?this.refs.$bar.addClass("first").removeClass("last"):e>=this.maxValue?this.refs.$bar.addClass("last").removeClass("first"):this.refs.$bar.removeClass("last").removeClass("first");var t=1-(e||0)/this.maxValue;this.setMousePosition(this.getMaxDist()*t)}}]),t}(Yi),no=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.minValue=0,n.maxValue=360,n.source="vertical-hue-control",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class="hue">\n                <div ref="$container" class="hue-container">\n                    <div ref="$bar" class="drag-bar"></div>\n                </div>\n            </div>\n        '}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({h:t/100*this.maxValue,type:"hsv"})}}]),t}(to),io=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.source="vertical-opacity-control",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n        <div class="opacity">\n            <div ref="$container" class="opacity-container">\n                <div ref="$colorbar" class="color-bar"></div>\n                <div ref="$bar" class="drag-bar2"></div>\n            </div>\n        </div>\n        '}},{key:"refresh",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this),this.setOpacityColorBar()}},{key:"setOpacityColorBar",value:function(){var e=Object.assign({},this.$store.rgb);e.a=0;var t=Ae.format(e,"rgb");e.a=1;var n=Ae.format(e,"rgb");this.refs.$colorbar.css("background","linear-gradient(to top, "+t+", "+n+")")}},{key:"getDefaultValue",value:function(){return this.$store.alpha}},{key:"refreshColorUI",value:function(e){var t=this.getCaculatedDist(e);this.setColorUI(t/100*this.maxValue),this.changeColor({a:Math.floor(t)/100*this.maxValue})}}]),t}(to),oo="mini-control",lo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Hue:no,Opacity:io}}},{key:"template",value:function(){return'<div class="control"><div target="Hue" ></div><div target="Opacity" ></div></div>'}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){oo!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),ro=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div><div target="control"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:lo}}}]),t}(Li),ao="macos-control",so=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Value:wi,Opacity:Ti}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Value" ></div>\n            <div target="Opacity" ></div>\n            <div ref="$controlPattern" class="empty"></div>\n            <div ref="$controlColor" class="color"></div>\n        </div>\n        '}},{key:"setBackgroundColor",value:function(){this.refs.$controlColor.css("background-color",this.$store.dispatch("/toRGB"))}},{key:"refresh",value:function(){this.setColorUI(),this.setBackgroundColor()}},{key:"setColorUI",value:function(){this.Value.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){ao!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),co=function(e){function t(e){x(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.width=214,n.height=214,n.thinkness=16,n.half_thinkness=n.thinkness/2,n.source="colorring",n}return k(t,e),G(t,[{key:"template",value:function(){return'\n        <div class="wheel" data-type="ring">\n            <canvas class="wheel-canvas" ref="$colorwheel" ></canvas>\n            <div class="drag-pointer" ref="$drag_pointer"></div>\n        </div>\n        '}},{key:"setColorUI",value:function(e){this.renderCanvas(),this.setHueColor(null,e)}},{key:"getDefaultValue",value:function(){return this.$store.hsv.h}},{key:"setHueColor",value:function(e,t){if(this.state.get("$el.width")){var n=this.getRectangle(),i=n.minX,o=n.minY,l=n.radius,r=n.centerX,a=n.centerY,s=this.getCurrentXY(e,this.getDefaultValue(),l,r,a),c=d((p=s.x)-r,(h=s.y)-a),u=this.getCurrentXY(null,c,l-this.half_thinkness,r,a),p=u.x,h=u.y;this.refs.$drag_pointer.css({left:p-i+"px",top:h-o+"px"}),t||this.changeColor({type:"hsv",h:c})}}}]),t}(zi),uo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="colorring"></div>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{colorring:co,palette:Qi,control:so,information:Mi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Ui}}}]),t}(Li),po=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Hue:no,Opacity:io}}},{key:"template",value:function(){return'\n        <div class="control">\n            <div target="Hue" ></div>\n            <div target="Opacity" ></div>\n        </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(){this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),ho=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return'\n            <div class=\'colorpicker-body\'>\n                <div target="palette"></div> \n                <div target="control"></div>\n                <div target="information"></div>\n                <div target="currentColorSets"></div>\n                <div target="colorSetsChooser"></div>\n                <div target="contextMenu"></div>\n            </div>\n        '}},{key:"components",value:function(){return{palette:Qi,control:po,information:Mi,currentColorSets:Fi,colorSetsChooser:ji,contextMenu:Ui}}}]),t}(Li),mo="mini-control",bo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{Hue:no,Opacity:io}}},{key:"template",value:function(){return'\n            <div class="control">\n                <div target="Opacity" ></div>            \n                <div target="Hue" ></div>\n            </div>\n        '}},{key:"refresh",value:function(){this.setColorUI()}},{key:"setColorUI",value:function(){this.Hue.setColorUI(),this.Opacity.setColorUI()}},{key:"@changeColor",value:function(e){mo!=e&&this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(ki),fo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"template",value:function(){return"\n            <div class='colorpicker-body'>\n                <div class='color-view'>\n                    <div class='color-view-container'  ref=\"$colorview\"></div>\n                </div>\n                <div class='color-tool'>\n                    <div target=\"palette\"></div>\n                    <div target=\"control\"></div>\n                </div>\n            </div>\n        "}},{key:"components",value:function(){return{palette:Qi,control:bo}}},{key:"initColorWithoutChangeEvent",value:function(e){this.$store.dispatch("/initColor",e),this.refresh()}},{key:"setBackgroundColor",value:function(){var e=this.$store.dispatch("/toColor"),t=this.$store.rgb,n=Ae.brightness(t.r,t.g,t.b);this.refs.$colorview.css({"background-color":e,color:n>127?"black":"white"}),this.refs.$colorview.html(e)}},{key:"click $colorview",value:function(e){this.nextFormat()}},{key:"nextFormat",value:function(){var e=this.$store.format||"hex",t="hex";"hex"==e?t="rgb":"rgb"==e?t="hsl":"hsl"==e&&(t="hex"),this.$store.dispatch("/changeFormat",t),this.$store.emit("lastUpdateColor"),this.refresh()}},{key:"refresh",value:function(){this.setBackgroundColor()}},{key:"@changeColor",value:function(){this.refresh()}},{key:"@initColor",value:function(){this.refresh()}}]),t}(Li),yo={create:function(e){switch(e.type){case"macos":return new Oi(e);case"xd":return new ho(e);case"ring":return new uo(e);case"mini":return new eo(e);case"vscode":return new fo(e);case"mini-vertical":return new ro(e);default:return new Di(e)}},ColorPicker:Di,ChromeDevToolColorPicker:Di,MacOSColorPicker:Oi,RingColorPicker:uo,MiniColorPicker:eo,VSCodePicker:fo,MiniVerticalColorPicker:ro},go=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"afterRender",value:function(){var e=this,t=this.opt.opt.colorpickerOptions||{type:"sketch"};this.colorPicker=yo.create(I({position:"inline",container:this.refs.$el.el,onChange:function(t){e.changeColor(t)},onLastUpdate:function(t){e.changeColor(t,!0)}},t))}},{key:"template",value:function(){return'<div ref="$color"></div>'}},{key:"changeColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.emit("changeEmbedColorPicker",e,t)}},{key:"setValue",value:function(e){this.colorPicker.initColorWithoutChangeEvent(e)}}]),t}(ki);function vo(e){var t=[];return e.layers.length&&e.layers.forEach((function(e){t.push.apply(t,L(vo(e)))})),t.push(e),t}var Zo=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x(this,e),n instanceof e&&(n=n.toJSON()),this.json=this.convert(I({},this.getDefaultObject(),n)),this.ref=new Proxy(this,{get:function(e,t){var n=e[t];return qe(n)?function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return n.apply(e,i)}:n||e.json[t]},set:function(e,n,i){if(i&&i.realVal&&qe(i.realVal)&&(i=i.realVal()),!t.checkField(n,i))throw new Error(i+" is invalid as "+n+" property value.");return e.json[n]=i,!0}}),this.ref}return G(e,[{key:"getDefaultTitle",value:function(){return"Item"}},{key:"isAttribute",value:function(){return!1}},{key:"is",value:function(){if(!this.json)return!1;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.indexOf(this.json.itemType)>-1}},{key:"convert",value:function(e){return e}},{key:"checkField",value:function(e,t){return!0}},{key:"toCloneObject",value:function(){return{itemType:this.json.itemType,type:this.json.type,selected:this.json.selected}}},{key:"clone",value:function(){var e=new(0,this.constructor)(this.toCloneObject());return e.parent=this.json.parent,e}},{key:"reset",value:function(t){t instanceof e&&(t=t.toJSON()),this.json=this.convert(I({},this.json,t))}},{key:"getDefaultObject",value:function(){return I({selected:!1,type:"",itemType:""},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"add",value:function(e){return this.json.layers.push(e),e.parent=this.ref,e}},{key:"toggle",value:function(e,t){Qe(t)?this.json[e]=!this.json[e]:this.json[e]=!!t}},{key:"toJSON",value:function(){return this.json}},{key:"resize",value:function(){}},{key:"copy",value:function(){this.json.parent.copyItem(this.ref)}},{key:"copyItem",value:function(e){var t=e.clone();t.width.add(10),t.width.add(10);for(var n=this.json.layers,i=-1,o=0,l=n.length;o<l;o++)if(n[o]===e){i=o;break}i>-1&&this.json.layers.splice(i,0,t)}},{key:"remove",value:function(){this.json.parent.removeItem(this.ref)}},{key:"removeItem",value:function(e){for(var t=this.json.layers,n=-1,i=0,o=t.length;i<o;i++)if(t[i]===e){n=i;break}n>-1&&this.json.layers.splice(n,1)}},{key:"title",get:function(){return this.json.name||this.getDefaultTitle()}},{key:"id",get:function(){return this.json.id}},{key:"layers",get:function(){return this.json.layers}},{key:"parent",get:function(){return this.json.parent}},{key:"html",get:function(){var e=this.json,t=e.elementType,n=e.id,i=e.layers,o=t||"div";return"\n    <"+o+" class='element-item "+e.itemType+"' data-id=\""+n+'">\n      '+i.map((function(e){return e.html})).join("")+"\n    </"+o+">\n    "}},{key:"allLayers",get:function(){return[].concat(L(vo(this.ref)))}}]),e}(),xo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({itemType:"image-resource",type:"image"},e))}},{key:"isGradient",value:function(){return!1}},{key:"isLinear",value:function(){return!1}},{key:"isRadial",value:function(){return!1}},{key:"isConic",value:function(){return!1}},{key:"isStatic",value:function(){return!1}},{key:"isImage",value:function(){return!1}},{key:"hasAngle",value:function(){return!1}},{key:"isUrl",value:function(){return!1}},{key:"isFile",value:function(){return!1}},{key:"isAttribute",value:function(){return!0}},{key:"toString",value:function(){return"none"}}]),t}(Zo),Go={center:50,top:0,left:0,right:100,bottom:100},Xo=function e(){x(this,e)};Xo.CENTER="center",Xo.TOP="top",Xo.RIGHT="right",Xo.LEFT="left",Xo.BOTTOM="bottom";var Io=/([\d.]+)(px|pt|fr|r?em|deg|vh|vw|m?s|%|g?rad|turn)/gi,Wo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";x(this,e),this.value=t,this.unit=n}return G(e,[{key:Symbol.toPrimitive,value:function(e){return"number"==e?this.value:this.toString()}},{key:"toString",value:function(){switch(this.unit){case"string":case"number":return this.value+"";case"var":return"var(--"+this.value+")";case"calc":return"calc("+this.value+")";default:return this.value+this.unit}}},{key:"isUnitType",value:function(e){return this.unit===e}},{key:"isCalc",value:function(){return this.isUnitType("calc")}},{key:"isFr",value:function(){return this.isUnitType("fr")}},{key:"isPercent",value:function(){return this.isUnitType("%")}},{key:"isPx",value:function(){return this.isUnitType("px")}},{key:"isEm",value:function(){return this.isUnitType("em")}},{key:"isDeg",value:function(){return this.isUnitType("deg")}},{key:"isSecond",value:function(){return this.isUnitType("s")}},{key:"isMs",value:function(){return this.isUnitType("ms")}},{key:"isNumber",value:function(){return this.isUnitType("number")}},{key:"isString",value:function(){return this.isUnitType("")}},{key:"isVar",value:function(){return this.isUnitType("--")}},{key:"set",value:function(e){return this.value=e,this}},{key:"add",value:function(e){return this.value+=+e,this}},{key:"sub",value:function(e){return this.add(-1*e)}},{key:"mul",value:function(e){return this.value*=+e,this}},{key:"div",value:function(e){return this.value/=+e,this}},{key:"mod",value:function(e){return this.value%=+e,this}},{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"getUnitName",value:function(){return"%"===this.unit?"percent":this.unit}},{key:"toJSON",value:function(){return{value:this.value,unit:this.unit}}},{key:"rate",value:function(e){return e/this.value}},{key:"stringToPercent",value:function(){return De(Go[this.value])?e.percent(Go[this.value]):e.percent(0)}},{key:"stringToEm",value:function(e){return this.stringToPercent().toEm(e)}},{key:"stringToPx",value:function(e){return this.stringToPercent().toPx(e)}},{key:"toPercent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return this.isPercent()?this:this.isPx()?e.percent(100*this.value/t):this.isEm()?e.percent(this.value*n*100/t):this.isString()?this.stringToPercent(t):this.isDeg()?e.percent(this.value/360*100):void 0}},{key:"toEm",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return this.isPercent()?e.em(this.value/100*t/n):this.isPx()?e.em(this.value/n):this.isEm()?this:this.isString()?this.stringToEm(t):void 0}},{key:"toPx",value:function(t){return this.isPercent()?e.px(this.value/100*t):this.isPx()?this:this.isEm()?e.px(this.value/100*t/16):this.isString()?this.stringToPx(t):void 0}},{key:"toSecond",value:function(){return this.isSecond()?this:this.isMs()?e.second(this.value/1e3):void 0}},{key:"toMs",value:function(){return this.isSecond()?e.ms(1e3*this.value):this.isMs()?this:void 0}},{key:"to",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return"px"===e?this.toPx(t,n):"%"===e||"percent"===e?this.toPercent(t,n):"em"===e?this.toEm(t,n):void 0}},{key:"toUnit",value:function(t){return new e(this.value,t)}},{key:"calculate",value:function(e,t){var n=this[e];return n?n.call(this,t):this}},{key:"includes",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.value)}},{key:"round",value:function(t){return new e(l(this.value,t),this.unit)}},{key:"equals",value:function(e){return this.value===e.value&&this.unit===e.unit}}],[{key:"min",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.shift(),o=0,l=t.length;o<l;o++)i.value>t[o].value&&(i=t[o]);return i}},{key:"max",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=t.shift(),o=0,l=t.length;o<l;o++)i.value<t[o].value&&(i=t[o]);return i}},{key:"string",value:function(t){return new e(t+"","")}},{key:"number",value:function(t){return new e(+t,"number")}},{key:"px",value:function(t){return new e(+t,"px")}},{key:"em",value:function(t){return new e(+t,"em")}},{key:"percent",value:function(t){return new e(+t,"%")}},{key:"deg",value:function(t){return new e(+t,"deg")}},{key:"fr",value:function(t){return new e(+t,"fr")}},{key:"second",value:function(t){return new e(+t,"s")}},{key:"ms",value:function(t){return new e(+t,"ms")}},{key:"var",value:function(t){return new e(t+"","--")}},{key:"calc",value:function(t){return new e(t,"calc")}},{key:"parse",value:function(t){if(_e(t)){if(t.indexOf("calc(")>-1)return new e(t.split("calc(")[1].split(")")[0],"calc");var n=t.replace(Io,"$1 $2").split(" ").filter(Boolean);return+n[0]==n[0]?new e(+n[0],n[1]):new e(n[0])}if(t instanceof e)return t;if(t.unit){if("%"==t.unit||"percent"==t.unit){var i=0;return De(t.percent)?i=t.percent:De(t.value)&&(i=t.value),e.percent(i)}if("px"==t.unit)return i=0,De(t.px)?i=t.px:De(t.value)&&(i=t.value),e.px(i);if("em"==t.unit)return i=0,De(t.em)?i=t.em:De(t.value)&&(i=t.value),e.em(i);if("deg"==t.unit)return i=0,De(t.deg)?i=t.deg:De(t.value)&&(i=t.value),e.deg(i);if("s"==t.unit)return i=0,De(t.second)?i=t.second:De(t.value)&&(i=t.value),e.second(i);if("ms"==t.unit)return i=0,De(t.ms)?i=t.ms:De(t.value)&&(i=t.value),e.ms(i);if("number"==t.unit)return i=0,De(t.value)&&(i=t.value),e.number(i);if("--"==t.unit)return i=0,De(t.value)&&(i=t.value),e.var(i);if(""===t.unit||"string"===t.unit)return i="",De(t.str)?i=t.str:De(t.value)&&(i=t.value),e.string(i)}return e.string(t)}}]),e}();Wo.auto=Wo.string("auto");var ko,Vo,So=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{cut:!1,percent:0,unit:"%",px:0,em:0,color:"rgba(0, 0, 0, 0)",prevColorStep:null})}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{cut:this.json.cut,percent:this.json.percent,unit:this.json.unit,px:this.json.px,em:this.json.em,color:this.json.color})}},{key:"on",value:function(){this.json.cut=!0}},{key:"off",value:function(){this.json.cut=!1}},{key:"toggle",value:function(){this.json.cut=!this.json.cut}},{key:"getUnit",value:function(){return"%"==this.json.unit?"percent":this.json.unit}},{key:"add",value:function(e){var t=this.getUnit();return this.json[t]+=+e,this}},{key:"sub",value:function(e){var t=this.getUnit();return this.json[t]-=+e,this}},{key:"mul",value:function(e){var t=this.getUnit();return this.json[t]*=+e,this}},{key:"div",value:function(e){var t=this.getUnit();return this.json[t]/=+e,this}},{key:"mod",value:function(e){var t=this.getUnit();return this.json[t]%=+e,this}},{key:"toLength",value:function(e){return Wo.parse(this.json).round(1e3)}},{key:"getPrevLength",value:function(){return this.json.prevColorStep?this.json.prevColorStep.toLength():""}},{key:"toString",value:function(){var e=this.json.cut?this.getPrevLength():"";return this.json.color+" "+e+" "+this.toLength()}},{key:"reset",value:function(e){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this,e),this.parent()&&this.parent().sortColorStep()}},{key:"isPx",get:function(){return"px"==this.json.unit}},{key:"isPercent",get:function(){return"%"==this.json.unit||"percent"===this.json.unit}},{key:"isEm",get:function(){return"em"==this.json.unit}}],[{key:"parse",value:function(e){var n=[],i=T(e),o=i.str.split(" ").filter((function(e){return e.trim()})),l=+o[0].replace("@",""),r=i.matches[l].color;if(1===o.length)n.push(new t({color:r,unit:"%",percent:0}));else if(2===o.length){var a=Wo.parse(o[1]),s={unit:a.unit};a.isPercent()?s.percent=a.value:a.isPx()?s.px=a.value:a.isEm()&&(s.em=a.value),n.push(new t(I({color:r},s)))}else 3===o.length&&[1,2].forEach((function(e){var i=Wo.parse(o[e]),l={unit:i.unit};i.isPercent()?l.percent=i.value:i.isPx()?l.px=i.value:i.isEm()&&(l.em=i.value),n.push(new t(I({color:r},l)))}));return n}}]),t}(Zo),Co={"to top":0,"to top right":45,"to right":90,"to bottom right":135,"to bottom":180,"to bottom left":225,"to left":270,"to top left":315},Lo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"isGradient",value:function(){return!0}},{key:"toString",value:function(){return"none"}},{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"gradient",colorsteps:[]},e))}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{colorsteps:this.json.colorsteps.map((function(e){return e.clone()}))})}},{key:"convert",value:function(e){return e.colorsteps=e.colorsteps.map((function(e){return new So(e)})),e}},{key:"calculateAngle",value:function(){var e=this.json.angle;return Qe(Co[e])?e:Co[e]||0}},{key:"addColorStep",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.json.colorsteps.push(e),t&&this.sortColorStep(),e}},{key:"insertColorStep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(216,216,216,0)",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgba(216,216,216,1)",i=this.colorsteps;if(i.length){if(e<i[0].percent)return i[0].index=1,void this.addColorStep(new So({index:0,color:i[0].color,percent:e}));var o=i.length-1;if(i[o].percent<e){var l=i[o].color,r=i[o].index+1;this.addColorStep(new So({index:r,color:l,percent:e}))}else for(var a=0,s=i.length-1;a<s;a++){var c=i[a],u=i[a+1];if(c.percent<=e&&e<=u.percent)return l=Color.mix(c.color,u.color,(e-c.percent)/(u.percent-c.percent),"rgb"),void this.addColorStep(new So({index:c.index+1,color:l,percent:e}))}}else this.addColorStepList([new So({color:t,percent:e,index:0}),new So({color:n,percent:100,index:100})])}},{key:"sortColorStep",value:function(){var e=this.colorsteps;e.sort((function(e,t){return e.percent>t.percent?1:e.percent<t.percent?-1:e.percent==t.percent?e.index===t.index?0:e.index>t.index?1:-1:void 0})),e.forEach((function(e,t){e.index=100*t}))}},{key:"addColorStepList",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){e.addColorStep(t,!1)})),this.sortColorStep()}},{key:"getColorStep",value:function(e){return this.json.colorsteps.filter((function(t){return t.id==e}))[0]}},{key:"clear",value:function(){arguments.length?this.json.colorsteps.splice(+(arguments.length<=0?void 0:arguments[0]),1):this.json.colorsteps=[]}},{key:"getColorString",value:function(){var e=this.colorsteps;return e.length?e.map((function(t,n){return t.prevColorStep=t.cut&&n>0?e[n-1]:null,t})).map((function(e){return""+e})).join(","):""}},{key:"colorsteps",get:function(){return this.json.colorsteps}}],[{key:"random",value:function(){return"linear-gradient("+Math.floor(1e3*Math.random())%360+"deg, "+Color.random()+" 0%, "+Color.random()+" 100%)"}}]),t}(xo),Ro=["circle","circle closest-side","circle closest-corner","circle farthest-side","circle farthest-corner","ellipse","ellipse closest-side","ellipse closest-corner","ellipse farthest-side","ellipse farthest-corner"],Yo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this);var e=[{offset:Wo.percent(0),cut:!1,color:"yellow"},{offset:Wo.percent(100),cut:!1,color:"red"}];this.type="linear-gradient",this.index=0,this.colorsteps=e,this.radialPosition=[Wo.percent(50),Wo.percent(50)],this.radialType="ellipse"}},{key:"@changeRadialPosition",value:function(e,t){this["@changeKeyValue"]("radialPosition",[e,t]),this.reloadInputValue()}},{key:"@setGradientEditor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear-gradient",i=arguments[3],o=arguments[4],l=arguments[5],r=T(e),a=r.str.split(",").map((function(e){return e.trim()})).map((function(e){var t=e.split(" ").filter((function(e){return e.length})),n=S(t,3),i=n[0],o=n[1],l=n[2];i=K(i,r.matches);var a=!1;l&&(a=!0);var s=a?Wo.parse(l):Wo.parse(o);return s.isDeg()&&(s=Wo.percent(s.value/360*100)),{color:i,offset:s,cut:a}}));1==a.length&&a.push({color:a[0].color,offset:Wo.percent(100),cut:!1}),this.cachedStepListRect=null,this.colorsteps=a,this.index=t,this.type=n,this.angle=Wo.parse(i||"90deg"),this.radialPosition=o||[Wo.percent(50),Wo.percent(50)],this.radialType=l,this.refresh(),this.selectStep(t),this.reloadInputValue()}},{key:"template",value:function(){var e=this;return"\n        <div class='gradient-editor' data-selected-editor='"+this.type+"'>\n            <div class='gradient-steps' data-editor='gradient'>\n                <div class=\"hue-container\" ref=\"$back\"></div>            \n                <div class=\"hue\" ref=\"$steps\">\n                    <div class='step-list' ref=\"$stepList\" ></div>\n                </div>\n            </div>\n            <div class='tools' data-editor='tools'>\n              <label>Offset <input type='checkbox' ref='$cut' checked />  connected</label> <div class=\"right-menu\" ><button type=\"button\" ref=\"$remove\" style=\"float:right;\" title=\"Remove color stop\">&times; Remove</button></div>\n              <div class='unit'>\n                <div><input type='range' data-key='length' min='0' max=\"100\" step='0.1' ref='$offset' /></div>\n                <div><input type='number' data-key='length' min='0' max=\"100\" step='0.1' ref='$offsetNumber' /></div>              \n                <div><select ref='$offsetSelect'>\n                  <option value='%'>%</option>\n                  <option value='px'>px</option>\n                  <option value='em'>em</option>\n                </select></div>\n              </div>\n            </div>\n            <div class='sub-editor' ref='$subEditor'> \n              <div data-editor='angle'>\n                <label>Angle</label>\n                <div class='unit'>                \n                  <div><input type='range' data-key='angle' min='-720' max=\"720\" step='0.1' ref='$angle' /> </div>\n                  <div><input type='number' data-key='angle' min='-720' max=\"720\" step='0.1' ref='$angleNumber' /></div> \n                  <span>deg</span>\n                </div>\n              </div>\n              <div data-editor='centerX'>\n                <label>Center X</label>\n                <div class='unit'>\n                  <div><input type='range' data-key='centerX' min='-100' max=\"100\" step='0.1' ref='$centerX' /></div>\n                  <div><input type='number' data-key='centerX' min='-100' max=\"100\" step='0.1' ref='$centerXNumber' /></div>\n                  <div><select ref='$centerXSelect'>\n                      <option value='%'>%</option>\n                      <option value='px'>px</option>\n                      <option value='em'>em</option>\n                    </select></div>\n                </div>\n              </div>                \n              <div data-editor='centerY'>           \n                <label>Center Y</label>                 \n                <div class='unit'>\n                  <div><input type='range' data-key='centerY' min='-100' max=\"100\" step='0.1' ref='$centerY' /></div>\n                  <div><input type='number' data-key='centerX' min='-100' max=\"100\" step='0.1' ref='$centerYNumber' /></div>\n                  <div><select ref='$centerYSelect'>\n                      <option value='%'>%</option>\n                      <option value='px'>px</option>\n                      <option value='em'>em</option>\n                    </select></div>\n                </div>\n              </div>                \n              <div data-editor='radialType'>       \n                <label>Radial Type</label>              \n                <div><select ref='$radialType'>\n                  "+Ro.map((function(t){return'<option value="'+t+'" '+(e.radialType===t?"selected":"")+">"+t+"</option>"})).join("")+"\n                </select></div>\n              </div>\n            </div>            \n        </div>\n      "}},{key:"input $offset",value:function(e){this.refs.$offsetNumber.val(this.refs.$offset.val()),this["@changeColorStepOffset"]("offset",new Wo(this.refs.$offset.val(),this.refs.$offsetSelect.val()))}},{key:"mouseup $offset",value:function(e){this["@changeColorStepOffset"]("offset",new Wo(this.refs.$offset.val(),this.refs.$offsetSelect.val()),!0)}},{key:"input $offsetNumber",value:function(e){this.refs.$offset.val(this.refs.$offsetNumber.val()),this["@changeColorStepOffset"]("offset",new Wo(this.refs.$offset.val(),this.refs.$offsetSelect.val()),!0)}},{key:"input $angle",value:function(e){this.refs.$angleNumber.val(this.refs.$angle.val()),this["@changeKeyValue"]("angle",Wo.deg(this.refs.$angle.val()))}},{key:"mouseup $angle",value:function(e){this["@changeKeyValue"]("angle",Wo.deg(this.refs.$angle.val()),!0)}},{key:"input $angleNumber",value:function(e){this.refs.$angle.val(this.refs.$angleNumber.val()),this["@changeKeyValue"]("angle",Wo.deg(this.refs.$angle.val()),!0)}},{key:"input $centerX",value:function(e){this.refs.$centerXNumber.val(this.refs.$centerX.val()),this["@changeKeyValue"]("radialPositionX")}},{key:"mouseup $centerX",value:function(e){this["@changeKeyValue"]("radialPositionX",null,!0)}},{key:"input $centerXNumber",value:function(e){this.refs.$centerX.val(this.refs.$centerXNumber.val()),this["@changeKeyValue"]("radialPositionX")}},{key:"input $centerY",value:function(e){this.refs.$centerYNumber.val(this.refs.$centerY.val()),this["@changeKeyValue"]("radialPositionY")}},{key:"mouseup $centerY",value:function(e){this["@changeKeyValue"]("radialPositionY",null,!0)}},{key:"input $centerYNumber",value:function(e){this.refs.$centerY.val(this.refs.$centerYNumber.val()),this["@changeKeyValue"]("radialPositionX")}},{key:"change $centerXSelect",value:function(e){this["@changeKeyValue"]("radialPositionX",null,!0)}},{key:"change $centerYSelect",value:function(e){this["@changeKeyValue"]("radialPositionY",null,!0)}},{key:"change $radialType",value:function(e){this["@changeKeyValue"]("radialType",this.refs.$radialType.val(),!0)}},{key:"@changeKeyValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"angle"===e&&(t=t.value),"radialPositionX"===e||"radialPositionY"===e?this.radialPosition=[this.radialPositionX,this.radialPositionY]:this[e]=t,this.updateData(n)}},{key:"@changeColorStepOffset",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.currentStep&&(this.currentStep.offset=t.clone(),this.$currentStep.css({left:this.currentStep.offset}),this.setColorUI(),this.updateData(n))}},{key:"click $back",value:function(e){if(!this.startXY){var t=this.refs.$stepList.rect(),n=t.x,i=t.right,o=e.xy.x;o<n?o=n:o>i&&(o=i);var l=(o-n)/t.width*100,r=this.colorsteps.map((function(e,t){return{index:t,color:e.color,offset:e.offset}})),a=r.filter((function(e){return e.offset.value<=l})).pop(),s=r.filter((function(e){return e.offset.value>l})).shift(),c=0;if(a&&s){if(a.offset.value===l)return;this.colorsteps.splice(s.index,0,{cut:!1,offset:Wo.percent(l),color:Ae.mix(a.color,s.color,(l-a.offset.value)/(s.offset.value-a.offset.value))}),c=a.index+1}else if(a){var u={cut:!1,offset:Wo.percent(l),color:a.color};this.colorsteps.length-1===a.index?this.colorsteps.push(u):this.colorsteps.splice(a.index+1,0,u),c=a.index+1}else if(s){var d={cut:!1,offset:Wo.percent(l),color:s.color};0===s.index?(this.colorsteps.unshift(d),c=0):(this.colorsteps.splice(s.index-1,0,d),c=s.index)}else this.colorsteps.push({cut:!1,offset:Wo.percent(0),color:"rgba(0, 0, 0, 1)"}),c=0;this.refresh(),this.updateData(!0),this.selectStep(c)}}},{key:"reloadStepList",value:function(){this.refs.$stepList.html(this.colorsteps.map((function(e,t){return"<div class='step' data-index='"+t+"' data-cut='"+e.cut+"' style='left: "+e.offset+";'>\n        <div class='color-view' style=\"background-color: "+e.color+"\"></div>\n        <div class='arrow' style=\"background-color: "+e.color+'"></div>\n      </div>'})).join(""))}},{key:"click $cut",value:function(){this.currentStep&&(this.currentStep.cut=this.refs.$cut.checked(),this.$currentStep.attr("data-cut",this.currentStep.cut),this.setColorUI(),this.updateData(!0))}},{key:"click $remove",value:function(){this.removeStep(this.index)}},{key:"removeStep",value:function(e){this.colorsteps.splice(e,1);var t=this.colorsteps[e],n=e;t||(t=this.colorsteps[e-1],n=e-1),t&&this.selectStep(n),this.refresh(),this.updateData(!0)}},{key:"selectStep",value:function(e){this.index=e,this.currentStep=this.colorsteps[e],this.refs.$stepList.attr("data-selected-index",e),this.$currentStep=this.refs.$stepList.$('[data-index="'+e.toString()+'"]'),this.$currentStep&&(this.$colorView=this.$currentStep.$(".color-view"),this.$arrow=this.$currentStep.$(".arrow"),this.refs.$cut.el.checked=this.currentStep.cut),this.prev=this.colorsteps[e-1],this.next=this.colorsteps[e+1]}},{key:"mousedown $stepList .step",value:function(e){var t=+e.$delegateTarget.attr("data-index");e.altKey?this.removeStep(t):(this.selectStep(t),this.startXY=e.xy,this.$store.emit("selectColorStep",this.currentStep.color),this.refs.$cut.checked(this.currentStep.cut),this.refs.$offset.val(this.currentStep.offset.value),this.refs.$stepList.attr("data-selected-index",t),this.cachedStepListRect=this.refs.$stepList.rect())}},{key:"getStepListRect",value:function(){return this.cachedStepListRect}},{key:"mouseup document",value:function(e){this.startXY&&(this.startXY=null,this.updateData(!0))}},{key:"mousemove document",value:function(e){if(this.startXY){var t=e.xy.x-this.startXY.x;e.xy.y,this.startXY.y;var n=this.getStepListRect(),i=n.x,o=n.right,r=this.startXY.x+t;r<i?r=i:r>o&&(r=o);var a=(r-i)/n.width*100;this.prev&&this.prev.offset.value>a&&(a=this.prev.offset.value),this.next&&this.next.offset.value<a&&(a=this.next.offset.value),this.currentStep.offset.set(l(a,100)),this.$currentStep.css({left:Wo.percent(a)}),this.refs.$offset.val(this.currentStep.offset.value),this.setColorUI(),this.updateData()}}},{key:"refresh",value:function(){this.reloadStepList(),this.setColorUI()}},{key:"getLinearGradient",value:function(){var e=this;if(0===this.colorsteps.length)return"";if(1===this.colorsteps.length){var t=this.colorsteps[0];return"linear-gradient(to right, "+t.color+" "+t.offset+", "+t.color+" 100%)"}return"linear-gradient(to right, "+this.colorsteps.map((function(t,n){if(t.cut){var i=e.colorsteps[n-1];return i?t.color+" "+i.offset+" "+t.offset:t.color+" "+t.offset}return t.color+" "+t.offset})).join(",")+")"}},{key:"setColorUI",value:function(){this.refs.$stepList.css("background-image",this.getLinearGradient()),this.refs.$el.attr("data-selected-editor",this.type)}},{key:"reloadInputValue",value:function(){this.refs.$offset.val(this.currentStep.offset.value),this.refs.$offsetNumber.val(this.currentStep.offset.value),this.refs.$offsetSelect.val(this.currentStep.offset.unit),this.refs.$angle.val(this.angle.value),this.refs.$angleNumber.val(this.angle.value);var e=this.radialPosition.map((function(e){return"center"===e?Wo.percent(50):e}));this.refs.$centerX.val(e[0].value),this.refs.$centerXNumber.val(e[0].value),this.refs.$centerXSelect.val(e[0].unit),this.refs.$centerY.val(e[1].value),this.refs.$centerYNumber.val(e[1].value),this.refs.$centerYSelect.val(e[1].unit),this.refs.$radialType.val(this.radialType)}},{key:"@setColorStepColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentStep&&(this.currentStep.color=e,this.$colorView.css({"background-color":e}),this.$arrow.css({"background-color":e}),this.setColorUI(),this.updateData(t))}},{key:"updateData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$store.emit("changeGradientEditor",{type:this.type,index:this.index,angle:this.angle,colorsteps:this.colorsteps,radialPosition:this.radialPosition,radialType:this.radialType},e)}},{key:"radialPositionX",get:function(){return new Wo(+this.refs.$centerX.val(),this.refs.$centerXSelect.val()).round(1e3)}},{key:"radialPositionY",get:function(){return new Wo(+this.refs.$centerY.val(),this.refs.$centerYSelect.val()).round(1e3)}}]),t}(ki),wo={0:"to top",45:"to top right",90:"to right",135:"to bottom right",180:"to bottom",225:"to bottom left",270:"to left",315:"to top left"},To={"to top":"0","to top right":"45","to right":"90","to bottom right":"135","to bottom":"180","to bottom left":"225","to left":"270","to top left":"315"},No=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"linear-gradient",angle:0},e))}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{angle:this.json.angle})}},{key:"isLinear",value:function(){return!0}},{key:"hasAngle",value:function(){return!0}},{key:"toString",value:function(){if(0===this.colorsteps.length)return"";var e=this.getColorString(),t="";return et(t=this.json.angle||0)&&(t=wo[""+t]||t),et(t)&&(t=t>360?t%360:t,t+="deg"),this.json.type+"("+t+", "+e+")"}}],[{key:"toLinearGradient",value:function(e){return 0===e.length?"none":new t({angle:"to right",colorsteps:e})+""}},{key:"parse",value:function(e){var n=T(e),i=0,o=[];return n.str.split("(")[1].split(")")[0].split(",").map((function(e){return e.trim()})).forEach((function(e,t){e.includes("@")?(e=K(e,n.matches),o.push.apply(o,L(So.parse(e)))):i=Qe(To[e])?Wo.parse(e):Wo.deg(+To[e])})),new t({angle:i,colorsteps:o})}}]),t}(Lo),Ko=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{type:"repeating-linear-gradient",angle:0})}}],[{key:"parse",value:function(e){var n=No.parse(e);return new t({angle:n.angle,colorsteps:n.colorsteps})}}]),t}(No),zo=(X(ko={},"center",!0),X(ko,"top",!0),X(ko,"left",!0),X(ko,"right",!0),X(ko,"bottom",!0),ko),Ho=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"radial-gradient",radialType:"ellipse",radialPosition:[Xo.CENTER,Xo.CENTER]},e))}},{key:"toCloneObject",value:function(){var e=this.json.radialPosition||[Wo.percent(50),Wo.percent(50)];return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{radialType:this.json.radialType||"ellipse",radialPosition:JSON.parse(JSON.stringify(e))})}},{key:"isRadial",value:function(){return!0}},{key:"toString",value:function(){if(0===this.colorsteps.length)return"";var e=this.getColorString(),t=this.json,n="",i=t.radialType,o=t.radialPosition||["center","center"];return zo[o]||"string"==typeof o||(o=o.map((function(e){return"string"==typeof e?e:e.isString()?e.value:e.round(1e3)})).join(" ")),n=o?i+" at "+o:i,(t.type||"radial-gradient")+"("+n+", "+e+")"}}],[{key:"parse",value:function(e){var n=T(e),i="ellipse",o=[Xo.CENTER,Xo.CENTER],l=[];return n.str.split("(")[1].split(")")[0].split(",").map((function(e){return e.trim()})).forEach((function(e,t){if(e.includes("@"))e=K(e,n.matches),l.push.apply(l,L(So.parse(e)));else{if(e.includes("at")){var r=e.split("at").map((function(e){return e.trim()})),a=S(r,2);i=a[0],o=a[1]}else i=e;if(_e(o)){var s=o.split(" ");if(1===s.length){var c=Wo.parse(s[0]);o=c.isString()?[c.value,c.value]:[c.clone(),c.clone()]}else 2===s.length&&(o=s.map((function(e){var t=Wo.parse(e);return t.isString()?t.value:t})))}}})),new t({radialType:i,colorsteps:l})}}]),t}(Lo),Mo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{type:"repeating-radial-gradient"})}}],[{key:"parse",value:function(e){var n=Ho.parse(e);return new t({radialType:n.radialType,radialPosition:n.radialPosition,colorsteps:n.colorsteps})}}]),t}(Ho),Jo=(X(Vo={},"center",!0),X(Vo,"top",!0),X(Vo,"left",!0),X(Vo,"right",!0),X(Vo,"bottom",!0),Vo),jo={"to top":0,"to top right":45,"to right":90,"to bottom right":135,"to bottom":180,"to bottom left":225,"to left":270,"to top left":315},Fo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,I({type:"conic-gradient",angle:0,radialPosition:[Xo.CENTER,Xo.CENTER]},e))}},{key:"toCloneObject",value:function(){return I({},W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"toCloneObject",this).call(this),{angle:this.json.angle,radialPosition:JSON.parse(JSON.stringify(this.json.radialPosition))})}},{key:"isConic",value:function(){return!0}},{key:"hasAngle",value:function(){return!0}},{key:"getColorString",value:function(){if(0===this.colorsteps.length)return"";var e=this.colorsteps;return e?(e.sort((function(e,t){return e.percent==t.percent?0:e.percent>t.percent?1:-1})),e.map((function(t,n){return t.prevColorStep=t.cut&&n>0?e[n-1]:null,t})).map((function(e){var t=Math.floor(3.6*e.percent),n="";return e.cut&&e.prevColorStep&&(n=Math.floor(3.6*e.prevColorStep.percent)+"deg"),e.color+" "+n+" "+t+"deg"})).join(",")):""}},{key:"toString",value:function(){var e=this.getColorString(),t=[],n=this.json,i=n.angle,o=n.radialPosition||Xo.CENTER;o=Jo[o]?o:o.join(" "),De(i)&&(i=+(jo[i]||i),t.push("from "+i+"deg")),o&&t.push("at "+o);var l=t.length?t.join(" ")+",":"";return n.type+"("+l+" "+e+")"}}],[{key:"parse",value:function(e){var n=T(e),i="0deg",o=[Xo.CENTER,Xo.CENTER],l=[];return n.str.split("(")[1].split(")")[0].split(",").map((function(e){return e.trim()})).forEach((function(e,t){if(e.includes("@"))e=e.split(" ").map((function(e){return e.trim()})).map((function(e){return e.includes("deg")?Wo.parse(e).toPercent():e})).join(" "),e=K(e,n.matches),l.push.apply(l,L(So.parse(e)));else{if(e.includes("at")){var r=e.split("at").map((function(e){return e.trim()})),a=S(r,2);i=a[0],o=a[1]}else i=e;if(_e(o)){var s=o.split(" ");if(1===s.length){var c=Wo.parse(s[0]);o=c.isString()?[c.value,c.value]:[c.clone(),c.clone()]}else 2===s.length&&(o=s.map((function(e){var t=Wo.parse(e);return t.isString()?t.value:t})))}_e(i)&&i.includes("from")&&(i=i.split("from")[1],i=Qe(jo[i])?Wo.parse(i):Wo.deg(+jo[i]))}})),new t({angle:i,radialPosition:o,colorsteps:l})}}]),t}(Lo),Uo=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"getDefaultObject",value:function(){return W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaultObject",this).call(this,{type:"repeating-conic-gradient",angle:0,radialPosition:[Xo.CENTER,Xo.CENTER]})}}],[{key:"parse",value:function(e){var n=Fo.parse(e);return new t({angle:n.angle,radialPosition:n.radialPosition,colorsteps:n.colorsteps})}}]),t}(Fo),Oo=[{type:"linear-gradient",title:"Linear Gradient"},{type:"repeating-linear-gradient",title:"Repeating Linear Gradient"},{type:"radial-gradient",title:"Radial Gradient"},{type:"repeating-radial-gradient",title:"Repeating Radial Gradient"},{type:"conic-gradient",title:"Conic Gradient"},{type:"repeating-conic-gradient",title:"Repeating Conic Gradient"}],Eo=/((linear\-gradient|repeating\-linear\-gradient|radial\-gradient|repeating\-radial\-gradient|conic\-gradient|repeating\-conic\-gradient|url)\(([^\)]*)\))/gi,$o=function(e){function t(){return x(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,e),G(t,[{key:"components",value:function(){return{EmbedColorPicker:go,gradientEditor:Yo}}},{key:"parseImage",value:function(e){var t=T(e),n=null;return t.str.match(Eo).forEach((function(e,i){(e=K(e,t.matches)).includes("repeating-linear-gradient")?n=Ko.parse(e):e.includes("linear-gradient")?n=No.parse(e):e.includes("repeating-radial-gradient")?n=Mo.parse(e):e.includes("radial")?n=Ho.parse(e):e.includes("repeating-conic-gradient")?n=Uo.parse(e):e.includes("conic")&&(n=Fo.parse(e))})),n}},{key:"callbackColorValue",value:function(e){var t=this.image.toString();"function"==typeof this.opt.onChange&&this.opt.onChange.call(this,t,this.image),"function"==typeof this.colorpickerShowCallback&&this.colorpickerShowCallback(t,this.image)}},{key:"callbackLastUpdateColorValue",value:function(e){var t=this.image.toString();"function"==typeof this.opt.onLastUpdate&&this.opt.onLastUpdate.call(this,t,this.image)}},{key:"callbackHideColorValue",value:function(e){var t=this.image.toString();"function"==typeof this.opt.onHide&&this.opt.onHide.call(this,t,this.image),"function"==typeof this.colorpickerHideCallback&&this.colorpickerHideCallback(t,this.image)}},{key:"initialize",value:function(){W(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this),this.$root.addClass("gradient-picker"),this.selectedTab="linear-gradient",this.setValue(this.opt.gradient||"linear-gradient(to right, red 0%, yellow 100%)")}},{key:"setValue",value:function(e){this.gradient=e,this.image=this.parseImage(this.gradient),this.selectTabContent(this.image.type)}},{key:"getValue",value:function(){return this.image.toString()}},{key:"template",value:function(){return'\n      <div class="gradient-body">\n\n        <div class=\'box\'>\n          <div class=\'gradient-preview\'>\n            <div class=\'gradient-view\' ref=\'$gradientView\'></div>\n          </div>\n          <div class="picker-tab">\n            <div class="picker-tab-list" ref="$tab" data-value="static-gradient" data-is-image-hidden="false">\n              '+Oo.map((function(e){return"\n                  <span \n                    class='picker-tab-item "+(e.selected?"selected":"")+"' \n                    data-selected-value='"+e.type+"'\n                    title='"+e.title+"'\n                  > \n                  <div class='icon'></div>\n                  </span>"})).join("")+"\n            </div>\n          </div>\n          <div target='gradientEditor'></div>\n\n        </div>\n        <div class='box'>\n          <div target=\"EmbedColorPicker\"></div>\n        </div>\n      </div>\n     \n    "}},{key:"getColorString",value:function(){return this.image?this.image.getColorString():""}},{key:"getCurrentStepColor",value:function(){return(this.image.colorsteps[this.selectColorStepIndex||0]||{color:"rgba(0, 0, 0, 1)"}).color}},{key:"@changeGradientEditor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.colorsteps.map((function(e,t){return new So({color:e.color,percent:e.offset.value,cut:e.cut,index:100*(t+1)})}));e=I({},e,{type:this.selectedTab,colorsteps:n}),this.image.reset(e),this.updateGradientPreview(t)}},{key:"click $tab .picker-tab-item",value:function(e){var t=e.$delegateTarget.attr("data-selected-value");this.selectTabContent(t)}},{key:"selectTabContent",value:function(e){this.selectedTab=e,this.refs.$tab.attr("data-value",e),this.image=this.createGradient({type:e},this.image),this.$store.emit("setGradientEditor",this.getColorString(),this.selectColorStepIndex,this.image.type,this.image.angle,this.image.radialPosition,this.image.radialType);var t=this.getCurrentStepColor();this["@selectColorStep"](t),this.updateGradientPreview(!0)}},{key:"createGradient",value:function(e,t){var n=e.colorsteps||t.colorsteps,i=e.angle||t.angle,o=e.radialType||t.radialType||"ellipse",l=e.radialPosition||t.radialPosition||[Wo.percent(50),Wo.percent(50)],r=t.clone().toJSON();switch(delete r.itemType,delete r.type,e.type){case"linear-gradient":return new No({colorsteps:n,angle:i});case"repeating-linear-gradient":return new Ko({colorsteps:n,angle:i});case"radial-gradient":return new Ho({colorsteps:n,radialType:o,radialPosition:l});case"repeating-radial-gradient":return new Mo({colorsteps:n,radialType:o,radialPosition:l});case"conic-gradient":return new Fo({colorsteps:n,angle:i,radialPosition:l});case"repeating-conic-gradient":return new Uo({colorsteps:n,angle:i,radialPosition:l})}return new Lo}},{key:"@changeEmbedColorPicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$store.emit("setColorStepColor",e,t)}},{key:"@selectColorStep",value:function(e){this.EmbedColorPicker.setValue(e)}},{key:"@changeColorStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.image.reset(I({},e)),this.updateGradientPreview()}},{key:"updateGradientPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.image&&(this.refs.$gradientView.css("background-image",this.image.toString()),this.updateData(e))}},{key:"mousedown $gradientView",value:function(e){this.mouseDown=!0,this.mouseDownX=e.clientX,this.mouseDownY=e.clientY,this.rect=this.refs.$gradientView.rect()}},{key:"mousemove document",value:function(e){if(this.mouseDown){var t=this.rect.left,n=this.rect.right,i=this.rect.top,o=this.rect.bottom,l=Math.min(Math.max(t,e.clientX),n),r=Math.min(Math.max(i,e.clientY),o),a=Wo.percent((l-t)/(n-t)*100),s=Wo.percent((r-i)/(o-i)*100);this.$store.emit("changeRadialPosition",a,s)}}},{key:"mouseup document",value:function(e){this.mouseDown&&(this.mouseDown=!1,this.updateData(!0))}},{key:"updateData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.callbackChange(),e&&this.callbackLastUpdate()}}]),t}(Li),Po={createGradientPicker:function(e){return new $o(e)}},Bo=I({},di,yo,Po);return Bo}();const UE=NZ(FE.exports),OE=Cc`
  position: absolute;
`,EE=(e,t)=>{const n=Ta(),{addUnsubscribe:i}=Hw(),o=Vo({x:e.x,y:e.y});return uo((()=>{const t=n.value,l=UE.create({container:t,type:"sketch",position:"inline",color:e.color||"",onChange:t=>{var n;null==(n=e.onChange)||n.call(e,t)},onLastUpdate:t=>{var n;null==(n=e.onLastUpdate)||n.call(e,t)}});if(e.viewport){const n=t.getBoundingClientRect(),i=e.x+n.width,l=e.y+n.height;if(e.viewport.width<i){const t=e.viewport.width-n.width;0<=t&&(o.x=t)}if(e.viewport.height<l){const t=e.viewport.height-n.height;0<=t&&(o.y=t)}}i((()=>{l.destroy(),t.removeChild(l.$root.el)}))})),()=>ac`
    <div
      class=${["color-picker",OE]}
      style=${{top:`${o.y}px`,left:`${o.x}px`}}
      ${Na(n)}
    ></div>
  `},$E={1:"ZeroOneN",[vg.ZeroOne]:"ZeroOne",[vg.ZeroN]:"ZeroN",[vg.OneOnly]:"OneOnly",[vg.OneN]:"OneN",32:"One",64:"N"};const PE=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`;function BE({editor:{focusTable:e},settings:{show:t,columnOrder:n},collections:i}){const o=[];if(!e||e.edit||0===e.selectColumnIds.length)return o;const l=Vn(i).collection("tableEntities").selectById(e.tableId);if(!l)return o;const r=Pu(e.selectColumnIds),a=Vn(i).collection("tableColumnEntities").selectByIds(l.columnIds).filter((e=>r(e.id))),s=MX(t,n);return a.map((e=>s.map((t=>{switch(t){case cg.columnName:return[zX.columnName,e.name];case cg.columnDataType:return[zX.columnDataType,e.dataType];case cg.columnDefault:return[zX.columnDefault,e.default];case cg.columnComment:return[zX.columnComment,e.comment];case cg.columnAutoIncrement:return[zX.columnAutoIncrement,Kg(e.options,Gg.autoIncrement)?"TRUE":"FALSE"];case cg.columnUnique:return[zX.columnUnique,Kg(e.options,Gg.unique)?"TRUE":"FALSE"];case cg.columnNotNull:return[zX.columnNotNull,Kg(e.options,Gg.notNull)?"NOT NULL":"NULL"];default:return["",""]}}))))}const AE=Pu(["true","1","yes","y"]),QE=Pu(["true","1","yes","y","not null"]);function DE(e,t,n,i=""){if(HX(i))switch(i){case zX.columnName:e.name=t;break;case zX.columnDataType:e.dataType=t;break;case zX.columnDefault:e.default=t;break;case zX.columnComment:e.comment=t;break;case zX.columnAutoIncrement:_E(t)&&(e.options|=Gg.autoIncrement);break;case zX.columnUnique:_E(t)&&(e.options|=Gg.unique);break;case zX.columnNotNull:QE(t.trim().toLowerCase())&&(e.options|=Gg.notNull)}else switch(n){case cg.columnName:e.name=t;break;case cg.columnDataType:e.dataType=t;break;case cg.columnDefault:e.default=t;break;case cg.columnComment:e.comment=t;break;case cg.columnAutoIncrement:_E(t)&&(e.options|=Gg.autoIncrement);break;case cg.columnUnique:_E(t)&&(e.options|=Gg.unique);break;case cg.columnNotNull:QE(t.trim().toLowerCase())&&(e.options|=Gg.notNull)}}function _E(e){return AE(e.trim().toLowerCase())}const qE=({editor:e,settings:t})=>n=>new uu((i=>n.subscribe({next:n=>{const o=e.openMap[sz],l=e.openMap[cz],r=e.openMap[hz],a=e.openMap[uz],s=e.openMap[pz];t.canvasType===rg.ERD&&!o&&!l&&!a&&!s&&!r&&i.next(n)},error:e=>i.error(e),complete:()=>i.complete()}))),e$=Pu([bw.relationshipZeroOne,bw.relationshipZeroN,bw.relationshipOneOnly,bw.relationshipOneN]),t$={[bw.relationshipZeroOne]:vg.ZeroOne,[bw.relationshipZeroN]:vg.ZeroN,[bw.relationshipOneOnly]:vg.OneOnly,[bw.relationshipOneN]:vg.OneN};function n$(e){const t=Lw(e),{addUnsubscribe:n}=Hw(),i=e=>{const{store:n}=t.value,{editor:i,settings:o}=n.state;Xv(o.zoomLevel)||(i.focusTable&&!i.focusTable.edit&&e.key!==Vv.Tab&&Sv(e.key)&&n.dispatch(mZ({moveKey:e.key,shiftKey:e.shiftKey})),i.focusTable&&e.key===Vv.Tab&&(e.preventDefault(),n.dispatch(NW(e.key,e.shiftKey)),setTimeout((()=>{!i.focusTable||$X(i.focusTable.focusType)||n.dispatch(bZ())}),1)))},o=({type:n})=>{const{store:i,emitter:o}=t.value,{editor:l,settings:r}=i.state,a=Xv(r.zoomLevel);if(!l.focusTable||!l.focusTable.edit){if(n===bw.addTable&&i.dispatch(JX()),n===bw.addColumn&&i.dispatch(BX()),n===bw.addMemo&&i.dispatch(wX()),n===bw.selectAllTable&&i.dispatch(iZ()),e$(n)){const e=t$[n];i.dispatch(KW(e))}if(n===bw.removeTable&&(e.host.dispatchEvent(dT()),i.dispatch(YW())),n===bw.tableProperties){const e=Object.entries(l.selectedMap).find((([,e])=>e===Iv));e&&(o.emit(zY({tableId:e[0]})),i.dispatch(XZ({[cz]:!0})))}n===bw.zoomIn&&i.dispatch(qW(.1)),n===bw.zoomOut&&i.dispatch(qW(-.1))}if(!a&&(l.focusTable&&!l.focusTable.edit&&(n===bw.selectAllColumn&&i.dispatch(yZ()),n===bw.removeColumn&&l.focusTable.selectColumnIds.length&&i.dispatch(AX(l.focusTable.tableId,l.focusTable.selectColumnIds)),n===bw.primaryKey&&l.focusTable.columnId&&i.dispatch(qX(l.focusTable.tableId,l.focusTable.columnId))),l.focusTable&&n===bw.edit)){const e=l.focusTable;e.edit?i.dispatch(fZ()):e.columnId&&$X(e.focusType)?i.dispatch(QX(e.focusType,e.tableId,e.columnId)):i.dispatch(bZ())}n===bw.stop&&(e.host.dispatchEvent(pT()),i.dispatch(ZZ(),TW())),n===bw.undo&&i.undo(),n===bw.redo&&i.redo()},l=e=>{const{store:n}=t.value,{editor:i,settings:o}=n.state;!Xv(o.zoomLevel)&&i.focusTable&&!i.focusTable.edit&&0!==i.focusTable.selectColumnIds.length&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",function(e){return BE(e).map((e=>e.map((([,e])=>e)).join("\t"))).join("\n")}(n.state)),e.clipboardData.setData("text/html",function(e){const t=BE(e);return 0===t.length?"":`<table><tbody>${t.map((e=>`<tr>${e.map((([e,t])=>`<td data-type="${e}">${t}</td>`)).join("")}</tr>`)).join("")}</tbody></table>`}(n.state)))},r=e=>{var n;const{store:i}=t.value,{editor:o,settings:l}=i.state;if(Xv(l.zoomLevel)||null!=(n=o.focusTable)&&n.edit||!e.clipboardData||0===Object.entries(o.selectedMap).filter((([,e])=>e===Iv)).length)return;const r=e.clipboardData.getData("text/html"),a=e.clipboardData.getData("text/plain");let s=[];r.trim()?s=function({settings:{show:e,columnOrder:t}},n){const i=MX(e,t),o=document.createElement("template");o.innerHTML=n;const l=o.content;return Array.from(l.querySelectorAll("tr")).map((e=>Array.from(e.querySelectorAll("td,th")).map((e=>{var t;return[(null==(t=e.dataset)?void 0:t.type)??"",e.textContent??""]})))).map((e=>{const t=hX();return i.forEach(((n,i)=>{const o=e[i];if(!o)return;const[l,r]=o,a=r.trim();DE(t,a,n,l)})),e.filter((([e])=>HX(e))).forEach((([e,n])=>{const i=n.trim();DE(t,i,0,e)})),t}))}(i.state,r):a.trim()&&(s=function({settings:{show:e,columnOrder:t}},n){const i=n.split("\n").map((e=>e.split("\t"))),o=MX(e,t);return i.map((e=>{const t=hX();return o.forEach(((n,i)=>{const o=e[i];if(!o)return;const l=o.trim();DE(t,l,n)})),t}))}(i.state,a)),0!==s.length&&(e.preventDefault(),i.dispatch(UX(s)))};uo((()=>{const{store:e,keydown$:a,shortcut$:s,emitter:c}=t.value;n(a.pipe(qE(e.state)).subscribe(i),s.pipe(qE(e.state)).subscribe(o),(e=>new uu((t=>e.on({copy:({payload:{event:e}})=>{t.next(e)}}))))(c).pipe(qE(e.state)).subscribe(l),(e=>new uu((t=>e.on({paste:({payload:{event:e}})=>{t.next(e)}}))))(c).pipe(qE(e.state)).subscribe(r))}))}const i$=(e,t)=>{const n=mF(t),i=Ta(),o=Ta(),l=Lw(t),r=Vo({dragSelect:!1,dragSelectX:0,dragSelectY:0,contextMenuType:eO,relationshipId:"",tableId:"",colorPickerShow:!1,colorPickerX:0,colorPickerY:0,colorPickerViewport:null,colorPickerInitialColor:"",tablePropertiesId:"",tablePropertiesIds:[],grabMove:!1,grabCursor:"grab",diffValue:"{}"});n$(t);const{addUnsubscribe:a}=Hw(),s=()=>{const{store:e}=l.value,{editor:t}=e.state,n=t.openMap[sz],i=t.openMap[cz],o=t.openMap[hz],r=t.openMap[pz];return n||i||o||r},c=e=>{const t=e.target;if(!t||s())return;const i=t.closest(".table"),o=t.closest(".relationship");i?(r.tableId=i.dataset.id,r.contextMenuType=tO):o?(r.relationshipId=o.dataset.id,r.contextMenuType=nO):r.contextMenuType=eO,n.onContextmenu(e)},u=()=>{n.state.show=!1},d=()=>{const{store:e}=l.value;e.dispatch(XZ({[pz]:!1})),r.diffValue="{}"},p=()=>{const{store:e}=l.value;e.dispatch(XZ({[hz]:!1}))},h=e=>{if(s())return;e.preventDefault();const t=kw(e),{store:n}=l.value;n.dispatch(t?qW(e.deltaY<0?.1:-.1):pG({movementX:-1*e.deltaX,movementY:-1*e.deltaY}))},m=({event:e,movementX:t,movementY:n})=>{const{store:o}=l.value;"mousemove"===e.type&&e.preventDefault(),(0!==t||0!==n)&&(o.dispatch(pG({movementX:t,movementY:n})),0===i.value.scrollTop&&0===i.value.scrollLeft||(i.value.scrollTop=0,i.value.scrollLeft=0))},b=e=>{const t=e.target;if(!t)return;const n=s(),o=!t.closest(".color-picker"),a=!t.closest(".table")&&!t.closest(".memo")&&!t.closest(".edit-input")&&!t.closest(".context-menu-content")&&!t.closest(".hide-sign")&&o,c=a&&o&&!t.closest(".minimap")&&!t.closest(".minimap-viewport")&&!t.closest(".virtual-scroll")&&!n;if(a){const{store:e}=l.value;e.dispatch(TW())}if(o){const{emitter:e}=l.value;e.emit(TY())}if(c)if(aT(e)&&kw(e)){const{x:t,y:n}=i.value.getBoundingClientRect();r.dragSelect=!0,r.dragSelectX=e.clientX-t,r.dragSelectY=e.clientY-n}else r.grabMove&&(r.grabCursor="grabbing"),ST.subscribe({next:m,complete:()=>{r.grabCursor="grab"}})},f=()=>{r.dragSelect=!1},y=e=>{const{store:t}=l.value;t.dispatch(HW(e))},g=e=>{const{store:t}=l.value;t.dispatch(e.map(EG))},v=e=>{r.tablePropertiesId=e},Z=e=>{const{store:t}=l.value,{history:n}=t;let i=0;for(;n.cursor!==e&&i<=mY;)n.cursor<e?n.redo():n.undo(),i++};let x=null;const G=()=>{null==x||x.unsubscribe(),x=null},X=()=>{const{store:e}=l.value,t=i.value;t&&(G(),x=eY(t,"mousemove").pipe($u(100,void 0,{leading:!1,trailing:!0})).subscribe((n=>{const i=t.getBoundingClientRect(),{settings:{scrollLeft:o,scrollTop:l,width:r,height:a,zoomLevel:s}}=e.state,c=Jg({x:n.clientX-i.x-o,y:n.clientY-i.y-l},r,a,s);e.dispatch(kZ(c))})))};return uo((()=>{const{store:t,emitter:n,keydown$:o}=l.value,s=i.value;e.mouseTracking&&X(),a(So(e).subscribe((t=>{"mouseTracking"===t&&(e.mouseTracking?X():G())})),n.on({openColorPicker:({payload:{x:e,y:n,color:i}})=>{const{editor:o}=t.state,l=s.getBoundingClientRect();r.colorPickerX=e-l.x,r.colorPickerY=n-l.y,r.colorPickerViewport=o.viewport,r.colorPickerInitialColor=i,r.colorPickerShow=!0},closeColorPicker:()=>{r.colorPickerShow=!1},openTableProperties:({payload:{tableId:e}})=>{const{doc:n}=t.state,i=r.tablePropertiesIds.filter((e=>n.tableIds.includes(e)));if(i.includes(e)){const t=i.indexOf(e);i.splice(t,1)}i.unshift(e),r.tablePropertiesIds=i.slice(0,5),r.tablePropertiesId=e},openDiffViewer:({payload:{value:e}})=>{r.diffValue=e,t.dispatch(XZ({[pz]:!0}))}}),o.pipe(Fu((e=>{const n=e.target;if(!n)return!1;const{editor:i,settings:o}=t.state,l=i.openMap[sz],r=i.openMap[cz],a=i.openMap[hz],s=i.openMap[pz];return!(o.canvasType!==rg.ERD||l||r||s||a)&&("Space"===e.code&&"DIV"===n.tagName)}))).subscribe((()=>{r.grabMove=!0})),mT.pipe(Fu((e=>"Space"===e.code))).subscribe((()=>{r.grabMove=!1})))})),()=>{const{store:t}=l.value,{editor:{drawRelationship:a,openMap:s}}=t.state,m=s[sz],x=s[cz],G=s[hz],X=s[pz],I=r.grabMove?r.grabCursor:a?`url("${function(e){const t=_T("base64",$E[e]);if(!t)return null;const[n,i,,,o]=t.icon;return o}(a.relationshipType)}") 16 16, auto`:"";return ac`
      <div
        class=${PE}
        style=${{cursor:I}}
        ${Na(i)}
        @contextmenu=${c}
        @mousedown=${n.onMousedown}
        @mousedown=${b}
        @touchstart=${b}
        @wheel=${h}
      >
        <${HK} root=${i} canvas=${o} grabMove=${r.grabMove} />
        <${zj} />
        <${PK} />
        <${bO} root=${i} />
        ${r.dragSelect?ac`
              <${cF}
                root=${i}
                x=${r.dragSelectX}
                y=${r.dragSelectY}
                .onDragSelectEnd=${f}
              />
            `:null}
        ${n.state.show?ac`
              <${iO}
                type=${r.contextMenuType}
                canvas=${o}
                relationshipId=${r.relationshipId}
                tableId=${r.tableId}
                .onClose=${u}
              />
            `:null}
        ${r.colorPickerShow?ac`
              <${EE}
                color=${r.colorPickerInitialColor}
                x=${r.colorPickerX}
                y=${r.colorPickerY}
                viewport=${r.colorPickerViewport}
                .onChange=${y}
              />
            `:null}
        ${m?ac`
              <div>
                <${Ij}
                  app=${l}
                  .onChange=${g}
                />
              </div>
            `:null}
        ${x?ac`
              <${RE}
                tableId=${r.tablePropertiesId}
                tableIds=${r.tablePropertiesIds}
                isDarkMode=${e.isDarkMode}
                .onChange=${v}
              />
            `:null}
        ${X?ac`
              <div>
                <${aF}
                  app=${l}
                  initialValue=${r.diffValue}
                  .onClose=${d}
                />
              </div>
            `:null}
        ${G?ac`
              <div>
                <${jE}
                  app=${l}
                  .onChange=${Z}
                  .onClose=${p}
                />
              </div>
            `:null}
      </div>
    `}};const o$="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Open Sans', system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji'";const l$=()=>{const e=function(){const e=document.createElement("style");return e.textContent="\np,\nol,\nul,\nli,\ndl,\ndt,\ndd,\nblockquote,\nfigure,\nfieldset,\nlegend,\ntextarea,\npre,\niframe,\nhr,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  margin: 0;\n  padding: 0;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: 100%;\n  font-weight: normal;\n}\n\nul {\n  list-style: none;\n}\n\nbutton,\ninput,\nselect,\ntextarea {\n  padding: 0;\n  border: none;\n  outline: none;\n  font-family: var(--text-font-family);\n  color: var(--active);\n  background-color: inherit;\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  font-family: var(--text-font-family);\n  color: var(--placeholder);\n  opacity: 1;\n}\n\ninput:disabled,\ntextarea:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n*, *::before, *::after {\n  box-sizing: border-box;\n}\n\nimg,\nvideo {\n  height: auto;\n  max-width: 100%;\n}\n\niframe {\n  border: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\ntd,\nth {\n  padding: 0;\n}\n\n:host {\n  font-family: var(--text-font-family);\n  color: var(--foreground);\n  fill: var(--foreground);\n  font-size: var(--font-size-2);\n  letter-spacing: var(--letter-spacing-2);\n  line-height: var(--line-height-2);\n  font-weight: var(--font-weight-regular);\n}\n",e}(),t=function(){const e=document.createElement("style");return e.textContent=`\n    :host {\n      --text-font-family: ${o$};\n      --code-font-family: 'Menlo', 'Consolas', 'Bitstream Vera Sans Mono', monospace, 'Apple Color Emoji', 'Segoe UI Emoji';\n    }\n  `,e}(),n=function(){const e=document.createElement("style");return e.textContent="\n    :host {\n      --font-size-1: 12px;\n      --font-size-2: 14px;\n      --font-size-3: 16px;\n      --font-size-4: 18px;\n      --font-size-5: 20px;\n      --font-size-6: 24px;\n      --font-size-7: 28px;\n      --font-size-8: 35px;\n      --font-size-9: 60px;\n      --letter-spacing-1: 0em;\n      --letter-spacing-2: 0em;\n      --letter-spacing-3: 0em;\n      --letter-spacing-4: -0.0025em;\n      --letter-spacing-5: -0.005em;\n      --letter-spacing-6: -0.00625em;\n      --letter-spacing-7: -0.0075em;\n      --letter-spacing-8: -0.01em;\n      --letter-spacing-9: -0.025em;\n      --line-height-1: 16px;\n      --line-height-2: 20px;\n      --line-height-3: 24px;\n      --line-height-4: 26px;\n      --line-height-5: 28px;\n      --line-height-6: 30px;\n      --line-height-7: 36px;\n      --line-height-8: 40px;\n      --line-height-9: 60px;\n      --font-weight-light: 300;\n      --font-weight-regular: 400;\n      --font-weight-medium: 500;\n      --font-weight-bold: 700;\n    }\n  ",e}(),i=function(){const e=document.createElement("style");return e.textContent="\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n::-webkit-scrollbar-track {\n  background: var(--scrollbar-track);\n}\n::-webkit-scrollbar-corner {\n  background: transparent;\n}\n::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb);\n}\n::-webkit-scrollbar-thumb:hover {\n  background: var(--scrollbar-thumb-hover);\n}\n\n.scrollbar {\n  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);\n  scrollbar-width: thin;\n}\n",e}(),o=function(){const e=document.createElement("style");return e.textContent="\n/* easylogic-colorpicker */\n.easylogic-colorpicker {\n  position: relative;\n  width: 224px;\n  z-index: 1000;\n  display: inline-block;\n  border: 1px solid var(--context-menu-border);\n  background-color: var(--context-menu-background);\n  border-radius: 3px;\n  -webkit-box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n  box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n  outline: none;\n  /* theme */\n}\n.easylogic-colorpicker > .arrow {\n  position: absolute;\n  top: -10px;\n  left: 7px;\n  width: 0;\n  height: 0;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  display: none;\n  border-bottom: 10px solid rgba(0, 0, 0, 0.2);\n  pointer-events: none;\n}\n.easylogic-colorpicker > .arrow:after {\n  position: absolute;\n  content: '';\n  top: 1px;\n  left: -9px;\n  width: 0;\n  height: 0;\n  border-left: 9px solid transparent;\n  border-right: 9px solid transparent;\n  border-bottom: 9px solid white;\n}\n.easylogic-colorpicker .colorpicker-body .arrow-button {\n  position: relative;\n  width: 10px;\n  height: 12px;\n  padding: 0px;\n  background-color: transparent;\n}\n.easylogic-colorpicker .colorpicker-body .arrow-button:before {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  height: 50%;\n  width: 0;\n  height: 0;\n  border-left: 3px solid transparent;\n  border-right: 3px solid transparent;\n  border-bottom: 3px solid var(--active);\n  pointer-events: none;\n  margin: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .arrow-button:after {\n  content: '';\n  display: inline-block;\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: 50%;\n  width: 0;\n  height: 0;\n  border-left: 3px solid transparent;\n  border-right: 3px solid transparent;\n  border-top: 3px solid var(--active);\n  pointer-events: none;\n  margin: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .color {\n  position: relative;\n  height: 120px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation > .value {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer {\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  > div {\n  border: 1px solid #ececec;\n  -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: absolute;\n  width: 10px;\n  height: 4px;\n  background-color: white;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .left-saturation {\n  left: 0%;\n  top: 50%;\n  -webkit-transform: translateX(calc(-100% - 4px)) translateY(-50%);\n  transform: translateX(calc(-100% - 4px)) translateY(-50%);\n  cursor: col-resize;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .right-saturation {\n  left: 100%;\n  top: 50%;\n  -webkit-transform: translateX(4px) translateY(-50%);\n  transform: translateX(4px) translateY(-50%);\n  cursor: col-resize;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .top-value {\n  width: 4px;\n  height: 10px;\n  left: 50%;\n  top: 0%;\n  -webkit-transform: translateX(-50%) translateY(calc(-100% - 4px));\n  transform: translateX(-50%) translateY(calc(-100% - 4px));\n  cursor: row-resize;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer\n  .bottom-value {\n  width: 4px;\n  height: 10px;\n  left: 50%;\n  top: 100%;\n  -webkit-transform: translateX(-50%) translateY(4px);\n  transform: translateX(-50%) translateY(4px);\n  cursor: row-resize;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation {\n  background-color: rgba(204, 154, 129, 0);\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(#fff),\n    to(rgba(204, 154, 129, 0))\n  );\n  background-image: linear-gradient(to right, #fff, rgba(204, 154, 129, 0));\n  background-repeat: repeat-x;\n}\n.easylogic-colorpicker .colorpicker-body .color > .saturation > .value {\n  background-image: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#000000),\n    to(rgba(204, 154, 129, 0))\n  );\n  background-image: linear-gradient(to top, #000000, rgba(204, 154, 129, 0));\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color\n  > .saturation\n  > .value\n  > .drag-pointer {\n  border: 1px solid #fff;\n  -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.05);\n}\n.easylogic-colorpicker .colorpicker-body .control {\n  position: relative;\n  padding: 10px 0px 10px 0px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.easylogic-colorpicker .colorpicker-body .control > .color,\n.easylogic-colorpicker .colorpicker-body .control > .empty {\n  position: absolute;\n  left: 12px;\n  top: 14px;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .control > .color2,\n.easylogic-colorpicker .colorpicker-body .control > .empty2 {\n  position: absolute;\n  left: 12px;\n  top: 50px;\n  width: 30px;\n  height: 20px;\n  border-radius: 4px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .colorpicker-body .control > .color {\n  border: 1px solid rgba(0, 0, 0, 0.1);\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue {\n  position: relative;\n  padding: 3px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue > .hue-container {\n  position: relative;\n  width: 100%;\n  height: 14px;\n  border-radius: 3px;\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue-scale {\n  position: relative;\n  padding: 3px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .hue-scale\n  > .hue-scale-container {\n  position: relative;\n  width: 100%;\n  height: 14px;\n}\n.easylogic-colorpicker .colorpicker-body .control > .opacity {\n  position: relative;\n  padding: 3px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .opacity\n  > .opacity-container {\n  position: relative;\n  width: 100%;\n  height: 14px;\n  border-radius: 3px;\n}\n.easylogic-colorpicker .colorpicker-body .control .drag-bar,\n.easylogic-colorpicker .colorpicker-body .control .drag-bar2 {\n  position: absolute;\n  cursor: pointer;\n  top: 50%;\n  left: 0px;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n}\n.easylogic-colorpicker .colorpicker-body .control > .hue > .hue-container {\n  background: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to right,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .opacity\n  > .opacity-container {\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .control\n  > .opacity\n  > .opacity-container\n  > .color-bar {\n  position: absolute;\n  display: block;\n  content: '';\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: 0px;\n}\n.easylogic-colorpicker .colorpicker-body .control > .empty,\n.easylogic-colorpicker .colorpicker-body .control > .empty2 {\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker .colorpicker-body .control .drag-bar,\n.easylogic-colorpicker .colorpicker-body .control .drag-bar2 {\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  -webkit-box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.2);\n  box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.2);\n  background-color: #fefefe;\n}\n.easylogic-colorpicker .colorpicker-body .information {\n  /*border-top: 1px solid #e8e8e8;*/\n  position: relative;\n  -webkit-box-sizing: padding-box;\n  box-sizing: padding-box;\n}\n.easylogic-colorpicker .colorpicker-body .information > input {\n  position: absolute;\n  font-size: 10px;\n  height: 20px;\n  bottom: 20px;\n  padding: 0 0 0 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n.easylogic-colorpicker .colorpicker-body .information > input[type='number'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > input[type='number']::-webkit-inner-spin-button,\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > input[type='number']::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  appearance: none;\n  margin: 0;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information.hex\n  > .information-item.hex {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information.rgb\n  > .information-item.rgb {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information.hsl\n  > .information-item.hsl {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.easylogic-colorpicker .colorpicker-body .information > .information-item {\n  display: none;\n  position: relative;\n  padding: 0px 5px;\n  padding-left: 9px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin-right: 40px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field {\n  display: block;\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  padding: 3px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: relative;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  > .title {\n  text-align: center;\n  font-size: 12px;\n  color: #a9a9a9;\n  padding-top: 2px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input {\n  text-align: center;\n  width: 100%;\n  padding: 3px;\n  height: 21px;\n  font-size: 11px;\n  color: var(--foreground);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n  border: 1px solid var(--context-menu-border);\n  border-radius: 2px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input[type='number'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input[type='number']::-webkit-inner-spin-button,\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  input[type='number']::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  appearance: none;\n  margin: 0;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field.hsl-l\n  input[type='number'],\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field.hsl-s\n  input[type='number'] {\n  padding-left: 1px;\n  padding-right: 10px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-item\n  > .input-field\n  .postfix {\n  display: inline-block;\n  position: absolute;\n  right: 3px;\n  top: 2px;\n  height: 21px;\n  line-height: 2;\n  padding: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  text-align: center;\n  font-size: 11px;\n}\n.easylogic-colorpicker .colorpicker-body .information > .information-change {\n  position: absolute;\n  display: block;\n  width: 40px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  text-align: center;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  padding-top: 5px;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .information\n  > .information-change\n  > .format-change-button {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  background: transparent;\n  border: 0px;\n  cursor: pointer;\n  outline: none;\n}\n.easylogic-colorpicker .colorpicker-body .information > .title {\n  color: #a3a3a3;\n}\n.easylogic-colorpicker .colorpicker-body .information > .input {\n  color: var(--foreground);\n}\n.easylogic-colorpicker .colorpicker-body .colorsets {\n  border-top: 1px solid var(--context-menu-border);\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .menu {\n  float: right;\n  padding: 10px 5px;\n  padding-right: 15px;\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .menu button {\n  border: 0px;\n  font-size: 14px;\n  font-weight: 300;\n  font-family: serif, sans-serif;\n  outline: none;\n  cursor: pointer;\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .color-list {\n  margin-right: 30px;\n  display: block;\n  padding: 12px 0px 0px 12px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  line-height: 0;\n}\n.easylogic-colorpicker .colorpicker-body .colorsets > .color-list h6 {\n  margin-top: 0px;\n  margin-bottom: 8px;\n  display: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item {\n  width: 13px;\n  height: 13px;\n  border-radius: 2px;\n  display: inline-block;\n  margin-right: 12px;\n  margin-bottom: 12px;\n  position: relative;\n  background-size: contain;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  vertical-align: middle;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item:hover {\n  -webkit-transform: scale(1.2);\n  transform: scale(1.2);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item\n  .empty {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n  pointer-events: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .color-item\n  .color-view {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n  pointer-events: none;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .colorsets\n  > .color-list\n  .add-color-item {\n  width: 13px;\n  height: 13px;\n  display: inline-block;\n  margin-right: 12px;\n  margin-bottom: 12px;\n  cursor: pointer;\n  line-height: 1;\n  text-align: center;\n  font-size: 16px;\n  font-weight: 400;\n  font-family: serif, sans-serif;\n  color: var(--foreground);\n  vertical-align: middle;\n}\n.easylogic-colorpicker .colorpicker-body .color-chooser {\n  position: absolute;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  top: 0px;\n  opacity: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-transition: opacity 0.05s ease-out;\n  transition: opacity 0.05s ease-out;\n  pointer-events: none;\n}\n.easylogic-colorpicker .colorpicker-body .color-chooser.open {\n  opacity: 1;\n  pointer-events: all;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container {\n  position: absolute;\n  top: 120px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  background-color: var(--context-menu-background);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-item-header {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  height: 34px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 3px 0px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-item-header\n  .title {\n  -webkit-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n  font-weight: bold;\n  font-size: 15px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin-right: 30px;\n  vertical-align: middle;\n  margin: 0px;\n  padding: 5px;\n  padding-left: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--active);\n  text-align: left;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-item-header\n  .items {\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  text-align: right;\n  padding-right: 10px;\n  display: block;\n  height: 100%;\n  line-height: 2;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list {\n  position: absolute;\n  top: 34px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  overflow: auto;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item {\n  cursor: pointer;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 3px 0px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .title {\n  -webkit-box-flex: 2;\n  -ms-flex: 2;\n  flex: 2;\n  font-size: 14px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  margin-right: 30px;\n  vertical-align: middle;\n  pointer-events: none;\n  margin: 0px;\n  padding: 5px;\n  padding-left: 14px;\n  font-weight: normal;\n  font-size: 13px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: var(--active);\n  text-align: left;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .items {\n  -webkit-box-flex: 3;\n  -ms-flex: 3;\n  flex: 3;\n  display: block;\n  height: 100%;\n  line-height: 1.6;\n  cursor: pointer;\n  pointer-events: none;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .items\n  .color-item {\n  width: 13px;\n  height: 13px;\n  border-radius: 3px;\n  display: inline-block;\n  margin-right: 10px;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  background-size: contain;\n  border: 1px solid #dddddd;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  vertical-align: middle;\n}\n.easylogic-colorpicker\n  .colorpicker-body\n  .color-chooser\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item\n  .items\n  .color-item\n  .color-view {\n  width: 100%;\n  height: 100%;\n  padding: 0px;\n  margin: 0px;\n  pointer-events: none;\n}\n.easylogic-colorpicker .gradient-editor {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.easylogic-colorpicker .gradient-editor .tools {\n  padding: 4px 6px;\n}\n.easylogic-colorpicker .gradient-editor .unit {\n  display: grid;\n  grid-template-columns: 1fr 50px 50px;\n  grid-column-gap: 5px;\n  font-size: 11px;\n}\n.easylogic-colorpicker .gradient-editor .unit input,\n.easylogic-colorpicker .gradient-editor .unit select {\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker .gradient-editor [data-editor] {\n  display: none;\n  margin-top: 2px;\n}\n.easylogic-colorpicker .gradient-editor [data-editor] > label {\n  font-size: 11px;\n  vertical-align: middle;\n}\n.easylogic-colorpicker .gradient-editor [data-editor] > label > * {\n  vertical-align: middle;\n}\n.easylogic-colorpicker\n  .gradient-editor:not([data-selected-editor*='static-gradient'])\n  [data-editor='gradient'],\n.easylogic-colorpicker\n  .gradient-editor:not([data-selected-editor*='static-gradient'])\n  [data-editor='tools'] {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='linear-gradient']\n  [data-editor='angle'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-linear-gradient']\n  [data-editor='angle'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='conic-gradient']\n  [data-editor='angle'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-conic-gradient']\n  [data-editor='angle'] {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='centerY'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='centerY'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='conic-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='conic-gradient']\n  [data-editor='centerY'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-conic-gradient']\n  [data-editor='centerX'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-conic-gradient']\n  [data-editor='centerY'] {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='radialType'],\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='radialType'] {\n  margin-top: 5px;\n  display: grid;\n  grid-template-columns: 1fr 105px;\n  grid-column-gap: 2px;\n}\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='radial-gradient']\n  [data-editor='radialType']\n  select,\n.easylogic-colorpicker\n  .gradient-editor[data-selected-editor='repeating-radial-gradient']\n  [data-editor='radialType']\n  select {\n  width: 100%;\n}\n.easylogic-colorpicker .gradient-editor .sub-editor {\n  padding: 0px 8px;\n}\n.easylogic-colorpicker .gradient-editor .gradient-steps {\n  position: relative;\n  height: 30px;\n}\n.easylogic-colorpicker .gradient-editor .hue-container,\n.easylogic-colorpicker .gradient-editor .hue {\n  position: absolute;\n  left: 10px;\n  right: 10px;\n  top: 4px;\n  height: 14px;\n  border-radius: 10px;\n  border: 1px solid #cccccc;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  pointer-events: all;\n}\n.easylogic-colorpicker .gradient-editor .hue {\n  pointer-events: none;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  border-radius: 10px;\n  pointer-events: none;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='0']\n  [data-index='0'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='0']\n  [data-index='0']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='1']\n  [data-index='1'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='1']\n  [data-index='1']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='2']\n  [data-index='2'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='2']\n  [data-index='2']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='3']\n  [data-index='3'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='3']\n  [data-index='3']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='4']\n  [data-index='4'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='4']\n  [data-index='4']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='5']\n  [data-index='5'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='5']\n  [data-index='5']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='6']\n  [data-index='6'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='6']\n  [data-index='6']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='7']\n  [data-index='7'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='7']\n  [data-index='7']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='8']\n  [data-index='8'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='8']\n  [data-index='8']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='9']\n  [data-index='9'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='9']\n  [data-index='9']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='10']\n  [data-index='10'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='10']\n  [data-index='10']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='11']\n  [data-index='11'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='11']\n  [data-index='11']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='12']\n  [data-index='12'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='12']\n  [data-index='12']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='13']\n  [data-index='13'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='13']\n  [data-index='13']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='14']\n  [data-index='14'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='14']\n  [data-index='14']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='15']\n  [data-index='15'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='15']\n  [data-index='15']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='16']\n  [data-index='16'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='16']\n  [data-index='16']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='17']\n  [data-index='17'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='17']\n  [data-index='17']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='18']\n  [data-index='18'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='18']\n  [data-index='18']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='19']\n  [data-index='19'] {\n  border: 0px;\n  -webkit-transform: translateX(-50%) translateY(calc(100%));\n  transform: translateX(-50%) translateY(calc(100%));\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list[data-selected-index='19']\n  [data-index='19']\n  .arrow {\n  display: block;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list .step {\n  pointer-events: all;\n  width: 10px;\n  height: 10px;\n  border: 1px solid white;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  border-radius: 100%;\n  -webkit-box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.5);\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list\n  .step[data-cut='true'] {\n  border-radius: 0%;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  .hue\n  .step-list\n  .step[data-cut='true']\n  .color-view {\n  border-radius: 0%;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list .step .color-view {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  bottom: 0px;\n  right: 0px;\n  border-radius: 100%;\n  pointer-events: none;\n}\n.easylogic-colorpicker .gradient-editor .hue .step-list .step .arrow {\n  position: absolute;\n  left: 50%;\n  display: none;\n  top: 0%;\n  width: 5px;\n  height: 5px;\n  -webkit-transform: translateX(-50%) translateY(-120%);\n  transform: translateX(-50%) translateY(-120%);\n  pointer-events: none;\n  -webkit-clip-path: polygon(40% 0%, 60% 0%, 60% 100%, 40% 100%);\n  clip-path: polygon(40% 0%, 60% 0%, 60% 100%, 40% 100%);\n}\n.easylogic-colorpicker .gradient-editor input[type='range'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  width: 100%;\n  margin: 6.2px 0;\n  background-color: transparent;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']:focus {\n  outline: none;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-webkit-slider-runnable-track {\n  width: 100%;\n  height: 1px;\n  cursor: pointer;\n  background: #556375;\n  border-radius: 0px;\n  border: 0px solid #010101;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-webkit-slider-thumb {\n  height: 10px;\n  width: 10px;\n  border-radius: 10px;\n  background: #556375;\n  cursor: pointer;\n  -webkit-appearance: none;\n  appearance: none;\n  margin-top: -5px;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']:focus::-webkit-slider-runnable-track {\n  background: #3174ad;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-moz-range-track {\n  width: 100%;\n  height: 1px;\n  cursor: pointer;\n  background: #556375;\n  border-radius: 0px;\n  border: 0px solid #010101;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']::-moz-range-thumb {\n  border: 1px solid #000000;\n  height: 10px;\n  width: 10px;\n  border-radius: 9px;\n  background: #556375;\n  cursor: pointer;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-track {\n  width: 100%;\n  height: 1px;\n  cursor: pointer;\n  background: transparent;\n  border-color: transparent;\n  color: transparent;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-fill-lower {\n  background: #556375;\n  border: 0px solid #010101;\n  border-radius: 0px;\n  box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-fill-upper {\n  background: #556375;\n  border: 0px solid #010101;\n  border-radius: 0px;\n}\n.easylogic-colorpicker .gradient-editor input[type='range']::-ms-thumb {\n  height: 10px;\n  width: 10px;\n  border-radius: 9px;\n  background: #556375;\n  cursor: pointer;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']:focus::-ms-fill-lower {\n  background: #556375;\n}\n.easylogic-colorpicker\n  .gradient-editor\n  input[type='range']:focus::-ms-fill-upper {\n  background: #556375;\n}\n.easylogic-colorpicker .gradient-editor .right-menu {\n  display: inline-block;\n  float: right;\n}\n.easylogic-colorpicker .gradient-editor .right-menu button {\n  font-size: 11px;\n  background-color: transparent;\n  border: 0px;\n}\n.easylogic-colorpicker.gradient-picker {\n  width: 460px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.gradient-picker .gradient-body {\n  display: grid;\n  grid-template-columns: 1fr 224px;\n}\n.easylogic-colorpicker.gradient-picker .gradient-body > div:first-child {\n  padding: 5px;\n  border-right: 1px solid #cccccc;\n}\n.easylogic-colorpicker.gradient-picker .popup-item {\n  margin-bottom: 5px;\n}\n.easylogic-colorpicker.gradient-picker .grid-2 {\n  display: grid;\n  grid-template-columns: 60px 1fr;\n}\n.easylogic-colorpicker.gradient-picker .grid-2 label {\n  font-size: 11px;\n  padding-right: 2px;\n  text-align: left;\n}\n.easylogic-colorpicker.gradient-picker label {\n  font-size: 11px;\n}\n.easylogic-colorpicker.gradient-picker .gradient-preview {\n  width: 100%;\n  height: 100px;\n  position: relative;\n  margin-bottom: 5px;\n  border: 1px solid #cccccc;\n  border-radius: 3px;\n  overflow: hidden;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker.gradient-picker .gradient-preview .gradient-view {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n}\n.easylogic-colorpicker.gradient-picker .picker-tab {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.easylogic-colorpicker.gradient-picker .picker-tab .picker-tab-list {\n  text-align: center;\n  padding: 2px 5px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='linear-gradient']\n  .picker-tab-item[data-selected-value='linear-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='linear-gradient']\n  .picker-tab-item[data-selected-value='linear-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-linear-gradient']\n  .picker-tab-item[data-selected-value='repeating-linear-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-linear-gradient']\n  .picker-tab-item[data-selected-value='repeating-linear-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='radial-gradient']\n  .picker-tab-item[data-selected-value='radial-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='radial-gradient']\n  .picker-tab-item[data-selected-value='radial-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-radial-gradient']\n  .picker-tab-item[data-selected-value='repeating-radial-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-radial-gradient']\n  .picker-tab-item[data-selected-value='repeating-radial-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='conic-gradient']\n  .picker-tab-item[data-selected-value='conic-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='conic-gradient']\n  .picker-tab-item[data-selected-value='conic-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-conic-gradient']\n  .picker-tab-item[data-selected-value='repeating-conic-gradient'] {\n  -webkit-box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list[data-value='repeating-conic-gradient']\n  .picker-tab-item[data-selected-value='repeating-conic-gradient']\n  .icon\n  svg\n  path {\n  fill: rgba(0, 0, 255, 0.5);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item {\n  display: inline-block;\n  vertical-align: middle;\n  height: 20px;\n  width: 20px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n  position: relative;\n  border-radius: 20%;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item\n  .icon {\n  pointer-events: none;\n  border-radius: 100%;\n  display: inline-block;\n  width: 90%;\n  height: 90%;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item\n  .icon\n  svg {\n  width: 100%;\n  height: 100%;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='static-gradient']\n  .icon {\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(red),\n    to(red)\n  );\n  background-image: linear-gradient(to right, red, red);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='linear-gradient']\n  .icon {\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(black),\n    to(gray)\n  );\n  background-image: linear-gradient(to right, black, gray);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='radial-gradient']\n  .icon {\n  background-image: radial-gradient(closest-side, black, #ebf8e1, gray);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='conic-gradient']\n  .icon {\n  background-image: conic-gradient(black, #ebf8e1);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='repeating-linear-gradient']\n  .icon {\n  background-image: repeating-linear-gradient(\n    45deg,\n    #3f87a6,\n    #ebf8e1 15%,\n    #f69d3c 20%\n  );\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='repeating-radial-gradient']\n  .icon {\n  background-image: repeating-radial-gradient(\n    circle,\n    #3f87a6,\n    #ebf8e1 15%,\n    #f69d3c 20%\n  );\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-tab-list\n  .picker-tab-item[data-selected-value='repeating-conic-gradient']\n  .icon {\n  background-image: repeating-conic-gradient(\n    #3f87a6,\n    #ebf8e1 5%,\n    #f69d3c 10%\n  );\n}\n.easylogic-colorpicker.gradient-picker .picker-tab .picker-gradient-selector {\n  padding: 2px 10px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps {\n  position: relative;\n  display: block;\n  height: 30px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue-container {\n  width: 100%;\n  height: 14px;\n  position: absolute;\n  z-index: 0;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  -webkit-box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.1);\n  box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.1);\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue {\n  position: relative;\n  padding: 0px;\n  margin: 0px;\n  cursor: pointer;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  > .step-list {\n  position: relative;\n  width: 100%;\n  cursor: copy;\n  height: 14px;\n  z-index: 1;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  > .step-list.mode-drag {\n  cursor: pointer;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar {\n  border: 0px;\n  background-color: transparent;\n  border: 2px solid white;\n  -webkit-box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.6);\n  box-shadow: 0 0 2px 0px rgba(0, 0, 0, 0.6);\n  width: 10px;\n  height: 10px;\n  -webkit-transform: none;\n  transform: none;\n  border-radius: 50%;\n  display: inline-block;\n  left: 0px;\n  top: 17px;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.8);\n  cursor: pointer;\n  -webkit-transition: top 0.3s ease-out;\n  transition: top 0.3s ease-out;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar\n  .guide-line {\n  pointer-events: none;\n  position: absolute;\n  width: 1px;\n  height: 0px;\n  bottom: 8px;\n  left: 3px;\n  -webkit-transform: translateX(-1px);\n  transform: translateX(-1px);\n  -webkit-transition: all 0.3s ease-out;\n  transition: all 0.3s ease-out;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar.selected {\n  z-index: 1;\n  top: 30px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar.selected\n  .guide-line {\n  height: 17px;\n}\n.easylogic-colorpicker.gradient-picker\n  .picker-tab\n  .picker-gradient-selector\n  .gradient-steps\n  .hue\n  .drag-bar.selected\n  .guide-change {\n  opacity: 1;\n}\n.easylogic-colorpicker.gradient-picker .easylogic-colorpicker {\n  width: 223px;\n  border-radius: 0px;\n  border-top-right-radius: 3px;\n  border-bottom-right-radius: 3px;\n  border: 0px;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.easylogic-colorpicker.sketch {\n  border-radius: 5px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .color {\n  margin: 10px 10px 2px 10px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  height: 150px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control {\n  padding: 0px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .color,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .empty {\n  position: absolute;\n  right: 10px;\n  left: auto;\n  top: 2px;\n  width: 40px;\n  height: 44px;\n  border-radius: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .color2,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .empty2 {\n  position: absolute;\n  right: 10px;\n  left: auto;\n  top: 50px;\n  width: 40px;\n  height: 20px;\n  border-radius: 2px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .color {\n  -webkit-box-shadow: inset 0px 0px 1px 0px rgba(0, 0, 0, 0.5);\n  box-shadow: inset 0px 0px 1px 0px rgba(0, 0, 0, 0.5);\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .hue {\n  position: relative;\n  padding: 2px 2px 2px 10px;\n  margin: 0px 50px 0px 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  > .hue\n  > .hue-container {\n  border-radius: 0px;\n  height: 20px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .hue-scale {\n  position: relative;\n  padding: 2px 2px 2px 10px;\n  margin: 0px 50px 0px 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  > .hue-scale\n  > .hue-scale-container {\n  border-radius: 0px;\n  height: 20px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control > .opacity {\n  position: relative;\n  padding: 2px 2px 2px 10px;\n  margin: 0px 50px 0px 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  > .opacity\n  > .opacity-container {\n  border-radius: 0px;\n  height: 20px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar2 {\n  border-radius: 0px;\n  top: 50%;\n  left: 0px;\n  width: 5px;\n  height: 80%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  border-radius: 1px;\n  bottom: 1px !important;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar.first,\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .control\n  .drag-bar2.first {\n  left: 0px;\n  -webkit-transform: translateX(50%) translateY(-50%) !important;\n  transform: translateX(50%) translateY(-50%) !important;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar.last,\n.easylogic-colorpicker.sketch > .colorpicker-body > .control .drag-bar2.last {\n  -webkit-transform: translateX(-110%) translateY(-50%) !important;\n  transform: translateX(-110%) translateY(-50%) !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-change {\n  display: none;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.rgb\n  .information-item.rgb {\n  display: inherit;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.rgb\n  .information-item.hsl {\n  display: none !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hex\n  .information-item.hex {\n  display: inherit;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hex\n  .information-item.hsl {\n  display: none !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hsl\n  .information-item.rgb {\n  display: none !important;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information.hsl\n  .information-item.hsl {\n  display: inherit;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item {\n  display: -webkit-inline-box !important;\n  display: -ms-inline-flexbox !important;\n  display: inline-flex !important;\n  margin-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field {\n  padding-left: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field:last-child {\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field\n  > .title {\n  color: var(--active);\n  font-size: 11px;\n  cursor: pointer;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item\n  > .input-field:last-child:not(:first-child) {\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item.hex {\n  width: 74px;\n  padding-right: 0px;\n  padding-left: 5px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item.rgb {\n  width: 140px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .information\n  .information-item.hsl {\n  display: none;\n  width: 140px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.easylogic-colorpicker.sketch > .colorpicker-body > .colorsets > .color-list {\n  margin-right: 0px;\n  padding-right: 12px;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  h6 {\n  margin-top: 0px;\n  margin-bottom: 8px;\n  display: none;\n}\n.easylogic-colorpicker.sketch\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  .color-item {\n  width: 16px;\n  height: 16px;\n  border-radius: 3px;\n  margin-right: 9px;\n  margin-bottom: 10px;\n}\n.easylogic-colorpicker.palette {\n  border-radius: 3px;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .color {\n  display: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .control {\n  display: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .information {\n  display: none;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .colorsets {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-top: 0px;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  h6 {\n  margin-top: 0px;\n  margin-bottom: 8px;\n  display: none;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .colorsets\n  > .color-list\n  .color-item {\n  width: 15px;\n  height: 15px;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .color-chooser {\n  display: none;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.palette > .colorpicker-body > .color-chooser.open {\n  display: block;\n  top: -1px;\n  left: -1px;\n  right: -1px;\n  bottom: auto;\n  border-radius: 3px;\n  border: 1px solid #d8d8d8;\n  -webkit-box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n  box-shadow: 0 0px 10px 2px rgba(0, 0, 0, 0.12);\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container {\n  position: relative;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto;\n  background-color: var(--context-menu-background);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 2px;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container\n  .colorsets-item-header {\n  position: relative;\n  left: auto;\n  top: auto;\n  right: auto;\n  bottom: auto;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container\n  .colorsets-list {\n  position: relative;\n  top: auto;\n  left: auto;\n  right: auto;\n  bottom: auto;\n  overflow: auto;\n}\n.easylogic-colorpicker.palette\n  > .colorpicker-body\n  > .color-chooser.open\n  .color-chooser-container\n  .colorsets-list\n  .colorsets-item:last-child {\n  border-bottom-left-radius: 3px;\n  border-bottom-right-radius: 3px;\n}\n.easylogic-colorpicker.macos .colorpicker-body .wheel {\n  width: 224px;\n  height: 224px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.macos .colorpicker-body .wheel .wheel-canvas {\n  width: 214px;\n  height: 214px;\n  border-radius: 50%;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n}\n.easylogic-colorpicker.macos .colorpicker-body .wheel .drag-pointer {\n  display: inline-block;\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 50%;\n  top: 50%;\n  border: 1px solid white;\n  border-radius: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  z-index: 2;\n}\n.easylogic-colorpicker.macos .control {\n  padding-top: 0px;\n}\n.easylogic-colorpicker.macos .control > .color,\n.easylogic-colorpicker.macos .control > .empty {\n  top: 4px;\n}\n.easylogic-colorpicker.macos .value {\n  position: relative;\n  padding: 6px 16px;\n  margin: 0px 0px 0px 42px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  cursor: pointer;\n}\n.easylogic-colorpicker.macos .value > .value-container {\n  position: relative;\n  width: 100%;\n  height: 10px;\n  border-radius: 3px;\n  background-image: -webkit-gradient(\n    linear,\n    left top,\n    right top,\n    from(#000000),\n    to(rgba(255, 255, 255, 0))\n  );\n  background-image: linear-gradient(\n    to right,\n    #000000 0%,\n    rgba(255, 255, 255, 0) 100%\n  );\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.macos .value > .value-container .drag-bar {\n  position: absolute;\n  cursor: pointer;\n  top: 50%;\n  left: 0px;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n}\n.easylogic-colorpicker.mini {\n  width: 180px;\n  display: inline-block;\n}\n.easylogic-colorpicker.mini .control {\n  padding: 0px;\n}\n.easylogic-colorpicker.mini .control .hue,\n.easylogic-colorpicker.mini .control .opacity {\n  margin: 0px;\n  padding: 0px;\n}\n.easylogic-colorpicker.mini .control .hue > .hue-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 20px;\n}\n.easylogic-colorpicker.mini .control .opacity > .opacity-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 20px;\n}\n.easylogic-colorpicker.mini .control .drag-bar,\n.easylogic-colorpicker.mini .control .drag-bar2 {\n  border: 0px;\n  background-color: transparent;\n  height: 100%;\n  width: 5px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n}\n.easylogic-colorpicker.mini .control .drag-bar.last:before,\n.easylogic-colorpicker.mini .control .drag-bar.lastafter,\n.easylogic-colorpicker.mini .control .drag-bar2.last:before,\n.easylogic-colorpicker.mini .control .drag-bar2.lastafter {\n  left: 1px;\n}\n.easylogic-colorpicker.mini .control .drag-bar.first:before,\n.easylogic-colorpicker.mini .control .drag-bar.first:after,\n.easylogic-colorpicker.mini .control .drag-bar2.first:before,\n.easylogic-colorpicker.mini .control .drag-bar2.first:after {\n  left: 3px;\n}\n.easylogic-colorpicker.mini .control .drag-bar:before,\n.easylogic-colorpicker.mini .control .drag-bar2:before {\n  content: '';\n  position: absolute;\n  left: 2px;\n  top: 0px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid black;\n}\n.easylogic-colorpicker.mini .control .drag-bar:after,\n.easylogic-colorpicker.mini .control .drag-bar2:after {\n  content: '';\n  position: absolute;\n  left: 2px;\n  bottom: 0px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid black;\n}\n.easylogic-colorpicker.mini-vertical {\n  width: 180px;\n  display: inline-block;\n}\n.easylogic-colorpicker.mini-vertical .color {\n  display: inline-block;\n  width: 140px;\n  height: 160px;\n  vertical-align: middle;\n}\n.easylogic-colorpicker.mini-vertical .control {\n  height: 160px;\n  padding: 0px;\n  vertical-align: middle;\n  display: inline-block;\n}\n.easylogic-colorpicker.mini-vertical .control .hue,\n.easylogic-colorpicker.mini-vertical .control .opacity {\n  margin: 0px;\n  padding: 0px;\n  width: 20px;\n  display: inline-block;\n  vertical-align: middle;\n  height: 100%;\n  position: relative;\n}\n.easylogic-colorpicker.mini-vertical .control .hue > .hue-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n  background: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to top,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker.mini-vertical .control .opacity > .opacity-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n  width: 20px;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2 {\n  border: 0px;\n  background-color: transparent;\n  height: 2px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  -webkit-transform: none;\n  transform: none;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar.last:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar.last:after,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.last:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.last:after {\n  top: 2px;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar.first:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar.first:after,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.first:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2.first:after {\n  top: -1px;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar:before,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2:before {\n  content: '';\n  position: absolute;\n  left: 0px;\n  top: 2px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-left: 4px solid black;\n}\n.easylogic-colorpicker.mini-vertical .control .drag-bar:after,\n.easylogic-colorpicker.mini-vertical .control .drag-bar2:after {\n  content: '';\n  position: absolute;\n  top: 2px;\n  right: 0px;\n  width: 0;\n  height: 0;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-right: 4px solid black;\n}\n.easylogic-colorpicker.ring .colorpicker-body > .color {\n  position: absolute;\n  width: 120px;\n  height: 120px;\n  left: 52px;\n  top: 52px;\n}\n.easylogic-colorpicker.ring .colorpicker-body .wheel {\n  width: 224px;\n  height: 224px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.easylogic-colorpicker.ring .colorpicker-body .wheel .wheel-canvas {\n  width: 214px;\n  height: 214px;\n  border-radius: 50%;\n  position: absolute;\n  left: 5px;\n  top: 5px;\n}\n.easylogic-colorpicker.ring .colorpicker-body .wheel .drag-pointer {\n  display: inline-block;\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  left: 50%;\n  top: 50%;\n  border: 1px solid white;\n  border-radius: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n  z-index: 2;\n}\n.easylogic-colorpicker.ring .control {\n  padding-top: 0px;\n}\n.easylogic-colorpicker.ring .control .value {\n  display: none;\n}\n.easylogic-colorpicker.ring .control > .color,\n.easylogic-colorpicker.ring .control > .empty {\n  top: -17px;\n  width: 30px;\n  height: 30px;\n  border-radius: 2px;\n}\n.easylogic-colorpicker.xd {\n  display: inline-block;\n  padding-top: 12px;\n  width: 245px;\n}\n.easylogic-colorpicker.xd .color {\n  display: inline-block;\n  margin-left: 12px;\n  margin-bottom: 12px;\n  width: 170px;\n  height: 170px;\n  vertical-align: middle;\n  border-radius: 3px;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #cecece;\n}\n.easylogic-colorpicker.xd .color > .saturation > .value > .drag-pointer {\n  border: 2px solid white;\n  width: 7px;\n  height: 7px;\n  -webkit-box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n  box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n}\n.easylogic-colorpicker.xd .control {\n  height: 170px;\n  padding: 0px;\n  vertical-align: middle;\n  display: inline-block;\n  margin-right: 12px;\n  margin-bottom: 12px;\n}\n.easylogic-colorpicker.xd .control .hue,\n.easylogic-colorpicker.xd .control .opacity {\n  margin: 0px;\n  padding: 0px;\n  width: 13px;\n  display: inline-block;\n  vertical-align: middle;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n  border-radius: 3px;\n  margin-left: 8px;\n}\n.easylogic-colorpicker.xd .control .hue > .hue-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n  background: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to top,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker.xd .control .opacity > .opacity-container {\n  border-radius: 0px;\n  overflow: hidden;\n  height: 100%;\n}\n.easylogic-colorpicker.xd .control .drag-bar,\n.easylogic-colorpicker.xd .control .drag-bar2 {\n  border: 0px;\n  background-color: transparent;\n  border: 2px solid white;\n  -webkit-box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n  box-shadow: 0 0 1px 0px black, inset 0 0 1px 0px black;\n  width: 10px;\n  height: 10px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-transform: none;\n  transform: none;\n  overflow: hidden;\n  left: 50%;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n.easylogic-colorpicker.xd .information {\n  margin-top: 5px;\n}\n.easylogic-colorpicker.vscode {\n  width: 336px;\n  display: inline-block;\n  background-color: #333;\n  border: 1px solid #ececec;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 0px;\n}\n.easylogic-colorpicker.vscode .colorpicker-body {\n  border-radius: 0px;\n  display: inline-block;\n}\n.easylogic-colorpicker.vscode .colorpicker-body .color-view {\n  height: 34px;\n  background-color: transparent;\n  background-image: linear-gradient(45deg, #ccc 25%, transparent 25%),\n    linear-gradient(-45deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%),\n    linear-gradient(-45deg, transparent 75%, #ccc 75%);\n  background-size: 10px 10px;\n  background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n}\n.easylogic-colorpicker.vscode\n  .colorpicker-body\n  .color-view\n  .color-view-container {\n  line-height: 34px;\n  font-size: 14px;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  text-shadow: 0 0 3px #535353;\n}\n.easylogic-colorpicker.vscode .colorpicker-body .color-tool {\n  padding: 8px;\n}\n.easylogic-colorpicker.vscode .color {\n  display: inline-block;\n  width: 240px;\n  height: 160px;\n  vertical-align: middle;\n}\n.easylogic-colorpicker.vscode .control {\n  height: 160px;\n  vertical-align: middle;\n  display: inline-block;\n  padding: 0px 0px 0px 4px;\n}\n.easylogic-colorpicker.vscode .control .hue,\n.easylogic-colorpicker.vscode .control .opacity {\n  margin: 0px;\n  padding: 0px;\n  width: 30px;\n  display: inline-block;\n  vertical-align: middle;\n  height: 100%;\n  position: relative;\n}\n.easylogic-colorpicker.vscode .control .hue {\n  padding-left: 5px;\n  width: 35px;\n}\n.easylogic-colorpicker.vscode .control .hue > .hue-container {\n  border-radius: 0px;\n  height: 100%;\n  background: -webkit-gradient(\n    linear,\n    left bottom,\n    left top,\n    from(#ff0000),\n    color-stop(17%, #ffff00),\n    color-stop(33%, #00ff00),\n    color-stop(50%, #00ffff),\n    color-stop(67%, #0000ff),\n    color-stop(83%, #ff00ff),\n    to(#ff0000)\n  );\n  background: linear-gradient(\n    to top,\n    #ff0000 0%,\n    #ffff00 17%,\n    #00ff00 33%,\n    #00ffff 50%,\n    #0000ff 67%,\n    #ff00ff 83%,\n    #ff0000 100%\n  );\n}\n.easylogic-colorpicker.vscode .control .opacity > .opacity-container {\n  border-radius: 0px;\n  height: 100%;\n  width: 30px;\n}\n.easylogic-colorpicker.vscode .control .drag-bar,\n.easylogic-colorpicker.vscode .control .drag-bar2 {\n  background-color: transparent;\n  height: 5px;\n  width: 33px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  -webkit-transform: translateY(-50%) translateX(-2px);\n  transform: translateY(-50%) translateX(-2px);\n  border: 1px solid rgba(255, 255, 255, 0);\n  border-radius: 0px;\n  -webkit-box-shadow: 0 0 2px 0 black, inset 0 0 0 0 black;\n  box-shadow: 0 0 2px 0 black, inset 0 0 0 0 black;\n}\n.easylogic-colorpicker.hide-colorsets .colorsets {\n  display: none !important;\n}\n\n.colorsets-contextmenu {\n  position: fixed;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-radius: 6px;\n  background-color: #ececec;\n  border: 1px solid #cccccc;\n  display: none;\n  list-style: none;\n  font-size: 13px;\n  padding-left: 0px;\n  padding-right: 0px;\n}\n.colorsets-contextmenu.show {\n  display: inline-block;\n}\n.colorsets-contextmenu .menu-item {\n  padding: 2px 20px;\n  cursor: default;\n}\n.colorsets-contextmenu .menu-item:hover {\n  background-color: #5ea3fb;\n  color: white;\n}\n.colorsets-contextmenu.small .menu-item.small-hide {\n  display: none;\n}\n",e}();return()=>ac`${e}${t}${n}${i}${o}`};function r$({store:e}){const{settings:t,doc:{tableIds:n},collections:i}=e.state;return t.canvasType!==rg.ERD?[]:Vn(i).collection("tableEntities").selectByIds(n).sort(Bj).map((e=>({name:by(e.name.trim())?"unnamed":e.name,keywords:"Table",perform:({store:t})=>{const{settings:{width:n,height:i,zoomLevel:o}}=t.state,{x:l,y:r}=Mg({x:e.ui.x-jg,y:e.ui.y-Fg},n,i,o);t.dispatch(dG({scrollLeft:-1*l,scrollTop:-1*r}),FX(e.id,!1))}})))}const a$=[{name:"Tab",next:[{icon:ac`<${qT} name="diagram-project" size=${16} />`,name:"Entity Relationship Diagram",perform:({store:e})=>{e.dispatch(bG({value:rg.ERD}))},filter:({store:e})=>e.state.settings.canvasType!==rg.ERD},{icon:ac`<${qT}
          prefix="mdi"
          name="chart-scatter-plot"
          size=${16}
        />`,name:"Visualization",perform:({store:e})=>{e.dispatch(bG({value:rg.visualization}))},filter:({store:e})=>e.state.settings.canvasType!==rg.visualization},{icon:ac`<${qT} prefix="mdi" name="database-export" size=${16} />`,name:"Schema SQL",perform:({store:e})=>{e.dispatch(bG({value:rg.schemaSQL}))},filter:({store:e})=>e.state.settings.canvasType!==rg.schemaSQL},{icon:ac`<${qT} name="file-code" size=${16} />`,name:"Generator Code",perform:({store:e})=>{e.dispatch(bG({value:rg.generatorCode}))},filter:({store:e})=>e.state.settings.canvasType!==rg.generatorCode},{icon:ac`<${qT} name="gear" size=${16} />`,name:"Settings",perform:({store:e})=>{e.dispatch(bG({value:rg.settings}))},filter:({store:e})=>e.state.settings.canvasType!==rg.settings}]}],s$=Cc`
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: start;
  justify-content: center;
  padding: 60px 16px 16px;
  z-index: 2147483647;

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.4);
  }
`,c$=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 600px;
  position: relative;
  z-index: 1;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  overflow: hidden;
`,u$=Cc`
  height: 50px;
  min-height: 50px;
  padding: 12px 16px;
  ${Ew};
`,d$=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-height: 400px;
  overflow: auto;
`,p$=Cc`
  display: flex;
  padding: 12px 16px;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  cursor: pointer;
  min-height: 45px;
  height: 45px;

  &:hover {
    background-color: var(--column-hover);
  }

  &.selected {
    background-color: var(--column-select);
  }
`,h$=Cc`
  display: flex;
  align-items: center;
  min-width: 14px;
  margin-right: 8px;
`,m$=Cc`
  overflow: hidden;
  text-overflow: ellipsis;
  ${Dw};
`,b$=Cc`
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--placeholder);
  ${_w};
`,f$=Cc`
  width: 8px;
  height: 100%;
`,y$=Cc`
  display: flex;
  align-items: center;
  margin-left: auto;
  padding-left: 24px;
`,g$=Pu(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"]),v$=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=Ta(),l=Vo({keyword:"",prevActions:[],actions:[],index:-1}),r=()=>l.actions.filter((e=>!e.filter||e.filter(n.value))),a=()=>{l.keyword="",l.index=-1},s=e=>{const t=e.trim();l.index=-1,l.actions=by(t)?l.prevActions:function(e,t){return new nK(e,{keys:["name","keywords"]}).search(t).map((e=>e.item))}(r(),t)},c=()=>{zi((()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.querySelector(".selected"))||t.scrollIntoView({block:"nearest"})}))},u=()=>{zi((()=>{t.host.dispatchEvent(dT())}))},d=()=>{const{store:e}=n.value;e.dispatch(XZ({[uz]:!1})),u()},p=e=>{var t;const i=r()[e];if(i)if(i.perform)i.perform(n.value),d();else if(i.next){l.prevActions=i.next,l.actions=i.next;const e=null==(t=o.value)?void 0:t.querySelector("input");e&&iK(e),a()}else d()},h={ArrowUp:e=>{const t=r();if(!t.length)return;e.preventDefault();const n=l.index-1;l.index=n<0?t.length-1:n,c()},ArrowDown:e=>{const t=r();if(!t.length)return;e.preventDefault();const n=l.index+1;l.index=n>t.length-1?0:n,c()},ArrowLeft:()=>{l.index=-1},ArrowRight:()=>{l.index=-1},Enter:e=>{-1!==l.index&&(e.stopPropagation(),p(l.index))}},m=e=>{var t;g$(e.key)&&(null==(t=h[e.key])||t.call(h,e))},b=e=>{const t=e.target;t&&(s(t.value),l.keyword=t.value)},f=()=>{const{store:e}=n.value,{editor:{focusTable:t,openMap:i}}=e.state;if(!t||!t.edit){const t=!i[uz];if(e.dispatch(XZ({[uz]:t})),t){const t=function(e){var t,n;const{store:i,keyBindingMap:o}=e,{settings:l}=i.state;return[...a$,{icon:ac`<${qT} prefix="mdi" name="database" size=${16} />`,name:"Database",next:CF.map((e=>({icon:e.value===l.database?ac`<${qT} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(mG({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===rg.ERD||e.state.settings.canvasType===rg.schemaSQL},{icon:ac`<${qT} name="file-import" size=${16} />`,name:"Import",next:[{icon:ac`<${qT} prefix="mdi" name="code-json" size=${16} />`,name:"json",perform:e=>{VF(e)}},{icon:ac`<${qT}
            prefix="mdi"
            name="database-import"
            size=${16}
          />`,name:"Schema SQL",perform:e=>{SF(e)}}],filter:({store:e})=>e.state.settings.canvasType===rg.ERD},{icon:ac`<${qT} name="file-export" size=${16} />`,name:"Export",next:[{icon:ac`<${qT} prefix="mdi" name="code-json" size=${16} />`,name:"json",perform:({store:e})=>{XU(ai(e.state),e.state.settings.databaseName)}},{icon:ac`<${qT}
            prefix="mdi"
            name="database-export"
            size=${16}
          />`,name:"Schema SQL",perform:({store:e})=>{IU(AU(e.state),e.state.settings.databaseName)}}],filter:({store:e})=>e.state.settings.canvasType===rg.ERD},{icon:ac`<${qT} name="table" size=${16} />`,name:"New Table",shortcut:null==(t=o.addTable[0])?void 0:t.shortcut,perform:({store:e})=>{e.dispatch(JX())},filter:({store:e})=>e.state.settings.canvasType===rg.ERD},{icon:ac`<${qT} name="note-sticky" size=${16} />`,name:"New Memo",shortcut:null==(n=o.addMemo[0])?void 0:n.shortcut,perform:({store:e})=>{e.dispatch(wX())},filter:({store:e})=>e.state.settings.canvasType===rg.ERD},...RF.map((e=>{var t;return{icon:ac`<${qT} prefix="base64" name=${e.iconName} size=${16} />`,name:e.name,keywords:"Relationship",shortcut:null==(t=o[e.keyBindingName][0])?void 0:t.shortcut,perform:({store:t})=>{t.dispatch(KW(e.relationshipType))},filter:({store:e})=>e.state.settings.canvasType===rg.ERD}})),{icon:ac`<${qT} prefix="mdi" name="atom" size=${16} />`,name:"Automatic Table Placement",perform:({store:e})=>{e.dispatch(XZ({[sz]:!0}))},filter:({store:e})=>e.state.settings.canvasType===rg.ERD},{icon:ac`<${qT} prefix="mdi" name="code-brackets" size=${16} />`,name:"Bracket",next:ZE.map((e=>({icon:e.value===l.bracketType?ac`<${qT} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(vG({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===rg.schemaSQL},{icon:ac`<${qT} name="code" size=${16} />`,name:"Language",next:HO.map((e=>({icon:e.value===l.language?ac`<${qT} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(fG({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===rg.generatorCode},{icon:ac`
        <${qT} prefix="mdi" name="format-letter-case" size=${16} />
      `,name:"Table Name Case",next:MO.map((e=>({icon:e.value===l.tableNameCase?ac`<${qT} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(yG({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===rg.generatorCode},{icon:ac`
        <${qT} prefix="mdi" name="format-letter-case" size=${16} />
      `,name:"Column Name Case",next:zO.map((e=>({icon:e.value===l.columnNameCase?ac`<${qT} name="check" size=${16} />`:null,name:e.name,perform:({store:t})=>{t.dispatch(gG({value:e.value}))}}))),filter:({store:e})=>e.state.settings.canvasType===rg.generatorCode},...r$(e)]}(n.value);l.prevActions=t,l.actions=t,a(),e.dispatch(XZ({[cz]:!1,[dz]:!1}))}else u()}},y=e=>{const t=e.target;t&&!t.closest(".quick-search")&&d()};return uo((()=>{const{shortcut$:e,emitter:t}=n.value;i(e.pipe(Fu((({type:e})=>e===bw.stop))).subscribe(d),e.pipe(Fu((({type:e})=>e===bw.search))).subscribe(f),t.on({toggleSearch:f}))})),()=>{const{store:e}=n.value,{editor:{openMap:t}}=e.state;return t[uz]?ac`
      <div class=${s$} @click=${y}>
        <div class=${["quick-search",c$]} ${Na(o)}>
          <${fO}
            class=${u$}
            placeholder="Search"
            autofocus=${!0}
            value=${l.keyword}
            .onInput=${b}
            .onKeydown=${m}
          />
          <div class=${["scrollbar",d$]}>
            ${r().map(((e,t)=>ac`
                <div
                  class=${[p$,{selected:t===l.index}]}
                  @click=${e=>{e.stopPropagation(),p(t)}}
                >
                  ${e.icon?ac`<div class=${h$}>${e.icon}</div>`:null}
                  <span class=${m$}>
                    <${pK}
                      searchWords=${[l.keyword]}
                      textToHighlight=${e.name}
                    />
                  </span>
                  ${e.keywords?ac`
                        <div class=${f$}></div>
                        <span class=${b$}>
                          <${pK}
                            searchWords=${[l.keyword]}
                            textToHighlight=${e.keywords}
                          />
                        </span>
                      `:null}
                  ${e.shortcut?ac`
                        <div class=${y$}>
                          <${fK} shortcut=${e.shortcut} />
                        </div>
                      `:null}
                </div>
              `))}
          </div>
        </div>
      </div>
    `:null}},Z$=Cc`
  background-color: var(--gray-color-6);
`,x$=Cc`
  width: 100%;
  height: 1px;
`,G$=(e,t)=>()=>ac`
    <div
      style=${{"padding-left":`${e.padding??0}px`,"padding-right":`${e.padding??0}px`}}
    >
      <div
        class=${[Z$,x$]}
        style=${{"margin-top":`${e.space??0}px`,"margin-bottom":`${e.space??0}px`}}
      ></div>
    </div>
  `,X$=Cc`
  position: relative;
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  outline: none;
  border-radius: 9999px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    transition: background-position, background-color, box-shadow, filter;
    transition-timing-function: linear, ease-in-out, ease-in-out, ease-in-out;
    background-repeat: no-repeat;
    background-color: var(--gray-color-3);
    background-image: linear-gradient(
      to right,
      var(--accent-color-9) 40%,
      transparent 60%
    );
    box-shadow: inset 0 0 0 1px var(--gray-color-6);
  }

  &[data-checked='true']::before {
    transition-duration: 0.16s, 0.14s, 0.14s, 0.14s;
    background-position: 0;
  }

  &[data-checked='false']::before {
    transition-duration: 0.12s, 0.14s, 0.14s, 0.14s;
    background-position-x: 100%;
  }
`,I$=Cc`
  width: 28px;
  height: 16px;

  &::before {
    background-size: calc(28px * 2 + 16px) 100%;
  }

  & > span {
    width: 14px;
    height: 14px;
  }

  & > span[data-checked] {
    transform: translateX(calc(28px - 14px - 1px));
  }
`,W$=Cc`
  width: 35px;
  height: 20px;

  &::before {
    background-size: calc(35px * 2 + 20px) 100%;
  }

  & > span {
    width: 18px;
    height: 18px;
  }

  & > span[data-checked] {
    transform: translateX(calc(35px - 18px - 1px));
  }
`,k$=Cc`
  width: 42px;
  height: 24px;

  &::before {
    background-size: calc(42px * 2 + 24px) 100%;
  }

  & > span {
    width: 22px;
    height: 22px;
  }

  & > span[data-checked] {
    transform: translateX(calc(42px - 22px - 1px));
  }
`,V$=Cc`
  background-color: #fff;
  position: relative;
  border-radius: 9999px;
  transition:
    transform 0.14s cubic-bezier(0.45, 0.05, 0.55, 0.95),
    box-shadow 0.14s ease-in-out;
  transform: translateX(1px);
`,S$=Object.freeze(Object.defineProperty({__proto__:null,size1:I$,size2:W$,size3:k$,switchButton:X$,switchThumb:V$},Symbol.toStringTag,{value:"Module"})),C$=(e,t)=>{const n=()=>{e.onChange(!e.value)};return()=>ac`
    <button
      class=${[X$,Reflect.get(S$,`size${e.size??"2"}`)]}
      type="button"
      data-checked=${e.value}
      @click=${n}
    >
      <span class=${V$} ?data-checked=${e.value}></span>
    </button>
  `},L$=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
`,R$=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
`,Y$=Cc`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  border-radius: 4px;
  cursor: default;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.selected {
    background-color: var(--context-menu-select);
    color: var(--active);
    fill: var(--active);
  }
`,w$={preferences:"Preferences",shortcuts:"Shortcuts"},T$=Object.values(w$),N$=(e,t)=>()=>ac`
    <div class=${L$}>
      <div class=${Pw}>Settings</div>
      <${G$} space=${12} />
      <div class=${["scrollbar",R$]}>
        ${T$.map((t=>ac`
            <div
              class=${[Y$,{selected:t===e.value}]}
              @click=${()=>e.onChange(t)}
            >
              ${t}
            </div>
          `))}
      </div>
    </div>
  `,K$=Cc`
  padding: 12px;
  height: 44px;
  box-shadow: inset 0 -1px var(--gray-color-5);
`,z$=Cc`
  width: 100%;
  text-align: left;
  vertical-align: top;
  border-collapse: collapse;
  border-radius: calc(var(--table-border-radius) - 1px);
  border-spacing: 0;
  box-sizing: border-box;
  height: 0;

  th {
    font-weight: var(--font-weight-bold);
    ${K$};
  }

  td {
    ${K$};
  }
`,H$=Cc`
  margin-bottom: 12px;

  &:last-child {
    margin-bottom: 0;
  }
`,M$=(e,t)=>{const n=Lw(t);return()=>ac`
      <table class=${z$}>
        <thead>
          <tr>
            <th>Command</th>
            <th>Keybinding</th>
          </tr>
        </thead>
        <tbody>
          ${(()=>{const{keyBindingMap:e}=n.value;return[{command:"Editing",shortcuts:e.edit},{command:"Stop",shortcuts:e.stop},{command:"Search",shortcuts:e.search},{command:"Undo",shortcuts:e.undo},{command:"Redo",shortcuts:e.redo},{command:"Add Table",shortcuts:e.addTable},{command:"Add Column",shortcuts:e.addColumn},{command:"Add Memo",shortcuts:e.addMemo},{command:"Remove Table, Memo",shortcuts:e.removeTable},{command:"Remove Column",shortcuts:e.removeColumn},{command:"Primary Key",shortcuts:e.primaryKey},{command:"Select All Table, Memo",shortcuts:e.selectAllTable},{command:"Select All Column",shortcuts:e.selectAllColumn},{command:"Relationship Zero One",shortcuts:e.relationshipZeroOne},{command:"Relationship Zero N",shortcuts:e.relationshipZeroN},{command:"Relationship One Only",shortcuts:e.relationshipOneOnly},{command:"Relationship One N",shortcuts:e.relationshipOneN},{command:"Table Properties",shortcuts:e.tableProperties},{command:"Zoom In",shortcuts:e.zoomIn},{command:"Zoom Out",shortcuts:e.zoomOut}]})().map((({command:e,shortcuts:t})=>ac`
              <tr>
                <td>${e}</td>
                <td>
                  ${t.map((({shortcut:e})=>ac`
                      <div class=${H$}>
                        <${fK} shortcut=${e} />
                      </div>
                    `))}
                </td>
              </tr>
            `))}
        </tbody>
      </table>
    `},J$=Cc`
  display: flex;
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  padding: 32px;
  background-color: var(--context-menu-background);

  .column-order-move {
    transition: transform 0.3s;
  }
`,j$=Cc`
  display: flex;
  width: 200px;
  height: 100%;
  overflow: hidden;
`,F$=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
  padding-left: 16px;
`,U$=Cc`
  display: flex;
  width: 100%;
  height: 100%;
  overflow: auto;
  flex-flow: wrap;
`,O$=Cc`
  margin: 0 32px 32px 0;
  min-width: 300px;
`,E$=Cc`
  display: flex;
  white-space: nowrap;
  height: 24px;
  align-items: center;
  margin-bottom: 16px;
`,$$=e=>Cc`
  width: ${e}px;
  height: 100%;
`,P$=Cc`
  display: flex;
  flex-direction: column;
  margin-bottom: 16px;
`,B$=Cc`
  display: flex;
  flex-direction: column;
`,A$=Cc`
  display: flex;
  align-items: center;
  padding: 0 12px;
  height: 32px;
  cursor: move;
  border-radius: 4px;

  &:hover {
    background-color: var(--context-menu-hover);
    color: var(--active);
    fill: var(--active);
  }

  &.none-hover {
    background-color: transparent;
    color: var(--foreground);
    fill: var(--foreground);
  }

  &.dragging {
    opacity: 0.5;
  }
`,Q$=(e,t)=>{const n=Lw(t),i=Ta(),o=new YK(i,`.${A$}`,"column-order-move"),l=Vo({lnb:w$.preferences}),r=e=>{const{store:t}=n.value;t.dispatch(ZG({value:e}))},a=()=>{const{store:e,emitter:t,toWidth:i}=n.value;jG(e.state,{toWidth:i}),fV(e.state),t.emit(NY({close:Dk(2e3),message:ac`<${az} title="Recalculated table width" />`}))},s=e=>{var t;const l=i.value,r=e.target;if(!l||!r)return;const a=null==(t=r.dataset)?void 0:t.id;if(!a)return;const s=Number(a),c=Array.from(l.querySelectorAll(`.${A$}`));c.forEach((e=>e.classList.add("none-hover"))),r.classList.add("dragging"),wK(c,(e=>e.dataset.id)).subscribe({next:e=>{((e,t)=>{const{store:i}=n.value;e!==t&&(o.snapshot(),i.dispatch(GG({value:e,target:t})))})(s,Number(e))},complete:()=>{r.classList.remove("dragging"),c.forEach((e=>e.classList.remove("none-hover")))}})};mo((()=>o.play()));const c=e=>{l.lnb=e},u=e=>{const{store:t}=n.value;t.dispatch(XG({value:e?Qg:-1}))},d=e=>{const t=e.target;if(!t)return;const i=cv(Number(rv(t.value))),{store:o}=n.value;t.value=pv(i),o.dispatch(XG({value:i}))},p=e=>{const{store:t}=n.value;t.dispatch(IG({saveSettingType:Wg.scroll,value:!e}))},h=e=>{const{store:t}=n.value;t.dispatch(IG({saveSettingType:Wg.zoomLevel,value:!e}))};return()=>{const{store:e}=n.value,{settings:t}=e.state,o=-1===t.maxWidthComment;return ac`
      <div class=${J$} ${Na(i)}>
        <div class=${j$}>
          <${N$} value=${l.lnb} .onChange=${c} />
        </div>
        <div class=${F$}>
          <div class=${Pw}>${l.lnb}</div>
          <${G$} space=${12} />
          <div class=${["scrollbar",U$]}>
            ${l.lnb===w$.preferences?ac`
                  <div class=${O$}>
                    <div class=${E$}>
                      <div>Relationship DataType Sync</div>
                      <div class=${$$(16)}></div>
                      <${C$}
                        value=${t.relationshipDataTypeSync}
                        .onChange=${r}
                      />
                    </div>

                    <div class=${E$}>
                      <div>Save Scroll Information</div>
                      <div class=${$$(16)}></div>
                      <${C$}
                        value=${!Kg(t.ignoreSaveSettings,Wg.scroll)}
                        .onChange=${p}
                      />
                    </div>

                    <div class=${E$}>
                      <div>Save Zoom Information</div>
                      <div class=${$$(16)}></div>
                      <${C$}
                        value=${!Kg(t.ignoreSaveSettings,Wg.zoomLevel)}
                        .onChange=${h}
                      />
                    </div>

                    <div class=${E$}>
                      <div>Maximum comment width</div>
                      <div class=${$$(16)}></div>
                      <${C$}
                        value=${!o}
                        .onChange=${u}
                      />
                      <div class=${$$(8)}></div>
                      <${fO}
                        title="Maximum comment width"
                        placeholder="Maximum comment width"
                        width=${45}
                        value=${pv(o?Qg:t.maxWidthComment)}
                        disabled=${o}
                        numberOnly=${!0}
                        .onChange=${d}
                      />
                    </div>

                    <div class=${E$}>
                      <div>Recalculation table width</div>
                      <div class=${$$(16)}></div>
                      <${tz}
                        variant="soft"
                        size="1"
                        text=${ac`
                          <${qT} size=${14} name="rotate" />
                          <div class=${$$(8)}></div>
                          <span>Sync</span>
                        `}
                        .onClick=${a}
                      />
                    </div>
                    <div class=${P$}>
                      <div>Column Order</div>
                      <${G$} space=${12} />
                      <div
                        class=${B$}
                        @dragenter=${lT}
                        @dragover=${lT}
                      >
                        ${Ja(t.columnOrder,(e=>e),(e=>ac`
                            <div
                              class=${A$}
                              draggable="true"
                              data-id=${e}
                              @dragstart=${s}
                            >
                              <${vF}
                                icon=${ac`<${qT} name="bars" size=${14} />`}
                                name=${Rg[e]}
                              />
                            </div>
                          `))}
                      </div>
                    </div>
                  </div>
                `:l.lnb===w$.shortcuts?ac`<${M$} />`:null}
          </div>
        </div>
      </div>
    `}},D$=["grayColor1","grayColor2","grayColor3","grayColor4","grayColor5","grayColor6","grayColor7","grayColor8","grayColor9","grayColor10","grayColor11","grayColor12","accentColor1","accentColor2","accentColor3","accentColor4","accentColor5","accentColor6","accentColor7","accentColor8","accentColor9","accentColor10","accentColor11","accentColor12","canvasBackground","canvasBoundaryBackground","tableBackground","tableSelect","tableBorder","memoBackground","memoSelect","memoBorder","columnSelect","columnHover","relationshipHover","toolbarBackground","contextMenuBackground","contextMenuSelect","contextMenuHover","contextMenuBorder","minimapBorder","minimapShadow","minimapViewportBorder","minimapViewportBorderHover","toastBackground","toastBorder","dargSelectBackground","dargSelectBorder","scrollbarTrack","scrollbarThumb","scrollbarThumbHover","foreground","active","placeholder","focus","inputActive","keyPK","keyFK","keyPFK","diffInsertBackground","diffDeleteBackground","diffCrossBackground","diffInsertForeground","diffDeleteForeground","diffCrossForeground"],_$=e=>()=>ac`
    <style>
      :host {
        ${(e=>Object.keys(e).map((t=>{const n=rY(t);return`--${n}: var(--erd-editor-${n}, ${Reflect.get(e,t)});`})).join("\n"))(e.theme)}
      }
    </style>
  `,q$={grayColor1:"gray-1",grayColor2:"gray-2",grayColor3:"gray-3",grayColor4:"gray-4",grayColor5:"gray-5",grayColor6:"gray-6",grayColor7:"gray-7",grayColor8:"gray-8",grayColor9:"gray-9",grayColor10:"gray-10",grayColor11:"gray-11",grayColor12:"gray-12",accentColor1:"accent-1",accentColor2:"accent-2",accentColor3:"accent-3",accentColor4:"accent-4",accentColor5:"accent-5",accentColor6:"accent-6",accentColor7:"accent-7",accentColor8:"accent-8",accentColor9:"accent-9",accentColor10:"accent-10",accentColor11:"accent-11",accentColor12:"accent-12",canvasBackground:"gray-3",canvasBoundaryBackground:"gray-1",tableBackground:"gray-2",tableSelect:"accent-8",tableBorder:"gray-6",memoBackground:"gray-2",memoSelect:"accent-8",memoBorder:"gray-6",columnSelect:"gray-5",columnHover:"gray-4",relationshipHover:"accent-8",toolbarBackground:"gray-1",contextMenuBackground:"gray-2",contextMenuSelect:"gray-4",contextMenuHover:"accent-7",contextMenuBorder:"gray-6",minimapBorder:"override-black",minimapShadow:"override-black",minimapViewportBorder:"accent-7",minimapViewportBorderHover:"accent-8",toastBackground:"gray-2",toastBorder:"gray-6",dargSelectBackground:"accent-5",dargSelectBorder:"accent-8",scrollbarTrack:"grayA-3",scrollbarThumb:"gray-9",scrollbarThumbHover:"gray-10",foreground:"gray-11",active:"gray-12",placeholder:"grayA-10",focus:"accent-8",inputActive:"accent-10",keyPK:"custom-amber--9",keyFK:"custom-ruby--9",keyPFK:"custom-cyan--9",diffInsertBackground:"custom-green--4",diffDeleteBackground:"custom-red--4",diffCrossBackground:"custom-blue--4",diffInsertForeground:"custom-green--11",diffDeleteForeground:"custom-red--11",diffCrossForeground:"custom-blue--11"},eP={amber:{amber1:"#fefdfb",amber2:"#fefbe9",amber3:"#fff7c2",amber4:"#ffee9c",amber5:"#fbe577",amber6:"#f3d673",amber7:"#e9c162",amber8:"#e2a336",amber9:"#ffc53d",amber10:"#ffba18",amber11:"#ab6400",amber12:"#4f3422"},amberA:{amberA1:"#c0800004",amberA2:"#f4d10016",amberA3:"#ffde003d",amberA4:"#ffd40063",amberA5:"#f8cf0088",amberA6:"#eab5008c",amberA7:"#dc9b009d",amberA8:"#da8a00c9",amberA9:"#ffb300c2",amberA10:"#ffb300e7",amberA11:"#ab6400",amberA12:"#341500dd"},amberDark:{amber1:"#16120c",amber2:"#1d180f",amber3:"#302008",amber4:"#3f2700",amber5:"#4d3000",amber6:"#5c3d05",amber7:"#714f19",amber8:"#8f6424",amber9:"#ffc53d",amber10:"#ffd60a",amber11:"#ffca16",amber12:"#ffe7b3"},amberDarkA:{amberA1:"#e63c0006",amberA2:"#fd9b000d",amberA3:"#fa820022",amberA4:"#fc820032",amberA5:"#fd8b0041",amberA6:"#fd9b0051",amberA7:"#ffab2567",amberA8:"#ffae3587",amberA9:"#ffc53d",amberA10:"#ffd60a",amberA11:"#ffca16",amberA12:"#ffe7b3"},blue:{blue1:"#fbfdff",blue2:"#f4faff",blue3:"#e6f4fe",blue4:"#d5efff",blue5:"#c2e5ff",blue6:"#acd8fc",blue7:"#8ec8f6",blue8:"#5eb1ef",blue9:"#0090ff",blue10:"#0588f0",blue11:"#0d74ce",blue12:"#113264"},blueA:{blueA1:"#0080ff04",blueA2:"#008cff0b",blueA3:"#008ff519",blueA4:"#009eff2a",blueA5:"#0093ff3d",blueA6:"#0088f653",blueA7:"#0083eb71",blueA8:"#0084e6a1",blueA9:"#0090ff",blueA10:"#0086f0fa",blueA11:"#006dcbf2",blueA12:"#002359ee"},blueDark:{blue1:"#0d1520",blue2:"#111927",blue3:"#0d2847",blue4:"#003362",blue5:"#004074",blue6:"#104d87",blue7:"#205d9e",blue8:"#2870bd",blue9:"#0090ff",blue10:"#3b9eff",blue11:"#70b8ff",blue12:"#c2e6ff"},blueDarkA:{blueA1:"#004df211",blueA2:"#1166fb18",blueA3:"#0077ff3a",blueA4:"#0075ff57",blueA5:"#0081fd6b",blueA6:"#0f89fd7f",blueA7:"#2a91fe98",blueA8:"#3094feb9",blueA9:"#0090ff",blueA10:"#3b9eff",blueA11:"#70b8ff",blueA12:"#c2e6ff"},bronze:{bronze1:"#fdfcfc",bronze2:"#fdf7f5",bronze3:"#f6edea",bronze4:"#efe4df",bronze5:"#e7d9d3",bronze6:"#dfcdc5",bronze7:"#d3bcb3",bronze8:"#c2a499",bronze9:"#a18072",bronze10:"#957468",bronze11:"#7d5e54",bronze12:"#43302b"},bronzeA:{bronzeA1:"#55000003",bronzeA2:"#cc33000a",bronzeA3:"#92250015",bronzeA4:"#80280020",bronzeA5:"#7423002c",bronzeA6:"#7324003a",bronzeA7:"#6c1f004c",bronzeA8:"#671c0066",bronzeA9:"#551a008d",bronzeA10:"#4c150097",bronzeA11:"#3d0f00ab",bronzeA12:"#1d0600d4"},bronzeDark:{bronze1:"#141110",bronze2:"#1c1917",bronze3:"#262220",bronze4:"#302a27",bronze5:"#3b3330",bronze6:"#493e3a",bronze7:"#5a4c47",bronze8:"#6f5f58",bronze9:"#a18072",bronze10:"#ae8c7e",bronze11:"#d4b3a5",bronze12:"#ede0d9"},bronzeDarkA:{bronzeA1:"#d1110004",bronzeA2:"#fbbc910c",bronzeA3:"#faceb817",bronzeA4:"#facdb622",bronzeA5:"#ffd2c12d",bronzeA6:"#ffd1c03c",bronzeA7:"#fdd0c04f",bronzeA8:"#ffd6c565",bronzeA9:"#fec7b09b",bronzeA10:"#fecab5a9",bronzeA11:"#ffd7c6d1",bronzeA12:"#fff1e9ec"},brown:{brown1:"#fefdfc",brown2:"#fcf9f6",brown3:"#f6eee7",brown4:"#f0e4d9",brown5:"#ebdaca",brown6:"#e4cdb7",brown7:"#dcbc9f",brown8:"#cea37e",brown9:"#ad7f58",brown10:"#a07553",brown11:"#815e46",brown12:"#3e332e"},brownA:{brownA1:"#aa550003",brownA2:"#aa550009",brownA3:"#a04b0018",brownA4:"#9b4a0026",brownA5:"#9f4d0035",brownA6:"#a04e0048",brownA7:"#a34e0060",brownA8:"#9f4a0081",brownA9:"#823c00a7",brownA10:"#723300ac",brownA11:"#522100b9",brownA12:"#140600d1"},brownDark:{brown1:"#12110f",brown2:"#1c1816",brown3:"#28211d",brown4:"#322922",brown5:"#3e3128",brown6:"#4d3c2f",brown7:"#614a39",brown8:"#7c5f46",brown9:"#ad7f58",brown10:"#b88c67",brown11:"#dbb594",brown12:"#f2e1ca"},brownDarkA:{brownA1:"#91110002",brownA2:"#fba67c0c",brownA3:"#fcb58c19",brownA4:"#fbbb8a24",brownA5:"#fcb88931",brownA6:"#fdba8741",brownA7:"#ffbb8856",brownA8:"#ffbe8773",brownA9:"#feb87da8",brownA10:"#ffc18cb3",brownA11:"#fed1aad9",brownA12:"#feecd4f2"},crimson:{crimson1:"#fffcfd",crimson2:"#fef7f9",crimson3:"#ffe9f0",crimson4:"#fedce7",crimson5:"#facedd",crimson6:"#f3bed1",crimson7:"#eaacc3",crimson8:"#e093b2",crimson9:"#e93d82",crimson10:"#df3478",crimson11:"#cb1d63",crimson12:"#621639"},crimsonA:{crimsonA1:"#ff005503",crimsonA2:"#e0004008",crimsonA3:"#ff005216",crimsonA4:"#f8005123",crimsonA5:"#e5004f31",crimsonA6:"#d0004b41",crimsonA7:"#bf004753",crimsonA8:"#b6004a6c",crimsonA9:"#e2005bc2",crimsonA10:"#d70056cb",crimsonA11:"#c4004fe2",crimsonA12:"#530026e9"},crimsonDark:{crimson1:"#191114",crimson2:"#201318",crimson3:"#381525",crimson4:"#4d122f",crimson5:"#5c1839",crimson6:"#6d2545",crimson7:"#873356",crimson8:"#b0436e",crimson9:"#e93d82",crimson10:"#ee518a",crimson11:"#ff92ad",crimson12:"#fdd3e8"},crimsonDarkA:{crimsonA1:"#f4126709",crimsonA2:"#f22f7a11",crimsonA3:"#fe2a8b2a",crimsonA4:"#fd158741",crimsonA5:"#fd278f51",crimsonA6:"#fe459763",crimsonA7:"#fd559b7f",crimsonA8:"#fe5b9bab",crimsonA9:"#fe418de8",crimsonA10:"#ff5693ed",crimsonA11:"#ff92ad",crimsonA12:"#ffd5eafd"},cyan:{cyan1:"#fafdfe",cyan2:"#f2fafb",cyan3:"#def7f9",cyan4:"#caf1f6",cyan5:"#b5e9f0",cyan6:"#9ddde7",cyan7:"#7dcedc",cyan8:"#3db9cf",cyan9:"#00a2c7",cyan10:"#0797b9",cyan11:"#107d98",cyan12:"#0d3c48"},cyanA:{cyanA1:"#0099cc05",cyanA2:"#009db10d",cyanA3:"#00c2d121",cyanA4:"#00bcd435",cyanA5:"#01b4cc4a",cyanA6:"#00a7c162",cyanA7:"#009fbb82",cyanA8:"#00a3c0c2",cyanA9:"#00a2c7",cyanA10:"#0094b7f8",cyanA11:"#007491ef",cyanA12:"#00323ef2"},cyanDark:{cyan1:"#0b161a",cyan2:"#101b20",cyan3:"#082c36",cyan4:"#003848",cyan5:"#004558",cyan6:"#045468",cyan7:"#12677e",cyan8:"#11809c",cyan9:"#00a2c7",cyan10:"#23afd0",cyan11:"#4ccce6",cyan12:"#b6ecf7"},cyanDarkA:{cyanA1:"#0091f70a",cyanA2:"#02a7f211",cyanA3:"#00befd28",cyanA4:"#00baff3b",cyanA5:"#00befd4d",cyanA6:"#00c7fd5e",cyanA7:"#14cdff75",cyanA8:"#11cfff95",cyanA9:"#00cfffc3",cyanA10:"#28d6ffcd",cyanA11:"#52e1fee5",cyanA12:"#bbf3fef7"},gold:{gold1:"#fdfdfc",gold2:"#faf9f2",gold3:"#f2f0e7",gold4:"#eae6db",gold5:"#e1dccf",gold6:"#d8d0bf",gold7:"#cbc0aa",gold8:"#b9a88d",gold9:"#978365",gold10:"#8c7a5e",gold11:"#71624b",gold12:"#3b352b"},goldA:{goldA1:"#55550003",goldA2:"#9d8a000d",goldA3:"#75600018",goldA4:"#6b4e0024",goldA5:"#60460030",goldA6:"#64440040",goldA7:"#63420055",goldA8:"#633d0072",goldA9:"#5332009a",goldA10:"#492d00a1",goldA11:"#362100b4",goldA12:"#130c00d4"},goldDark:{gold1:"#121211",gold2:"#1b1a17",gold3:"#24231f",gold4:"#2d2b26",gold5:"#38352e",gold6:"#444039",gold7:"#544f46",gold8:"#696256",gold9:"#978365",gold10:"#a39073",gold11:"#cbb99f",gold12:"#e8e2d9"},goldDarkA:{goldA1:"#91911102",goldA2:"#f9e29d0b",goldA3:"#f8ecbb15",goldA4:"#ffeec41e",goldA5:"#feecc22a",goldA6:"#feebcb37",goldA7:"#ffedcd48",goldA8:"#fdeaca5f",goldA9:"#ffdba690",goldA10:"#fedfb09d",goldA11:"#fee7c6c8",goldA12:"#fef7ede7"},grass:{grass1:"#fbfefb",grass2:"#f5fbf5",grass3:"#e9f6e9",grass4:"#daf1db",grass5:"#c9e8ca",grass6:"#b2ddb5",grass7:"#94ce9a",grass8:"#65ba74",grass9:"#46a758",grass10:"#3e9b4f",grass11:"#2a7e3b",grass12:"#203c25"},grassA:{grassA1:"#00c00004",grassA2:"#0099000a",grassA3:"#00970016",grassA4:"#009f0725",grassA5:"#00930536",grassA6:"#008f0a4d",grassA7:"#018b0f6b",grassA8:"#008d199a",grassA9:"#008619b9",grassA10:"#007b17c1",grassA11:"#006514d5",grassA12:"#002006df"},grassDark:{grass1:"#0e1511",grass2:"#141a15",grass3:"#1b2a1e",grass4:"#1d3a24",grass5:"#25482d",grass6:"#2d5736",grass7:"#366740",grass8:"#3e7949",grass9:"#46a758",grass10:"#53b365",grass11:"#71d083",grass12:"#c2f0c2"},grassDarkA:{grassA1:"#00de1205",grassA2:"#5ef7780a",grassA3:"#70fe8c1b",grassA4:"#57ff802c",grassA5:"#68ff8b3b",grassA6:"#71ff8f4b",grassA7:"#77fd925d",grassA8:"#77fd9070",grassA9:"#65ff82a1",grassA10:"#72ff8dae",grassA11:"#89ff9fcd",grassA12:"#ceffceef"},gray:{gray1:"#fcfcfc",gray2:"#f9f9f9",gray3:"#f0f0f0",gray4:"#e8e8e8",gray5:"#e0e0e0",gray6:"#d9d9d9",gray7:"#cecece",gray8:"#bbbbbb",gray9:"#8d8d8d",gray10:"#838383",gray11:"#646464",gray12:"#202020"},grayA:{grayA1:"#00000003",grayA2:"#00000006",grayA3:"#0000000f",grayA4:"#00000017",grayA5:"#0000001f",grayA6:"#00000026",grayA7:"#00000031",grayA8:"#00000044",grayA9:"#00000072",grayA10:"#0000007c",grayA11:"#0000009b",grayA12:"#000000df"},grayDark:{gray1:"#111111",gray2:"#191919",gray3:"#222222",gray4:"#2a2a2a",gray5:"#313131",gray6:"#3a3a3a",gray7:"#484848",gray8:"#606060",gray9:"#6e6e6e",gray10:"#7b7b7b",gray11:"#b4b4b4",gray12:"#eeeeee"},grayDarkA:{grayA1:"#00000000",grayA2:"#ffffff09",grayA3:"#ffffff12",grayA4:"#ffffff1b",grayA5:"#ffffff22",grayA6:"#ffffff2c",grayA7:"#ffffff3b",grayA8:"#ffffff55",grayA9:"#ffffff64",grayA10:"#ffffff72",grayA11:"#ffffffaf",grayA12:"#ffffffed"},green:{green1:"#fbfefc",green2:"#f4fbf6",green3:"#e6f6eb",green4:"#d6f1df",green5:"#c4e8d1",green6:"#adddc0",green7:"#8eceaa",green8:"#5bb98b",green9:"#30a46c",green10:"#2b9a66",green11:"#218358",green12:"#193b2d"},greenA:{greenA1:"#00c04004",greenA2:"#00a32f0b",greenA3:"#00a43319",greenA4:"#00a83829",greenA5:"#019c393b",greenA6:"#00963c52",greenA7:"#00914071",greenA8:"#00924ba4",greenA9:"#008f4acf",greenA10:"#008647d4",greenA11:"#00713fde",greenA12:"#002616e6"},greenDark:{green1:"#0e1512",green2:"#121b17",green3:"#132d21",green4:"#113b29",green5:"#174933",green6:"#20573e",green7:"#28684a",green8:"#2f7c57",green9:"#30a46c",green10:"#33b074",green11:"#3dd68c",green12:"#b1f1cb"},greenDarkA:{greenA1:"#00de4505",greenA2:"#29f99d0b",greenA3:"#22ff991e",greenA4:"#11ff992d",greenA5:"#2bffa23c",greenA6:"#44ffaa4b",greenA7:"#50fdac5e",greenA8:"#54ffad73",greenA9:"#44ffa49e",greenA10:"#43fea4ab",greenA11:"#46fea5d4",greenA12:"#bbffd7f0"},indigo:{indigo1:"#fdfdfe",indigo2:"#f7f9ff",indigo3:"#edf2fe",indigo4:"#e1e9ff",indigo5:"#d2deff",indigo6:"#c1d0ff",indigo7:"#abbdf9",indigo8:"#8da4ef",indigo9:"#3e63dd",indigo10:"#3358d4",indigo11:"#3a5bc7",indigo12:"#1f2d5c"},indigoA:{indigoA1:"#00008002",indigoA2:"#0040ff08",indigoA3:"#0047f112",indigoA4:"#0044ff1e",indigoA5:"#0044ff2d",indigoA6:"#003eff3e",indigoA7:"#0037ed54",indigoA8:"#0034dc72",indigoA9:"#0031d2c1",indigoA10:"#002ec9cc",indigoA11:"#002bb7c5",indigoA12:"#001046e0"},indigoDark:{indigo1:"#11131f",indigo2:"#141726",indigo3:"#182449",indigo4:"#1d2e62",indigo5:"#253974",indigo6:"#304384",indigo7:"#3a4f97",indigo8:"#435db1",indigo9:"#3e63dd",indigo10:"#5472e4",indigo11:"#9eb1ff",indigo12:"#d6e1ff"},indigoDarkA:{indigoA1:"#1133ff0f",indigoA2:"#3354fa17",indigoA3:"#2f62ff3c",indigoA4:"#3566ff57",indigoA5:"#4171fd6b",indigoA6:"#5178fd7c",indigoA7:"#5a7fff90",indigoA8:"#5b81feac",indigoA9:"#4671ffdb",indigoA10:"#5c7efee3",indigoA11:"#9eb1ff",indigoA12:"#d6e1ff"},iris:{iris1:"#fdfdff",iris2:"#f8f8ff",iris3:"#f0f1fe",iris4:"#e6e7ff",iris5:"#dadcff",iris6:"#cbcdff",iris7:"#b8baf8",iris8:"#9b9ef0",iris9:"#5b5bd6",iris10:"#5151cd",iris11:"#5753c6",iris12:"#272962"},irisA:{irisA1:"#0000ff02",irisA2:"#0000ff07",irisA3:"#0011ee0f",irisA4:"#000bff19",irisA5:"#000eff25",irisA6:"#000aff34",irisA7:"#0008e647",irisA8:"#0008d964",irisA9:"#0000c0a4",irisA10:"#0000b6ae",irisA11:"#0600abac",irisA12:"#000246d8"},irisDark:{iris1:"#13131e",iris2:"#171625",iris3:"#202248",iris4:"#262a65",iris5:"#303374",iris6:"#3d3e82",iris7:"#4a4a95",iris8:"#5958b1",iris9:"#5b5bd6",iris10:"#6e6ade",iris11:"#b1a9ff",iris12:"#e0dffe"},irisDarkA:{irisA1:"#3636fe0e",irisA2:"#564bf916",irisA3:"#525bff3b",irisA4:"#4d58ff5a",irisA5:"#5b62fd6b",irisA6:"#6d6ffd7a",irisA7:"#7777fe8e",irisA8:"#7b7afeac",irisA9:"#6a6afed4",irisA10:"#7d79ffdc",irisA11:"#b1a9ff",irisA12:"#e1e0fffe"},jade:{jade1:"#fbfefd",jade2:"#f4fbf7",jade3:"#e6f7ed",jade4:"#d6f1e3",jade5:"#c3e9d7",jade6:"#acdec8",jade7:"#8bceb6",jade8:"#56ba9f",jade9:"#29a383",jade10:"#26997b",jade11:"#208368",jade12:"#1d3b31"},jadeA:{jadeA1:"#00c08004",jadeA2:"#00a3460b",jadeA3:"#00ae4819",jadeA4:"#00a85129",jadeA5:"#00a2553c",jadeA6:"#009a5753",jadeA7:"#00945f74",jadeA8:"#00976ea9",jadeA9:"#00916bd6",jadeA10:"#008764d9",jadeA11:"#007152df",jadeA12:"#002217e2"},jadeDark:{jade1:"#0d1512",jade2:"#121c18",jade3:"#0f2e22",jade4:"#0b3b2c",jade5:"#114837",jade6:"#1b5745",jade7:"#246854",jade8:"#2a7e68",jade9:"#29a383",jade10:"#27b08b",jade11:"#1fd8a4",jade12:"#adf0d4"},jadeDarkA:{jadeA1:"#00de4505",jadeA2:"#27fba60c",jadeA3:"#02f99920",jadeA4:"#00ffaa2d",jadeA5:"#11ffb63b",jadeA6:"#34ffc24b",jadeA7:"#45fdc75e",jadeA8:"#48ffcf75",jadeA9:"#38feca9d",jadeA10:"#31fec7ab",jadeA11:"#21fec0d6",jadeA12:"#b8ffe1ef"},lime:{lime1:"#fcfdfa",lime2:"#f8faf3",lime3:"#eef6d6",lime4:"#e2f0bd",lime5:"#d3e7a6",lime6:"#c2da91",lime7:"#abc978",lime8:"#8db654",lime9:"#bdee63",lime10:"#b0e64c",lime11:"#5c7c2f",lime12:"#37401c"},limeA:{limeA1:"#66990005",limeA2:"#6b95000c",limeA3:"#96c80029",limeA4:"#8fc60042",limeA5:"#81bb0059",limeA6:"#72aa006e",limeA7:"#61990087",limeA8:"#559200ab",limeA9:"#93e4009c",limeA10:"#8fdc00b3",limeA11:"#375f00d0",limeA12:"#1e2900e3"},limeDark:{lime1:"#11130c",lime2:"#151a10",lime3:"#1f2917",lime4:"#29371d",lime5:"#334423",lime6:"#3d522a",lime7:"#496231",lime8:"#577538",lime9:"#bdee63",lime10:"#d4ff70",lime11:"#bde56c",lime12:"#e3f7ba"},limeDarkA:{limeA1:"#11bb0003",limeA2:"#78f7000a",limeA3:"#9bfd4c1a",limeA4:"#a7fe5c29",limeA5:"#affe6537",limeA6:"#b2fe6d46",limeA7:"#b6ff6f57",limeA8:"#b6fd6d6c",limeA9:"#caff69ed",limeA10:"#d4ff70",limeA11:"#d1fe77e4",limeA12:"#e9febff7"},mauve:{mauve1:"#fdfcfd",mauve2:"#faf9fb",mauve3:"#f2eff3",mauve4:"#eae7ec",mauve5:"#e3dfe6",mauve6:"#dbd8e0",mauve7:"#d0cdd7",mauve8:"#bcbac7",mauve9:"#8e8c99",mauve10:"#84828e",mauve11:"#65636d",mauve12:"#211f26"},mauveA:{mauveA1:"#55005503",mauveA2:"#2b005506",mauveA3:"#30004010",mauveA4:"#20003618",mauveA5:"#20003820",mauveA6:"#14003527",mauveA7:"#10003332",mauveA8:"#08003145",mauveA9:"#05001d73",mauveA10:"#0500197d",mauveA11:"#0400119c",mauveA12:"#020008e0"},mauveDark:{mauve1:"#121113",mauve2:"#1a191b",mauve3:"#232225",mauve4:"#2b292d",mauve5:"#323035",mauve6:"#3c393f",mauve7:"#49474e",mauve8:"#625f69",mauve9:"#6f6d78",mauve10:"#7c7a85",mauve11:"#b5b2bc",mauve12:"#eeeef0"},mauveDarkA:{mauveA1:"#00000000",mauveA2:"#f5f4f609",mauveA3:"#ebeaf814",mauveA4:"#eee5f81d",mauveA5:"#efe6fe25",mauveA6:"#f1e6fd30",mauveA7:"#eee9ff40",mauveA8:"#eee7ff5d",mauveA9:"#eae6fd6e",mauveA10:"#ece9fd7c",mauveA11:"#f5f1ffb7",mauveA12:"#fdfdffef"},mint:{mint1:"#f9fefd",mint2:"#f2fbf9",mint3:"#ddf9f2",mint4:"#c8f4e9",mint5:"#b3ecde",mint6:"#9ce0d0",mint7:"#7ecfbd",mint8:"#4cbba5",mint9:"#86ead4",mint10:"#7de0cb",mint11:"#027864",mint12:"#16433c"},mintA:{mintA1:"#00d5aa06",mintA2:"#00b18a0d",mintA3:"#00d29e22",mintA4:"#00cc9937",mintA5:"#00c0914c",mintA6:"#00b08663",mintA7:"#00a17d81",mintA8:"#009e7fb3",mintA9:"#00d3a579",mintA10:"#00c39982",mintA11:"#007763fd",mintA12:"#00312ae9"},mintDark:{mint1:"#0e1515",mint2:"#0f1b1b",mint3:"#092c2b",mint4:"#003a38",mint5:"#004744",mint6:"#105650",mint7:"#1e685f",mint8:"#277f70",mint9:"#86ead4",mint10:"#a8f5e5",mint11:"#58d5ba",mint12:"#c4f5e1"},mintDarkA:{mintA1:"#00dede05",mintA2:"#00f9f90b",mintA3:"#00fff61d",mintA4:"#00fff42c",mintA5:"#00fff23a",mintA6:"#0effeb4a",mintA7:"#34fde55e",mintA8:"#41ffdf76",mintA9:"#92ffe7e9",mintA10:"#aefeedf5",mintA11:"#67ffded2",mintA12:"#cbfee9f5"},olive:{olive1:"#fcfdfc",olive2:"#f8faf8",olive3:"#eff1ef",olive4:"#e7e9e7",olive5:"#dfe2df",olive6:"#d7dad7",olive7:"#cccfcc",olive8:"#b9bcb8",olive9:"#898e87",olive10:"#7f847d",olive11:"#60655f",olive12:"#1d211c"},oliveA:{oliveA1:"#00550003",oliveA2:"#00490007",oliveA3:"#00200010",oliveA4:"#00160018",oliveA5:"#00180020",oliveA6:"#00140028",oliveA7:"#000f0033",oliveA8:"#040f0047",oliveA9:"#050f0078",oliveA10:"#040e0082",oliveA11:"#020a00a0",oliveA12:"#010600e3"},oliveDark:{olive1:"#111210",olive2:"#181917",olive3:"#212220",olive4:"#282a27",olive5:"#2f312e",olive6:"#383a36",olive7:"#454843",olive8:"#5c625b",olive9:"#687066",olive10:"#767d74",olive11:"#afb5ad",olive12:"#eceeec"},oliveDarkA:{oliveA1:"#00000000",oliveA2:"#f1f2f008",oliveA3:"#f4f5f312",oliveA4:"#f3fef21a",oliveA5:"#f2fbf122",oliveA6:"#f4faed2c",oliveA7:"#f2fced3b",oliveA8:"#edfdeb57",oliveA9:"#ebfde766",oliveA10:"#f0fdec74",oliveA11:"#f6fef4b0",oliveA12:"#fdfffded"},orange:{orange1:"#fefcfb",orange2:"#fff7ed",orange3:"#ffefd6",orange4:"#ffdfb5",orange5:"#ffd19a",orange6:"#ffc182",orange7:"#f5ae73",orange8:"#ec9455",orange9:"#f76b15",orange10:"#ef5f00",orange11:"#cc4e00",orange12:"#582d1d"},orangeA:{orangeA1:"#c0400004",orangeA2:"#ff8e0012",orangeA3:"#ff9c0029",orangeA4:"#ff91014a",orangeA5:"#ff8b0065",orangeA6:"#ff81007d",orangeA7:"#ed6c008c",orangeA8:"#e35f00aa",orangeA9:"#f65e00ea",orangeA10:"#ef5f00",orangeA11:"#cc4e00",orangeA12:"#431200e2"},orangeDark:{orange1:"#17120e",orange2:"#1e160f",orange3:"#331e0b",orange4:"#462100",orange5:"#562800",orange6:"#66350c",orange7:"#7e451d",orange8:"#a35829",orange9:"#f76b15",orange10:"#ff801f",orange11:"#ffa057",orange12:"#ffe0c2"},orangeDarkA:{orangeA1:"#ec360007",orangeA2:"#fe6d000e",orangeA3:"#fb6a0025",orangeA4:"#ff590039",orangeA5:"#ff61004a",orangeA6:"#fd75045c",orangeA7:"#ff832c75",orangeA8:"#fe84389d",orangeA9:"#fe6d15f7",orangeA10:"#ff801f",orangeA11:"#ffa057",orangeA12:"#ffe0c2"},pink:{pink1:"#fffcfe",pink2:"#fef7fb",pink3:"#fee9f5",pink4:"#fbdcef",pink5:"#f6cee7",pink6:"#efbfdd",pink7:"#e7acd0",pink8:"#dd93c2",pink9:"#d6409f",pink10:"#cf3897",pink11:"#c2298a",pink12:"#651249"},pinkA:{pinkA1:"#ff00aa03",pinkA2:"#e0008008",pinkA3:"#f4008c16",pinkA4:"#e2008b23",pinkA5:"#d1008331",pinkA6:"#c0007840",pinkA7:"#b6006f53",pinkA8:"#af006f6c",pinkA9:"#c8007fbf",pinkA10:"#c2007ac7",pinkA11:"#b60074d6",pinkA12:"#59003bed"},pinkDark:{pink1:"#191117",pink2:"#21121d",pink3:"#37172f",pink4:"#4b143d",pink5:"#591c47",pink6:"#692955",pink7:"#833869",pink8:"#a84885",pink9:"#d6409f",pink10:"#de51a8",pink11:"#ff8dcc",pink12:"#fdd1ea"},pinkDarkA:{pinkA1:"#f412bc09",pinkA2:"#f420bb12",pinkA3:"#fe37cc29",pinkA4:"#fc1ec43f",pinkA5:"#fd35c24e",pinkA6:"#fd51c75f",pinkA7:"#fd62c87b",pinkA8:"#ff68c8a2",pinkA9:"#fe49bcd4",pinkA10:"#ff5cc0dc",pinkA11:"#ff8dcc",pinkA12:"#ffd3ecfd"},plum:{plum1:"#fefcff",plum2:"#fdf7fd",plum3:"#fbebfb",plum4:"#f7def8",plum5:"#f2d1f3",plum6:"#e9c2ec",plum7:"#deade3",plum8:"#cf91d8",plum9:"#ab4aba",plum10:"#a144af",plum11:"#953ea3",plum12:"#53195d"},plumA:{plumA1:"#aa00ff03",plumA2:"#c000c008",plumA3:"#cc00cc14",plumA4:"#c200c921",plumA5:"#b700bd2e",plumA6:"#a400b03d",plumA7:"#9900a852",plumA8:"#9000a56e",plumA9:"#89009eb5",plumA10:"#7f0092bb",plumA11:"#730086c1",plumA12:"#40004be6"},plumDark:{plum1:"#181118",plum2:"#201320",plum3:"#351a35",plum4:"#451d47",plum5:"#512454",plum6:"#5e3061",plum7:"#734079",plum8:"#92549c",plum9:"#ab4aba",plum10:"#b658c4",plum11:"#e796f3",plum12:"#f4d4f4"},plumDarkA:{plumA1:"#f112f108",plumA2:"#f22ff211",plumA3:"#fd4cfd27",plumA4:"#f646ff3a",plumA5:"#f455ff48",plumA6:"#f66dff56",plumA7:"#f07cfd70",plumA8:"#ee84ff95",plumA9:"#e961feb6",plumA10:"#ed70ffc0",plumA11:"#f19cfef3",plumA12:"#feddfef4"},purple:{purple1:"#fefcfe",purple2:"#fbf7fe",purple3:"#f7edfe",purple4:"#f2e2fc",purple5:"#ead5f9",purple6:"#e0c4f4",purple7:"#d1afec",purple8:"#be93e4",purple9:"#8e4ec6",purple10:"#8347b9",purple11:"#8145b5",purple12:"#402060"},purpleA:{purpleA1:"#aa00aa03",purpleA2:"#8000e008",purpleA3:"#8e00f112",purpleA4:"#8d00e51d",purpleA5:"#8000db2a",purpleA6:"#7a01d03b",purpleA7:"#6d00c350",purpleA8:"#6600c06c",purpleA9:"#5c00adb1",purpleA10:"#53009eb8",purpleA11:"#52009aba",purpleA12:"#250049df"},purpleDark:{purple1:"#18111b",purple2:"#1e1523",purple3:"#301c3b",purple4:"#3d224e",purple5:"#48295c",purple6:"#54346b",purple7:"#664282",purple8:"#8457aa",purple9:"#8e4ec6",purple10:"#9a5cd0",purple11:"#d19dff",purple12:"#ecd9fa"},purpleDarkA:{purpleA1:"#b412f90b",purpleA2:"#b744f714",purpleA3:"#c150ff2d",purpleA4:"#bb53fd42",purpleA5:"#be5cfd51",purpleA6:"#c16dfd61",purpleA7:"#c378fd7a",purpleA8:"#c47effa4",purpleA9:"#b661ffc2",purpleA10:"#bc6fffcd",purpleA11:"#d19dff",purpleA12:"#f1ddfffa"},red:{red1:"#fffcfc",red2:"#fff7f7",red3:"#feebec",red4:"#ffdbdc",red5:"#ffcdce",red6:"#fdbdbe",red7:"#f4a9aa",red8:"#eb8e90",red9:"#e5484d",red10:"#dc3e42",red11:"#ce2c31",red12:"#641723"},redA:{redA1:"#ff000003",redA2:"#ff000008",redA3:"#f3000d14",redA4:"#ff000824",redA5:"#ff000632",redA6:"#f8000442",redA7:"#df000356",redA8:"#d2000571",redA9:"#db0007b7",redA10:"#d10005c1",redA11:"#c40006d3",redA12:"#55000de8"},redDark:{red1:"#191111",red2:"#201314",red3:"#3b1219",red4:"#500f1c",red5:"#611623",red6:"#72232d",red7:"#8c333a",red8:"#b54548",red9:"#e5484d",red10:"#ec5d5e",red11:"#ff9592",red12:"#ffd1d9"},redDarkA:{redA1:"#f4121209",redA2:"#f22f3e11",redA3:"#ff173f2d",redA4:"#fe0a3b44",redA5:"#ff204756",redA6:"#ff3e5668",redA7:"#ff536184",redA8:"#ff5d61b0",redA9:"#fe4e54e4",redA10:"#ff6465eb",redA11:"#ff9592",redA12:"#ffd1d9"},ruby:{ruby1:"#fffcfd",ruby2:"#fff7f8",ruby3:"#feeaed",ruby4:"#ffdce1",ruby5:"#ffced6",ruby6:"#f8bfc8",ruby7:"#efacb8",ruby8:"#e592a3",ruby9:"#e54666",ruby10:"#dc3b5d",ruby11:"#ca244d",ruby12:"#64172b"},rubyA:{rubyA1:"#ff005503",rubyA2:"#ff002008",rubyA3:"#f3002515",rubyA4:"#ff002523",rubyA5:"#ff002a31",rubyA6:"#e4002440",rubyA7:"#ce002553",rubyA8:"#c300286d",rubyA9:"#db002cb9",rubyA10:"#d2002cc4",rubyA11:"#c10030db",rubyA12:"#550016e8"},rubyDark:{ruby1:"#191113",ruby2:"#1e1517",ruby3:"#3a141e",ruby4:"#4e1325",ruby5:"#5e1a2e",ruby6:"#6f2539",ruby7:"#883447",ruby8:"#b3445a",ruby9:"#e54666",ruby10:"#ec5a72",ruby11:"#ff949d",ruby12:"#fed2e1"},rubyDarkA:{rubyA1:"#f4124a09",rubyA2:"#fe5a7f0e",rubyA3:"#ff235d2c",rubyA4:"#fd195e42",rubyA5:"#fe2d6b53",rubyA6:"#ff447665",rubyA7:"#ff577d80",rubyA8:"#ff5c7cae",rubyA9:"#fe4c70e4",rubyA10:"#ff617beb",rubyA11:"#ff949d",rubyA12:"#ffd3e2fe"},sage:{sage1:"#fbfdfc",sage2:"#f7f9f8",sage3:"#eef1f0",sage4:"#e6e9e8",sage5:"#dfe2e0",sage6:"#d7dad9",sage7:"#cbcfcd",sage8:"#b8bcba",sage9:"#868e8b",sage10:"#7c8481",sage11:"#5f6563",sage12:"#1a211e"},sageA:{sageA1:"#00804004",sageA2:"#00402008",sageA3:"#002d1e11",sageA4:"#001f1519",sageA5:"#00180820",sageA6:"#00140d28",sageA7:"#00140a34",sageA8:"#000f0847",sageA9:"#00110b79",sageA10:"#00100a83",sageA11:"#000a07a0",sageA12:"#000805e5"},sageDark:{sage1:"#101211",sage2:"#171918",sage3:"#202221",sage4:"#272a29",sage5:"#2e3130",sage6:"#373b39",sage7:"#444947",sage8:"#5b625f",sage9:"#63706b",sage10:"#717d79",sage11:"#adb5b2",sage12:"#eceeed"},sageDarkA:{sageA1:"#00000000",sageA2:"#f0f2f108",sageA3:"#f3f5f412",sageA4:"#f2fefd1a",sageA5:"#f1fbfa22",sageA6:"#edfbf42d",sageA7:"#edfcf73c",sageA8:"#ebfdf657",sageA9:"#dffdf266",sageA10:"#e5fdf674",sageA11:"#f4fefbb0",sageA12:"#fdfffeed"},sand:{sand1:"#fdfdfc",sand2:"#f9f9f8",sand3:"#f1f0ef",sand4:"#e9e8e6",sand5:"#e2e1de",sand6:"#dad9d6",sand7:"#cfceca",sand8:"#bcbbb5",sand9:"#8d8d86",sand10:"#82827c",sand11:"#63635e",sand12:"#21201c"},sandA:{sandA1:"#55550003",sandA2:"#25250007",sandA3:"#20100010",sandA4:"#1f150019",sandA5:"#1f180021",sandA6:"#19130029",sandA7:"#19140035",sandA8:"#1915014a",sandA9:"#0f0f0079",sandA10:"#0c0c0083",sandA11:"#080800a1",sandA12:"#060500e3"},sandDark:{sand1:"#111110",sand2:"#191918",sand3:"#222221",sand4:"#2a2a28",sand5:"#31312e",sand6:"#3b3a37",sand7:"#494844",sand8:"#62605b",sand9:"#6f6d66",sand10:"#7c7b74",sand11:"#b5b3ad",sand12:"#eeeeec"},sandDarkA:{sandA1:"#00000000",sandA2:"#f4f4f309",sandA3:"#f6f6f513",sandA4:"#fefef31b",sandA5:"#fbfbeb23",sandA6:"#fffaed2d",sandA7:"#fffbed3c",sandA8:"#fff9eb57",sandA9:"#fffae965",sandA10:"#fffdee73",sandA11:"#fffcf4b0",sandA12:"#fffffded"},sky:{sky1:"#f9feff",sky2:"#f1fafd",sky3:"#e1f6fd",sky4:"#d1f0fa",sky5:"#bee7f5",sky6:"#a9daed",sky7:"#8dcae3",sky8:"#60b3d7",sky9:"#7ce2fe",sky10:"#74daf8",sky11:"#00749e",sky12:"#1d3e56"},skyA:{skyA1:"#00d5ff06",skyA2:"#00a4db0e",skyA3:"#00b3ee1e",skyA4:"#00ace42e",skyA5:"#00a1d841",skyA6:"#0092ca56",skyA7:"#0089c172",skyA8:"#0085bf9f",skyA9:"#00c7fe83",skyA10:"#00bcf38b",skyA11:"#00749e",skyA12:"#002540e2"},skyDark:{sky1:"#0d141f",sky2:"#111a27",sky3:"#112840",sky4:"#113555",sky5:"#154467",sky6:"#1b537b",sky7:"#1f6692",sky8:"#197cae",sky9:"#7ce2fe",sky10:"#a8eeff",sky11:"#75c7f0",sky12:"#c2f3ff"},skyDarkA:{skyA1:"#0044ff0f",skyA2:"#1171fb18",skyA3:"#1184fc33",skyA4:"#128fff49",skyA5:"#1c9dfd5d",skyA6:"#28a5ff72",skyA7:"#2badfe8b",skyA8:"#1db2fea9",skyA9:"#7ce3fffe",skyA10:"#a8eeff",skyA11:"#7cd3ffef",skyA12:"#c2f3ff"},slate:{slate1:"#fcfcfd",slate2:"#f9f9fb",slate3:"#f0f0f3",slate4:"#e8e8ec",slate5:"#e0e1e6",slate6:"#d9d9e0",slate7:"#cdced6",slate8:"#b9bbc6",slate9:"#8b8d98",slate10:"#80838d",slate11:"#60646c",slate12:"#1c2024"},slateA:{slateA1:"#00005503",slateA2:"#00005506",slateA3:"#0000330f",slateA4:"#00002d17",slateA5:"#0009321f",slateA6:"#00002f26",slateA7:"#00062e32",slateA8:"#00083046",slateA9:"#00051d74",slateA10:"#00071b7f",slateA11:"#0007149f",slateA12:"#000509e3"},slateDark:{slate1:"#111113",slate2:"#18191b",slate3:"#212225",slate4:"#272a2d",slate5:"#2e3135",slate6:"#363a3f",slate7:"#43484e",slate8:"#5a6169",slate9:"#696e77",slate10:"#777b84",slate11:"#b0b4ba",slate12:"#edeef0"},slateDarkA:{slateA1:"#00000000",slateA2:"#d8f4f609",slateA3:"#ddeaf814",slateA4:"#d3edf81d",slateA5:"#d9edfe25",slateA6:"#d6ebfd30",slateA7:"#d9edff40",slateA8:"#d9edff5d",slateA9:"#dfebfd6d",slateA10:"#e5edfd7b",slateA11:"#f1f7feb5",slateA12:"#fcfdffef"},teal:{teal1:"#fafefd",teal2:"#f3fbf9",teal3:"#e0f8f3",teal4:"#ccf3ea",teal5:"#b8eae0",teal6:"#a1ded2",teal7:"#83cdc1",teal8:"#53b9ab",teal9:"#12a594",teal10:"#0d9b8a",teal11:"#008573",teal12:"#0d3d38"},tealA:{tealA1:"#00cc9905",tealA2:"#00aa800c",tealA3:"#00c69d1f",tealA4:"#00c39633",tealA5:"#00b49047",tealA6:"#00a6855e",tealA7:"#0099807c",tealA8:"#009783ac",tealA9:"#009e8ced",tealA10:"#009684f2",tealA11:"#008573",tealA12:"#00332df2"},tealDark:{teal1:"#0d1514",teal2:"#111c1b",teal3:"#0d2d2a",teal4:"#023b37",teal5:"#084843",teal6:"#145750",teal7:"#1c6961",teal8:"#207e73",teal9:"#12a594",teal10:"#0eb39e",teal11:"#0bd8b6",teal12:"#adf0dd"},tealDarkA:{tealA1:"#00deab05",tealA2:"#12fbe60c",tealA3:"#00ffe61e",tealA4:"#00ffe92d",tealA5:"#00ffea3b",tealA6:"#1cffe84b",tealA7:"#2efde85f",tealA8:"#32ffe775",tealA9:"#13ffe49f",tealA10:"#0dffe0ae",tealA11:"#0afed5d6",tealA12:"#b8ffebef"},tomato:{tomato1:"#fffcfc",tomato2:"#fff8f7",tomato3:"#feebe7",tomato4:"#ffdcd3",tomato5:"#ffcdc2",tomato6:"#fdbdaf",tomato7:"#f5a898",tomato8:"#ec8e7b",tomato9:"#e54d2e",tomato10:"#dd4425",tomato11:"#d13415",tomato12:"#5c271f"},tomatoA:{tomatoA1:"#ff000003",tomatoA2:"#ff200008",tomatoA3:"#f52b0018",tomatoA4:"#ff35002c",tomatoA5:"#ff2e003d",tomatoA6:"#f92d0050",tomatoA7:"#e7280067",tomatoA8:"#db250084",tomatoA9:"#df2600d1",tomatoA10:"#d72400da",tomatoA11:"#cd2200ea",tomatoA12:"#460900e0"},tomatoDark:{tomato1:"#181111",tomato2:"#1f1513",tomato3:"#391714",tomato4:"#4e1511",tomato5:"#5e1c16",tomato6:"#6e2920",tomato7:"#853a2d",tomato8:"#ac4d39",tomato9:"#e54d2e",tomato10:"#ec6142",tomato11:"#ff977d",tomato12:"#fbd3cb"},tomatoDarkA:{tomatoA1:"#f1121208",tomatoA2:"#ff55330f",tomatoA3:"#ff35232b",tomatoA4:"#fd201142",tomatoA5:"#fe332153",tomatoA6:"#ff4f3864",tomatoA7:"#fd644a7d",tomatoA8:"#fe6d4ea7",tomatoA9:"#fe5431e4",tomatoA10:"#ff6847eb",tomatoA11:"#ff977d",tomatoA12:"#ffd6cefb"},violet:{violet1:"#fdfcfe",violet2:"#faf8ff",violet3:"#f4f0fe",violet4:"#ebe4ff",violet5:"#e1d9ff",violet6:"#d4cafe",violet7:"#c2b5f5",violet8:"#aa99ec",violet9:"#6e56cf",violet10:"#654dc4",violet11:"#6550b9",violet12:"#2f265f"},violetA:{violetA1:"#5500aa03",violetA2:"#4900ff07",violetA3:"#4400ee0f",violetA4:"#4300ff1b",violetA5:"#3600ff26",violetA6:"#3100fb35",violetA7:"#2d01dd4a",violetA8:"#2b00d066",violetA9:"#2400b7a9",violetA10:"#2300abb2",violetA11:"#1f0099af",violetA12:"#0b0043d9"},violetDark:{violet1:"#14121f",violet2:"#1b1525",violet3:"#291f43",violet4:"#33255b",violet5:"#3c2e69",violet6:"#473876",violet7:"#56468b",violet8:"#6958ad",violet9:"#6e56cf",violet10:"#7d66d9",violet11:"#baa7ff",violet12:"#e2ddfe"},violetDarkA:{violetA1:"#4422ff0f",violetA2:"#853ff916",violetA3:"#8354fe36",violetA4:"#7d51fd50",violetA5:"#845ffd5f",violetA6:"#8f6cfd6d",violetA7:"#9879ff83",violetA8:"#977dfea8",violetA9:"#8668ffcc",violetA10:"#9176fed7",violetA11:"#baa7ff",violetA12:"#e3defffe"},yellow:{yellow1:"#fdfdf9",yellow2:"#fefce9",yellow3:"#fffab8",yellow4:"#fff394",yellow5:"#ffe770",yellow6:"#f3d768",yellow7:"#e4c767",yellow8:"#d5ae39",yellow9:"#ffe629",yellow10:"#ffdc00",yellow11:"#9e6c00",yellow12:"#473b1f"},yellowA:{yellowA1:"#aaaa0006",yellowA2:"#f4dd0016",yellowA3:"#ffee0047",yellowA4:"#ffe3016b",yellowA5:"#ffd5008f",yellowA6:"#ebbc0097",yellowA7:"#d2a10098",yellowA8:"#c99700c6",yellowA9:"#ffe100d6",yellowA10:"#ffdc00",yellowA11:"#9e6c00",yellowA12:"#2e2000e0"},yellowDark:{yellow1:"#14120b",yellow2:"#1b180f",yellow3:"#2d2305",yellow4:"#362b00",yellow5:"#433500",yellow6:"#524202",yellow7:"#665417",yellow8:"#836a21",yellow9:"#ffe629",yellow10:"#ffff57",yellow11:"#f5e147",yellow12:"#f6eeb4"},yellowDarkA:{yellowA1:"#d1510004",yellowA2:"#f9b4000b",yellowA3:"#ffaa001e",yellowA4:"#fdb70028",yellowA5:"#febb0036",yellowA6:"#fec40046",yellowA7:"#fdcb225c",yellowA8:"#fdca327b",yellowA9:"#ffe629",yellowA10:"#ffff57",yellowA11:"#fee949f5",yellowA12:"#fef6baf6"}},tP={dark:"dark",light:"light"},nP=Object.values(tP),iP={gray:"gray",mauve:"mauve",slate:"slate",sage:"sage",olive:"olive",sand:"sand"},oP=Object.values(iP),lP={gray:"gray",gold:"gold",bronze:"bronze",brown:"brown",yellow:"yellow",amber:"amber",orange:"orange",tomato:"tomato",red:"red",ruby:"ruby",crimson:"crimson",pink:"pink",plum:"plum",purple:"purple",violet:"violet",iris:"iris",indigo:"indigo",blue:"blue",cyan:"cyan",teal:"teal",jade:"jade",green:"green",grass:"grass",lime:"lime",mint:"mint",sky:"sky"},rP=Object.values(lP);const aP=Object.keys(q$);const sP=({grayColor:e,accentColor:t,appearance:n})=>function(e,t){return aP.reduce(((n,i)=>{const o=Lh(q$,i),[l,r,a,s]=o.split("-");return"override"===l?(aY(n,i,r),n):"custom"===l?(aY(n,i,Lh(eP,`${r}${t===tP.dark?"Dark":""}${a}.${r}${a}${s}`)),n):l.startsWith("gray")||l.startsWith("accent")?(aY(n,i,Lh(e,l,Jd)(r)),n):n}),{})}(function({appearance:e,grayColor:t,accentColor:n}){const i=e===tP.dark?"Dark":"",o=eP[`${t}${i}`],l=eP[`${n}${i}`],r=eP[`${t}${i}A`],a=eP[`${n}${i}A`];return{gray:e=>Lh(o,`${t}${e}`)??"",grayA:e=>Lh(r,`${t}A${e}`)??"",accent:e=>Lh(l,`${n}${e}`)??"",accentA:e=>Lh(a,`${n}A${e}`)??""}}({appearance:n,grayColor:e,accentColor:t}),n),cP=Cc`
  position: absolute;
  top: 46px;
  left: 16px;
  padding: 24px;
  background-color: var(--context-menu-background);
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  width: 360px;
`,uP=Cc`
  color: var(--active);
  ${$w};
  margin-bottom: 24px;
`,dP=Cc`
  margin-top: 24px;
  color: var(--active);
  ${Dw};
`,pP=Cc`
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(10, minmax(0, 1fr));
  gap: 8px;
`,hP=Cc`
  border-radius: 9999px;
  width: 24px;
  height: 24px;
  cursor: pointer;
  border: 1px solid transparent;

  &.selected {
    outline: solid 2px var(--gray-color-12);
  }
`,mP=Cc`
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
`,bP=Cc`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: 1px solid var(--context-menu-border);
  border-radius: 6px;
  height: 32px;
  ${_w};

  &:hover {
    background-color: var(--column-hover);
  }

  &.selected {
    border-color: var(--gray-color-12);
  }
`,fP=Cc`
  width: 4px;
  height: 100%;
`,yP=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=()=>{const{store:e}=n.value;e.dispatch(XZ({[dz]:!1}))},l=()=>{const{store:e}=n.value,{editor:{openMap:t}}=e.state,i=!t[dz];e.dispatch(XZ({[dz]:i})),i&&e.dispatch(XZ({[cz]:!1}))},r=e=>{const{emitter:t}=n.value;t.emit(OY({appearance:e}))};return uo((()=>{const{shortcut$:e,emitter:t}=n.value;i(e.pipe(Fu((({type:e})=>e===bw.stop))).subscribe(o),t.on({openThemeBuilder:l}))})),()=>{const{store:t}=n.value,{editor:{openMap:i}}=t.state;if(!i[dz])return null;const{theme:o}=e;return ac`
      <div class=${["theme-builder",cP]}>
        <div class=${uP}>Theme</div>
        <div class=${dP}>Accent color</div>
        <div class=${pP}>
          ${rP.map((e=>ac`
              <span
                class=${[hP,{selected:e===o.accentColor}]}
                style=${{"background-color":Lh(eP,[e,`${e}9`])}}
                title=${e}
                @click=${()=>(e=>{const{emitter:t}=n.value;t.emit(OY({accentColor:e}))})(e)}
              ></span>
            `))}
        </div>
        <div class=${dP}>Gray color</div>
        <div class=${pP}>
          ${oP.map((e=>ac`
              <span
                class=${[hP,{selected:e===o.grayColor}]}
                style=${{"background-color":Lh(eP,[e,`${e}9`])}}
                title=${e}
                @click=${()=>(e=>{const{emitter:t}=n.value;t.emit(OY({grayColor:e}))})(e)}
              ></span>
            `))}
        </div>
        <div class=${dP}>Appearance</div>
        <div class=${mP}>
          <div
            class=${[bP,{selected:o.appearance===tP.light}]}
            @click=${()=>r(tP.light)}
          >
            <${qT} prefix="mdi" name="white-balance-sunny" />
            <span class=${fP}></span>
            <span>Light</span>
          </div>
          <div
            class=${[bP,,{selected:o.appearance===tP.dark}]}
            @click=${()=>r(tP.dark)}
          >
            <${qT} prefix="mdi" name="weather-might" />
            <span class=${fP}></span>
            <span>Dark</span>
          </div>
        </div>
      </div>
    `}};const gP=Cc`
  position: absolute;
  z-index: 2147483647;
  bottom: 0;
  right: 0;
  display: flex;
  flex-direction: column;
  max-width: 390px;
  margin: 25px;

  &[data-pointer-none] {
    pointer-events: none;
  }

  .toast-move {
    transition: transform 0.3s;
  }

  .toast-container {
    display: flex;
    margin-top: 10px;
    justify-content: flex-end;
    animation: toastShowMove 0.3s ease;

    &[data-animation-one] {
      animation: none;
    }
  }

  .toast-container:first-child {
    margin-top: 0;
  }

  @keyframes toastShowMove {
    0% {
      transform: translateY(30px);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,vP=(e,t)=>{const n=Lw(t),i=Ta(),{addUnsubscribe:o}=Hw(),l=Vo([]),r=new Set;!function(e,t,n){const i=new YK(e,t,n);ho((()=>i.snapshot())),mo((()=>i.play()))}(i,".toast-container","toast-move");return uo((()=>{const{emitter:e}=n.value;o(e.on({openToast:({payload:e})=>{const t=Object.assign({close:Dk(5e3)},e,{id:id()});l.push(t),t.close.finally((()=>(e=>{const t=l.findIndex((t=>t.id===e));-1!==t&&(r.delete(e),l.splice(t,1))})(t.id)))}}))})),()=>ac`
    <div
      class=${gP}
      ${Na(i)}
      ?data-pointer-none=${0===l.length}
    >
      ${Ja(l,(e=>e.id),(e=>ac`
          <div
            class="toast-container"
            ?data-animation-one=${r.has(e.id)}
            @animationend=${()=>(e=>{r.add(e)})(e.id)}
          >
            ${e.message}
          </div>
        `))}
    </div>
  `},ZP=Cc`
  display: flex;
  width: 100%;
  height: ${30}px;
  min-height: ${30}px;
  padding: 0 15px;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  background-color: var(--toolbar-background);

  & > input {
    margin-right: 15px;
  }
`,xP=Cc`
  width: 10px;
  height: 100%;
`,GP=Cc`
  cursor: pointer;
  padding: 0 5px;
  display: flex;
  align-items: center;
  height: 100%;

  &.active {
    fill: var(--active);
  }
  &:hover {
    fill: var(--active);
  }

  &.undo-redo {
    cursor: not-allowed;
    fill: var(--foreground);
  }

  &.undo-redo.active {
    cursor: pointer;
    fill: var(--active);
  }
`,XP=Cc`
  display: flex;
  align-self: center;
  margin-left: auto;
  white-space: nowrap;
  ${_w};
`,IP=(e,t)=>{const n=Lw(t),i=e=>{const t=e.target;if(!t)return;const{store:i}=n.value;i.dispatch(aG({value:t.value}))},o=e=>{const t=e.target;if(!t)return;const i=uv(t.value),{store:o}=n.value;t.value=i.toString(),o.dispatch(sG({width:i,height:i}))},l=e=>{const t=e.target;if(!t)return;const i=dv(Number(rv(t.value))/100),{store:o}=n.value;t.value=hv(i),o.dispatch(_W(i))},r=e=>{const{store:t}=n.value;t.dispatch(bG({value:e}))},a=()=>{const{store:e}=n.value;e.undo()},s=()=>{const{store:e}=n.value;e.redo()},c=()=>{const{store:e}=n.value;e.dispatch(TW())},u=()=>{const{emitter:e}=n.value;e.emit(FY())},d=()=>{const{emitter:e}=n.value;e.emit(UY())},p=()=>{const{store:e}=n.value,{editor:t}=e.state;(t.hasUndo||t.hasRedo)&&e.dispatch(XZ({[hz]:!0}))};return()=>{const{store:t}=n.value,{settings:h,editor:m,doc:b}=t.state,f=m.openMap[sz],y=m.openMap[cz],g=m.openMap[hz],v=m.openMap[pz],Z=!(h.canvasType!==rg.ERD||f||y||v||g||e.readonly);return ac`
      <div
        class=${["toolbar",ZP]}
        @mousedown=${c}
        @touchstart=${c}
      >
        <${fO}
          title="database name"
          placeholder="database name"
          width=${150}
          value=${h.databaseName}
          .onInput=${i}
        />
        <${fO}
          title="canvas size"
          placeholder="canvas size"
          width=${45}
          value=${h.width.toString()}
          numberOnly=${!0}
          .onChange=${o}
        />
        <${fO}
          title="zoom level"
          placeholder="zoom level"
          width=${45}
          value=${hv(h.zoomLevel)}
          numberOnly=${!0}
          .onChange=${l}
        />
        <div class=${xP}></div>
        <div
          class=${[GP,{active:h.canvasType===rg.ERD}]}
          title="Entity Relationship Diagram"
          @click=${()=>r(rg.ERD)}
        >
          <${qT} name="diagram-project" size=${16} />
        </div>
        <div
          class=${[GP,{active:h.canvasType===rg.visualization}]}
          title="Visualization"
          @click=${()=>r(rg.visualization)}
        >
          <${qT} prefix="mdi" name="chart-scatter-plot" size=${16} />
        </div>
        <div
          class=${[GP,{active:h.canvasType===rg.schemaSQL}]}
          title="Schema SQL"
          @click=${()=>r(rg.schemaSQL)}
        >
          <${qT} prefix="mdi" name="database-export" size=${16} />
        </div>
        <div
          class=${[GP,{active:h.canvasType===rg.generatorCode}]}
          title="Generator Code"
          @click=${()=>r(rg.generatorCode)}
        >
          <${qT} name="file-code" size=${16} />
        </div>
        <div
          class=${[GP,{active:h.canvasType===rg.settings}]}
          title="Settings"
          @click=${()=>r(rg.settings)}
        >
          <${qT} name="gear" size=${16} />
        </div>
        <div class=${xP}></div>
        <div class=${GP} title="Search" @click=${u}>
          <${qT} name="magnifying-glass" size=${16} />
        </div>
        ${e.enableThemeBuilder?ac`
              <div class=${GP} title="Theme" @click=${d}>
                <${qT} name="circle-half-stroke" size=${16} />
              </div>
            `:null}
        <div class=${xP}></div>
        ${Z?ac`
              <div
                class=${["undo-redo",GP,{active:m.hasUndo}]}
                title="Undo"
                @click=${a}
              >
                <${qT} name="rotate-left" size=${16} />
              </div>
              <div
                class=${["undo-redo",GP,{active:m.hasRedo}]}
                title="Redo"
                @click=${s}
              >
                <${qT} name="rotate-right" size=${16} />
              </div>
              <div
                class=${["undo-redo",GP,{active:m.hasUndo||m.hasRedo}]}
                title="Time Travel"
                style=${{"max-width":"26px"}}
                @click=${p}
              >
                <${qT} prefix="mdi" name="av-timer" size=${20} />
              </div>
            `:null}
        <div class=${XP}>Table: ${b.tableIds.length}</div>
      </div>
    `}},WP=(e,t)=>{const n=Lw(t);return()=>{const{column:t,selected:i}=e;return ac`
      <div
        class=${["column-row",CK]}
        data-id=${t.id}
        ?data-selected=${i}
      >
        <${IK} keys=${t.ui.keys} />
        ${Ja((()=>{const{store:t}=n.value,{settings:i}=t.state,{column:o,widthName:l,widthDataType:r,widthDefault:a,widthComment:s}=e;return i.columnOrder.map((e=>{let t=null;switch(e){case cg.columnName:t=ac`
              <div class="column-col">
                <${sK}
                  placeholder="column"
                  width=${l}
                  value=${o.name}
                />
              </div>
            `;break;case cg.columnDefault:t=Kg(i.show,sg.columnDefault)?ac`
                  <div class="column-col">
                    <${sK}
                      placeholder="default"
                      width=${a}
                      value=${o.default}
                    />
                  </div>
                `:null;break;case cg.columnComment:t=Kg(i.show,sg.columnComment)?ac`
                  <div class="column-col">
                    <${sK}
                      placeholder="comment"
                      width=${s}
                      value=${o.comment}
                    />
                  </div>
                `:null;break;case cg.columnDataType:t=Kg(i.show,sg.columnDataType)?ac`
                  <div class="column-col">
                    <${GK}
                      tableId=${o.tableId}
                      columnId=${o.id}
                      width=${r}
                      value=${o.dataType}
                    />
                  </div>
                `:null;break;case cg.columnNotNull:t=Kg(i.show,sg.columnNotNull)?ac`
                  <div class="column-col">
                    <${kK} options=${o.options} />
                  </div>
                `:null;break;case cg.columnUnique:t=Kg(i.show,sg.columnUnique)?ac`
                  <div class="column-col">
                    <${SK}
                      checked=${Kg(o.options,Gg.unique)}
                      width=${_g}
                      text="UQ"
                      title="Unique"
                    />
                  </div>
                `:null;break;case cg.columnAutoIncrement:t=Kg(i.show,sg.columnAutoIncrement)?ac`
                  <div class="column-col">
                    <${SK}
                      checked=${Kg(o.options,Gg.autoIncrement)}
                      width=${qg}
                      text="AI"
                      title="Auto Increment"
                    />
                  </div>
                `:null}return{columnType:e,template:t}})).filter((({template:e})=>!!e))})(),(({columnType:e})=>e),(({template:e})=>e))}
      </div>
    `}},kP=(e,t)=>{const n=Lw(t);return()=>{const{store:t}=n.value,{settings:i,collections:o}=t.state,{table:l,columnId:r,x:a,y:s}=e,c=HG(l,t.state),u=JG(l),d=Vn(o).collection("tableColumnEntities").selectByIds(l.columnIds);return ac`
      <div
        class=${["table",qw]}
        style=${{top:`${s}px`,left:`${a}px`,width:`${c.width}px`,height:`${u}px`,position:"fixed"}}
        data-id=${l.id}
      >
        <div class=${eT}>
          <div
            class=${["table-header-color",tT]}
            style=${{"background-color":l.ui.color}}
          ></div>
          <div class=${nT}></div>
          <div class=${iT}>
            <div class="input-padding">
              <${sK}
                placeholder="table"
                width=${l.ui.widthName}
                value=${l.name}
              />
            </div>
            ${Kg(i.show,sg.tableComment)?ac`
                  <div class="input-padding">
                    <${sK}
                      placeholder="comment"
                      width=${l.ui.widthComment}
                      value=${l.comment}
                    />
                  </div>
                `:null}
          </div>
        </div>
        <div>
          ${Ja(d,(e=>e.id),(e=>ac`
              <${WP}
                column=${e}
                selected=${e.id===r}
                widthName=${c.name}
                widthDataType=${c.dataType}
                widthDefault=${c.default}
                widthComment=${c.comment}
              />
            `))}
        </div>
      </div>
    `}},VP={table:"table",column:"column"};const SP=function e(){var t=new yz,n=[],i=[],o=Zj;function l(e){let l=t.get(e);if(void 0===l){if(o!==Zj)return o;t.set(e,l=n.push(e)-1)}return i[l%i.length]}return l.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new yz;for(const i of e)t.has(i)||t.set(i,n.push(i)-1);return l},l.range=function(e){return arguments.length?(i=Array.from(e),l):i.slice()},l.unknown=function(e){return arguments.length?(o=e,l):o},l.copy=function(){return e(n,i).unknown(o)},vj.apply(l,arguments),l}(xj);function CP(e,t){const n=function({doc:{tableIds:e,relationshipIds:t},collections:n}){const i=Vn(n).collection("tableEntities").selectByIds(e),o=Vn(n).collection("relationshipEntities").selectByIds(t),l={nodes:[],links:[]},r=new Set;return i.forEach((e=>{l.nodes.push({id:e.id,name:e.name,group:VP.table}),Vn(n).collection("tableColumnEntities").selectByIds(e.columnIds).forEach((t=>{l.nodes.push({id:t.id,name:t.name,group:VP.column,tableId:e.id}),l.links.push({source:e.id,target:t.id})}))})),o.forEach((e=>{const{start:t,end:n}=e,i=`${t.tableId}-${n.tableId}`;t.tableId!==n.tableId&&!r.has(i)&&(l.links.push({source:t.tableId,target:n.tableId}),r.add(i))})),l}(e),i=n.links.map((e=>Object.create(e))),o=n.nodes.map((e=>Object.create(e))),l=bj(o).force("link",aj(i).id((e=>e.id))).force("charge",fj()).force("x",yj()).force("y",gj()),r=function(e){return zH(Lz(e).call(document.documentElement))}("svg"),a=r.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(i).join("line").attr("stroke-width",Math.sqrt(2)),s=r.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(o).join("circle").attr("r",5).attr("fill",(e=>SP(e.group))).call(function(e,t){return AH().on("start",((n,i)=>{n.active||e.alphaTarget(.3).restart(),i.fx=i.x,i.fy=i.y,t.onDragStart()})).on("drag",((e,t)=>{t.fx=e.x,t.fy=e.y})).on("end",((n,i)=>{n.active||e.alphaTarget(0),i.fx=null,i.fy=null,t.onDragEnd()}))}(l,t));return s.on("mouseenter",((e,i)=>{const o=n.nodes[i.index];let l=null,r=null;o.group===VP.table?l=o.id:o.group===VP.column&&o.tableId&&(l=o.tableId,r=o.id),t.onStartPreview(e,l,r)})),s.on("mouseleave",(()=>{t.onEndPreview()})),l.on("tick",(()=>{a.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),s.attr("cx",(e=>e.x)).attr("cy",(e=>e.y))})),r}const LP=Cc`
  position: relative;
  height: 100%;
  overflow: auto;
  background-color: var(--canvas-background);
`,RP=(e,t)=>{const n=Lw(t),{addUnsubscribe:i}=Hw(),o=Vo({preview:!1,drag:!1,table:null,columnId:null,x:0,y:0});let l=null;const r=()=>{const{store:e}=n.value,{editor:{viewport:t}}=e.state;null==l||l.attr("viewBox",[-t.width/2,-600,t.width,1200])};return co((()=>{const{store:e}=n.value,{editor:t}=e.state;l=CP(e.state,{onDragStart:()=>{o.drag=!0},onDragEnd:()=>{o.drag=!1},onStartPreview:(e,t,i)=>{if(!t)return;const{store:l}=n.value,{collections:r}=l.state,a=Vn(r).collection("tableEntities").selectById(t);a&&(o.columnId=i,o.table=a,o.x=e.clientX,o.y=e.clientY,o.preview=!0)},onEndPreview:()=>{o.preview=!1}}),r(),i(So(t.viewport).subscribe((e=>{"width"===e&&r()})),(()=>{null==l||l.remove(),l=null}))})),()=>{const e=o.table&&!o.drag&&o.preview;return ac`
      <div class=${["scrollbar",LP]}>
        ${null==l?void 0:l.node()}
        ${e?ac`
              <${kP}
                table=${o.table}
                columnId=${o.columnId}
                x=${o.x+20}
                y=${o.y}
              />
            `:null}
      </div>
    `}};var YP=["Shift","Meta","Alt","Control"],wP="object"==typeof navigator?navigator.platform:"",TP=/Mac|iPod|iPhone|iPad/.test(wP),NP=TP?"Meta":"Control",KP="Win32"===wP?["Control","Alt"]:TP?["Alt"]:[];function zP(e,t){return"function"==typeof e.getModifierState&&(e.getModifierState(t)||KP.includes(t)&&e.getModifierState("AltGraph"))}function HP(e){return e.trim().split(" ").map((function(e){var t=e.split(/\b\+/),n=t.pop();return[t=t.map((function(e){return"$mod"===e?NP:e})),n]}))}function MP(e,t,n){var i;void 0===n&&(n={});var o=null!=(i=n.event)?i:"keydown",l=function(e,t){var n;void 0===t&&(t={});var i=null!=(n=t.timeout)?n:1e3,o=Object.keys(e).map((function(t){return[HP(t),e[t]]})),l=new Map,r=null;return function(e){e instanceof KeyboardEvent&&(o.forEach((function(t){var n=t[0],i=t[1],o=l.get(n)||n;!function(e,t){return!(t[1].toUpperCase()!==e.key.toUpperCase()&&t[1]!==e.code||t[0].find((function(t){return!zP(e,t)}))||YP.find((function(n){return!t[0].includes(n)&&t[1]!==n&&zP(e,n)})))}(e,o[0])?zP(e,e.key)||l.delete(n):o.length>1?l.set(n,o.slice(1)):(l.delete(n),i(e))})),r&&clearTimeout(r),r=setTimeout(l.clear.bind(l),i))}}(t,n);return e.addEventListener(o,l),function(){e.removeEventListener(o,l)}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const JP=Symbol("Comlink.proxy"),jP=Symbol("Comlink.endpoint"),FP=Symbol("Comlink.releaseProxy"),UP=Symbol("Comlink.finalizer"),OP=Symbol("Comlink.thrown"),EP=e=>"object"==typeof e&&null!==e||"function"==typeof e,$P={canHandle:e=>EP(e)&&e[JP],serialize(e){const{port1:t,port2:n}=new MessageChannel;return AP(e,t),[n,[n]]},deserialize:e=>(e.start(),DP(e))},PP={canHandle:e=>EP(e)&&OP in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},BP=new Map([["proxy",$P],["throw",PP]]);function AP(e,t=globalThis,n=["*"]){t.addEventListener("message",(function i(o){if(!o||!o.data)return;if(!function(e,t){for(const n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}(n,o.origin))return void console.warn(`Invalid origin '${o.origin}' for comlink proxy`);const{id:l,type:r,path:a}=Object.assign({path:[]},o.data),s=(o.data.argumentList||[]).map(aB);let c;try{const t=a.slice(0,-1).reduce(((e,t)=>e[t]),e),n=a.reduce(((e,t)=>e[t]),e);switch(r){case"GET":c=n;break;case"SET":t[a.slice(-1)[0]]=aB(o.data.value),c=!0;break;case"APPLY":c=n.apply(t,s);break;case"CONSTRUCT":c=function(e){return Object.assign(e,{[JP]:!0})}(new n(...s));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;AP(e,n),c=function(e,t){return lB.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(e){c={value:e,[OP]:0}}Promise.resolve(c).catch((e=>({value:e,[OP]:0}))).then((n=>{const[o,a]=rB(n);t.postMessage(Object.assign(Object.assign({},o),{id:l}),a),"RELEASE"===r&&(t.removeEventListener("message",i),QP(t),UP in e&&"function"==typeof e[UP]&&e[UP]())})).catch((e=>{const[n,i]=rB({value:new TypeError("Unserializable return value"),[OP]:0});t.postMessage(Object.assign(Object.assign({},n),{id:l}),i)}))})),t.start&&t.start()}function QP(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function DP(e,t){return nB(e,[],t)}function _P(e){if(e)throw new Error("Proxy has been released and is not useable")}function qP(e){return sB(e,{type:"RELEASE"}).then((()=>{QP(e)}))}const eB=new WeakMap,tB="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(eB.get(e)||0)-1;eB.set(e,t),0===t&&qP(e)}));function nB(e,t=[],n=function(){}){let i=!1;const o=new Proxy(n,{get(n,l){if(_P(i),l===FP)return()=>{(function(e){tB&&tB.unregister(e)})(o),qP(e),i=!0};if("then"===l){if(0===t.length)return{then:()=>o};const n=sB(e,{type:"GET",path:t.map((e=>e.toString()))}).then(aB);return n.then.bind(n)}return nB(e,[...t,l])},set(n,o,l){_P(i);const[r,a]=rB(l);return sB(e,{type:"SET",path:[...t,o].map((e=>e.toString())),value:r},a).then(aB)},apply(n,o,l){_P(i);const r=t[t.length-1];if(r===jP)return sB(e,{type:"ENDPOINT"}).then(aB);if("bind"===r)return nB(e,t.slice(0,-1));const[a,s]=oB(l);return sB(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:a},s).then(aB)},construct(n,o){_P(i);const[l,r]=oB(o);return sB(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:l},r).then(aB)}});return function(e,t){const n=(eB.get(t)||0)+1;eB.set(t,n),tB&&tB.register(e,t,e)}(o,e),o}function iB(e){return Array.prototype.concat.apply([],e)}function oB(e){const t=e.map(rB);return[t.map((e=>e[0])),iB(t.map((e=>e[1])))]}const lB=new WeakMap;function rB(e){for(const[t,n]of BP)if(n.canHandle(e)){const[i,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},o]}return[{type:"RAW",value:e},lB.get(e)||[]]}function aB(e){switch(e.type){case"HANDLER":return BP.get(e.name).deserialize(e.value);case"RAW":return e.value}}function sB(e,t,n){return new Promise((i=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){!n.data||!n.data.id||n.data.id!==o||(e.removeEventListener("message",t),i(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)}))}const cB="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDCiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wCiAqL2NvbnN0IGNuPVN5bWJvbCgiQ29tbGluay5wcm94eSIpLGJzPVN5bWJvbCgiQ29tbGluay5lbmRwb2ludCIpLElzPVN5bWJvbCgiQ29tbGluay5yZWxlYXNlUHJveHkiKSxJdD1TeW1ib2woIkNvbWxpbmsuZmluYWxpemVyIiksWWU9U3ltYm9sKCJDb21saW5rLnRocm93biIpLGZuPXQ9PnR5cGVvZiB0PT0ib2JqZWN0IiYmdCE9PW51bGx8fHR5cGVvZiB0PT0iZnVuY3Rpb24iLEVzPXtjYW5IYW5kbGU6dD0+Zm4odCkmJnRbY25dLHNlcmlhbGl6ZSh0KXtjb25zdHtwb3J0MTplLHBvcnQyOm59PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gRXQodCxlKSxbbixbbl1dfSxkZXNlcmlhbGl6ZSh0KXtyZXR1cm4gdC5zdGFydCgpLERzKHQpfX0sTnM9e2NhbkhhbmRsZTp0PT5mbih0KSYmWWUgaW4gdCxzZXJpYWxpemUoe3ZhbHVlOnR9KXtsZXQgZTtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP2U9e2lzRXJyb3I6ITAsdmFsdWU6e21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2t9fTplPXtpc0Vycm9yOiExLHZhbHVlOnR9LFtlLFtdXX0sZGVzZXJpYWxpemUodCl7dGhyb3cgdC5pc0Vycm9yP09iamVjdC5hc3NpZ24obmV3IEVycm9yKHQudmFsdWUubWVzc2FnZSksdC52YWx1ZSk6dC52YWx1ZX19LGRuPW5ldyBNYXAoW1sicHJveHkiLEVzXSxbInRocm93IixOc11dKTtmdW5jdGlvbiBNcyh0LGUpe2Zvcihjb25zdCBuIG9mIHQpaWYoZT09PW58fG49PT0iKiJ8fG4gaW5zdGFuY2VvZiBSZWdFeHAmJm4udGVzdChlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBFdCh0LGU9Z2xvYmFsVGhpcyxuPVsiKiJdKXtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIHIocyl7aWYoIXN8fCFzLmRhdGEpcmV0dXJuO2lmKCFNcyhuLHMub3JpZ2luKSl7Y29uc29sZS53YXJuKGBJbnZhbGlkIG9yaWdpbiAnJHtzLm9yaWdpbn0nIGZvciBjb21saW5rIHByb3h5YCk7cmV0dXJufWNvbnN0e2lkOmksdHlwZTphLHBhdGg6b309T2JqZWN0LmFzc2lnbih7cGF0aDpbXX0scy5kYXRhKSx1PShzLmRhdGEuYXJndW1lbnRMaXN0fHxbXSkubWFwKHVlKTtsZXQgbDt0cnl7Y29uc3QgYz1vLnNsaWNlKDAsLTEpLnJlZHVjZSgocCxoKT0+cFtoXSx0KSxkPW8ucmVkdWNlKChwLGgpPT5wW2hdLHQpO3N3aXRjaChhKXtjYXNlIkdFVCI6bD1kO2JyZWFrO2Nhc2UiU0VUIjpjW28uc2xpY2UoLTEpWzBdXT11ZShzLmRhdGEudmFsdWUpLGw9ITA7YnJlYWs7Y2FzZSJBUFBMWSI6bD1kLmFwcGx5KGMsdSk7YnJlYWs7Y2FzZSJDT05TVFJVQ1QiOntjb25zdCBwPW5ldyBkKC4uLnUpO2w9V3MocCl9YnJlYWs7Y2FzZSJFTkRQT0lOVCI6e2NvbnN0e3BvcnQxOnAscG9ydDI6aH09bmV3IE1lc3NhZ2VDaGFubmVsO0V0KHQsaCksbD1WcyhwLFtwXSl9YnJlYWs7Y2FzZSJSRUxFQVNFIjpsPXZvaWQgMDticmVhaztkZWZhdWx0OnJldHVybn19Y2F0Y2goYyl7bD17dmFsdWU6YyxbWWVdOjB9fVByb21pc2UucmVzb2x2ZShsKS5jYXRjaChjPT4oe3ZhbHVlOmMsW1llXTowfSkpLnRoZW4oYz0+e2NvbnN0W2QscF09UWUoYyk7ZS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZCkse2lkOml9KSxwKSxhPT09IlJFTEVBU0UiJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixyKSxobihlKSxJdCBpbiB0JiZ0eXBlb2YgdFtJdF09PSJmdW5jdGlvbiImJnRbSXRdKCkpfSkuY2F0Y2goYz0+e2NvbnN0W2QscF09UWUoe3ZhbHVlOm5ldyBUeXBlRXJyb3IoIlVuc2VyaWFsaXphYmxlIHJldHVybiB2YWx1ZSIpLFtZZV06MH0pO2UucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGQpLHtpZDppfSkscCl9KX0pLGUuc3RhcnQmJmUuc3RhcnQoKX1mdW5jdGlvbiB4cyh0KXtyZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lPT09Ik1lc3NhZ2VQb3J0In1mdW5jdGlvbiBobih0KXt4cyh0KSYmdC5jbG9zZSgpfWZ1bmN0aW9uIERzKHQsZSl7cmV0dXJuIE50KHQsW10sZSl9ZnVuY3Rpb24gR2UodCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpfWZ1bmN0aW9uIG1uKHQpe3JldHVybiB3ZSh0LHt0eXBlOiJSRUxFQVNFIn0pLnRoZW4oKCk9Pntobih0KX0pfWNvbnN0IEplPW5ldyBXZWFrTWFwLEJlPSJGaW5hbGl6YXRpb25SZWdpc3RyeSJpbiBnbG9iYWxUaGlzJiZuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkodD0+e2NvbnN0IGU9KEplLmdldCh0KXx8MCktMTtKZS5zZXQodCxlKSxlPT09MCYmbW4odCl9KTtmdW5jdGlvbiBDcyh0LGUpe2NvbnN0IG49KEplLmdldChlKXx8MCkrMTtKZS5zZXQoZSxuKSxCZSYmQmUucmVnaXN0ZXIodCxlLHQpfWZ1bmN0aW9uIEZzKHQpe0JlJiZCZS51bnJlZ2lzdGVyKHQpfWZ1bmN0aW9uIE50KHQsZT1bXSxuPWZ1bmN0aW9uKCl7fSl7bGV0IHI9ITE7Y29uc3Qgcz1uZXcgUHJveHkobix7Z2V0KGksYSl7aWYoR2UociksYT09PUlzKXJldHVybigpPT57RnMocyksbW4odCkscj0hMH07aWYoYT09PSJ0aGVuIil7aWYoZS5sZW5ndGg9PT0wKXJldHVybnt0aGVuOigpPT5zfTtjb25zdCBvPXdlKHQse3R5cGU6IkdFVCIscGF0aDplLm1hcCh1PT51LnRvU3RyaW5nKCkpfSkudGhlbih1ZSk7cmV0dXJuIG8udGhlbi5iaW5kKG8pfXJldHVybiBOdCh0LFsuLi5lLGFdKX0sc2V0KGksYSxvKXtHZShyKTtjb25zdFt1LGxdPVFlKG8pO3JldHVybiB3ZSh0LHt0eXBlOiJTRVQiLHBhdGg6Wy4uLmUsYV0ubWFwKGM9PmMudG9TdHJpbmcoKSksdmFsdWU6dX0sbCkudGhlbih1ZSl9LGFwcGx5KGksYSxvKXtHZShyKTtjb25zdCB1PWVbZS5sZW5ndGgtMV07aWYodT09PWJzKXJldHVybiB3ZSh0LHt0eXBlOiJFTkRQT0lOVCJ9KS50aGVuKHVlKTtpZih1PT09ImJpbmQiKXJldHVybiBOdCh0LGUuc2xpY2UoMCwtMSkpO2NvbnN0W2wsY109eW4obyk7cmV0dXJuIHdlKHQse3R5cGU6IkFQUExZIixwYXRoOmUubWFwKGQ9PmQudG9TdHJpbmcoKSksYXJndW1lbnRMaXN0Omx9LGMpLnRoZW4odWUpfSxjb25zdHJ1Y3QoaSxhKXtHZShyKTtjb25zdFtvLHVdPXluKGEpO3JldHVybiB3ZSh0LHt0eXBlOiJDT05TVFJVQ1QiLHBhdGg6ZS5tYXAobD0+bC50b1N0cmluZygpKSxhcmd1bWVudExpc3Q6b30sdSkudGhlbih1ZSl9fSk7cmV0dXJuIENzKHMsdCksc31mdW5jdGlvbiBBcyh0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KX1mdW5jdGlvbiB5bih0KXtjb25zdCBlPXQubWFwKFFlKTtyZXR1cm5bZS5tYXAobj0+blswXSksQXMoZS5tYXAobj0+blsxXSkpXX1jb25zdCBnbj1uZXcgV2Vha01hcDtmdW5jdGlvbiBWcyh0LGUpe3JldHVybiBnbi5zZXQodCxlKSx0fWZ1bmN0aW9uIFdzKHQpe3JldHVybiBPYmplY3QuYXNzaWduKHQse1tjbl06ITB9KX1mdW5jdGlvbiBRZSh0KXtmb3IoY29uc3RbZSxuXW9mIGRuKWlmKG4uY2FuSGFuZGxlKHQpKXtjb25zdFtyLHNdPW4uc2VyaWFsaXplKHQpO3JldHVyblt7dHlwZToiSEFORExFUiIsbmFtZTplLHZhbHVlOnJ9LHNdfXJldHVyblt7dHlwZToiUkFXIix2YWx1ZTp0fSxnbi5nZXQodCl8fFtdXX1mdW5jdGlvbiB1ZSh0KXtzd2l0Y2godC50eXBlKXtjYXNlIkhBTkRMRVIiOnJldHVybiBkbi5nZXQodC5uYW1lKS5kZXNlcmlhbGl6ZSh0LnZhbHVlKTtjYXNlIlJBVyI6cmV0dXJuIHQudmFsdWV9fWZ1bmN0aW9uIHdlKHQsZSxuKXtyZXR1cm4gbmV3IFByb21pc2Uocj0+e2NvbnN0IHM9THMoKTt0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIGkoYSl7IWEuZGF0YXx8IWEuZGF0YS5pZHx8YS5kYXRhLmlkIT09c3x8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaSkscihhLmRhdGEpKX0pLHQuc3RhcnQmJnQuc3RhcnQoKSx0LnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oe2lkOnN9LGUpLG4pfSl9ZnVuY3Rpb24gTHMoKXtyZXR1cm4gbmV3IEFycmF5KDQpLmZpbGwoMCkubWFwKCgpPT5NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLnRvU3RyaW5nKDE2KSkuam9pbigiLSIpfS8qIQogKiBAZGluZXVnL2VyZC1lZGl0b3Itc2NoZW1hCiAqIEB2ZXJzaW9uIDAuMS4wIHwgU2F0IEFwciAxMyAyMDI0CiAqIEBhdXRob3IgU2V1bmdId2FuLUxlZSA8ZGluZXVnMkBnbWFpbC5jb20+CiAqIEBsaWNlbnNlIE1JVAogKi92YXIgX3M9dHlwZW9mIGdsb2JhbD09Im9iamVjdCImJmdsb2JhbCYmZ2xvYmFsLk9iamVjdD09PU9iamVjdCYmZ2xvYmFsO2NvbnN0IHpzPV9zO3ZhciAkcz10eXBlb2Ygc2VsZj09Im9iamVjdCImJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLFpzPXpzfHwkc3x8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTtjb25zdCBNdD1aczt2YXIgUnM9TXQuU3ltYm9sO2NvbnN0IFg9UnM7dmFyIHBuPU9iamVjdC5wcm90b3R5cGUsVXM9cG4uaGFzT3duUHJvcGVydHksUHM9cG4udG9TdHJpbmcsQWU9WD9YLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiBxcyh0KXt2YXIgZT1Vcy5jYWxsKHQsQWUpLG49dFtBZV07dHJ5e3RbQWVdPXZvaWQgMDt2YXIgcj0hMH1jYXRjaHt9dmFyIHM9UHMuY2FsbCh0KTtyZXR1cm4gciYmKGU/dFtBZV09bjpkZWxldGUgdFtBZV0pLHN9dmFyIGpzPU9iamVjdC5wcm90b3R5cGUsSHM9anMudG9TdHJpbmc7ZnVuY3Rpb24gWXModCl7cmV0dXJuIEhzLmNhbGwodCl9dmFyIEdzPSJbb2JqZWN0IE51bGxdIixKcz0iW29iamVjdCBVbmRlZmluZWRdIix3bj1YP1gudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIHh0KHQpe3JldHVybiB0PT1udWxsP3Q9PT12b2lkIDA/SnM6R3M6d24mJnduIGluIE9iamVjdCh0KT9xcyh0KTpZcyh0KX1mdW5jdGlvbiBLZSh0KXtyZXR1cm4gdCE9bnVsbCYmdHlwZW9mIHQ9PSJvYmplY3QifXZhciBCcz0iW29iamVjdCBTeW1ib2xdIjtmdW5jdGlvbiBEdCh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJzeW1ib2wifHxLZSh0KSYmeHQodCk9PUJzfWZ1bmN0aW9uIHZuKHQsZSl7Zm9yKHZhciBuPS0xLHI9dD09bnVsbD8wOnQubGVuZ3RoLHM9QXJyYXkocik7KytuPHI7KXNbbl09ZSh0W25dLG4sdCk7cmV0dXJuIHN9dmFyIFFzPUFycmF5LmlzQXJyYXk7Y29uc3QgVmU9UXM7dmFyIEtzPTEvMCxPbj1YP1gucHJvdG90eXBlOnZvaWQgMCxUbj1Pbj9Pbi50b1N0cmluZzp2b2lkIDA7ZnVuY3Rpb24gU24odCl7aWYodHlwZW9mIHQ9PSJzdHJpbmciKXJldHVybiB0O2lmKFZlKHQpKXJldHVybiB2bih0LFNuKSsiIjtpZihEdCh0KSlyZXR1cm4gVG4/VG4uY2FsbCh0KToiIjt2YXIgZT10KyIiO3JldHVybiBlPT0iMCImJjEvdD09LUtzPyItMCI6ZX1mdW5jdGlvbiBYZSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gdCE9bnVsbCYmKGU9PSJvYmplY3QifHxlPT0iZnVuY3Rpb24iKX1mdW5jdGlvbiBrbih0KXtyZXR1cm4gdH12YXIgWHM9IltvYmplY3QgQXN5bmNGdW5jdGlvbl0iLGVpPSJbb2JqZWN0IEZ1bmN0aW9uXSIsdGk9IltvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dIixuaT0iW29iamVjdCBQcm94eV0iO2Z1bmN0aW9uIGJuKHQpe2lmKCFYZSh0KSlyZXR1cm4hMTt2YXIgZT14dCh0KTtyZXR1cm4gZT09ZWl8fGU9PXRpfHxlPT1Yc3x8ZT09bml9dmFyIHJpPU10WyJfX2NvcmUtanNfc2hhcmVkX18iXTtjb25zdCBDdD1yaTt2YXIgSW49ZnVuY3Rpb24oKXt2YXIgdD0vW14uXSskLy5leGVjKEN0JiZDdC5rZXlzJiZDdC5rZXlzLklFX1BST1RPfHwiIik7cmV0dXJuIHQ/IlN5bWJvbChzcmMpXzEuIit0OiIifSgpO2Z1bmN0aW9uIHNpKHQpe3JldHVybiEhSW4mJkluIGluIHR9dmFyIGlpPUZ1bmN0aW9uLnByb3RvdHlwZSxhaT1paS50b1N0cmluZztmdW5jdGlvbiBvaSh0KXtpZih0IT1udWxsKXt0cnl7cmV0dXJuIGFpLmNhbGwodCl9Y2F0Y2h7fXRyeXtyZXR1cm4gdCsiIn1jYXRjaHt9fXJldHVybiIifXZhciB1aT0vW1xcXiQuKis/KClbXF17fXxdL2csbGk9L15cW29iamVjdCAuKz9Db25zdHJ1Y3RvclxdJC8sY2k9RnVuY3Rpb24ucHJvdG90eXBlLGZpPU9iamVjdC5wcm90b3R5cGUsZGk9Y2kudG9TdHJpbmcsaGk9ZmkuaGFzT3duUHJvcGVydHksbWk9UmVnRXhwKCJeIitkaS5jYWxsKGhpKS5yZXBsYWNlKHVpLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpO2Z1bmN0aW9uIHlpKHQpe2lmKCFYZSh0KXx8c2kodCkpcmV0dXJuITE7dmFyIGU9Ym4odCk/bWk6bGk7cmV0dXJuIGUudGVzdChvaSh0KSl9ZnVuY3Rpb24gZ2kodCxlKXtyZXR1cm4gdD09bnVsbD92b2lkIDA6dFtlXX1mdW5jdGlvbiBGdCh0LGUpe3ZhciBuPWdpKHQsZSk7cmV0dXJuIHlpKG4pP246dm9pZCAwfWZ1bmN0aW9uIHBpKHQsZSxuKXtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdC5jYWxsKGUpO2Nhc2UgMTpyZXR1cm4gdC5jYWxsKGUsblswXSk7Y2FzZSAyOnJldHVybiB0LmNhbGwoZSxuWzBdLG5bMV0pO2Nhc2UgMzpyZXR1cm4gdC5jYWxsKGUsblswXSxuWzFdLG5bMl0pfXJldHVybiB0LmFwcGx5KGUsbil9dmFyIHdpPTgwMCx2aT0xNixPaT1EYXRlLm5vdztmdW5jdGlvbiBUaSh0KXt2YXIgZT0wLG49MDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1PaSgpLHM9dmktKHItbik7aWYobj1yLHM+MCl7aWYoKytlPj13aSlyZXR1cm4gYXJndW1lbnRzWzBdfWVsc2UgZT0wO3JldHVybiB0LmFwcGx5KHZvaWQgMCxhcmd1bWVudHMpfX1mdW5jdGlvbiBTaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19dmFyIGtpPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PUZ0KE9iamVjdCwiZGVmaW5lUHJvcGVydHkiKTtyZXR1cm4gdCh7fSwiIix7fSksdH1jYXRjaHt9fSgpO2NvbnN0IGV0PWtpO3ZhciBiaT1ldD9mdW5jdGlvbih0LGUpe3JldHVybiBldCh0LCJ0b1N0cmluZyIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOlNpKGUpLHdyaXRhYmxlOiEwfSl9OmtuLElpPVRpKGJpKTtjb25zdCBFbj1JaTtmdW5jdGlvbiBFaSh0LGUsbixyKXtmb3IodmFyIHM9dC5sZW5ndGgsaT1uKyhyPzE6LTEpO3I/aS0tOisraTxzOylpZihlKHRbaV0saSx0KSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBOaSh0KXtyZXR1cm4gdCE9PXR9ZnVuY3Rpb24gTWkodCxlLG4pe2Zvcih2YXIgcj1uLTEscz10Lmxlbmd0aDsrK3I8czspaWYodFtyXT09PWUpcmV0dXJuIHI7cmV0dXJuLTF9ZnVuY3Rpb24geGkodCxlLG4pe3JldHVybiBlPT09ZT9NaSh0LGUsbik6RWkodCxOaSxuKX1mdW5jdGlvbiBEaSh0LGUpe3ZhciBuPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4hIW4mJnhpKHQsZSwwKT4tMX12YXIgQ2k9OTAwNzE5OTI1NDc0MDk5MSxGaT0vXig/OjB8WzEtOV1cZCopJC87ZnVuY3Rpb24gTm4odCxlKXt2YXIgbj10eXBlb2YgdDtyZXR1cm4gZT1lPz9DaSwhIWUmJihuPT0ibnVtYmVyInx8biE9InN5bWJvbCImJkZpLnRlc3QodCkpJiZ0Pi0xJiZ0JTE9PTAmJnQ8ZX1mdW5jdGlvbiBBaSh0LGUsbil7ZT09Il9fcHJvdG9fXyImJmV0P2V0KHQsZSx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6bix3cml0YWJsZTohMH0pOnRbZV09bn1mdW5jdGlvbiBNbih0LGUpe3JldHVybiB0PT09ZXx8dCE9PXQmJmUhPT1lfXZhciBWaT1PYmplY3QucHJvdG90eXBlLFdpPVZpLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIExpKHQsZSxuKXt2YXIgcj10W2VdOyghKFdpLmNhbGwodCxlKSYmTW4ocixuKSl8fG49PT12b2lkIDAmJiEoZSBpbiB0KSkmJkFpKHQsZSxuKX12YXIgeG49TWF0aC5tYXg7ZnVuY3Rpb24gRG4odCxlLG4pe3JldHVybiBlPXhuKGU9PT12b2lkIDA/dC5sZW5ndGgtMTplLDApLGZ1bmN0aW9uKCl7Zm9yKHZhciByPWFyZ3VtZW50cyxzPS0xLGk9eG4oci5sZW5ndGgtZSwwKSxhPUFycmF5KGkpOysrczxpOylhW3NdPXJbZStzXTtzPS0xO2Zvcih2YXIgbz1BcnJheShlKzEpOysrczxlOylvW3NdPXJbc107cmV0dXJuIG9bZV09bihhKSxwaSh0LHRoaXMsbyl9fWZ1bmN0aW9uIF9pKHQsZSl7cmV0dXJuIEVuKERuKHQsZSxrbiksdCsiIil9dmFyIHppPTkwMDcxOTkyNTQ3NDA5OTE7ZnVuY3Rpb24gQ24odCl7cmV0dXJuIHR5cGVvZiB0PT0ibnVtYmVyIiYmdD4tMSYmdCUxPT0wJiZ0PD16aX1mdW5jdGlvbiAkaSh0KXtyZXR1cm4gdCE9bnVsbCYmQ24odC5sZW5ndGgpJiYhYm4odCl9dmFyIFppPSJbb2JqZWN0IEFyZ3VtZW50c10iO2Z1bmN0aW9uIEZuKHQpe3JldHVybiBLZSh0KSYmeHQodCk9PVppfXZhciBBbj1PYmplY3QucHJvdG90eXBlLFJpPUFuLmhhc093blByb3BlcnR5LFVpPUFuLnByb3BlcnR5SXNFbnVtZXJhYmxlLFBpPUZuKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk/Rm46ZnVuY3Rpb24odCl7cmV0dXJuIEtlKHQpJiZSaS5jYWxsKHQsImNhbGxlZSIpJiYhVWkuY2FsbCh0LCJjYWxsZWUiKX07Y29uc3QgVm49UGk7ZnVuY3Rpb24gcWkodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfX12YXIgamk9L1wufFxbKD86W15bXF1dKnwoWyInXSkoPzooPyFcMSlbXlxcXXxcXC4pKj9cMSlcXS8sSGk9L15cdyokLztmdW5jdGlvbiBZaSh0LGUpe2lmKFZlKHQpKXJldHVybiExO3ZhciBuPXR5cGVvZiB0O3JldHVybiBuPT0ibnVtYmVyInx8bj09InN5bWJvbCJ8fG49PSJib29sZWFuInx8dD09bnVsbHx8RHQodCk/ITA6SGkudGVzdCh0KXx8IWppLnRlc3QodCl8fGUhPW51bGwmJnQgaW4gT2JqZWN0KGUpfXZhciBHaT1GdChPYmplY3QsImNyZWF0ZSIpO2NvbnN0IFdlPUdpO2Z1bmN0aW9uIEppKCl7dGhpcy5fX2RhdGFfXz1XZT9XZShudWxsKTp7fSx0aGlzLnNpemU9MH1mdW5jdGlvbiBCaSh0KXt2YXIgZT10aGlzLmhhcyh0KSYmZGVsZXRlIHRoaXMuX19kYXRhX19bdF07cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX12YXIgUWk9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iLEtpPU9iamVjdC5wcm90b3R5cGUsWGk9S2kuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gZWEodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztpZihXZSl7dmFyIG49ZVt0XTtyZXR1cm4gbj09PVFpP3ZvaWQgMDpufXJldHVybiBYaS5jYWxsKGUsdCk/ZVt0XTp2b2lkIDB9dmFyIHRhPU9iamVjdC5wcm90b3R5cGUsbmE9dGEuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gcmEodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gV2U/ZVt0XSE9PXZvaWQgMDpuYS5jYWxsKGUsdCl9dmFyIHNhPSJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjtmdW5jdGlvbiBpYSh0LGUpe3ZhciBuPXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXModCk/MDoxLG5bdF09V2UmJmU9PT12b2lkIDA/c2E6ZSx0aGlzfWZ1bmN0aW9uIGxlKHQpe3ZhciBlPS0xLG49dD09bnVsbD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fWxlLnByb3RvdHlwZS5jbGVhcj1KaSxsZS5wcm90b3R5cGUuZGVsZXRlPUJpLGxlLnByb3RvdHlwZS5nZXQ9ZWEsbGUucHJvdG90eXBlLmhhcz1yYSxsZS5wcm90b3R5cGUuc2V0PWlhO2Z1bmN0aW9uIGFhKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH1mdW5jdGlvbiB0dCh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aDtuLS07KWlmKE1uKHRbbl1bMF0sZSkpcmV0dXJuIG47cmV0dXJuLTF9dmFyIG9hPUFycmF5LnByb3RvdHlwZSx1YT1vYS5zcGxpY2U7ZnVuY3Rpb24gbGEodCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPXR0KGUsdCk7aWYobjwwKXJldHVybiExO3ZhciByPWUubGVuZ3RoLTE7cmV0dXJuIG49PXI/ZS5wb3AoKTp1YS5jYWxsKGUsbiwxKSwtLXRoaXMuc2l6ZSwhMH1mdW5jdGlvbiBjYSh0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49dHQoZSx0KTtyZXR1cm4gbjwwP3ZvaWQgMDplW25dWzFdfWZ1bmN0aW9uIGZhKHQpe3JldHVybiB0dCh0aGlzLl9fZGF0YV9fLHQpPi0xfWZ1bmN0aW9uIGRhKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXyxyPXR0KG4sdCk7cmV0dXJuIHI8MD8oKyt0aGlzLnNpemUsbi5wdXNoKFt0LGVdKSk6bltyXVsxXT1lLHRoaXN9ZnVuY3Rpb24gdmUodCl7dmFyIGU9LTEsbj10PT1udWxsPzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8bjspe3ZhciByPXRbZV07dGhpcy5zZXQoclswXSxyWzFdKX19dmUucHJvdG90eXBlLmNsZWFyPWFhLHZlLnByb3RvdHlwZS5kZWxldGU9bGEsdmUucHJvdG90eXBlLmdldD1jYSx2ZS5wcm90b3R5cGUuaGFzPWZhLHZlLnByb3RvdHlwZS5zZXQ9ZGE7dmFyIGhhPUZ0KE10LCJNYXAiKTtjb25zdCBtYT1oYTtmdW5jdGlvbiB5YSgpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IGxlLG1hcDpuZXcobWF8fHZlKSxzdHJpbmc6bmV3IGxlfX1mdW5jdGlvbiBnYSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gZT09InN0cmluZyJ8fGU9PSJudW1iZXIifHxlPT0ic3ltYm9sInx8ZT09ImJvb2xlYW4iP3QhPT0iX19wcm90b19fIjp0PT09bnVsbH1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPXQuX19kYXRhX187cmV0dXJuIGdhKGUpP25bdHlwZW9mIGU9PSJzdHJpbmciPyJzdHJpbmciOiJoYXNoIl06bi5tYXB9ZnVuY3Rpb24gcGEodCl7dmFyIGU9bnQodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX1mdW5jdGlvbiB3YSh0KXtyZXR1cm4gbnQodGhpcyx0KS5nZXQodCl9ZnVuY3Rpb24gdmEodCl7cmV0dXJuIG50KHRoaXMsdCkuaGFzKHQpfWZ1bmN0aW9uIE9hKHQsZSl7dmFyIG49bnQodGhpcyx0KSxyPW4uc2l6ZTtyZXR1cm4gbi5zZXQodCxlKSx0aGlzLnNpemUrPW4uc2l6ZT09cj8wOjEsdGhpc31mdW5jdGlvbiBlZSh0KXt2YXIgZT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1lZS5wcm90b3R5cGUuY2xlYXI9eWEsZWUucHJvdG90eXBlLmRlbGV0ZT1wYSxlZS5wcm90b3R5cGUuZ2V0PXdhLGVlLnByb3RvdHlwZS5oYXM9dmEsZWUucHJvdG90eXBlLnNldD1PYTt2YXIgVGE9IkV4cGVjdGVkIGEgZnVuY3Rpb24iO2Z1bmN0aW9uIEF0KHQsZSl7aWYodHlwZW9mIHQhPSJmdW5jdGlvbiJ8fGUhPW51bGwmJnR5cGVvZiBlIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoVGEpO3ZhciBuPWZ1bmN0aW9uKCl7dmFyIHI9YXJndW1lbnRzLHM9ZT9lLmFwcGx5KHRoaXMscik6clswXSxpPW4uY2FjaGU7aWYoaS5oYXMocykpcmV0dXJuIGkuZ2V0KHMpO3ZhciBhPXQuYXBwbHkodGhpcyxyKTtyZXR1cm4gbi5jYWNoZT1pLnNldChzLGEpfHxpLGF9O3JldHVybiBuLmNhY2hlPW5ldyhBdC5DYWNoZXx8ZWUpLG59QXQuQ2FjaGU9ZWU7dmFyIFNhPTUwMDtmdW5jdGlvbiBrYSh0KXt2YXIgZT1BdCh0LGZ1bmN0aW9uKHIpe3JldHVybiBuLnNpemU9PT1TYSYmbi5jbGVhcigpLHJ9KSxuPWUuY2FjaGU7cmV0dXJuIGV9dmFyIGJhPS9bXi5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxcXXxcXC4pKj8pXDIpXF18KD89KD86XC58XFtcXSkoPzpcLnxcW1xdfCQpKS9nLElhPS9cXChcXCk/L2csRWE9a2EoZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHQuY2hhckNvZGVBdCgwKT09PTQ2JiZlLnB1c2goIiIpLHQucmVwbGFjZShiYSxmdW5jdGlvbihuLHIscyxpKXtlLnB1c2gocz9pLnJlcGxhY2UoSWEsIiQxIik6cnx8bil9KSxlfSk7Y29uc3QgTmE9RWE7ZnVuY3Rpb24gTWEodCl7cmV0dXJuIHQ9PW51bGw/IiI6U24odCl9ZnVuY3Rpb24gcnQodCxlKXtyZXR1cm4gVmUodCk/dDpZaSh0LGUpP1t0XTpOYShNYSh0KSl9dmFyIHhhPTEvMDtmdW5jdGlvbiBWdCh0KXtpZih0eXBlb2YgdD09InN0cmluZyJ8fER0KHQpKXJldHVybiB0O3ZhciBlPXQrIiI7cmV0dXJuIGU9PSIwIiYmMS90PT0teGE/Ii0wIjplfWZ1bmN0aW9uIERhKHQsZSl7ZT1ydChlLHQpO2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7dCE9bnVsbCYmbjxyOyl0PXRbVnQoZVtuKytdKV07cmV0dXJuIG4mJm49PXI/dDp2b2lkIDB9ZnVuY3Rpb24gQ2EodCxlKXtmb3IodmFyIG49LTEscj1lLmxlbmd0aCxzPXQubGVuZ3RoOysrbjxyOyl0W3Mrbl09ZVtuXTtyZXR1cm4gdH12YXIgV249WD9YLmlzQ29uY2F0U3ByZWFkYWJsZTp2b2lkIDA7ZnVuY3Rpb24gRmEodCl7cmV0dXJuIFZlKHQpfHxWbih0KXx8ISEoV24mJnQmJnRbV25dKX1mdW5jdGlvbiBXdCh0LGUsbixyLHMpe3ZhciBpPS0xLGE9dC5sZW5ndGg7Zm9yKG58fChuPUZhKSxzfHwocz1bXSk7KytpPGE7KXt2YXIgbz10W2ldO2U+MCYmbihvKT9lPjE/V3QobyxlLTEsbixyLHMpOkNhKHMsbyk6cnx8KHNbcy5sZW5ndGhdPW8pfXJldHVybiBzfWZ1bmN0aW9uIEFhKHQpe3ZhciBlPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4gZT9XdCh0LDEpOltdfWZ1bmN0aW9uIFZhKHQpe3JldHVybiBFbihEbih0LHZvaWQgMCxBYSksdCsiIil9dmFyIFdhPSJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjtmdW5jdGlvbiBMYSh0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQodCxXYSksdGhpc31mdW5jdGlvbiBfYSh0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModCl9ZnVuY3Rpb24gc3QodCl7dmFyIGU9LTEsbj10PT1udWxsPzA6dC5sZW5ndGg7Zm9yKHRoaXMuX19kYXRhX189bmV3IGVlOysrZTxuOyl0aGlzLmFkZCh0W2VdKX1zdC5wcm90b3R5cGUuYWRkPXN0LnByb3RvdHlwZS5wdXNoPUxhLHN0LnByb3RvdHlwZS5oYXM9X2E7ZnVuY3Rpb24gemEodCxlKXtyZXR1cm4gdC5oYXMoZSl9ZnVuY3Rpb24gJGEodCxlKXtyZXR1cm4gdCE9bnVsbCYmZSBpbiBPYmplY3QodCl9ZnVuY3Rpb24gWmEodCxlLG4pe2U9cnQoZSx0KTtmb3IodmFyIHI9LTEscz1lLmxlbmd0aCxpPSExOysrcjxzOyl7dmFyIGE9VnQoZVtyXSk7aWYoIShpPXQhPW51bGwmJm4odCxhKSkpYnJlYWs7dD10W2FdfXJldHVybiBpfHwrK3IhPXM/aToocz10PT1udWxsPzA6dC5sZW5ndGgsISFzJiZDbihzKSYmTm4oYSxzKSYmKFZlKHQpfHxWbih0KSkpfWZ1bmN0aW9uIFJhKHQsZSl7cmV0dXJuIHQhPW51bGwmJlphKHQsZSwkYSl9ZnVuY3Rpb24gTG4odCl7cmV0dXJuIEtlKHQpJiYkaSh0KX1mdW5jdGlvbiBVYSh0LGUsbil7Zm9yKHZhciByPS0xLHM9dD09bnVsbD8wOnQubGVuZ3RoOysrcjxzOylpZihuKGUsdFtyXSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIFBhPTIwMDtmdW5jdGlvbiBxYSh0LGUsbixyKXt2YXIgcz0tMSxpPURpLGE9ITAsbz10Lmxlbmd0aCx1PVtdLGw9ZS5sZW5ndGg7aWYoIW8pcmV0dXJuIHU7biYmKGU9dm4oZSxxaShuKSkpLHI/KGk9VWEsYT0hMSk6ZS5sZW5ndGg+PVBhJiYoaT16YSxhPSExLGU9bmV3IHN0KGUpKTtlOmZvcig7KytzPG87KXt2YXIgYz10W3NdLGQ9bj09bnVsbD9jOm4oYyk7aWYoYz1yfHxjIT09MD9jOjAsYSYmZD09PWQpe2Zvcih2YXIgcD1sO3AtLTspaWYoZVtwXT09PWQpY29udGludWUgZTt1LnB1c2goYyl9ZWxzZSBpKGUsZCxyKXx8dS5wdXNoKGMpfXJldHVybiB1fXZhciBqYT1faShmdW5jdGlvbih0LGUpe3JldHVybiBMbih0KT9xYSh0LFd0KGUsMSxMbiwhMCkpOltdfSk7Y29uc3QgSGE9amE7ZnVuY3Rpb24gWWEodCxlLG4scil7aWYoIVhlKHQpKXJldHVybiB0O2U9cnQoZSx0KTtmb3IodmFyIHM9LTEsaT1lLmxlbmd0aCxhPWktMSxvPXQ7byE9bnVsbCYmKytzPGk7KXt2YXIgdT1WdChlW3NdKSxsPW47aWYodT09PSJfX3Byb3RvX18ifHx1PT09ImNvbnN0cnVjdG9yInx8dT09PSJwcm90b3R5cGUiKXJldHVybiB0O2lmKHMhPWEpe3ZhciBjPW9bdV07bD1yP3IoYyx1LG8pOnZvaWQgMCxsPT09dm9pZCAwJiYobD1YZShjKT9jOk5uKGVbcysxXSk/W106e30pfUxpKG8sdSxsKSxvPW9bdV19cmV0dXJuIHR9ZnVuY3Rpb24gR2EodCxlLG4pe2Zvcih2YXIgcj0tMSxzPWUubGVuZ3RoLGk9e307KytyPHM7KXt2YXIgYT1lW3JdLG89RGEodCxhKTtuKG8sYSkmJllhKGkscnQoYSx0KSxvKX1yZXR1cm4gaX1mdW5jdGlvbiBKYSh0LGUpe3JldHVybiBHYSh0LGUsZnVuY3Rpb24obixyKXtyZXR1cm4gUmEodCxyKX0pfVZhKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PW51bGw/e306SmEodCxlKX0pO2NvbnN0IExlPXQ9PmU9PnR5cGVvZiBlPT09dCxCYT1MZSgib2JqZWN0IiksTHQ9TGUoImJvb2xlYW4iKSxFPUxlKCJudW1iZXIiKSxGPUxlKCJzdHJpbmciKSxRYT1MZSgidW5kZWZpbmVkIiksX249dD0+dD09PW51bGwsRz10PT5fbih0KXx8UWEodCkse2lzQXJyYXk6dGV9PUFycmF5LFA9dD0+QmEodCkmJiFfbih0KSYmIXRlKHQpOygodCxlLG4pPT57bGV0IHI9KDI8PE1hdGgubG9nKHQubGVuZ3RoLTEpL01hdGguTE4yKS0xLHM9LX4oMS42KnIqZS90Lmxlbmd0aCk7cmV0dXJuKGk9ZSk9PntsZXQgYT0iIjtmb3IoOzspe2xldCBvPW4ocyksdT1zO2Zvcig7dS0tOylpZihhKz10W29bdV0mcl18fCIiLGEubGVuZ3RoPT09aSlyZXR1cm4gYX19fSkoInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QiLDIxLHQ9PntsZXQgZT1nbG9iYWxUaGlzLmNyeXB0bztyZXR1cm4gZT09PXZvaWQgMCYmKGU9cmVxdWlyZSgibm9kZTpjcnlwdG8iKS53ZWJjcnlwdG8pLGUuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKX0pO2NvbnN0IF90PSh0LGUpPT5uPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpO2Z1bmN0aW9uIHcodCxlLG4pe3JldHVybiByPT57aWYoIW4pcmV0dXJuO2NvbnN0IHM9bltyXTt0KHMpJiYoZVtyXT1zKX19ZnVuY3Rpb24gcSh0KXtyZXR1cm4gZT0+RShlKSYmdC5pbmNsdWRlcyhlKX1mdW5jdGlvbiBPZSgpe2NvbnN0IHQ9RGF0ZS5ub3coKTtyZXR1cm57dXBkYXRlQXQ6dCxjcmVhdGVBdDp0fX1mdW5jdGlvbiBUZSh0LGUpe2NvbnN0IG49dyhFLHQsZSk7bigidXBkYXRlQXQiKSxuKCJjcmVhdGVBdCIpfWNvbnN0IEthPSgpPT4oe3RhYmxlSWRzOltdLHJlbGF0aW9uc2hpcElkczpbXSxpbmRleElkczpbXSxtZW1vSWRzOltdfSk7ZnVuY3Rpb24gWGEodCl7Y29uc3QgZT1LYSgpO2lmKCFQKHQpfHxHKHQpKXJldHVybiBlO2NvbnN0IG49dyh0ZSxlLHQpO3JldHVybiBuKCJ0YWJsZUlkcyIpLG4oInJlbGF0aW9uc2hpcElkcyIpLG4oImluZGV4SWRzIiksbigibWVtb0lkcyIpLGV9Y29uc3QgZW89KCk9Pih7aWQ6IiIsbmFtZToiIix0YWJsZUlkOiIiLGluZGV4Q29sdW1uSWRzOltdLHNlcUluZGV4Q29sdW1uSWRzOltdLHVuaXF1ZTohMSxtZXRhOk9lKCl9KTtmdW5jdGlvbiB0byh0KXtjb25zdCBlPXt9O2lmKCFQKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9ZW8oKSxzPXcoRixyLG4pLGk9dyhMdCxyLG4pLGE9dyh0ZSxyLG4pO3MoImlkIikscygibmFtZSIpLHMoInRhYmxlSWQiKSxpKCJ1bmlxdWUiKSxhKCJpbmRleENvbHVtbklkcyIpLGEoInNlcUluZGV4Q29sdW1uSWRzIiksVGUoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3Qgem49e0FTQzoxLERFU0M6Mn0sbm89T2JqZWN0LnZhbHVlcyh6bikscm89KCk9Pih7aWQ6IiIsaW5kZXhJZDoiIixjb2x1bW5JZDoiIixvcmRlclR5cGU6em4uQVNDLG1ldGE6T2UoKX0pO2Z1bmN0aW9uIHNvKHQpe2NvbnN0IGU9e307aWYoIVAodCl8fEcodCkpcmV0dXJuIGU7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LnZhbHVlcyh0KSl7aWYoIW4pY29udGludWU7Y29uc3Qgcj1ybygpLHM9dyhGLHIsbik7cygiaWQiKSxzKCJpbmRleElkIikscygiY29sdW1uSWQiKSx3KHEobm8pLHIsbikoIm9yZGVyVHlwZSIpLFRlKHIubWV0YSxuLm1ldGEpLHIuaWQmJihlW3IuaWRdPXIpfXJldHVybiBlfWNvbnN0IGlvPSgpPT4oe30pO2Z1bmN0aW9uIGFvKHQpe2NvbnN0IGU9aW8oKTtpZighUCh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3RbbixyXW9mIE9iamVjdC5lbnRyaWVzKHQpKXtpZighdGUocil8fHIubGVuZ3RoIT09NCljb250aW51ZTtjb25zdFtzLGksYSxvXT1yO2lmKEYocykmJkUoaSkmJkUoYSkmJlAobykpe2NvbnN0IHU9e30sbD13KEUsdSxvKTtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGwpLGVbbl09W3MsaSxhLHVdfX1yZXR1cm4gZX1jb25zdCBvbz0oKT0+KHtpZDoiIix2YWx1ZToiIix1aTp7eDoyMDAseToxMDAsekluZGV4OjIsd2lkdGg6MTE2LGhlaWdodDoxMDAsY29sb3I6IiJ9LG1ldGE6T2UoKX0pO2Z1bmN0aW9uIHVvKHQpe2NvbnN0IGU9e307aWYoIVAodCl8fEcodCkpcmV0dXJuIGU7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LnZhbHVlcyh0KSl7aWYoIW4pY29udGludWU7Y29uc3Qgcj1vbygpLHM9dyhGLHIsbiksaT13KEUsci51aSxuLnVpKSxhPXcoRixyLnVpLG4udWkpO3MoImlkIikscygidmFsdWUiKSxhKCJjb2xvciIpLGkoIngiKSxpKCJ5IiksaSgiekluZGV4IiksaSgid2lkdGgiKSxpKCJoZWlnaHQiKSxUZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1jb25zdCAkbj17WmVyb09uZToyLFplcm9OOjQsT25lT25seTo4LE9uZU46MTZ9LGxvPU9iamVjdC52YWx1ZXMoJG4pLFpuPXtyaW5nOjEsZGFzaDoyfSxjbz1PYmplY3QudmFsdWVzKFpuKSx6dD17bGVmdDoxLHJpZ2h0OjIsdG9wOjQsYm90dG9tOjh9LFJuPU9iamVjdC52YWx1ZXMoenQpLGZvPSgpPT4oe2lkOiIiLGlkZW50aWZpY2F0aW9uOiExLHJlbGF0aW9uc2hpcFR5cGU6JG4uWmVyb04sc3RhcnRSZWxhdGlvbnNoaXBUeXBlOlpuLmRhc2gsc3RhcnQ6e3RhYmxlSWQ6IiIsY29sdW1uSWRzOltdLHg6MCx5OjAsZGlyZWN0aW9uOnp0LmJvdHRvbX0sZW5kOnt0YWJsZUlkOiIiLGNvbHVtbklkczpbXSx4OjAseTowLGRpcmVjdGlvbjp6dC5ib3R0b219LG1ldGE6T2UoKX0pO2Z1bmN0aW9uIGhvKHQpe2NvbnN0IGU9e307aWYoIVAodCl8fEcodCkpcmV0dXJuIGU7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LnZhbHVlcyh0KSl7aWYoIW4pY29udGludWU7Y29uc3Qgcj1mbygpLHM9dyhGLHIsbiksaT13KEx0LHIsbiksYT13KEUsci5zdGFydCxuLnN0YXJ0KSxvPXcoRixyLnN0YXJ0LG4uc3RhcnQpLHU9dyhFLHIuZW5kLG4uZW5kKSxsPXcoRixyLmVuZCxuLmVuZCk7cygiaWQiKSxpKCJpZGVudGlmaWNhdGlvbiIpLHcocShsbykscixuKSgicmVsYXRpb25zaGlwVHlwZSIpLHcocShjbykscixuKSgic3RhcnRSZWxhdGlvbnNoaXBUeXBlIiksbygidGFibGVJZCIpLGEoIngiKSxhKCJ5IiksdyhxKFJuKSxyLnN0YXJ0LG4uc3RhcnQpKCJkaXJlY3Rpb24iKSx3KHRlLHIuc3RhcnQsbi5zdGFydCkoImNvbHVtbklkcyIpLGwoInRhYmxlSWQiKSx1KCJ4IiksdSgieSIpLHcocShSbiksci5lbmQsbi5lbmQpKCJkaXJlY3Rpb24iKSx3KHRlLHIuZW5kLG4uZW5kKSgiY29sdW1uSWRzIiksVGUoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3QgbW89e0VSRDoiRVJEIix2aXN1YWxpemF0aW9uOiJAZGluZXVnL2VyZC1lZGl0b3IvYnVpbHRpbi12aXN1YWxpemF0aW9uIixzY2hlbWFTUUw6IkBkaW5ldWcvZXJkLWVkaXRvci9idWlsdGluLXNjaGVtYS1zcWwiLGdlbmVyYXRvckNvZGU6IkBkaW5ldWcvZXJkLWVkaXRvci9idWlsdGluLWdlbmVyYXRvci1jb2RlIixzZXR0aW5nczoic2V0dGluZ3MifSxjZT17dGFibGVDb21tZW50OjEsY29sdW1uQ29tbWVudDoyLGNvbHVtbkRhdGFUeXBlOjQsY29sdW1uRGVmYXVsdDo4LGNvbHVtbkF1dG9JbmNyZW1lbnQ6MTYsY29sdW1uUHJpbWFyeUtleTozMixjb2x1bW5VbmlxdWU6NjQsY29sdW1uTm90TnVsbDoxMjgscmVsYXRpb25zaGlwOjI1Nn0sbmU9e2NvbHVtbk5hbWU6MSxjb2x1bW5EYXRhVHlwZToyLGNvbHVtbk5vdE51bGw6NCxjb2x1bW5VbmlxdWU6OCxjb2x1bW5BdXRvSW5jcmVtZW50OjE2LGNvbHVtbkRlZmF1bHQ6MzIsY29sdW1uQ29tbWVudDo2NH0sVW49T2JqZWN0LnZhbHVlcyhuZSksUG49e01hcmlhREI6MSxNU1NRTDoyLE15U1FMOjQsT3JhY2xlOjgsUG9zdGdyZVNRTDoxNixTUUxpdGU6MzJ9LHlvPU9iamVjdC52YWx1ZXMoUG4pLHFuPXtHcmFwaFFMOjEsY3NoYXJwOjIsSmF2YTo0LEtvdGxpbjo4LFR5cGVTY3JpcHQ6MTYsSlBBOjMyLFNjYWxhOjY0fSxnbz1PYmplY3QudmFsdWVzKHFuKSwkdD17bm9uZToxLGNhbWVsQ2FzZToyLHBhc2NhbENhc2U6NCxzbmFrZUNhc2U6OH0sam49T2JqZWN0LnZhbHVlcygkdCksSG49e25vbmU6MSxkb3VibGVRdW90ZToyLHNpbmdsZVF1b3RlOjQsYmFja3RpY2s6OH0scG89T2JqZWN0LnZhbHVlcyhIbiksd289LjEsdm89MSxPbz0yZTMsVG89MmU0LFNvPWNlLnRhYmxlQ29tbWVudHxjZS5jb2x1bW5Db21tZW50fGNlLmNvbHVtbkRhdGFUeXBlfGNlLmNvbHVtbkRlZmF1bHR8Y2UuY29sdW1uUHJpbWFyeUtleXxjZS5jb2x1bW5Ob3ROdWxsfGNlLnJlbGF0aW9uc2hpcCxrbz0oKT0+KHt3aWR0aDoyZTMsaGVpZ2h0OjJlMyxzY3JvbGxUb3A6MCxzY3JvbGxMZWZ0OjAsem9vbUxldmVsOjEsc2hvdzpTbyxkYXRhYmFzZTpQbi5NeVNRTCxkYXRhYmFzZU5hbWU6IiIsY2FudmFzVHlwZTptby5FUkQsbGFuZ3VhZ2U6cW4uR3JhcGhRTCx0YWJsZU5hbWVDYXNlOiR0LnBhc2NhbENhc2UsY29sdW1uTmFtZUNhc2U6JHQuY2FtZWxDYXNlLGJyYWNrZXRUeXBlOkhuLm5vbmUscmVsYXRpb25zaGlwRGF0YVR5cGVTeW5jOiEwLHJlbGF0aW9uc2hpcE9wdGltaXphdGlvbjohMSxjb2x1bW5PcmRlcjpbbmUuY29sdW1uTmFtZSxuZS5jb2x1bW5EYXRhVHlwZSxuZS5jb2x1bW5Ob3ROdWxsLG5lLmNvbHVtblVuaXF1ZSxuZS5jb2x1bW5BdXRvSW5jcmVtZW50LG5lLmNvbHVtbkRlZmF1bHQsbmUuY29sdW1uQ29tbWVudF0sbWF4V2lkdGhDb21tZW50Oi0xLGlnbm9yZVNhdmVTZXR0aW5nczowfSksWW49X3QoT28sVG8pLGJvPV90KHdvLHZvKSxJbz1fdCg2MCwyMDApO2Z1bmN0aW9uIEVvKHQpe2NvbnN0IGU9a28oKTtpZighUCh0KXx8Ryh0KSlyZXR1cm4gZTtjb25zdCBuPXcoRSxlLHQpLHI9dyhGLGUsdCkscz13KEx0LGUsdCk7cmV0dXJuIEUodC53aWR0aCkmJihlLndpZHRoPVluKHQud2lkdGgpKSxFKHQuaGVpZ2h0KSYmKGUuaGVpZ2h0PVluKHQuaGVpZ2h0KSksRSh0Lnpvb21MZXZlbCkmJihlLnpvb21MZXZlbD1ibyh0Lnpvb21MZXZlbCkpLEUodC5tYXhXaWR0aENvbW1lbnQpJiZ0Lm1heFdpZHRoQ29tbWVudCE9PS0xJiYoZS5tYXhXaWR0aENvbW1lbnQ9SW8odC5tYXhXaWR0aENvbW1lbnQpKSxuKCJzY3JvbGxUb3AiKSxuKCJzY3JvbGxMZWZ0Iiksbigic2hvdyIpLG4oImlnbm9yZVNhdmVTZXR0aW5ncyIpLHIoImRhdGFiYXNlTmFtZSIpLHIoImNhbnZhc1R5cGUiKSxzKCJyZWxhdGlvbnNoaXBEYXRhVHlwZVN5bmMiKSxzKCJyZWxhdGlvbnNoaXBPcHRpbWl6YXRpb24iKSx3KHEoeW8pLGUsdCkoImRhdGFiYXNlIiksdyhxKGdvKSxlLHQpKCJsYW5ndWFnZSIpLHcocShqbiksZSx0KSgidGFibGVOYW1lQ2FzZSIpLHcocShqbiksZSx0KSgiY29sdW1uTmFtZUNhc2UiKSx3KHEocG8pLGUsdCkoImJyYWNrZXRUeXBlIiksdGUodC5jb2x1bW5PcmRlcikmJlVuLmxlbmd0aD09PXQuY29sdW1uT3JkZXIubGVuZ3RoJiZIYShVbix0LmNvbHVtbk9yZGVyKS5sZW5ndGg9PT0wJiYoZS5jb2x1bW5PcmRlcj10LmNvbHVtbk9yZGVyKSxlfWNvbnN0IE5vPSgpPT4oe2lkOiIiLG5hbWU6IiIsY29tbWVudDoiIixjb2x1bW5JZHM6W10sc2VxQ29sdW1uSWRzOltdLHVpOnt4OjIwMCx5OjEwMCx6SW5kZXg6Mix3aWR0aE5hbWU6NjAsd2lkdGhDb21tZW50OjYwLGNvbG9yOiIifSxtZXRhOk9lKCl9KTtmdW5jdGlvbiBNbyh0KXtjb25zdCBlPXt9O2lmKCFQKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9Tm8oKSxzPXcoRixyLG4pLGk9dyh0ZSxyLG4pLGE9dyhFLHIudWksbi51aSksbz13KEYsci51aSxuLnVpKTtzKCJpZCIpLHMoIm5hbWUiKSxzKCJjb21tZW50IiksaSgiY29sdW1uSWRzIiksaSgic2VxQ29sdW1uSWRzIiksbygiY29sb3IiKSxhKCJ4IiksYSgieSIpLGEoInpJbmRleCIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLFRlKHIubWV0YSxuLm1ldGEpLHIuaWQmJihlW3IuaWRdPXIpfXJldHVybiBlfWNvbnN0IHhvPSgpPT4oe2lkOiIiLHRhYmxlSWQ6IiIsbmFtZToiIixjb21tZW50OiIiLGRhdGFUeXBlOiIiLGRlZmF1bHQ6IiIsb3B0aW9uczowLHVpOntrZXlzOjAsd2lkdGhOYW1lOjYwLHdpZHRoQ29tbWVudDo2MCx3aWR0aERhdGFUeXBlOjYwLHdpZHRoRGVmYXVsdDo2MH0sbWV0YTpPZSgpfSk7ZnVuY3Rpb24gRG8odCl7Y29uc3QgZT17fTtpZighUCh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPXhvKCkscz13KEYscixuKSxpPXcoRSxyLG4pLGE9dyhFLHIudWksbi51aSk7cygiaWQiKSxzKCJ0YWJsZUlkIikscygibmFtZSIpLHMoImNvbW1lbnQiKSxzKCJkYXRhVHlwZSIpLHMoImRlZmF1bHQiKSxpKCJvcHRpb25zIiksYSgia2V5cyIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLGEoIndpZHRoRGF0YVR5cGUiKSxhKCJ3aWR0aERlZmF1bHQiKSxUZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBDbyh0KXt2YXIgZSxuLHIscyxpLGE7Y29uc3Qgbz10LHU9RW8oby5zZXR0aW5ncyksbD1YYShvLmRvYyksYz1hbyhvLmx3dyksZD1NbygoZT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6ZS50YWJsZUVudGl0aWVzKSxwPURvKChuPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDpuLnRhYmxlQ29sdW1uRW50aXRpZXMpLGg9aG8oKHI9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnIucmVsYXRpb25zaGlwRW50aXRpZXMpLFM9dG8oKHM9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnMuaW5kZXhFbnRpdGllcyksVT1zbygoaT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6aS5pbmRleENvbHVtbkVudGl0aWVzKSxNPXVvKChhPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDphLm1lbW9FbnRpdGllcyk7cmV0dXJueyRzY2hlbWE6Imh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kaW5ldWcvZXJkLWVkaXRvci9tYWluL2pzb24tc2NoZW1hL3NjaGVtYS5qc29uIix2ZXJzaW9uOiIzLjAuMCIsc2V0dGluZ3M6dSxkb2M6bCxjb2xsZWN0aW9uczp7dGFibGVFbnRpdGllczpkLHRhYmxlQ29sdW1uRW50aXRpZXM6cCxyZWxhdGlvbnNoaXBFbnRpdGllczpoLGluZGV4RW50aXRpZXM6UyxpbmRleENvbHVtbkVudGl0aWVzOlUsbWVtb0VudGl0aWVzOk19LGx3dzpjfX1mdW5jdGlvbiBGbyh0KXtyZXR1cm5bdCwtMSwtMSx7fV19ZnVuY3Rpb24gWnQodCxlLG4pe3JldHVybiB0W2VdfHwodFtlXT1GbyhuKSx0W2VdKX1mdW5jdGlvbiBBbyh0LGUsbixyLHMpe2NvbnN0IGk9WnQodCxuLHIpLGE9aVsxXSxvPWlbMl07YTxlJiYoaVsxXT1lKSxvPGUmJnMoKX1mdW5jdGlvbiBWbyh0LGUsbixyLHMpe2NvbnN0IGk9WnQodCxuLHIpLGE9aVsyXSxvPWlbMV07YTxlJiYoaVsyXT1lKSxvPD1lJiZzKCl9ZnVuY3Rpb24gV28odCxlLG4scixzLGkpe2NvbnN0IGE9WnQodCxuLHIpOyhhWzNdW3NdPz8tMSk8PWUmJihhWzNdW3NdPWUsaSgpKX1jbGFzcyBMb3tjb25zdHJ1Y3RvcihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiY29sbGVjdGlvbnMiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSl9Y29sbGVjdGlvbihlKXtyZXR1cm4gbmV3IF9vKHRoaXMuY29sbGVjdGlvbnNbZV0sZSl9fWNsYXNzIF9ve2NvbnN0cnVjdG9yKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb24iLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb25LZXkiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSl9c2VsZWN0QnlJZChlKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uW2VdfXNlbGVjdEJ5SWRzKGUpe3JldHVybiBlLmxlbmd0aCxlLm1hcChuPT50aGlzLnNlbGVjdEJ5SWQobikpLmZpbHRlcihCb29sZWFuKX1zZWxlY3RFbnRpdGllcygpe3JldHVybiB0aGlzLmNvbGxlY3Rpb259c2VsZWN0QWxsKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5jb2xsZWN0aW9uKX1zZXRPbmUoZSl7cmV0dXJuIHRoaXMuY29sbGVjdGlvbltlLmlkXT1lLHRoaXN9c2V0TWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMuc2V0T25lKG4pKSx0aGlzfXNldEFsbChlKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGwoKSx0aGlzLnNldE1hbnkoZSksdGhpc31hZGRPbmUoZSl7cmV0dXJuIHRoaXMuc2VsZWN0QnlJZChlLmlkKT90aGlzOih0aGlzLnNldE9uZShlKSx0aGlzKX1hZGRNYW55KGUpe3JldHVybiBlLmZvckVhY2gobj0+dGhpcy5hZGRPbmUobikpLHRoaXN9cmVtb3ZlT25lKGUpe3JldHVybiB0aGlzLnNlbGVjdEJ5SWQoZSkmJlJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGhpcy5jb2xsZWN0aW9uLGUpLHRoaXN9cmVtb3ZlTWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMucmVtb3ZlT25lKG4pKSx0aGlzfXJlbW92ZUFsbCgpe3JldHVybiB0aGlzLmNvbGxlY3Rpb249e30sdGhpc311cGRhdGVPbmUoZSxuKXtjb25zdCByPXRoaXMuc2VsZWN0QnlJZChlKTtyZXR1cm4gciYmKG4ociksci5tZXRhLnVwZGF0ZUF0PURhdGUubm93KCkpLHRoaXN9dXBkYXRlTWFueShlLG4pe3JldHVybiBlLmZvckVhY2gocj0+dGhpcy51cGRhdGVPbmUocixuKSksdGhpc31nZXRPckNyZWF0ZShlLG4pe2NvbnN0IHI9dGhpcy5zZWxlY3RCeUlkKGUpO2lmKHIpcmV0dXJuIHI7Y29uc3Qgcz1uKGUpO3JldHVybiB0aGlzLnNldE9uZShzKSx0aGlzLnNlbGVjdEJ5SWQoZSl9YWRkT3BlcmF0b3IoZSxuLHIscyl7cmV0dXJuIEFvKGUsbixyLHRoaXMuY29sbGVjdGlvbktleSxzKSx0aGlzfXJlbW92ZU9wZXJhdG9yKGUsbixyLHMpe3JldHVybiBWbyhlLG4scix0aGlzLmNvbGxlY3Rpb25LZXkscyksdGhpc31yZXBsYWNlT3BlcmF0b3IoZSxuLHIscyxpKXtyZXR1cm4gV28oZSxuLHIsdGhpcy5jb2xsZWN0aW9uS2V5LHMsaSksdGhpc319Y29uc3QgQT10PT5uZXcgTG8odCk7ZnVuY3Rpb24gXyh0KXtjb25zdCBlPW5ldyBTZXQodCk7cmV0dXJuIG49PmUuaGFzKG4pfSgodCxlLG4pPT57bGV0IHI9KDI8PE1hdGgubG9nKHQubGVuZ3RoLTEpL01hdGguTE4yKS0xLHM9LX4oMS42KnIqZS90Lmxlbmd0aCk7cmV0dXJuKGk9ZSk9PntsZXQgYT0iIjtmb3IoOzspe2xldCBvPW4ocyksdT1zO2Zvcig7dS0tOylpZihhKz10W29bdV0mcl18fCIiLGEubGVuZ3RoPT09aSlyZXR1cm4gYX19fSkoInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QiLDIxLHQ9PntsZXQgZT1nbG9iYWxUaGlzLmNyeXB0bztyZXR1cm4gZT09PXZvaWQgMCYmKGU9cmVxdWlyZSgibm9kZTpjcnlwdG8iKS53ZWJjcnlwdG8pLGUuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKX0pO2NsYXNzIGZlIGV4dGVuZHMgRXJyb3J7fWNsYXNzIHpvIGV4dGVuZHMgZmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoYEludmFsaWQgRGF0ZVRpbWU6ICR7ZS50b01lc3NhZ2UoKX1gKX19Y2xhc3MgJG8gZXh0ZW5kcyBmZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihgSW52YWxpZCBJbnRlcnZhbDogJHtlLnRvTWVzc2FnZSgpfWApfX1jbGFzcyBabyBleHRlbmRzIGZle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGBJbnZhbGlkIER1cmF0aW9uOiAke2UudG9NZXNzYWdlKCl9YCl9fWNsYXNzIFNlIGV4dGVuZHMgZmV7fWNsYXNzIEduIGV4dGVuZHMgZmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoYEludmFsaWQgdW5pdCAke2V9YCl9fWNsYXNzIEQgZXh0ZW5kcyBmZXt9Y2xhc3MgcmUgZXh0ZW5kcyBmZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKCJab25lIGlzIGFuIGFic3RyYWN0IGNsYXNzIil9fWNvbnN0IGY9Im51bWVyaWMiLHo9InNob3J0IixDPSJsb25nIixpdD17eWVhcjpmLG1vbnRoOmYsZGF5OmZ9LEpuPXt5ZWFyOmYsbW9udGg6eixkYXk6Zn0sUm89e3llYXI6Zixtb250aDp6LGRheTpmLHdlZWtkYXk6en0sQm49e3llYXI6Zixtb250aDpDLGRheTpmfSxRbj17eWVhcjpmLG1vbnRoOkMsZGF5OmYsd2Vla2RheTpDfSxLbj17aG91cjpmLG1pbnV0ZTpmfSxYbj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmfSxlcj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLHRpbWVab25lTmFtZTp6fSx0cj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLHRpbWVab25lTmFtZTpDfSxucj17aG91cjpmLG1pbnV0ZTpmLGhvdXJDeWNsZToiaDIzIn0scnI9e2hvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zixob3VyQ3ljbGU6ImgyMyJ9LHNyPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsaG91ckN5Y2xlOiJoMjMiLHRpbWVab25lTmFtZTp6fSxpcj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLGhvdXJDeWNsZToiaDIzIix0aW1lWm9uZU5hbWU6Q30sYXI9e3llYXI6Zixtb250aDpmLGRheTpmLGhvdXI6ZixtaW51dGU6Zn0sb3I9e3llYXI6Zixtb250aDpmLGRheTpmLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zn0sdXI9e3llYXI6Zixtb250aDp6LGRheTpmLGhvdXI6ZixtaW51dGU6Zn0sbHI9e3llYXI6Zixtb250aDp6LGRheTpmLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zn0sVW89e3llYXI6Zixtb250aDp6LGRheTpmLHdlZWtkYXk6eixob3VyOmYsbWludXRlOmZ9LGNyPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zixob3VyOmYsbWludXRlOmYsdGltZVpvbmVOYW1lOnp9LGZyPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zixob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsdGltZVpvbmVOYW1lOnp9LGRyPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zix3ZWVrZGF5OkMsaG91cjpmLG1pbnV0ZTpmLHRpbWVab25lTmFtZTpDfSxocj17eWVhcjpmLG1vbnRoOkMsZGF5OmYsd2Vla2RheTpDLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zix0aW1lWm9uZU5hbWU6Q307Y2xhc3MgX2V7Z2V0IHR5cGUoKXt0aHJvdyBuZXcgcmV9Z2V0IG5hbWUoKXt0aHJvdyBuZXcgcmV9Z2V0IGlhbmFOYW1lKCl7cmV0dXJuIHRoaXMubmFtZX1nZXQgaXNVbml2ZXJzYWwoKXt0aHJvdyBuZXcgcmV9b2Zmc2V0TmFtZShlLG4pe3Rocm93IG5ldyByZX1mb3JtYXRPZmZzZXQoZSxuKXt0aHJvdyBuZXcgcmV9b2Zmc2V0KGUpe3Rocm93IG5ldyByZX1lcXVhbHMoZSl7dGhyb3cgbmV3IHJlfWdldCBpc1ZhbGlkKCl7dGhyb3cgbmV3IHJlfX1sZXQgUnQ9bnVsbDtjbGFzcyBhdCBleHRlbmRzIF9le3N0YXRpYyBnZXQgaW5zdGFuY2UoKXtyZXR1cm4gUnQ9PT1udWxsJiYoUnQ9bmV3IGF0KSxSdH1nZXQgdHlwZSgpe3JldHVybiJzeXN0ZW0ifWdldCBuYW1lKCl7cmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmV9Z2V0IGlzVW5pdmVyc2FsKCl7cmV0dXJuITF9b2Zmc2V0TmFtZShlLHtmb3JtYXQ6bixsb2NhbGU6cn0pe3JldHVybiBfcihlLG4scil9Zm9ybWF0T2Zmc2V0KGUsbil7cmV0dXJuIFJlKHRoaXMub2Zmc2V0KGUpLG4pfW9mZnNldChlKXtyZXR1cm4tbmV3IERhdGUoZSkuZ2V0VGltZXpvbmVPZmZzZXQoKX1lcXVhbHMoZSl7cmV0dXJuIGUudHlwZT09PSJzeXN0ZW0ifWdldCBpc1ZhbGlkKCl7cmV0dXJuITB9fWxldCBvdD17fTtmdW5jdGlvbiBQbyh0KXtyZXR1cm4gb3RbdF18fChvdFt0XT1uZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLHtob3VyMTI6ITEsdGltZVpvbmU6dCx5ZWFyOiJudW1lcmljIixtb250aDoiMi1kaWdpdCIsZGF5OiIyLWRpZ2l0Iixob3VyOiIyLWRpZ2l0IixtaW51dGU6IjItZGlnaXQiLHNlY29uZDoiMi1kaWdpdCIsZXJhOiJzaG9ydCJ9KSksb3RbdF19Y29uc3QgcW89e3llYXI6MCxtb250aDoxLGRheToyLGVyYTozLGhvdXI6NCxtaW51dGU6NSxzZWNvbmQ6Nn07ZnVuY3Rpb24gam8odCxlKXtjb25zdCBuPXQuZm9ybWF0KGUpLnJlcGxhY2UoL1x1MjAwRS9nLCIiKSxyPS8oXGQrKVwvKFxkKylcLyhcZCspIChBRHxCQyksPyAoXGQrKTooXGQrKTooXGQrKS8uZXhlYyhuKSxbLHMsaSxhLG8sdSxsLGNdPXI7cmV0dXJuW2EscyxpLG8sdSxsLGNdfWZ1bmN0aW9uIEhvKHQsZSl7Y29uc3Qgbj10LmZvcm1hdFRvUGFydHMoZSkscj1bXTtmb3IobGV0IHM9MDtzPG4ubGVuZ3RoO3MrKyl7Y29uc3R7dHlwZTppLHZhbHVlOmF9PW5bc10sbz1xb1tpXTtpPT09ImVyYSI/cltvXT1hOnkobyl8fChyW29dPXBhcnNlSW50KGEsMTApKX1yZXR1cm4gcn1sZXQgdXQ9e307Y2xhc3MgSiBleHRlbmRzIF9le3N0YXRpYyBjcmVhdGUoZSl7cmV0dXJuIHV0W2VdfHwodXRbZV09bmV3IEooZSkpLHV0W2VdfXN0YXRpYyByZXNldENhY2hlKCl7dXQ9e30sb3Q9e319c3RhdGljIGlzVmFsaWRTcGVjaWZpZXIoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZFpvbmUoZSl9c3RhdGljIGlzVmFsaWRab25lKGUpe2lmKCFlKXJldHVybiExO3RyeXtyZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoImVuLVVTIix7dGltZVpvbmU6ZX0pLmZvcm1hdCgpLCEwfWNhdGNoe3JldHVybiExfX1jb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuem9uZU5hbWU9ZSx0aGlzLnZhbGlkPUouaXNWYWxpZFpvbmUoZSl9Z2V0IHR5cGUoKXtyZXR1cm4iaWFuYSJ9Z2V0IG5hbWUoKXtyZXR1cm4gdGhpcy56b25lTmFtZX1nZXQgaXNVbml2ZXJzYWwoKXtyZXR1cm4hMX1vZmZzZXROYW1lKGUse2Zvcm1hdDpuLGxvY2FsZTpyfSl7cmV0dXJuIF9yKGUsbixyLHRoaXMubmFtZSl9Zm9ybWF0T2Zmc2V0KGUsbil7cmV0dXJuIFJlKHRoaXMub2Zmc2V0KGUpLG4pfW9mZnNldChlKXtjb25zdCBuPW5ldyBEYXRlKGUpO2lmKGlzTmFOKG4pKXJldHVybiBOYU47Y29uc3Qgcj1Qbyh0aGlzLm5hbWUpO2xldFtzLGksYSxvLHUsbCxjXT1yLmZvcm1hdFRvUGFydHM/SG8ocixuKTpqbyhyLG4pO289PT0iQkMiJiYocz0tTWF0aC5hYnMocykrMSk7Y29uc3QgcD1odCh7eWVhcjpzLG1vbnRoOmksZGF5OmEsaG91cjp1PT09MjQ/MDp1LG1pbnV0ZTpsLHNlY29uZDpjLG1pbGxpc2Vjb25kOjB9KTtsZXQgaD0rbjtjb25zdCBTPWglMWUzO3JldHVybiBoLT1TPj0wP1M6MWUzK1MsKHAtaCkvKDYwKjFlMyl9ZXF1YWxzKGUpe3JldHVybiBlLnR5cGU9PT0iaWFuYSImJmUubmFtZT09PXRoaXMubmFtZX1nZXQgaXNWYWxpZCgpe3JldHVybiB0aGlzLnZhbGlkfX1sZXQgbXI9e307ZnVuY3Rpb24gWW8odCxlPXt9KXtjb25zdCBuPUpTT04uc3RyaW5naWZ5KFt0LGVdKTtsZXQgcj1tcltuXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuTGlzdEZvcm1hdCh0LGUpLG1yW25dPXIpLHJ9bGV0IFV0PXt9O2Z1bmN0aW9uIFB0KHQsZT17fSl7Y29uc3Qgbj1KU09OLnN0cmluZ2lmeShbdCxlXSk7bGV0IHI9VXRbbl07cmV0dXJuIHJ8fChyPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHQsZSksVXRbbl09cikscn1sZXQgcXQ9e307ZnVuY3Rpb24gR28odCxlPXt9KXtjb25zdCBuPUpTT04uc3RyaW5naWZ5KFt0LGVdKTtsZXQgcj1xdFtuXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuTnVtYmVyRm9ybWF0KHQsZSkscXRbbl09cikscn1sZXQganQ9e307ZnVuY3Rpb24gSm8odCxlPXt9KXtjb25zdHtiYXNlOm4sLi4ucn09ZSxzPUpTT04uc3RyaW5naWZ5KFt0LHJdKTtsZXQgaT1qdFtzXTtyZXR1cm4gaXx8KGk9bmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KHQsZSksanRbc109aSksaX1sZXQgemU9bnVsbDtmdW5jdGlvbiBCbygpe3JldHVybiB6ZXx8KHplPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlLHplKX1sZXQgeXI9e307ZnVuY3Rpb24gUW8odCl7bGV0IGU9eXJbdF07aWYoIWUpe2NvbnN0IG49bmV3IEludGwuTG9jYWxlKHQpO2U9ImdldFdlZWtJbmZvImluIG4/bi5nZXRXZWVrSW5mbygpOm4ud2Vla0luZm8seXJbdF09ZX1yZXR1cm4gZX1mdW5jdGlvbiBLbyh0KXtjb25zdCBlPXQuaW5kZXhPZigiLXgtIik7ZSE9PS0xJiYodD10LnN1YnN0cmluZygwLGUpKTtjb25zdCBuPXQuaW5kZXhPZigiLXUtIik7aWYobj09PS0xKXJldHVyblt0XTt7bGV0IHIsczt0cnl7cj1QdCh0KS5yZXNvbHZlZE9wdGlvbnMoKSxzPXR9Y2F0Y2h7Y29uc3QgdT10LnN1YnN0cmluZygwLG4pO3I9UHQodSkucmVzb2x2ZWRPcHRpb25zKCkscz11fWNvbnN0e251bWJlcmluZ1N5c3RlbTppLGNhbGVuZGFyOmF9PXI7cmV0dXJuW3MsaSxhXX19ZnVuY3Rpb24gWG8odCxlLG4pe3JldHVybihufHxlKSYmKHQuaW5jbHVkZXMoIi11LSIpfHwodCs9Ii11IiksbiYmKHQrPWAtY2EtJHtufWApLGUmJih0Kz1gLW51LSR7ZX1gKSksdH1mdW5jdGlvbiBldSh0KXtjb25zdCBlPVtdO2ZvcihsZXQgbj0xO248PTEyO24rKyl7Y29uc3Qgcj1nLnV0YygyMDA5LG4sMSk7ZS5wdXNoKHQocikpfXJldHVybiBlfWZ1bmN0aW9uIHR1KHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTE7bjw9NztuKyspe2NvbnN0IHI9Zy51dGMoMjAxNiwxMSwxMytuKTtlLnB1c2godChyKSl9cmV0dXJuIGV9ZnVuY3Rpb24gbHQodCxlLG4scil7Y29uc3Qgcz10Lmxpc3RpbmdNb2RlKCk7cmV0dXJuIHM9PT0iZXJyb3IiP251bGw6cz09PSJlbiI/bihlKTpyKGUpfWZ1bmN0aW9uIG51KHQpe3JldHVybiB0Lm51bWJlcmluZ1N5c3RlbSYmdC5udW1iZXJpbmdTeXN0ZW0hPT0ibGF0biI/ITE6dC5udW1iZXJpbmdTeXN0ZW09PT0ibGF0biJ8fCF0LmxvY2FsZXx8dC5sb2NhbGUuc3RhcnRzV2l0aCgiZW4iKXx8bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodC5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5udW1iZXJpbmdTeXN0ZW09PT0ibGF0biJ9Y2xhc3MgcnV7Y29uc3RydWN0b3IoZSxuLHIpe3RoaXMucGFkVG89ci5wYWRUb3x8MCx0aGlzLmZsb29yPXIuZmxvb3J8fCExO2NvbnN0e3BhZFRvOnMsZmxvb3I6aSwuLi5hfT1yO2lmKCFufHxPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCl7Y29uc3Qgbz17dXNlR3JvdXBpbmc6ITEsLi4ucn07ci5wYWRUbz4wJiYoby5taW5pbXVtSW50ZWdlckRpZ2l0cz1yLnBhZFRvKSx0aGlzLmluZj1HbyhlLG8pfX1mb3JtYXQoZSl7aWYodGhpcy5pbmYpe2NvbnN0IG49dGhpcy5mbG9vcj9NYXRoLmZsb29yKGUpOmU7cmV0dXJuIHRoaXMuaW5mLmZvcm1hdChuKX1lbHNle2NvbnN0IG49dGhpcy5mbG9vcj9NYXRoLmZsb29yKGUpOkt0KGUsMyk7cmV0dXJuIEkobix0aGlzLnBhZFRvKX19fWNsYXNzIHN1e2NvbnN0cnVjdG9yKGUsbixyKXt0aGlzLm9wdHM9cix0aGlzLm9yaWdpbmFsWm9uZT12b2lkIDA7bGV0IHM7aWYodGhpcy5vcHRzLnRpbWVab25lKXRoaXMuZHQ9ZTtlbHNlIGlmKGUuem9uZS50eXBlPT09ImZpeGVkIil7Y29uc3QgYT0tMSooZS5vZmZzZXQvNjApLG89YT49MD9gRXRjL0dNVCske2F9YDpgRXRjL0dNVCR7YX1gO2Uub2Zmc2V0IT09MCYmSi5jcmVhdGUobykudmFsaWQ/KHM9byx0aGlzLmR0PWUpOihzPSJVVEMiLHRoaXMuZHQ9ZS5vZmZzZXQ9PT0wP2U6ZS5zZXRab25lKCJVVEMiKS5wbHVzKHttaW51dGVzOmUub2Zmc2V0fSksdGhpcy5vcmlnaW5hbFpvbmU9ZS56b25lKX1lbHNlIGUuem9uZS50eXBlPT09InN5c3RlbSI/dGhpcy5kdD1lOmUuem9uZS50eXBlPT09ImlhbmEiPyh0aGlzLmR0PWUscz1lLnpvbmUubmFtZSk6KHM9IlVUQyIsdGhpcy5kdD1lLnNldFpvbmUoIlVUQyIpLnBsdXMoe21pbnV0ZXM6ZS5vZmZzZXR9KSx0aGlzLm9yaWdpbmFsWm9uZT1lLnpvbmUpO2NvbnN0IGk9ey4uLnRoaXMub3B0c307aS50aW1lWm9uZT1pLnRpbWVab25lfHxzLHRoaXMuZHRmPVB0KG4saSl9Zm9ybWF0KCl7cmV0dXJuIHRoaXMub3JpZ2luYWxab25lP3RoaXMuZm9ybWF0VG9QYXJ0cygpLm1hcCgoe3ZhbHVlOmV9KT0+ZSkuam9pbigiIik6dGhpcy5kdGYuZm9ybWF0KHRoaXMuZHQudG9KU0RhdGUoKSl9Zm9ybWF0VG9QYXJ0cygpe2NvbnN0IGU9dGhpcy5kdGYuZm9ybWF0VG9QYXJ0cyh0aGlzLmR0LnRvSlNEYXRlKCkpO3JldHVybiB0aGlzLm9yaWdpbmFsWm9uZT9lLm1hcChuPT57aWYobi50eXBlPT09InRpbWVab25lTmFtZSIpe2NvbnN0IHI9dGhpcy5vcmlnaW5hbFpvbmUub2Zmc2V0TmFtZSh0aGlzLmR0LnRzLHtsb2NhbGU6dGhpcy5kdC5sb2NhbGUsZm9ybWF0OnRoaXMub3B0cy50aW1lWm9uZU5hbWV9KTtyZXR1cm57Li4ubix2YWx1ZTpyfX1lbHNlIHJldHVybiBufSk6ZX1yZXNvbHZlZE9wdGlvbnMoKXtyZXR1cm4gdGhpcy5kdGYucmVzb2x2ZWRPcHRpb25zKCl9fWNsYXNzIGl1e2NvbnN0cnVjdG9yKGUsbixyKXt0aGlzLm9wdHM9e3N0eWxlOiJsb25nIiwuLi5yfSwhbiYmQXIoKSYmKHRoaXMucnRmPUpvKGUscikpfWZvcm1hdChlLG4pe3JldHVybiB0aGlzLnJ0Zj90aGlzLnJ0Zi5mb3JtYXQoZSxuKTpJdShuLGUsdGhpcy5vcHRzLm51bWVyaWMsdGhpcy5vcHRzLnN0eWxlIT09ImxvbmciKX1mb3JtYXRUb1BhcnRzKGUsbil7cmV0dXJuIHRoaXMucnRmP3RoaXMucnRmLmZvcm1hdFRvUGFydHMoZSxuKTpbXX19Y29uc3QgYXU9e2ZpcnN0RGF5OjEsbWluaW1hbERheXM6NCx3ZWVrZW5kOls2LDddfTtjbGFzcyBUe3N0YXRpYyBmcm9tT3B0cyhlKXtyZXR1cm4gVC5jcmVhdGUoZS5sb2NhbGUsZS5udW1iZXJpbmdTeXN0ZW0sZS5vdXRwdXRDYWxlbmRhcixlLndlZWtTZXR0aW5ncyxlLmRlZmF1bHRUb0VOKX1zdGF0aWMgY3JlYXRlKGUsbixyLHMsaT0hMSl7Y29uc3QgYT1lfHxiLmRlZmF1bHRMb2NhbGUsbz1hfHwoaT8iZW4tVVMiOkJvKCkpLHU9bnx8Yi5kZWZhdWx0TnVtYmVyaW5nU3lzdGVtLGw9cnx8Yi5kZWZhdWx0T3V0cHV0Q2FsZW5kYXIsYz1CdChzKXx8Yi5kZWZhdWx0V2Vla1NldHRpbmdzO3JldHVybiBuZXcgVChvLHUsbCxjLGEpfXN0YXRpYyByZXNldENhY2hlKCl7emU9bnVsbCxVdD17fSxxdD17fSxqdD17fX1zdGF0aWMgZnJvbU9iamVjdCh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sb3V0cHV0Q2FsZW5kYXI6cix3ZWVrU2V0dGluZ3M6c309e30pe3JldHVybiBULmNyZWF0ZShlLG4scixzKX1jb25zdHJ1Y3RvcihlLG4scixzLGkpe2NvbnN0W2Esbyx1XT1LbyhlKTt0aGlzLmxvY2FsZT1hLHRoaXMubnVtYmVyaW5nU3lzdGVtPW58fG98fG51bGwsdGhpcy5vdXRwdXRDYWxlbmRhcj1yfHx1fHxudWxsLHRoaXMud2Vla1NldHRpbmdzPXMsdGhpcy5pbnRsPVhvKHRoaXMubG9jYWxlLHRoaXMubnVtYmVyaW5nU3lzdGVtLHRoaXMub3V0cHV0Q2FsZW5kYXIpLHRoaXMud2Vla2RheXNDYWNoZT17Zm9ybWF0Ont9LHN0YW5kYWxvbmU6e319LHRoaXMubW9udGhzQ2FjaGU9e2Zvcm1hdDp7fSxzdGFuZGFsb25lOnt9fSx0aGlzLm1lcmlkaWVtQ2FjaGU9bnVsbCx0aGlzLmVyYUNhY2hlPXt9LHRoaXMuc3BlY2lmaWVkTG9jYWxlPWksdGhpcy5mYXN0TnVtYmVyc0NhY2hlZD1udWxsfWdldCBmYXN0TnVtYmVycygpe3JldHVybiB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPT1udWxsJiYodGhpcy5mYXN0TnVtYmVyc0NhY2hlZD1udSh0aGlzKSksdGhpcy5mYXN0TnVtYmVyc0NhY2hlZH1saXN0aW5nTW9kZSgpe2NvbnN0IGU9dGhpcy5pc0VuZ2xpc2goKSxuPSh0aGlzLm51bWJlcmluZ1N5c3RlbT09PW51bGx8fHRoaXMubnVtYmVyaW5nU3lzdGVtPT09ImxhdG4iKSYmKHRoaXMub3V0cHV0Q2FsZW5kYXI9PT1udWxsfHx0aGlzLm91dHB1dENhbGVuZGFyPT09ImdyZWdvcnkiKTtyZXR1cm4gZSYmbj8iZW4iOiJpbnRsIn1jbG9uZShlKXtyZXR1cm4hZXx8T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubGVuZ3RoPT09MD90aGlzOlQuY3JlYXRlKGUubG9jYWxlfHx0aGlzLnNwZWNpZmllZExvY2FsZSxlLm51bWJlcmluZ1N5c3RlbXx8dGhpcy5udW1iZXJpbmdTeXN0ZW0sZS5vdXRwdXRDYWxlbmRhcnx8dGhpcy5vdXRwdXRDYWxlbmRhcixCdChlLndlZWtTZXR0aW5ncyl8fHRoaXMud2Vla1NldHRpbmdzLGUuZGVmYXVsdFRvRU58fCExKX1yZWRlZmF1bHRUb0VOKGU9e30pe3JldHVybiB0aGlzLmNsb25lKHsuLi5lLGRlZmF1bHRUb0VOOiEwfSl9cmVkZWZhdWx0VG9TeXN0ZW0oZT17fSl7cmV0dXJuIHRoaXMuY2xvbmUoey4uLmUsZGVmYXVsdFRvRU46ITF9KX1tb250aHMoZSxuPSExKXtyZXR1cm4gbHQodGhpcyxlLFpyLCgpPT57Y29uc3Qgcj1uP3ttb250aDplLGRheToibnVtZXJpYyJ9Onttb250aDplfSxzPW4/ImZvcm1hdCI6InN0YW5kYWxvbmUiO3JldHVybiB0aGlzLm1vbnRoc0NhY2hlW3NdW2VdfHwodGhpcy5tb250aHNDYWNoZVtzXVtlXT1ldShpPT50aGlzLmV4dHJhY3QoaSxyLCJtb250aCIpKSksdGhpcy5tb250aHNDYWNoZVtzXVtlXX0pfXdlZWtkYXlzKGUsbj0hMSl7cmV0dXJuIGx0KHRoaXMsZSxQciwoKT0+e2NvbnN0IHI9bj97d2Vla2RheTplLHllYXI6Im51bWVyaWMiLG1vbnRoOiJsb25nIixkYXk6Im51bWVyaWMifTp7d2Vla2RheTplfSxzPW4/ImZvcm1hdCI6InN0YW5kYWxvbmUiO3JldHVybiB0aGlzLndlZWtkYXlzQ2FjaGVbc11bZV18fCh0aGlzLndlZWtkYXlzQ2FjaGVbc11bZV09dHUoaT0+dGhpcy5leHRyYWN0KGksciwid2Vla2RheSIpKSksdGhpcy53ZWVrZGF5c0NhY2hlW3NdW2VdfSl9bWVyaWRpZW1zKCl7cmV0dXJuIGx0KHRoaXMsdm9pZCAwLCgpPT5xciwoKT0+e2lmKCF0aGlzLm1lcmlkaWVtQ2FjaGUpe2NvbnN0IGU9e2hvdXI6Im51bWVyaWMiLGhvdXJDeWNsZToiaDEyIn07dGhpcy5tZXJpZGllbUNhY2hlPVtnLnV0YygyMDE2LDExLDEzLDkpLGcudXRjKDIwMTYsMTEsMTMsMTkpXS5tYXAobj0+dGhpcy5leHRyYWN0KG4sZSwiZGF5cGVyaW9kIikpfXJldHVybiB0aGlzLm1lcmlkaWVtQ2FjaGV9KX1lcmFzKGUpe3JldHVybiBsdCh0aGlzLGUsanIsKCk9Pntjb25zdCBuPXtlcmE6ZX07cmV0dXJuIHRoaXMuZXJhQ2FjaGVbZV18fCh0aGlzLmVyYUNhY2hlW2VdPVtnLnV0YygtNDAsMSwxKSxnLnV0YygyMDE3LDEsMSldLm1hcChyPT50aGlzLmV4dHJhY3QocixuLCJlcmEiKSkpLHRoaXMuZXJhQ2FjaGVbZV19KX1leHRyYWN0KGUsbixyKXtjb25zdCBzPXRoaXMuZHRGb3JtYXR0ZXIoZSxuKSxpPXMuZm9ybWF0VG9QYXJ0cygpLGE9aS5maW5kKG89Pm8udHlwZS50b0xvd2VyQ2FzZSgpPT09cik7cmV0dXJuIGE/YS52YWx1ZTpudWxsfW51bWJlckZvcm1hdHRlcihlPXt9KXtyZXR1cm4gbmV3IHJ1KHRoaXMuaW50bCxlLmZvcmNlU2ltcGxlfHx0aGlzLmZhc3ROdW1iZXJzLGUpfWR0Rm9ybWF0dGVyKGUsbj17fSl7cmV0dXJuIG5ldyBzdShlLHRoaXMuaW50bCxuKX1yZWxGb3JtYXR0ZXIoZT17fSl7cmV0dXJuIG5ldyBpdSh0aGlzLmludGwsdGhpcy5pc0VuZ2xpc2goKSxlKX1saXN0Rm9ybWF0dGVyKGU9e30pe3JldHVybiBZbyh0aGlzLmludGwsZSl9aXNFbmdsaXNoKCl7cmV0dXJuIHRoaXMubG9jYWxlPT09ImVuInx8dGhpcy5sb2NhbGUudG9Mb3dlckNhc2UoKT09PSJlbi11cyJ8fG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHRoaXMuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlLnN0YXJ0c1dpdGgoImVuLXVzIil9Z2V0V2Vla1NldHRpbmdzKCl7cmV0dXJuIHRoaXMud2Vla1NldHRpbmdzP3RoaXMud2Vla1NldHRpbmdzOlZyKCk/UW8odGhpcy5sb2NhbGUpOmF1fWdldFN0YXJ0T2ZXZWVrKCl7cmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkuZmlyc3REYXl9Z2V0TWluRGF5c0luRmlyc3RXZWVrKCl7cmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkubWluaW1hbERheXN9Z2V0V2Vla2VuZERheXMoKXtyZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS53ZWVrZW5kfWVxdWFscyhlKXtyZXR1cm4gdGhpcy5sb2NhbGU9PT1lLmxvY2FsZSYmdGhpcy5udW1iZXJpbmdTeXN0ZW09PT1lLm51bWJlcmluZ1N5c3RlbSYmdGhpcy5vdXRwdXRDYWxlbmRhcj09PWUub3V0cHV0Q2FsZW5kYXJ9fWxldCBIdD1udWxsO2NsYXNzIHggZXh0ZW5kcyBfZXtzdGF0aWMgZ2V0IHV0Y0luc3RhbmNlKCl7cmV0dXJuIEh0PT09bnVsbCYmKEh0PW5ldyB4KDApKSxIdH1zdGF0aWMgaW5zdGFuY2UoZSl7cmV0dXJuIGU9PT0wP3gudXRjSW5zdGFuY2U6bmV3IHgoZSl9c3RhdGljIHBhcnNlU3BlY2lmaWVyKGUpe2lmKGUpe2NvbnN0IG49ZS5tYXRjaCgvXnV0Yyg/OihbKy1dXGR7MSwyfSkoPzo6KFxkezJ9KSk/KT8kL2kpO2lmKG4pcmV0dXJuIG5ldyB4KG10KG5bMV0sblsyXSkpfXJldHVybiBudWxsfWNvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5maXhlZD1lfWdldCB0eXBlKCl7cmV0dXJuImZpeGVkIn1nZXQgbmFtZSgpe3JldHVybiB0aGlzLmZpeGVkPT09MD8iVVRDIjpgVVRDJHtSZSh0aGlzLmZpeGVkLCJuYXJyb3ciKX1gfWdldCBpYW5hTmFtZSgpe3JldHVybiB0aGlzLmZpeGVkPT09MD8iRXRjL1VUQyI6YEV0Yy9HTVQke1JlKC10aGlzLmZpeGVkLCJuYXJyb3ciKX1gfW9mZnNldE5hbWUoKXtyZXR1cm4gdGhpcy5uYW1lfWZvcm1hdE9mZnNldChlLG4pe3JldHVybiBSZSh0aGlzLmZpeGVkLG4pfWdldCBpc1VuaXZlcnNhbCgpe3JldHVybiEwfW9mZnNldCgpe3JldHVybiB0aGlzLmZpeGVkfWVxdWFscyhlKXtyZXR1cm4gZS50eXBlPT09ImZpeGVkIiYmZS5maXhlZD09PXRoaXMuZml4ZWR9Z2V0IGlzVmFsaWQoKXtyZXR1cm4hMH19Y2xhc3Mgb3UgZXh0ZW5kcyBfZXtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuem9uZU5hbWU9ZX1nZXQgdHlwZSgpe3JldHVybiJpbnZhbGlkIn1nZXQgbmFtZSgpe3JldHVybiB0aGlzLnpvbmVOYW1lfWdldCBpc1VuaXZlcnNhbCgpe3JldHVybiExfW9mZnNldE5hbWUoKXtyZXR1cm4gbnVsbH1mb3JtYXRPZmZzZXQoKXtyZXR1cm4iIn1vZmZzZXQoKXtyZXR1cm4gTmFOfWVxdWFscygpe3JldHVybiExfWdldCBpc1ZhbGlkKCl7cmV0dXJuITF9fWZ1bmN0aW9uIHNlKHQsZSl7aWYoeSh0KXx8dD09PW51bGwpcmV0dXJuIGU7aWYodCBpbnN0YW5jZW9mIF9lKXJldHVybiB0O2lmKGN1KHQpKXtjb25zdCBuPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gbj09PSJkZWZhdWx0Ij9lOm49PT0ibG9jYWwifHxuPT09InN5c3RlbSI/YXQuaW5zdGFuY2U6bj09PSJ1dGMifHxuPT09ImdtdCI/eC51dGNJbnN0YW5jZTp4LnBhcnNlU3BlY2lmaWVyKG4pfHxKLmNyZWF0ZSh0KX1lbHNlIHJldHVybiBkZSh0KT94Lmluc3RhbmNlKHQpOnR5cGVvZiB0PT0ib2JqZWN0IiYmIm9mZnNldCJpbiB0JiZ0eXBlb2YgdC5vZmZzZXQ9PSJmdW5jdGlvbiI/dDpuZXcgb3UodCl9bGV0IGdyPSgpPT5EYXRlLm5vdygpLHByPSJzeXN0ZW0iLHdyPW51bGwsdnI9bnVsbCxPcj1udWxsLFRyPTYwLFNyLGtyPW51bGw7Y2xhc3MgYntzdGF0aWMgZ2V0IG5vdygpe3JldHVybiBncn1zdGF0aWMgc2V0IG5vdyhlKXtncj1lfXN0YXRpYyBzZXQgZGVmYXVsdFpvbmUoZSl7cHI9ZX1zdGF0aWMgZ2V0IGRlZmF1bHRab25lKCl7cmV0dXJuIHNlKHByLGF0Lmluc3RhbmNlKX1zdGF0aWMgZ2V0IGRlZmF1bHRMb2NhbGUoKXtyZXR1cm4gd3J9c3RhdGljIHNldCBkZWZhdWx0TG9jYWxlKGUpe3dyPWV9c3RhdGljIGdldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKCl7cmV0dXJuIHZyfXN0YXRpYyBzZXQgZGVmYXVsdE51bWJlcmluZ1N5c3RlbShlKXt2cj1lfXN0YXRpYyBnZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKCl7cmV0dXJuIE9yfXN0YXRpYyBzZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKGUpe09yPWV9c3RhdGljIGdldCBkZWZhdWx0V2Vla1NldHRpbmdzKCl7cmV0dXJuIGtyfXN0YXRpYyBzZXQgZGVmYXVsdFdlZWtTZXR0aW5ncyhlKXtrcj1CdChlKX1zdGF0aWMgZ2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcigpe3JldHVybiBUcn1zdGF0aWMgc2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcihlKXtUcj1lJTEwMH1zdGF0aWMgZ2V0IHRocm93T25JbnZhbGlkKCl7cmV0dXJuIFNyfXN0YXRpYyBzZXQgdGhyb3dPbkludmFsaWQoZSl7U3I9ZX1zdGF0aWMgcmVzZXRDYWNoZXMoKXtULnJlc2V0Q2FjaGUoKSxKLnJlc2V0Q2FjaGUoKX19Y2xhc3MgJHtjb25zdHJ1Y3RvcihlLG4pe3RoaXMucmVhc29uPWUsdGhpcy5leHBsYW5hdGlvbj1ufXRvTWVzc2FnZSgpe3JldHVybiB0aGlzLmV4cGxhbmF0aW9uP2Ake3RoaXMucmVhc29ufTogJHt0aGlzLmV4cGxhbmF0aW9ufWA6dGhpcy5yZWFzb259fWNvbnN0IGJyPVswLDMxLDU5LDkwLDEyMCwxNTEsMTgxLDIxMiwyNDMsMjczLDMwNCwzMzRdLElyPVswLDMxLDYwLDkxLDEyMSwxNTIsMTgyLDIxMywyNDQsMjc0LDMwNSwzMzVdO2Z1bmN0aW9uIFYodCxlKXtyZXR1cm4gbmV3ICQoInVuaXQgb3V0IG9mIHJhbmdlIixgeW91IHNwZWNpZmllZCAke2V9IChvZiB0eXBlICR7dHlwZW9mIGV9KSBhcyBhICR7dH0sIHdoaWNoIGlzIGludmFsaWRgKX1mdW5jdGlvbiBZdCh0LGUsbil7Y29uc3Qgcj1uZXcgRGF0ZShEYXRlLlVUQyh0LGUtMSxuKSk7dDwxMDAmJnQ+PTAmJnIuc2V0VVRDRnVsbFllYXIoci5nZXRVVENGdWxsWWVhcigpLTE5MDApO2NvbnN0IHM9ci5nZXRVVENEYXkoKTtyZXR1cm4gcz09PTA/NzpzfWZ1bmN0aW9uIEVyKHQsZSxuKXtyZXR1cm4gbisoJGUodCk/SXI6YnIpW2UtMV19ZnVuY3Rpb24gTnIodCxlKXtjb25zdCBuPSRlKHQpP0lyOmJyLHI9bi5maW5kSW5kZXgoaT0+aTxlKSxzPWUtbltyXTtyZXR1cm57bW9udGg6cisxLGRheTpzfX1mdW5jdGlvbiBHdCh0LGUpe3JldHVybih0LWUrNyklNysxfWZ1bmN0aW9uIGN0KHQsZT00LG49MSl7Y29uc3R7eWVhcjpyLG1vbnRoOnMsZGF5Oml9PXQsYT1FcihyLHMsaSksbz1HdChZdChyLHMsaSksbik7bGV0IHU9TWF0aC5mbG9vcigoYS1vKzE0LWUpLzcpLGw7cmV0dXJuIHU8MT8obD1yLTEsdT1aZShsLGUsbikpOnU+WmUocixlLG4pPyhsPXIrMSx1PTEpOmw9cix7d2Vla1llYXI6bCx3ZWVrTnVtYmVyOnUsd2Vla2RheTpvLC4uLmd0KHQpfX1mdW5jdGlvbiBNcih0LGU9NCxuPTEpe2NvbnN0e3dlZWtZZWFyOnIsd2Vla051bWJlcjpzLHdlZWtkYXk6aX09dCxhPUd0KFl0KHIsMSxlKSxuKSxvPWJlKHIpO2xldCB1PXMqNytpLWEtNytlLGw7dTwxPyhsPXItMSx1Kz1iZShsKSk6dT5vPyhsPXIrMSx1LT1iZShyKSk6bD1yO2NvbnN0e21vbnRoOmMsZGF5OmR9PU5yKGwsdSk7cmV0dXJue3llYXI6bCxtb250aDpjLGRheTpkLC4uLmd0KHQpfX1mdW5jdGlvbiBKdCh0KXtjb25zdHt5ZWFyOmUsbW9udGg6bixkYXk6cn09dCxzPUVyKGUsbixyKTtyZXR1cm57eWVhcjplLG9yZGluYWw6cywuLi5ndCh0KX19ZnVuY3Rpb24geHIodCl7Y29uc3R7eWVhcjplLG9yZGluYWw6bn09dCx7bW9udGg6cixkYXk6c309TnIoZSxuKTtyZXR1cm57eWVhcjplLG1vbnRoOnIsZGF5OnMsLi4uZ3QodCl9fWZ1bmN0aW9uIERyKHQsZSl7aWYoIXkodC5sb2NhbFdlZWtkYXkpfHwheSh0LmxvY2FsV2Vla051bWJlcil8fCF5KHQubG9jYWxXZWVrWWVhcikpe2lmKCF5KHQud2Vla2RheSl8fCF5KHQud2Vla051bWJlcil8fCF5KHQud2Vla1llYXIpKXRocm93IG5ldyBTZSgiQ2Fubm90IG1peCBsb2NhbGUtYmFzZWQgd2VlayBmaWVsZHMgd2l0aCBJU08tYmFzZWQgd2VlayBmaWVsZHMiKTtyZXR1cm4geSh0LmxvY2FsV2Vla2RheSl8fCh0LndlZWtkYXk9dC5sb2NhbFdlZWtkYXkpLHkodC5sb2NhbFdlZWtOdW1iZXIpfHwodC53ZWVrTnVtYmVyPXQubG9jYWxXZWVrTnVtYmVyKSx5KHQubG9jYWxXZWVrWWVhcil8fCh0LndlZWtZZWFyPXQubG9jYWxXZWVrWWVhciksZGVsZXRlIHQubG9jYWxXZWVrZGF5LGRlbGV0ZSB0LmxvY2FsV2Vla051bWJlcixkZWxldGUgdC5sb2NhbFdlZWtZZWFyLHttaW5EYXlzSW5GaXJzdFdlZWs6ZS5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxzdGFydE9mV2VlazplLmdldFN0YXJ0T2ZXZWVrKCl9fWVsc2UgcmV0dXJue21pbkRheXNJbkZpcnN0V2Vlazo0LHN0YXJ0T2ZXZWVrOjF9fWZ1bmN0aW9uIHV1KHQsZT00LG49MSl7Y29uc3Qgcj1mdCh0LndlZWtZZWFyKSxzPVcodC53ZWVrTnVtYmVyLDEsWmUodC53ZWVrWWVhcixlLG4pKSxpPVcodC53ZWVrZGF5LDEsNyk7cmV0dXJuIHI/cz9pPyExOlYoIndlZWtkYXkiLHQud2Vla2RheSk6Vigid2VlayIsdC53ZWVrTnVtYmVyKTpWKCJ3ZWVrWWVhciIsdC53ZWVrWWVhcil9ZnVuY3Rpb24gbHUodCl7Y29uc3QgZT1mdCh0LnllYXIpLG49Vyh0Lm9yZGluYWwsMSxiZSh0LnllYXIpKTtyZXR1cm4gZT9uPyExOlYoIm9yZGluYWwiLHQub3JkaW5hbCk6VigieWVhciIsdC55ZWFyKX1mdW5jdGlvbiBDcih0KXtjb25zdCBlPWZ0KHQueWVhciksbj1XKHQubW9udGgsMSwxMikscj1XKHQuZGF5LDEsZHQodC55ZWFyLHQubW9udGgpKTtyZXR1cm4gZT9uP3I/ITE6VigiZGF5Iix0LmRheSk6VigibW9udGgiLHQubW9udGgpOlYoInllYXIiLHQueWVhcil9ZnVuY3Rpb24gRnIodCl7Y29uc3R7aG91cjplLG1pbnV0ZTpuLHNlY29uZDpyLG1pbGxpc2Vjb25kOnN9PXQsaT1XKGUsMCwyMyl8fGU9PT0yNCYmbj09PTAmJnI9PT0wJiZzPT09MCxhPVcobiwwLDU5KSxvPVcociwwLDU5KSx1PVcocywwLDk5OSk7cmV0dXJuIGk/YT9vP3U/ITE6VigibWlsbGlzZWNvbmQiLHMpOlYoInNlY29uZCIscik6VigibWludXRlIixuKTpWKCJob3VyIixlKX1mdW5jdGlvbiB5KHQpe3JldHVybiB0eXBlb2YgdD4idSJ9ZnVuY3Rpb24gZGUodCl7cmV0dXJuIHR5cGVvZiB0PT0ibnVtYmVyIn1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJudW1iZXIiJiZ0JTE9PT0wfWZ1bmN0aW9uIGN1KHQpe3JldHVybiB0eXBlb2YgdD09InN0cmluZyJ9ZnVuY3Rpb24gZnUodCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KT09PSJbb2JqZWN0IERhdGVdIn1mdW5jdGlvbiBBcigpe3RyeXtyZXR1cm4gdHlwZW9mIEludGw8InUiJiYhIUludGwuUmVsYXRpdmVUaW1lRm9ybWF0fWNhdGNoe3JldHVybiExfX1mdW5jdGlvbiBWcigpe3RyeXtyZXR1cm4gdHlwZW9mIEludGw8InUiJiYhIUludGwuTG9jYWxlJiYoIndlZWtJbmZvImluIEludGwuTG9jYWxlLnByb3RvdHlwZXx8ImdldFdlZWtJbmZvImluIEludGwuTG9jYWxlLnByb3RvdHlwZSl9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIGR1KHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3Q6W3RdfWZ1bmN0aW9uIFdyKHQsZSxuKXtpZih0Lmxlbmd0aCE9PTApcmV0dXJuIHQucmVkdWNlKChyLHMpPT57Y29uc3QgaT1bZShzKSxzXTtyZXR1cm4gciYmbihyWzBdLGlbMF0pPT09clswXT9yOml9LG51bGwpWzFdfWZ1bmN0aW9uIGh1KHQsZSl7cmV0dXJuIGUucmVkdWNlKChuLHIpPT4obltyXT10W3JdLG4pLHt9KX1mdW5jdGlvbiBrZSh0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX1mdW5jdGlvbiBCdCh0KXtpZih0PT1udWxsKXJldHVybiBudWxsO2lmKHR5cGVvZiB0IT0ib2JqZWN0Iil0aHJvdyBuZXcgRCgiV2VlayBzZXR0aW5ncyBtdXN0IGJlIGFuIG9iamVjdCIpO2lmKCFXKHQuZmlyc3REYXksMSw3KXx8IVcodC5taW5pbWFsRGF5cywxLDcpfHwhQXJyYXkuaXNBcnJheSh0LndlZWtlbmQpfHx0LndlZWtlbmQuc29tZShlPT4hVyhlLDEsNykpKXRocm93IG5ldyBEKCJJbnZhbGlkIHdlZWsgc2V0dGluZ3MiKTtyZXR1cm57Zmlyc3REYXk6dC5maXJzdERheSxtaW5pbWFsRGF5czp0Lm1pbmltYWxEYXlzLHdlZWtlbmQ6QXJyYXkuZnJvbSh0LndlZWtlbmQpfX1mdW5jdGlvbiBXKHQsZSxuKXtyZXR1cm4gZnQodCkmJnQ+PWUmJnQ8PW59ZnVuY3Rpb24gbXUodCxlKXtyZXR1cm4gdC1lKk1hdGguZmxvb3IodC9lKX1mdW5jdGlvbiBJKHQsZT0yKXtjb25zdCBuPXQ8MDtsZXQgcjtyZXR1cm4gbj9yPSItIisoIiIrLXQpLnBhZFN0YXJ0KGUsIjAiKTpyPSgiIit0KS5wYWRTdGFydChlLCIwIikscn1mdW5jdGlvbiBpZSh0KXtpZighKHkodCl8fHQ9PT1udWxsfHx0PT09IiIpKXJldHVybiBwYXJzZUludCh0LDEwKX1mdW5jdGlvbiBoZSh0KXtpZighKHkodCl8fHQ9PT1udWxsfHx0PT09IiIpKXJldHVybiBwYXJzZUZsb2F0KHQpfWZ1bmN0aW9uIFF0KHQpe2lmKCEoeSh0KXx8dD09PW51bGx8fHQ9PT0iIikpe2NvbnN0IGU9cGFyc2VGbG9hdCgiMC4iK3QpKjFlMztyZXR1cm4gTWF0aC5mbG9vcihlKX19ZnVuY3Rpb24gS3QodCxlLG49ITEpe2NvbnN0IHI9MTAqKmU7cmV0dXJuKG4/TWF0aC50cnVuYzpNYXRoLnJvdW5kKSh0KnIpL3J9ZnVuY3Rpb24gJGUodCl7cmV0dXJuIHQlND09PTAmJih0JTEwMCE9PTB8fHQlNDAwPT09MCl9ZnVuY3Rpb24gYmUodCl7cmV0dXJuICRlKHQpPzM2NjozNjV9ZnVuY3Rpb24gZHQodCxlKXtjb25zdCBuPW11KGUtMSwxMikrMSxyPXQrKGUtbikvMTI7cmV0dXJuIG49PT0yPyRlKHIpPzI5OjI4OlszMSxudWxsLDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXVtuLTFdfWZ1bmN0aW9uIGh0KHQpe2xldCBlPURhdGUuVVRDKHQueWVhcix0Lm1vbnRoLTEsdC5kYXksdC5ob3VyLHQubWludXRlLHQuc2Vjb25kLHQubWlsbGlzZWNvbmQpO3JldHVybiB0LnllYXI8MTAwJiZ0LnllYXI+PTAmJihlPW5ldyBEYXRlKGUpLGUuc2V0VVRDRnVsbFllYXIodC55ZWFyLHQubW9udGgtMSx0LmRheSkpLCtlfWZ1bmN0aW9uIExyKHQsZSxuKXtyZXR1cm4tR3QoWXQodCwxLGUpLG4pK2UtMX1mdW5jdGlvbiBaZSh0LGU9NCxuPTEpe2NvbnN0IHI9THIodCxlLG4pLHM9THIodCsxLGUsbik7cmV0dXJuKGJlKHQpLXIrcykvN31mdW5jdGlvbiBYdCh0KXtyZXR1cm4gdD45OT90OnQ+Yi50d29EaWdpdEN1dG9mZlllYXI/MTkwMCt0OjJlMyt0fWZ1bmN0aW9uIF9yKHQsZSxuLHI9bnVsbCl7Y29uc3Qgcz1uZXcgRGF0ZSh0KSxpPXtob3VyQ3ljbGU6ImgyMyIseWVhcjoibnVtZXJpYyIsbW9udGg6IjItZGlnaXQiLGRheToiMi1kaWdpdCIsaG91cjoiMi1kaWdpdCIsbWludXRlOiIyLWRpZ2l0In07ciYmKGkudGltZVpvbmU9cik7Y29uc3QgYT17dGltZVpvbmVOYW1lOmUsLi4uaX0sbz1uZXcgSW50bC5EYXRlVGltZUZvcm1hdChuLGEpLmZvcm1hdFRvUGFydHMocykuZmluZCh1PT51LnR5cGUudG9Mb3dlckNhc2UoKT09PSJ0aW1lem9uZW5hbWUiKTtyZXR1cm4gbz9vLnZhbHVlOm51bGx9ZnVuY3Rpb24gbXQodCxlKXtsZXQgbj1wYXJzZUludCh0LDEwKTtOdW1iZXIuaXNOYU4obikmJihuPTApO2NvbnN0IHI9cGFyc2VJbnQoZSwxMCl8fDAscz1uPDB8fE9iamVjdC5pcyhuLC0wKT8tcjpyO3JldHVybiBuKjYwK3N9ZnVuY3Rpb24genIodCl7Y29uc3QgZT1OdW1iZXIodCk7aWYodHlwZW9mIHQ9PSJib29sZWFuInx8dD09PSIifHxOdW1iZXIuaXNOYU4oZSkpdGhyb3cgbmV3IEQoYEludmFsaWQgdW5pdCB2YWx1ZSAke3R9YCk7cmV0dXJuIGV9ZnVuY3Rpb24geXQodCxlKXtjb25zdCBuPXt9O2Zvcihjb25zdCByIGluIHQpaWYoa2UodCxyKSl7Y29uc3Qgcz10W3JdO2lmKHM9PW51bGwpY29udGludWU7bltlKHIpXT16cihzKX1yZXR1cm4gbn1mdW5jdGlvbiBSZSh0LGUpe2NvbnN0IG49TWF0aC50cnVuYyhNYXRoLmFicyh0LzYwKSkscj1NYXRoLnRydW5jKE1hdGguYWJzKHQlNjApKSxzPXQ+PTA/IisiOiItIjtzd2l0Y2goZSl7Y2FzZSJzaG9ydCI6cmV0dXJuYCR7c30ke0kobiwyKX06JHtJKHIsMil9YDtjYXNlIm5hcnJvdyI6cmV0dXJuYCR7c30ke259JHtyPjA/YDoke3J9YDoiIn1gO2Nhc2UidGVjaGllIjpyZXR1cm5gJHtzfSR7SShuLDIpfSR7SShyLDIpfWA7ZGVmYXVsdDp0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVmFsdWUgZm9ybWF0ICR7ZX0gaXMgb3V0IG9mIHJhbmdlIGZvciBwcm9wZXJ0eSBmb3JtYXRgKX19ZnVuY3Rpb24gZ3QodCl7cmV0dXJuIGh1KHQsWyJob3VyIiwibWludXRlIiwic2Vjb25kIiwibWlsbGlzZWNvbmQiXSl9Y29uc3QgeXU9WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLCRyPVsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sZ3U9WyJKIiwiRiIsIk0iLCJBIiwiTSIsIkoiLCJKIiwiQSIsIlMiLCJPIiwiTiIsIkQiXTtmdW5jdGlvbiBacih0KXtzd2l0Y2godCl7Y2FzZSJuYXJyb3ciOnJldHVyblsuLi5ndV07Y2FzZSJzaG9ydCI6cmV0dXJuWy4uLiRyXTtjYXNlImxvbmciOnJldHVyblsuLi55dV07Y2FzZSJudW1lcmljIjpyZXR1cm5bIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCIxMiJdO2Nhc2UiMi1kaWdpdCI6cmV0dXJuWyIwMSIsIjAyIiwiMDMiLCIwNCIsIjA1IiwiMDYiLCIwNyIsIjA4IiwiMDkiLCIxMCIsIjExIiwiMTIiXTtkZWZhdWx0OnJldHVybiBudWxsfX1jb25zdCBScj1bIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5IiwiU3VuZGF5Il0sVXI9WyJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiLCJTdW4iXSxwdT1bIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyIsIlMiXTtmdW5jdGlvbiBQcih0KXtzd2l0Y2godCl7Y2FzZSJuYXJyb3ciOnJldHVyblsuLi5wdV07Y2FzZSJzaG9ydCI6cmV0dXJuWy4uLlVyXTtjYXNlImxvbmciOnJldHVyblsuLi5Scl07Y2FzZSJudW1lcmljIjpyZXR1cm5bIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciXTtkZWZhdWx0OnJldHVybiBudWxsfX1jb25zdCBxcj1bIkFNIiwiUE0iXSx3dT1bIkJlZm9yZSBDaHJpc3QiLCJBbm5vIERvbWluaSJdLHZ1PVsiQkMiLCJBRCJdLE91PVsiQiIsIkEiXTtmdW5jdGlvbiBqcih0KXtzd2l0Y2godCl7Y2FzZSJuYXJyb3ciOnJldHVyblsuLi5PdV07Y2FzZSJzaG9ydCI6cmV0dXJuWy4uLnZ1XTtjYXNlImxvbmciOnJldHVyblsuLi53dV07ZGVmYXVsdDpyZXR1cm4gbnVsbH19ZnVuY3Rpb24gVHUodCl7cmV0dXJuIHFyW3QuaG91cjwxMj8wOjFdfWZ1bmN0aW9uIFN1KHQsZSl7cmV0dXJuIFByKGUpW3Qud2Vla2RheS0xXX1mdW5jdGlvbiBrdSh0LGUpe3JldHVybiBacihlKVt0Lm1vbnRoLTFdfWZ1bmN0aW9uIGJ1KHQsZSl7cmV0dXJuIGpyKGUpW3QueWVhcjwwPzA6MV19ZnVuY3Rpb24gSXUodCxlLG49ImFsd2F5cyIscj0hMSl7Y29uc3Qgcz17eWVhcnM6WyJ5ZWFyIiwieXIuIl0scXVhcnRlcnM6WyJxdWFydGVyIiwicXRyLiJdLG1vbnRoczpbIm1vbnRoIiwibW8uIl0sd2Vla3M6WyJ3ZWVrIiwid2suIl0sZGF5czpbImRheSIsImRheSIsImRheXMiXSxob3VyczpbImhvdXIiLCJoci4iXSxtaW51dGVzOlsibWludXRlIiwibWluLiJdLHNlY29uZHM6WyJzZWNvbmQiLCJzZWMuIl19LGk9WyJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIl0uaW5kZXhPZih0KT09PS0xO2lmKG49PT0iYXV0byImJmkpe2NvbnN0IGQ9dD09PSJkYXlzIjtzd2l0Y2goZSl7Y2FzZSAxOnJldHVybiBkPyJ0b21vcnJvdyI6YG5leHQgJHtzW3RdWzBdfWA7Y2FzZS0xOnJldHVybiBkPyJ5ZXN0ZXJkYXkiOmBsYXN0ICR7c1t0XVswXX1gO2Nhc2UgMDpyZXR1cm4gZD8idG9kYXkiOmB0aGlzICR7c1t0XVswXX1gfX1jb25zdCBhPU9iamVjdC5pcyhlLC0wKXx8ZTwwLG89TWF0aC5hYnMoZSksdT1vPT09MSxsPXNbdF0sYz1yP3U/bFsxXTpsWzJdfHxsWzFdOnU/c1t0XVswXTp0O3JldHVybiBhP2Ake299ICR7Y30gYWdvYDpgaW4gJHtvfSAke2N9YH1mdW5jdGlvbiBIcih0LGUpe2xldCBuPSIiO2Zvcihjb25zdCByIG9mIHQpci5saXRlcmFsP24rPXIudmFsOm4rPWUoci52YWwpO3JldHVybiBufWNvbnN0IEV1PXtEOml0LEREOkpuLERERDpCbixEREREOlFuLHQ6S24sdHQ6WG4sdHR0OmVyLHR0dHQ6dHIsVDpucixUVDpycixUVFQ6c3IsVFRUVDppcixmOmFyLGZmOnVyLGZmZjpjcixmZmZmOmRyLEY6b3IsRkY6bHIsRkZGOmZyLEZGRkY6aHJ9O2NsYXNzIE57c3RhdGljIGNyZWF0ZShlLG49e30pe3JldHVybiBuZXcgTihlLG4pfXN0YXRpYyBwYXJzZUZvcm1hdChlKXtsZXQgbj1udWxsLHI9IiIscz0hMTtjb25zdCBpPVtdO2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKXtjb25zdCBvPWUuY2hhckF0KGEpO289PT0iJyI/KHIubGVuZ3RoPjAmJmkucHVzaCh7bGl0ZXJhbDpzfHwvXlxzKyQvLnRlc3QociksdmFsOnJ9KSxuPW51bGwscj0iIixzPSFzKTpzfHxvPT09bj9yKz1vOihyLmxlbmd0aD4wJiZpLnB1c2goe2xpdGVyYWw6L15ccyskLy50ZXN0KHIpLHZhbDpyfSkscj1vLG49byl9cmV0dXJuIHIubGVuZ3RoPjAmJmkucHVzaCh7bGl0ZXJhbDpzfHwvXlxzKyQvLnRlc3QociksdmFsOnJ9KSxpfXN0YXRpYyBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKGUpe3JldHVybiBFdVtlXX1jb25zdHJ1Y3RvcihlLG4pe3RoaXMub3B0cz1uLHRoaXMubG9jPWUsdGhpcy5zeXN0ZW1Mb2M9bnVsbH1mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChlLG4pe3JldHVybiB0aGlzLnN5c3RlbUxvYz09PW51bGwmJih0aGlzLnN5c3RlbUxvYz10aGlzLmxvYy5yZWRlZmF1bHRUb1N5c3RlbSgpKSx0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihlLHsuLi50aGlzLm9wdHMsLi4ubn0pLmZvcm1hdCgpfWR0Rm9ybWF0dGVyKGUsbj17fSl7cmV0dXJuIHRoaXMubG9jLmR0Rm9ybWF0dGVyKGUsey4uLnRoaXMub3B0cywuLi5ufSl9Zm9ybWF0RGF0ZVRpbWUoZSxuKXtyZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihlLG4pLmZvcm1hdCgpfWZvcm1hdERhdGVUaW1lUGFydHMoZSxuKXtyZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihlLG4pLmZvcm1hdFRvUGFydHMoKX1mb3JtYXRJbnRlcnZhbChlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUuc3RhcnQsbikuZHRmLmZvcm1hdFJhbmdlKGUuc3RhcnQudG9KU0RhdGUoKSxlLmVuZC50b0pTRGF0ZSgpKX1yZXNvbHZlZE9wdGlvbnMoZSxuKXtyZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihlLG4pLnJlc29sdmVkT3B0aW9ucygpfW51bShlLG49MCl7aWYodGhpcy5vcHRzLmZvcmNlU2ltcGxlKXJldHVybiBJKGUsbik7Y29uc3Qgcj17Li4udGhpcy5vcHRzfTtyZXR1cm4gbj4wJiYoci5wYWRUbz1uKSx0aGlzLmxvYy5udW1iZXJGb3JtYXR0ZXIocikuZm9ybWF0KGUpfWZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhlLG4pe2NvbnN0IHI9dGhpcy5sb2MubGlzdGluZ01vZGUoKT09PSJlbiIscz10aGlzLmxvYy5vdXRwdXRDYWxlbmRhciYmdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIhPT0iZ3JlZ29yeSIsaT0oaCxTKT0+dGhpcy5sb2MuZXh0cmFjdChlLGgsUyksYT1oPT5lLmlzT2Zmc2V0Rml4ZWQmJmUub2Zmc2V0PT09MCYmaC5hbGxvd1o/IloiOmUuaXNWYWxpZD9lLnpvbmUuZm9ybWF0T2Zmc2V0KGUudHMsaC5mb3JtYXQpOiIiLG89KCk9PnI/VHUoZSk6aSh7aG91cjoibnVtZXJpYyIsaG91ckN5Y2xlOiJoMTIifSwiZGF5cGVyaW9kIiksdT0oaCxTKT0+cj9rdShlLGgpOmkoUz97bW9udGg6aH06e21vbnRoOmgsZGF5OiJudW1lcmljIn0sIm1vbnRoIiksbD0oaCxTKT0+cj9TdShlLGgpOmkoUz97d2Vla2RheTpofTp7d2Vla2RheTpoLG1vbnRoOiJsb25nIixkYXk6Im51bWVyaWMifSwid2Vla2RheSIpLGM9aD0+e2NvbnN0IFM9Ti5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKGgpO3JldHVybiBTP3RoaXMuZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZSxTKTpofSxkPWg9PnI/YnUoZSxoKTppKHtlcmE6aH0sImVyYSIpLHA9aD0+e3N3aXRjaChoKXtjYXNlIlMiOnJldHVybiB0aGlzLm51bShlLm1pbGxpc2Vjb25kKTtjYXNlInUiOmNhc2UiU1NTIjpyZXR1cm4gdGhpcy5udW0oZS5taWxsaXNlY29uZCwzKTtjYXNlInMiOnJldHVybiB0aGlzLm51bShlLnNlY29uZCk7Y2FzZSJzcyI6cmV0dXJuIHRoaXMubnVtKGUuc2Vjb25kLDIpO2Nhc2UidXUiOnJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGUubWlsbGlzZWNvbmQvMTApLDIpO2Nhc2UidXV1IjpyZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihlLm1pbGxpc2Vjb25kLzEwMCkpO2Nhc2UibSI6cmV0dXJuIHRoaXMubnVtKGUubWludXRlKTtjYXNlIm1tIjpyZXR1cm4gdGhpcy5udW0oZS5taW51dGUsMik7Y2FzZSJoIjpyZXR1cm4gdGhpcy5udW0oZS5ob3VyJTEyPT09MD8xMjplLmhvdXIlMTIpO2Nhc2UiaGgiOnJldHVybiB0aGlzLm51bShlLmhvdXIlMTI9PT0wPzEyOmUuaG91ciUxMiwyKTtjYXNlIkgiOnJldHVybiB0aGlzLm51bShlLmhvdXIpO2Nhc2UiSEgiOnJldHVybiB0aGlzLm51bShlLmhvdXIsMik7Y2FzZSJaIjpyZXR1cm4gYSh7Zm9ybWF0OiJuYXJyb3ciLGFsbG93Wjp0aGlzLm9wdHMuYWxsb3dafSk7Y2FzZSJaWiI6cmV0dXJuIGEoe2Zvcm1hdDoic2hvcnQiLGFsbG93Wjp0aGlzLm9wdHMuYWxsb3dafSk7Y2FzZSJaWloiOnJldHVybiBhKHtmb3JtYXQ6InRlY2hpZSIsYWxsb3daOnRoaXMub3B0cy5hbGxvd1p9KTtjYXNlIlpaWloiOnJldHVybiBlLnpvbmUub2Zmc2V0TmFtZShlLnRzLHtmb3JtYXQ6InNob3J0Iixsb2NhbGU6dGhpcy5sb2MubG9jYWxlfSk7Y2FzZSJaWlpaWiI6cmV0dXJuIGUuem9uZS5vZmZzZXROYW1lKGUudHMse2Zvcm1hdDoibG9uZyIsbG9jYWxlOnRoaXMubG9jLmxvY2FsZX0pO2Nhc2UieiI6cmV0dXJuIGUuem9uZU5hbWU7Y2FzZSJhIjpyZXR1cm4gbygpO2Nhc2UiZCI6cmV0dXJuIHM/aSh7ZGF5OiJudW1lcmljIn0sImRheSIpOnRoaXMubnVtKGUuZGF5KTtjYXNlImRkIjpyZXR1cm4gcz9pKHtkYXk6IjItZGlnaXQifSwiZGF5Iik6dGhpcy5udW0oZS5kYXksMik7Y2FzZSJjIjpyZXR1cm4gdGhpcy5udW0oZS53ZWVrZGF5KTtjYXNlImNjYyI6cmV0dXJuIGwoInNob3J0IiwhMCk7Y2FzZSJjY2NjIjpyZXR1cm4gbCgibG9uZyIsITApO2Nhc2UiY2NjY2MiOnJldHVybiBsKCJuYXJyb3ciLCEwKTtjYXNlIkUiOnJldHVybiB0aGlzLm51bShlLndlZWtkYXkpO2Nhc2UiRUVFIjpyZXR1cm4gbCgic2hvcnQiLCExKTtjYXNlIkVFRUUiOnJldHVybiBsKCJsb25nIiwhMSk7Y2FzZSJFRUVFRSI6cmV0dXJuIGwoIm5hcnJvdyIsITEpO2Nhc2UiTCI6cmV0dXJuIHM/aSh7bW9udGg6Im51bWVyaWMiLGRheToibnVtZXJpYyJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgpO2Nhc2UiTEwiOnJldHVybiBzP2koe21vbnRoOiIyLWRpZ2l0IixkYXk6Im51bWVyaWMifSwibW9udGgiKTp0aGlzLm51bShlLm1vbnRoLDIpO2Nhc2UiTExMIjpyZXR1cm4gdSgic2hvcnQiLCEwKTtjYXNlIkxMTEwiOnJldHVybiB1KCJsb25nIiwhMCk7Y2FzZSJMTExMTCI6cmV0dXJuIHUoIm5hcnJvdyIsITApO2Nhc2UiTSI6cmV0dXJuIHM/aSh7bW9udGg6Im51bWVyaWMifSwibW9udGgiKTp0aGlzLm51bShlLm1vbnRoKTtjYXNlIk1NIjpyZXR1cm4gcz9pKHttb250aDoiMi1kaWdpdCJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgsMik7Y2FzZSJNTU0iOnJldHVybiB1KCJzaG9ydCIsITEpO2Nhc2UiTU1NTSI6cmV0dXJuIHUoImxvbmciLCExKTtjYXNlIk1NTU1NIjpyZXR1cm4gdSgibmFycm93IiwhMSk7Y2FzZSJ5IjpyZXR1cm4gcz9pKHt5ZWFyOiJudW1lcmljIn0sInllYXIiKTp0aGlzLm51bShlLnllYXIpO2Nhc2UieXkiOnJldHVybiBzP2koe3llYXI6IjItZGlnaXQifSwieWVhciIpOnRoaXMubnVtKGUueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwyKTtjYXNlInl5eXkiOnJldHVybiBzP2koe3llYXI6Im51bWVyaWMifSwieWVhciIpOnRoaXMubnVtKGUueWVhciw0KTtjYXNlInl5eXl5eSI6cmV0dXJuIHM/aSh7eWVhcjoibnVtZXJpYyJ9LCJ5ZWFyIik6dGhpcy5udW0oZS55ZWFyLDYpO2Nhc2UiRyI6cmV0dXJuIGQoInNob3J0Iik7Y2FzZSJHRyI6cmV0dXJuIGQoImxvbmciKTtjYXNlIkdHR0dHIjpyZXR1cm4gZCgibmFycm93Iik7Y2FzZSJrayI6cmV0dXJuIHRoaXMubnVtKGUud2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksMik7Y2FzZSJra2trIjpyZXR1cm4gdGhpcy5udW0oZS53ZWVrWWVhciw0KTtjYXNlIlciOnJldHVybiB0aGlzLm51bShlLndlZWtOdW1iZXIpO2Nhc2UiV1ciOnJldHVybiB0aGlzLm51bShlLndlZWtOdW1iZXIsMik7Y2FzZSJuIjpyZXR1cm4gdGhpcy5udW0oZS5sb2NhbFdlZWtOdW1iZXIpO2Nhc2Uibm4iOnJldHVybiB0aGlzLm51bShlLmxvY2FsV2Vla051bWJlciwyKTtjYXNlImlpIjpyZXR1cm4gdGhpcy5udW0oZS5sb2NhbFdlZWtZZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLDIpO2Nhc2UiaWlpaSI6cmV0dXJuIHRoaXMubnVtKGUubG9jYWxXZWVrWWVhciw0KTtjYXNlIm8iOnJldHVybiB0aGlzLm51bShlLm9yZGluYWwpO2Nhc2Uib29vIjpyZXR1cm4gdGhpcy5udW0oZS5vcmRpbmFsLDMpO2Nhc2UicSI6cmV0dXJuIHRoaXMubnVtKGUucXVhcnRlcik7Y2FzZSJxcSI6cmV0dXJuIHRoaXMubnVtKGUucXVhcnRlciwyKTtjYXNlIlgiOnJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGUudHMvMWUzKSk7Y2FzZSJ4IjpyZXR1cm4gdGhpcy5udW0oZS50cyk7ZGVmYXVsdDpyZXR1cm4gYyhoKX19O3JldHVybiBIcihOLnBhcnNlRm9ybWF0KG4pLHApfWZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyhlLG4pe2NvbnN0IHI9dT0+e3N3aXRjaCh1WzBdKXtjYXNlIlMiOnJldHVybiJtaWxsaXNlY29uZCI7Y2FzZSJzIjpyZXR1cm4ic2Vjb25kIjtjYXNlIm0iOnJldHVybiJtaW51dGUiO2Nhc2UiaCI6cmV0dXJuImhvdXIiO2Nhc2UiZCI6cmV0dXJuImRheSI7Y2FzZSJ3IjpyZXR1cm4id2VlayI7Y2FzZSJNIjpyZXR1cm4ibW9udGgiO2Nhc2UieSI6cmV0dXJuInllYXIiO2RlZmF1bHQ6cmV0dXJuIG51bGx9fSxzPXU9Pmw9Pntjb25zdCBjPXIobCk7cmV0dXJuIGM/dGhpcy5udW0odS5nZXQoYyksbC5sZW5ndGgpOmx9LGk9Ti5wYXJzZUZvcm1hdChuKSxhPWkucmVkdWNlKCh1LHtsaXRlcmFsOmwsdmFsOmN9KT0+bD91OnUuY29uY2F0KGMpLFtdKSxvPWUuc2hpZnRUbyguLi5hLm1hcChyKS5maWx0ZXIodT0+dSkpO3JldHVybiBIcihpLHMobykpfX1jb25zdCBZcj0vW0EtWmEtel8rLV17MSwyNTZ9KD86Oj9cL1tBLVphLXowLTlfKy1dezEsMjU2fSg/OlwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87ZnVuY3Rpb24gSWUoLi4udCl7Y29uc3QgZT10LnJlZHVjZSgobixyKT0+bityLnNvdXJjZSwiIik7cmV0dXJuIFJlZ0V4cChgXiR7ZX0kYCl9ZnVuY3Rpb24gRWUoLi4udCl7cmV0dXJuIGU9PnQucmVkdWNlKChbbixyLHNdLGkpPT57Y29uc3RbYSxvLHVdPWkoZSxzKTtyZXR1cm5bey4uLm4sLi4uYX0sb3x8cix1XX0sW3t9LG51bGwsMV0pLnNsaWNlKDAsMil9ZnVuY3Rpb24gTmUodCwuLi5lKXtpZih0PT1udWxsKXJldHVybltudWxsLG51bGxdO2Zvcihjb25zdFtuLHJdb2YgZSl7Y29uc3Qgcz1uLmV4ZWModCk7aWYocylyZXR1cm4gcihzKX1yZXR1cm5bbnVsbCxudWxsXX1mdW5jdGlvbiBHciguLi50KXtyZXR1cm4oZSxuKT0+e2NvbnN0IHI9e307bGV0IHM7Zm9yKHM9MDtzPHQubGVuZ3RoO3MrKylyW3Rbc11dPWllKGVbbitzXSk7cmV0dXJuW3IsbnVsbCxuK3NdfX1jb25zdCBKcj0vKD86KFopfChbKy1dXGRcZCkoPzo6PyhcZFxkKSk/KS8sTnU9YCg/OiR7SnIuc291cmNlfT8oPzpcXFsoJHtZci5zb3VyY2V9KVxcXSk/KT9gLGVuPS8oXGRcZCkoPzo6PyhcZFxkKSg/Ojo/KFxkXGQpKD86Wy4sXShcZHsxLDMwfSkpPyk/KT8vLEJyPVJlZ0V4cChgJHtlbi5zb3VyY2V9JHtOdX1gKSx0bj1SZWdFeHAoYCg/OlQke0JyLnNvdXJjZX0pP2ApLE11PS8oWystXVxkezZ9fFxkezR9KSg/Oi0/KFxkXGQpKD86LT8oXGRcZCkpPyk/Lyx4dT0vKFxkezR9KS0/VyhcZFxkKSg/Oi0/KFxkKSk/LyxEdT0vKFxkezR9KS0/KFxkezN9KS8sQ3U9R3IoIndlZWtZZWFyIiwid2Vla051bWJlciIsIndlZWtEYXkiKSxGdT1HcigieWVhciIsIm9yZGluYWwiKSxBdT0vKFxkezR9KS0oXGRcZCktKFxkXGQpLyxRcj1SZWdFeHAoYCR7ZW4uc291cmNlfSA/KD86JHtKci5zb3VyY2V9fCgke1lyLnNvdXJjZX0pKT9gKSxWdT1SZWdFeHAoYCg/OiAke1FyLnNvdXJjZX0pP2ApO2Z1bmN0aW9uIE1lKHQsZSxuKXtjb25zdCByPXRbZV07cmV0dXJuIHkocik/bjppZShyKX1mdW5jdGlvbiBXdSh0LGUpe3JldHVyblt7eWVhcjpNZSh0LGUpLG1vbnRoOk1lKHQsZSsxLDEpLGRheTpNZSh0LGUrMiwxKX0sbnVsbCxlKzNdfWZ1bmN0aW9uIHhlKHQsZSl7cmV0dXJuW3tob3VyczpNZSh0LGUsMCksbWludXRlczpNZSh0LGUrMSwwKSxzZWNvbmRzOk1lKHQsZSsyLDApLG1pbGxpc2Vjb25kczpRdCh0W2UrM10pfSxudWxsLGUrNF19ZnVuY3Rpb24gVWUodCxlKXtjb25zdCBuPSF0W2VdJiYhdFtlKzFdLHI9bXQodFtlKzFdLHRbZSsyXSkscz1uP251bGw6eC5pbnN0YW5jZShyKTtyZXR1cm5be30scyxlKzNdfWZ1bmN0aW9uIFBlKHQsZSl7Y29uc3Qgbj10W2VdP0ouY3JlYXRlKHRbZV0pOm51bGw7cmV0dXJuW3t9LG4sZSsxXX1jb25zdCBMdT1SZWdFeHAoYF5UPyR7ZW4uc291cmNlfSRgKSxfdT0vXi0/UCg/Oig/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KVkpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KU0pPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KVcpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KUQpPyg/OlQoPzooLT9cZHsxLDIwfSg/OlwuXGR7MSwyMH0pPylIKT8oPzooLT9cZHsxLDIwfSg/OlwuXGR7MSwyMH0pPylNKT8oPzooLT9cZHsxLDIwfSkoPzpbLixdKC0/XGR7MSwyMH0pKT9TKT8pPykkLztmdW5jdGlvbiB6dSh0KXtjb25zdFtlLG4scixzLGksYSxvLHUsbF09dCxjPWVbMF09PT0iLSIsZD11JiZ1WzBdPT09Ii0iLHA9KGgsUz0hMSk9PmghPT12b2lkIDAmJihTfHxoJiZjKT8taDpoO3JldHVyblt7eWVhcnM6cChoZShuKSksbW9udGhzOnAoaGUocikpLHdlZWtzOnAoaGUocykpLGRheXM6cChoZShpKSksaG91cnM6cChoZShhKSksbWludXRlczpwKGhlKG8pKSxzZWNvbmRzOnAoaGUodSksdT09PSItMCIpLG1pbGxpc2Vjb25kczpwKFF0KGwpLGQpfV19Y29uc3QgJHU9e0dNVDowLEVEVDotNCo2MCxFU1Q6LTUqNjAsQ0RUOi01KjYwLENTVDotNio2MCxNRFQ6LTYqNjAsTVNUOi03KjYwLFBEVDotNyo2MCxQU1Q6LTgqNjB9O2Z1bmN0aW9uIG5uKHQsZSxuLHIscyxpLGEpe2NvbnN0IG89e3llYXI6ZS5sZW5ndGg9PT0yP1h0KGllKGUpKTppZShlKSxtb250aDokci5pbmRleE9mKG4pKzEsZGF5OmllKHIpLGhvdXI6aWUocyksbWludXRlOmllKGkpfTtyZXR1cm4gYSYmKG8uc2Vjb25kPWllKGEpKSx0JiYoby53ZWVrZGF5PXQubGVuZ3RoPjM/UnIuaW5kZXhPZih0KSsxOlVyLmluZGV4T2YodCkrMSksb31jb25zdCBadT0vXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLFxzKT8oXGR7MSwyfSlccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylccyhcZHsyLDR9KVxzKFxkXGQpOihcZFxkKSg/OjooXGRcZCkpP1xzKD86KFVUfEdNVHxbRUNNUF1bU0RdVCl8KFtael0pfCg/OihbKy1dXGRcZCkoXGRcZCkpKSQvO2Z1bmN0aW9uIFJ1KHQpe2NvbnN0WyxlLG4scixzLGksYSxvLHUsbCxjLGRdPXQscD1ubihlLHMscixuLGksYSxvKTtsZXQgaDtyZXR1cm4gdT9oPSR1W3VdOmw/aD0wOmg9bXQoYyxkKSxbcCxuZXcgeChoKV19ZnVuY3Rpb24gVXUodCl7cmV0dXJuIHQucmVwbGFjZSgvXChbXigpXSpcKXxbXG5cdF0vZywiICIpLnJlcGxhY2UoLyhcc1xzKykvZywiICIpLnRyaW0oKX1jb25zdCBQdT0vXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoXGRcZCkgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoXGR7NH0pIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLHF1PS9eKE1vbmRheXxUdWVzZGF5fFdlZG5lc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxkXGQpLShKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYyktKFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLGp1PS9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1bikgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoIFxkfFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQpIChcZHs0fSkkLztmdW5jdGlvbiBLcih0KXtjb25zdFssZSxuLHIscyxpLGEsb109dDtyZXR1cm5bbm4oZSxzLHIsbixpLGEsbykseC51dGNJbnN0YW5jZV19ZnVuY3Rpb24gSHUodCl7Y29uc3RbLGUsbixyLHMsaSxhLG9dPXQ7cmV0dXJuW25uKGUsbyxuLHIscyxpLGEpLHgudXRjSW5zdGFuY2VdfWNvbnN0IFl1PUllKE11LHRuKSxHdT1JZSh4dSx0biksSnU9SWUoRHUsdG4pLEJ1PUllKEJyKSxYcj1FZShXdSx4ZSxVZSxQZSksUXU9RWUoQ3UseGUsVWUsUGUpLEt1PUVlKEZ1LHhlLFVlLFBlKSxYdT1FZSh4ZSxVZSxQZSk7ZnVuY3Rpb24gZWwodCl7cmV0dXJuIE5lKHQsW1l1LFhyXSxbR3UsUXVdLFtKdSxLdV0sW0J1LFh1XSl9ZnVuY3Rpb24gdGwodCl7cmV0dXJuIE5lKFV1KHQpLFtadSxSdV0pfWZ1bmN0aW9uIG5sKHQpe3JldHVybiBOZSh0LFtQdSxLcl0sW3F1LEtyXSxbanUsSHVdKX1mdW5jdGlvbiBybCh0KXtyZXR1cm4gTmUodCxbX3UsenVdKX1jb25zdCBzbD1FZSh4ZSk7ZnVuY3Rpb24gaWwodCl7cmV0dXJuIE5lKHQsW0x1LHNsXSl9Y29uc3QgYWw9SWUoQXUsVnUpLG9sPUllKFFyKSx1bD1FZSh4ZSxVZSxQZSk7ZnVuY3Rpb24gbGwodCl7cmV0dXJuIE5lKHQsW2FsLFhyXSxbb2wsdWxdKX1jb25zdCBlcz0iSW52YWxpZCBEdXJhdGlvbiIsdHM9e3dlZWtzOntkYXlzOjcsaG91cnM6NyoyNCxtaW51dGVzOjcqMjQqNjAsc2Vjb25kczo3KjI0KjYwKjYwLG1pbGxpc2Vjb25kczo3KjI0KjYwKjYwKjFlM30sZGF5czp7aG91cnM6MjQsbWludXRlczoyNCo2MCxzZWNvbmRzOjI0KjYwKjYwLG1pbGxpc2Vjb25kczoyNCo2MCo2MCoxZTN9LGhvdXJzOnttaW51dGVzOjYwLHNlY29uZHM6NjAqNjAsbWlsbGlzZWNvbmRzOjYwKjYwKjFlM30sbWludXRlczp7c2Vjb25kczo2MCxtaWxsaXNlY29uZHM6NjAqMWUzfSxzZWNvbmRzOnttaWxsaXNlY29uZHM6MWUzfX0sY2w9e3llYXJzOntxdWFydGVyczo0LG1vbnRoczoxMix3ZWVrczo1MixkYXlzOjM2NSxob3VyczozNjUqMjQsbWludXRlczozNjUqMjQqNjAsc2Vjb25kczozNjUqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOjM2NSoyNCo2MCo2MCoxZTN9LHF1YXJ0ZXJzOnttb250aHM6Myx3ZWVrczoxMyxkYXlzOjkxLGhvdXJzOjkxKjI0LG1pbnV0ZXM6OTEqMjQqNjAsc2Vjb25kczo5MSoyNCo2MCo2MCxtaWxsaXNlY29uZHM6OTEqMjQqNjAqNjAqMWUzfSxtb250aHM6e3dlZWtzOjQsZGF5czozMCxob3VyczozMCoyNCxtaW51dGVzOjMwKjI0KjYwLHNlY29uZHM6MzAqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOjMwKjI0KjYwKjYwKjFlM30sLi4udHN9LEw9MTQ2MDk3LzQwMCxEZT0xNDYwOTcvNDgwMCxmbD17eWVhcnM6e3F1YXJ0ZXJzOjQsbW9udGhzOjEyLHdlZWtzOkwvNyxkYXlzOkwsaG91cnM6TCoyNCxtaW51dGVzOkwqMjQqNjAsc2Vjb25kczpMKjI0KjYwKjYwLG1pbGxpc2Vjb25kczpMKjI0KjYwKjYwKjFlM30scXVhcnRlcnM6e21vbnRoczozLHdlZWtzOkwvMjgsZGF5czpMLzQsaG91cnM6TCoyNC80LG1pbnV0ZXM6TCoyNCo2MC80LHNlY29uZHM6TCoyNCo2MCo2MC80LG1pbGxpc2Vjb25kczpMKjI0KjYwKjYwKjFlMy80fSxtb250aHM6e3dlZWtzOkRlLzcsZGF5czpEZSxob3VyczpEZSoyNCxtaW51dGVzOkRlKjI0KjYwLHNlY29uZHM6RGUqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOkRlKjI0KjYwKjYwKjFlM30sLi4udHN9LG1lPVsieWVhcnMiLCJxdWFydGVycyIsIm1vbnRocyIsIndlZWtzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiXSxkbD1tZS5zbGljZSgwKS5yZXZlcnNlKCk7ZnVuY3Rpb24gYWUodCxlLG49ITEpe2NvbnN0IHI9e3ZhbHVlczpuP2UudmFsdWVzOnsuLi50LnZhbHVlcywuLi5lLnZhbHVlc3x8e319LGxvYzp0LmxvYy5jbG9uZShlLmxvYyksY29udmVyc2lvbkFjY3VyYWN5OmUuY29udmVyc2lvbkFjY3VyYWN5fHx0LmNvbnZlcnNpb25BY2N1cmFjeSxtYXRyaXg6ZS5tYXRyaXh8fHQubWF0cml4fTtyZXR1cm4gbmV3IHYocil9ZnVuY3Rpb24gbnModCxlKXtsZXQgbj1lLm1pbGxpc2Vjb25kcz8/MDtmb3IoY29uc3QgciBvZiBkbC5zbGljZSgxKSllW3JdJiYobis9ZVtyXSp0W3JdLm1pbGxpc2Vjb25kcyk7cmV0dXJuIG59ZnVuY3Rpb24gcnModCxlKXtjb25zdCBuPW5zKHQsZSk8MD8tMToxO21lLnJlZHVjZVJpZ2h0KChyLHMpPT57aWYoeShlW3NdKSlyZXR1cm4gcjtpZihyKXtjb25zdCBpPWVbcl0qbixhPXRbc11bcl0sbz1NYXRoLmZsb29yKGkvYSk7ZVtzXSs9bypuLGVbcl0tPW8qYSpufXJldHVybiBzfSxudWxsKSxtZS5yZWR1Y2UoKHIscyk9PntpZih5KGVbc10pKXJldHVybiByO2lmKHIpe2NvbnN0IGk9ZVtyXSUxO2Vbcl0tPWksZVtzXSs9aSp0W3JdW3NdfXJldHVybiBzfSxudWxsKX1mdW5jdGlvbiBobCh0KXtjb25zdCBlPXt9O2Zvcihjb25zdFtuLHJdb2YgT2JqZWN0LmVudHJpZXModCkpciE9PTAmJihlW25dPXIpO3JldHVybiBlfWNsYXNzIHZ7Y29uc3RydWN0b3IoZSl7Y29uc3Qgbj1lLmNvbnZlcnNpb25BY2N1cmFjeT09PSJsb25ndGVybSJ8fCExO2xldCByPW4/Zmw6Y2w7ZS5tYXRyaXgmJihyPWUubWF0cml4KSx0aGlzLnZhbHVlcz1lLnZhbHVlcyx0aGlzLmxvYz1lLmxvY3x8VC5jcmVhdGUoKSx0aGlzLmNvbnZlcnNpb25BY2N1cmFjeT1uPyJsb25ndGVybSI6ImNhc3VhbCIsdGhpcy5pbnZhbGlkPWUuaW52YWxpZHx8bnVsbCx0aGlzLm1hdHJpeD1yLHRoaXMuaXNMdXhvbkR1cmF0aW9uPSEwfXN0YXRpYyBmcm9tTWlsbGlzKGUsbil7cmV0dXJuIHYuZnJvbU9iamVjdCh7bWlsbGlzZWNvbmRzOmV9LG4pfXN0YXRpYyBmcm9tT2JqZWN0KGUsbj17fSl7aWYoZT09bnVsbHx8dHlwZW9mIGUhPSJvYmplY3QiKXRocm93IG5ldyBEKGBEdXJhdGlvbi5mcm9tT2JqZWN0OiBhcmd1bWVudCBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGdvdCAke2U9PT1udWxsPyJudWxsIjp0eXBlb2YgZX1gKTtyZXR1cm4gbmV3IHYoe3ZhbHVlczp5dChlLHYubm9ybWFsaXplVW5pdCksbG9jOlQuZnJvbU9iamVjdChuKSxjb252ZXJzaW9uQWNjdXJhY3k6bi5jb252ZXJzaW9uQWNjdXJhY3ksbWF0cml4Om4ubWF0cml4fSl9c3RhdGljIGZyb21EdXJhdGlvbkxpa2UoZSl7aWYoZGUoZSkpcmV0dXJuIHYuZnJvbU1pbGxpcyhlKTtpZih2LmlzRHVyYXRpb24oZSkpcmV0dXJuIGU7aWYodHlwZW9mIGU9PSJvYmplY3QiKXJldHVybiB2LmZyb21PYmplY3QoZSk7dGhyb3cgbmV3IEQoYFVua25vd24gZHVyYXRpb24gYXJndW1lbnQgJHtlfSBvZiB0eXBlICR7dHlwZW9mIGV9YCl9c3RhdGljIGZyb21JU08oZSxuKXtjb25zdFtyXT1ybChlKTtyZXR1cm4gcj92LmZyb21PYmplY3QocixuKTp2LmludmFsaWQoInVucGFyc2FibGUiLGB0aGUgaW5wdXQgIiR7ZX0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApfXN0YXRpYyBmcm9tSVNPVGltZShlLG4pe2NvbnN0W3JdPWlsKGUpO3JldHVybiByP3YuZnJvbU9iamVjdChyLG4pOnYuaW52YWxpZCgidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtlfSIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCl9c3RhdGljIGludmFsaWQoZSxuPW51bGwpe2lmKCFlKXRocm93IG5ldyBEKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIER1cmF0aW9uIGlzIGludmFsaWQiKTtjb25zdCByPWUgaW5zdGFuY2VvZiAkP2U6bmV3ICQoZSxuKTtpZihiLnRocm93T25JbnZhbGlkKXRocm93IG5ldyBabyhyKTtyZXR1cm4gbmV3IHYoe2ludmFsaWQ6cn0pfXN0YXRpYyBub3JtYWxpemVVbml0KGUpe2NvbnN0IG49e3llYXI6InllYXJzIix5ZWFyczoieWVhcnMiLHF1YXJ0ZXI6InF1YXJ0ZXJzIixxdWFydGVyczoicXVhcnRlcnMiLG1vbnRoOiJtb250aHMiLG1vbnRoczoibW9udGhzIix3ZWVrOiJ3ZWVrcyIsd2Vla3M6IndlZWtzIixkYXk6ImRheXMiLGRheXM6ImRheXMiLGhvdXI6ImhvdXJzIixob3VyczoiaG91cnMiLG1pbnV0ZToibWludXRlcyIsbWludXRlczoibWludXRlcyIsc2Vjb25kOiJzZWNvbmRzIixzZWNvbmRzOiJzZWNvbmRzIixtaWxsaXNlY29uZDoibWlsbGlzZWNvbmRzIixtaWxsaXNlY29uZHM6Im1pbGxpc2Vjb25kcyJ9W2UmJmUudG9Mb3dlckNhc2UoKV07aWYoIW4pdGhyb3cgbmV3IEduKGUpO3JldHVybiBufXN0YXRpYyBpc0R1cmF0aW9uKGUpe3JldHVybiBlJiZlLmlzTHV4b25EdXJhdGlvbnx8ITF9Z2V0IGxvY2FsZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5sb2MubG9jYWxlOm51bGx9Z2V0IG51bWJlcmluZ1N5c3RlbSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtOm51bGx9dG9Gb3JtYXQoZSxuPXt9KXtjb25zdCByPXsuLi5uLGZsb29yOm4ucm91bmQhPT0hMSYmbi5mbG9vciE9PSExfTtyZXR1cm4gdGhpcy5pc1ZhbGlkP04uY3JlYXRlKHRoaXMubG9jLHIpLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyh0aGlzLGUpOmVzfXRvSHVtYW4oZT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gZXM7Y29uc3Qgbj1tZS5tYXAocj0+e2NvbnN0IHM9dGhpcy52YWx1ZXNbcl07cmV0dXJuIHkocyk/bnVsbDp0aGlzLmxvYy5udW1iZXJGb3JtYXR0ZXIoe3N0eWxlOiJ1bml0Iix1bml0RGlzcGxheToibG9uZyIsLi4uZSx1bml0OnIuc2xpY2UoMCwtMSl9KS5mb3JtYXQocyl9KS5maWx0ZXIocj0+cik7cmV0dXJuIHRoaXMubG9jLmxpc3RGb3JtYXR0ZXIoe3R5cGU6ImNvbmp1bmN0aW9uIixzdHlsZTplLmxpc3RTdHlsZXx8Im5hcnJvdyIsLi4uZX0pLmZvcm1hdChuKX10b09iamVjdCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/ey4uLnRoaXMudmFsdWVzfTp7fX10b0lTTygpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7bGV0IGU9IlAiO3JldHVybiB0aGlzLnllYXJzIT09MCYmKGUrPXRoaXMueWVhcnMrIlkiKSwodGhpcy5tb250aHMhPT0wfHx0aGlzLnF1YXJ0ZXJzIT09MCkmJihlKz10aGlzLm1vbnRocyt0aGlzLnF1YXJ0ZXJzKjMrIk0iKSx0aGlzLndlZWtzIT09MCYmKGUrPXRoaXMud2Vla3MrIlciKSx0aGlzLmRheXMhPT0wJiYoZSs9dGhpcy5kYXlzKyJEIiksKHRoaXMuaG91cnMhPT0wfHx0aGlzLm1pbnV0ZXMhPT0wfHx0aGlzLnNlY29uZHMhPT0wfHx0aGlzLm1pbGxpc2Vjb25kcyE9PTApJiYoZSs9IlQiKSx0aGlzLmhvdXJzIT09MCYmKGUrPXRoaXMuaG91cnMrIkgiKSx0aGlzLm1pbnV0ZXMhPT0wJiYoZSs9dGhpcy5taW51dGVzKyJNIiksKHRoaXMuc2Vjb25kcyE9PTB8fHRoaXMubWlsbGlzZWNvbmRzIT09MCkmJihlKz1LdCh0aGlzLnNlY29uZHMrdGhpcy5taWxsaXNlY29uZHMvMWUzLDMpKyJTIiksZT09PSJQIiYmKGUrPSJUMFMiKSxlfXRvSVNPVGltZShlPXt9KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiBudWxsO2NvbnN0IG49dGhpcy50b01pbGxpcygpO3JldHVybiBuPDB8fG4+PTg2NGU1P251bGw6KGU9e3N1cHByZXNzTWlsbGlzZWNvbmRzOiExLHN1cHByZXNzU2Vjb25kczohMSxpbmNsdWRlUHJlZml4OiExLGZvcm1hdDoiZXh0ZW5kZWQiLC4uLmUsaW5jbHVkZU9mZnNldDohMX0sZy5mcm9tTWlsbGlzKG4se3pvbmU6IlVUQyJ9KS50b0lTT1RpbWUoZSkpfXRvSlNPTigpe3JldHVybiB0aGlzLnRvSVNPKCl9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy50b0lTTygpfVtTeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpXSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YER1cmF0aW9uIHsgdmFsdWVzOiAke0pTT04uc3RyaW5naWZ5KHRoaXMudmFsdWVzKX0gfWA6YER1cmF0aW9uIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWB9dG9NaWxsaXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP25zKHRoaXMubWF0cml4LHRoaXMudmFsdWVzKTpOYU59dmFsdWVPZigpe3JldHVybiB0aGlzLnRvTWlsbGlzKCl9cGx1cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49di5mcm9tRHVyYXRpb25MaWtlKGUpLHI9e307Zm9yKGNvbnN0IHMgb2YgbWUpKGtlKG4udmFsdWVzLHMpfHxrZSh0aGlzLnZhbHVlcyxzKSkmJihyW3NdPW4uZ2V0KHMpK3RoaXMuZ2V0KHMpKTtyZXR1cm4gYWUodGhpcyx7dmFsdWVzOnJ9LCEwKX1taW51cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49di5mcm9tRHVyYXRpb25MaWtlKGUpO3JldHVybiB0aGlzLnBsdXMobi5uZWdhdGUoKSl9bWFwVW5pdHMoZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPXt9O2Zvcihjb25zdCByIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSluW3JdPXpyKGUodGhpcy52YWx1ZXNbcl0scikpO3JldHVybiBhZSh0aGlzLHt2YWx1ZXM6bn0sITApfWdldChlKXtyZXR1cm4gdGhpc1t2Lm5vcm1hbGl6ZVVuaXQoZSldfXNldChlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49ey4uLnRoaXMudmFsdWVzLC4uLnl0KGUsdi5ub3JtYWxpemVVbml0KX07cmV0dXJuIGFlKHRoaXMse3ZhbHVlczpufSl9cmVjb25maWd1cmUoe2xvY2FsZTplLG51bWJlcmluZ1N5c3RlbTpuLGNvbnZlcnNpb25BY2N1cmFjeTpyLG1hdHJpeDpzfT17fSl7Y29uc3QgYT17bG9jOnRoaXMubG9jLmNsb25lKHtsb2NhbGU6ZSxudW1iZXJpbmdTeXN0ZW06bn0pLG1hdHJpeDpzLGNvbnZlcnNpb25BY2N1cmFjeTpyfTtyZXR1cm4gYWUodGhpcyxhKX1hcyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc2hpZnRUbyhlKS5nZXQoZSk6TmFOfW5vcm1hbGl6ZSgpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3QgZT10aGlzLnRvT2JqZWN0KCk7cmV0dXJuIHJzKHRoaXMubWF0cml4LGUpLGFlKHRoaXMse3ZhbHVlczplfSwhMCl9cmVzY2FsZSgpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3QgZT1obCh0aGlzLm5vcm1hbGl6ZSgpLnNoaWZ0VG9BbGwoKS50b09iamVjdCgpKTtyZXR1cm4gYWUodGhpcyx7dmFsdWVzOmV9LCEwKX1zaGlmdFRvKC4uLmUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7aWYoZS5sZW5ndGg9PT0wKXJldHVybiB0aGlzO2U9ZS5tYXAoYT0+di5ub3JtYWxpemVVbml0KGEpKTtjb25zdCBuPXt9LHI9e30scz10aGlzLnRvT2JqZWN0KCk7bGV0IGk7Zm9yKGNvbnN0IGEgb2YgbWUpaWYoZS5pbmRleE9mKGEpPj0wKXtpPWE7bGV0IG89MDtmb3IoY29uc3QgbCBpbiByKW8rPXRoaXMubWF0cml4W2xdW2FdKnJbbF0scltsXT0wO2RlKHNbYV0pJiYobys9c1thXSk7Y29uc3QgdT1NYXRoLnRydW5jKG8pO25bYV09dSxyW2FdPShvKjFlMy11KjFlMykvMWUzfWVsc2UgZGUoc1thXSkmJihyW2FdPXNbYV0pO2Zvcihjb25zdCBhIGluIHIpclthXSE9PTAmJihuW2ldKz1hPT09aT9yW2FdOnJbYV0vdGhpcy5tYXRyaXhbaV1bYV0pO3JldHVybiBycyh0aGlzLm1hdHJpeCxuKSxhZSh0aGlzLHt2YWx1ZXM6bn0sITApfXNoaWZ0VG9BbGwoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc2hpZnRUbygieWVhcnMiLCJtb250aHMiLCJ3ZWVrcyIsImRheXMiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIik6dGhpc31uZWdhdGUoKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IGU9e307Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKWVbbl09dGhpcy52YWx1ZXNbbl09PT0wPzA6LXRoaXMudmFsdWVzW25dO3JldHVybiBhZSh0aGlzLHt2YWx1ZXM6ZX0sITApfWdldCB5ZWFycygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMueWVhcnN8fDA6TmFOfWdldCBxdWFydGVycygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMucXVhcnRlcnN8fDA6TmFOfWdldCBtb250aHMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLm1vbnRoc3x8MDpOYU59Z2V0IHdlZWtzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy53ZWVrc3x8MDpOYU59Z2V0IGRheXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLmRheXN8fDA6TmFOfWdldCBob3Vycygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuaG91cnN8fDA6TmFOfWdldCBtaW51dGVzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5taW51dGVzfHwwOk5hTn1nZXQgc2Vjb25kcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuc2Vjb25kc3x8MDpOYU59Z2V0IG1pbGxpc2Vjb25kcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzfHwwOk5hTn1nZXQgaXNWYWxpZCgpe3JldHVybiB0aGlzLmludmFsaWQ9PT1udWxsfWdldCBpbnZhbGlkUmVhc29uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQucmVhc29uOm51bGx9Z2V0IGludmFsaWRFeHBsYW5hdGlvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uOm51bGx9ZXF1YWxzKGUpe2lmKCF0aGlzLmlzVmFsaWR8fCFlLmlzVmFsaWR8fCF0aGlzLmxvYy5lcXVhbHMoZS5sb2MpKXJldHVybiExO2Z1bmN0aW9uIG4ocixzKXtyZXR1cm4gcj09PXZvaWQgMHx8cj09PTA/cz09PXZvaWQgMHx8cz09PTA6cj09PXN9Zm9yKGNvbnN0IHIgb2YgbWUpaWYoIW4odGhpcy52YWx1ZXNbcl0sZS52YWx1ZXNbcl0pKXJldHVybiExO3JldHVybiEwfX1jb25zdCBDZT0iSW52YWxpZCBJbnRlcnZhbCI7ZnVuY3Rpb24gbWwodCxlKXtyZXR1cm4hdHx8IXQuaXNWYWxpZD9rLmludmFsaWQoIm1pc3Npbmcgb3IgaW52YWxpZCBzdGFydCIpOiFlfHwhZS5pc1ZhbGlkP2suaW52YWxpZCgibWlzc2luZyBvciBpbnZhbGlkIGVuZCIpOmU8dD9rLmludmFsaWQoImVuZCBiZWZvcmUgc3RhcnQiLGBUaGUgZW5kIG9mIGFuIGludGVydmFsIG11c3QgYmUgYWZ0ZXIgaXRzIHN0YXJ0LCBidXQgeW91IGhhZCBzdGFydD0ke3QudG9JU08oKX0gYW5kIGVuZD0ke2UudG9JU08oKX1gKTpudWxsfWNsYXNzIGt7Y29uc3RydWN0b3IoZSl7dGhpcy5zPWUuc3RhcnQsdGhpcy5lPWUuZW5kLHRoaXMuaW52YWxpZD1lLmludmFsaWR8fG51bGwsdGhpcy5pc0x1eG9uSW50ZXJ2YWw9ITB9c3RhdGljIGludmFsaWQoZSxuPW51bGwpe2lmKCFlKXRocm93IG5ldyBEKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIEludGVydmFsIGlzIGludmFsaWQiKTtjb25zdCByPWUgaW5zdGFuY2VvZiAkP2U6bmV3ICQoZSxuKTtpZihiLnRocm93T25JbnZhbGlkKXRocm93IG5ldyAkbyhyKTtyZXR1cm4gbmV3IGsoe2ludmFsaWQ6cn0pfXN0YXRpYyBmcm9tRGF0ZVRpbWVzKGUsbil7Y29uc3Qgcj1qZShlKSxzPWplKG4pLGk9bWwocixzKTtyZXR1cm4gaT8/bmV3IGsoe3N0YXJ0OnIsZW5kOnN9KX1zdGF0aWMgYWZ0ZXIoZSxuKXtjb25zdCByPXYuZnJvbUR1cmF0aW9uTGlrZShuKSxzPWplKGUpO3JldHVybiBrLmZyb21EYXRlVGltZXMocyxzLnBsdXMocikpfXN0YXRpYyBiZWZvcmUoZSxuKXtjb25zdCByPXYuZnJvbUR1cmF0aW9uTGlrZShuKSxzPWplKGUpO3JldHVybiBrLmZyb21EYXRlVGltZXMocy5taW51cyhyKSxzKX1zdGF0aWMgZnJvbUlTTyhlLG4pe2NvbnN0W3Isc109KGV8fCIiKS5zcGxpdCgiLyIsMik7aWYociYmcyl7bGV0IGksYTt0cnl7aT1nLmZyb21JU08ocixuKSxhPWkuaXNWYWxpZH1jYXRjaHthPSExfWxldCBvLHU7dHJ5e289Zy5mcm9tSVNPKHMsbiksdT1vLmlzVmFsaWR9Y2F0Y2h7dT0hMX1pZihhJiZ1KXJldHVybiBrLmZyb21EYXRlVGltZXMoaSxvKTtpZihhKXtjb25zdCBsPXYuZnJvbUlTTyhzLG4pO2lmKGwuaXNWYWxpZClyZXR1cm4gay5hZnRlcihpLGwpfWVsc2UgaWYodSl7Y29uc3QgbD12LmZyb21JU08ocixuKTtpZihsLmlzVmFsaWQpcmV0dXJuIGsuYmVmb3JlKG8sbCl9fXJldHVybiBrLmludmFsaWQoInVucGFyc2FibGUiLGB0aGUgaW5wdXQgIiR7ZX0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApfXN0YXRpYyBpc0ludGVydmFsKGUpe3JldHVybiBlJiZlLmlzTHV4b25JbnRlcnZhbHx8ITF9Z2V0IHN0YXJ0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM6bnVsbH1nZXQgZW5kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmU6bnVsbH1nZXQgaXNWYWxpZCgpe3JldHVybiB0aGlzLmludmFsaWRSZWFzb249PT1udWxsfWdldCBpbnZhbGlkUmVhc29uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQucmVhc29uOm51bGx9Z2V0IGludmFsaWRFeHBsYW5hdGlvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uOm51bGx9bGVuZ3RoKGU9Im1pbGxpc2Vjb25kcyIpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50b0R1cmF0aW9uKGUpLmdldChlKTpOYU59Y291bnQoZT0ibWlsbGlzZWNvbmRzIixuKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiBOYU47Y29uc3Qgcj10aGlzLnN0YXJ0LnN0YXJ0T2YoZSxuKTtsZXQgcztyZXR1cm4gbiE9bnVsbCYmbi51c2VMb2NhbGVXZWVrcz9zPXRoaXMuZW5kLnJlY29uZmlndXJlKHtsb2NhbGU6ci5sb2NhbGV9KTpzPXRoaXMuZW5kLHM9cy5zdGFydE9mKGUsbiksTWF0aC5mbG9vcihzLmRpZmYocixlKS5nZXQoZSkpKyhzLnZhbHVlT2YoKSE9PXRoaXMuZW5kLnZhbHVlT2YoKSl9aGFzU2FtZShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuaXNFbXB0eSgpfHx0aGlzLmUubWludXMoMSkuaGFzU2FtZSh0aGlzLnMsZSk6ITF9aXNFbXB0eSgpe3JldHVybiB0aGlzLnMudmFsdWVPZigpPT09dGhpcy5lLnZhbHVlT2YoKX1pc0FmdGVyKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zPmU6ITF9aXNCZWZvcmUoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmU8PWU6ITF9Y29udGFpbnMoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM8PWUmJnRoaXMuZT5lOiExfXNldCh7c3RhcnQ6ZSxlbmQ6bn09e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/ay5mcm9tRGF0ZVRpbWVzKGV8fHRoaXMucyxufHx0aGlzLmUpOnRoaXN9c3BsaXRBdCguLi5lKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybltdO2NvbnN0IG49ZS5tYXAoamUpLmZpbHRlcihhPT50aGlzLmNvbnRhaW5zKGEpKS5zb3J0KChhLG8pPT5hLnRvTWlsbGlzKCktby50b01pbGxpcygpKSxyPVtdO2xldHtzfT10aGlzLGk9MDtmb3IoO3M8dGhpcy5lOyl7Y29uc3QgYT1uW2ldfHx0aGlzLmUsbz0rYT4rdGhpcy5lP3RoaXMuZTphO3IucHVzaChrLmZyb21EYXRlVGltZXMocyxvKSkscz1vLGkrPTF9cmV0dXJuIHJ9c3BsaXRCeShlKXtjb25zdCBuPXYuZnJvbUR1cmF0aW9uTGlrZShlKTtpZighdGhpcy5pc1ZhbGlkfHwhbi5pc1ZhbGlkfHxuLmFzKCJtaWxsaXNlY29uZHMiKT09PTApcmV0dXJuW107bGV0e3M6cn09dGhpcyxzPTEsaTtjb25zdCBhPVtdO2Zvcig7cjx0aGlzLmU7KXtjb25zdCBvPXRoaXMuc3RhcnQucGx1cyhuLm1hcFVuaXRzKHU9PnUqcykpO2k9K28+K3RoaXMuZT90aGlzLmU6byxhLnB1c2goay5mcm9tRGF0ZVRpbWVzKHIsaSkpLHI9aSxzKz0xfXJldHVybiBhfWRpdmlkZUVxdWFsbHkoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnNwbGl0QnkodGhpcy5sZW5ndGgoKS9lKS5zbGljZSgwLGUpOltdfW92ZXJsYXBzKGUpe3JldHVybiB0aGlzLmU+ZS5zJiZ0aGlzLnM8ZS5lfWFidXRzU3RhcnQoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rdGhpcy5lPT0rZS5zOiExfWFidXRzRW5kKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/K2UuZT09K3RoaXMuczohMX1lbmd1bGZzKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zPD1lLnMmJnRoaXMuZT49ZS5lOiExfWVxdWFscyhlKXtyZXR1cm4hdGhpcy5pc1ZhbGlkfHwhZS5pc1ZhbGlkPyExOnRoaXMucy5lcXVhbHMoZS5zKSYmdGhpcy5lLmVxdWFscyhlLmUpfWludGVyc2VjdGlvbihlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49dGhpcy5zPmUucz90aGlzLnM6ZS5zLHI9dGhpcy5lPGUuZT90aGlzLmU6ZS5lO3JldHVybiBuPj1yP251bGw6ay5mcm9tRGF0ZVRpbWVzKG4scil9dW5pb24oZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPXRoaXMuczxlLnM/dGhpcy5zOmUucyxyPXRoaXMuZT5lLmU/dGhpcy5lOmUuZTtyZXR1cm4gay5mcm9tRGF0ZVRpbWVzKG4scil9c3RhdGljIG1lcmdlKGUpe2NvbnN0W24scl09ZS5zb3J0KChzLGkpPT5zLnMtaS5zKS5yZWR1Y2UoKFtzLGldLGEpPT5pP2kub3ZlcmxhcHMoYSl8fGkuYWJ1dHNTdGFydChhKT9bcyxpLnVuaW9uKGEpXTpbcy5jb25jYXQoW2ldKSxhXTpbcyxhXSxbW10sbnVsbF0pO3JldHVybiByJiZuLnB1c2gociksbn1zdGF0aWMgeG9yKGUpe2xldCBuPW51bGwscj0wO2NvbnN0IHM9W10saT1lLm1hcCh1PT5be3RpbWU6dS5zLHR5cGU6InMifSx7dGltZTp1LmUsdHlwZToiZSJ9XSksYT1BcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmkpLG89YS5zb3J0KCh1LGwpPT51LnRpbWUtbC50aW1lKTtmb3IoY29uc3QgdSBvZiBvKXIrPXUudHlwZT09PSJzIj8xOi0xLHI9PT0xP249dS50aW1lOihuJiYrbiE9K3UudGltZSYmcy5wdXNoKGsuZnJvbURhdGVUaW1lcyhuLHUudGltZSkpLG49bnVsbCk7cmV0dXJuIGsubWVyZ2Uocyl9ZGlmZmVyZW5jZSguLi5lKXtyZXR1cm4gay54b3IoW3RoaXNdLmNvbmNhdChlKSkubWFwKG49PnRoaXMuaW50ZXJzZWN0aW9uKG4pKS5maWx0ZXIobj0+biYmIW4uaXNFbXB0eSgpKX10b1N0cmluZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/YFske3RoaXMucy50b0lTTygpfSDigJMgJHt0aGlzLmUudG9JU08oKX0pYDpDZX1bU3ltYm9sLmZvcigibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20iKV0oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2BJbnRlcnZhbCB7IHN0YXJ0OiAke3RoaXMucy50b0lTTygpfSwgZW5kOiAke3RoaXMuZS50b0lTTygpfSB9YDpgSW50ZXJ2YWwgeyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YH10b0xvY2FsZVN0cmluZyhlPWl0LG49e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5zLmxvYy5jbG9uZShuKSxlKS5mb3JtYXRJbnRlcnZhbCh0aGlzKTpDZX10b0lTTyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0lTTyhlKX0vJHt0aGlzLmUudG9JU08oZSl9YDpDZX10b0lTT0RhdGUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0lTT0RhdGUoKX0vJHt0aGlzLmUudG9JU09EYXRlKCl9YDpDZX10b0lTT1RpbWUoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gJHt0aGlzLnMudG9JU09UaW1lKGUpfS8ke3RoaXMuZS50b0lTT1RpbWUoZSl9YDpDZX10b0Zvcm1hdChlLHtzZXBhcmF0b3I6bj0iIOKAkyAifT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gJHt0aGlzLnMudG9Gb3JtYXQoZSl9JHtufSR7dGhpcy5lLnRvRm9ybWF0KGUpfWA6Q2V9dG9EdXJhdGlvbihlLG4pe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5lLmRpZmYodGhpcy5zLGUsbik6di5pbnZhbGlkKHRoaXMuaW52YWxpZFJlYXNvbil9bWFwRW5kcG9pbnRzKGUpe3JldHVybiBrLmZyb21EYXRlVGltZXMoZSh0aGlzLnMpLGUodGhpcy5lKSl9fWNsYXNzIHB0e3N0YXRpYyBoYXNEU1QoZT1iLmRlZmF1bHRab25lKXtjb25zdCBuPWcubm93KCkuc2V0Wm9uZShlKS5zZXQoe21vbnRoOjEyfSk7cmV0dXJuIWUuaXNVbml2ZXJzYWwmJm4ub2Zmc2V0IT09bi5zZXQoe21vbnRoOjZ9KS5vZmZzZXR9c3RhdGljIGlzVmFsaWRJQU5BWm9uZShlKXtyZXR1cm4gSi5pc1ZhbGlkWm9uZShlKX1zdGF0aWMgbm9ybWFsaXplWm9uZShlKXtyZXR1cm4gc2UoZSxiLmRlZmF1bHRab25lKX1zdGF0aWMgZ2V0U3RhcnRPZldlZWsoe2xvY2FsZTplPW51bGwsbG9jT2JqOm49bnVsbH09e30pe3JldHVybihufHxULmNyZWF0ZShlKSkuZ2V0U3RhcnRPZldlZWsoKX1zdGF0aWMgZ2V0TWluaW11bURheXNJbkZpcnN0V2Vlayh7bG9jYWxlOmU9bnVsbCxsb2NPYmo6bj1udWxsfT17fSl7cmV0dXJuKG58fFQuY3JlYXRlKGUpKS5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKX1zdGF0aWMgZ2V0V2Vla2VuZFdlZWtkYXlzKHtsb2NhbGU6ZT1udWxsLGxvY09iajpuPW51bGx9PXt9KXtyZXR1cm4obnx8VC5jcmVhdGUoZSkpLmdldFdlZWtlbmREYXlzKCkuc2xpY2UoKX1zdGF0aWMgbW9udGhzKGU9ImxvbmciLHtsb2NhbGU6bj1udWxsLG51bWJlcmluZ1N5c3RlbTpyPW51bGwsbG9jT2JqOnM9bnVsbCxvdXRwdXRDYWxlbmRhcjppPSJncmVnb3J5In09e30pe3JldHVybihzfHxULmNyZWF0ZShuLHIsaSkpLm1vbnRocyhlKX1zdGF0aWMgbW9udGhzRm9ybWF0KGU9ImxvbmciLHtsb2NhbGU6bj1udWxsLG51bWJlcmluZ1N5c3RlbTpyPW51bGwsbG9jT2JqOnM9bnVsbCxvdXRwdXRDYWxlbmRhcjppPSJncmVnb3J5In09e30pe3JldHVybihzfHxULmNyZWF0ZShuLHIsaSkpLm1vbnRocyhlLCEwKX1zdGF0aWMgd2Vla2RheXMoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsfT17fSl7cmV0dXJuKHN8fFQuY3JlYXRlKG4scixudWxsKSkud2Vla2RheXMoZSl9c3RhdGljIHdlZWtkYXlzRm9ybWF0KGU9ImxvbmciLHtsb2NhbGU6bj1udWxsLG51bWJlcmluZ1N5c3RlbTpyPW51bGwsbG9jT2JqOnM9bnVsbH09e30pe3JldHVybihzfHxULmNyZWF0ZShuLHIsbnVsbCkpLndlZWtkYXlzKGUsITApfXN0YXRpYyBtZXJpZGllbXMoe2xvY2FsZTplPW51bGx9PXt9KXtyZXR1cm4gVC5jcmVhdGUoZSkubWVyaWRpZW1zKCl9c3RhdGljIGVyYXMoZT0ic2hvcnQiLHtsb2NhbGU6bj1udWxsfT17fSl7cmV0dXJuIFQuY3JlYXRlKG4sbnVsbCwiZ3JlZ29yeSIpLmVyYXMoZSl9c3RhdGljIGZlYXR1cmVzKCl7cmV0dXJue3JlbGF0aXZlOkFyKCksbG9jYWxlV2VlazpWcigpfX19ZnVuY3Rpb24gc3ModCxlKXtjb25zdCBuPXM9PnMudG9VVEMoMCx7a2VlcExvY2FsVGltZTohMH0pLnN0YXJ0T2YoImRheSIpLnZhbHVlT2YoKSxyPW4oZSktbih0KTtyZXR1cm4gTWF0aC5mbG9vcih2LmZyb21NaWxsaXMocikuYXMoImRheXMiKSl9ZnVuY3Rpb24geWwodCxlLG4pe2NvbnN0IHI9W1sieWVhcnMiLCh1LGwpPT5sLnllYXItdS55ZWFyXSxbInF1YXJ0ZXJzIiwodSxsKT0+bC5xdWFydGVyLXUucXVhcnRlcisobC55ZWFyLXUueWVhcikqNF0sWyJtb250aHMiLCh1LGwpPT5sLm1vbnRoLXUubW9udGgrKGwueWVhci11LnllYXIpKjEyXSxbIndlZWtzIiwodSxsKT0+e2NvbnN0IGM9c3ModSxsKTtyZXR1cm4oYy1jJTcpLzd9XSxbImRheXMiLHNzXV0scz17fSxpPXQ7bGV0IGEsbztmb3IoY29uc3RbdSxsXW9mIHIpbi5pbmRleE9mKHUpPj0wJiYoYT11LHNbdV09bCh0LGUpLG89aS5wbHVzKHMpLG8+ZT8oc1t1XS0tLHQ9aS5wbHVzKHMpLHQ+ZSYmKG89dCxzW3VdLS0sdD1pLnBsdXMocykpKTp0PW8pO3JldHVyblt0LHMsbyxhXX1mdW5jdGlvbiBnbCh0LGUsbixyKXtsZXRbcyxpLGEsb109eWwodCxlLG4pO2NvbnN0IHU9ZS1zLGw9bi5maWx0ZXIoZD0+WyJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIl0uaW5kZXhPZihkKT49MCk7bC5sZW5ndGg9PT0wJiYoYTxlJiYoYT1zLnBsdXMoe1tvXToxfSkpLGEhPT1zJiYoaVtvXT0oaVtvXXx8MCkrdS8oYS1zKSkpO2NvbnN0IGM9di5mcm9tT2JqZWN0KGkscik7cmV0dXJuIGwubGVuZ3RoPjA/di5mcm9tTWlsbGlzKHUscikuc2hpZnRUbyguLi5sKS5wbHVzKGMpOmN9Y29uc3Qgcm49e2FyYWI6IlvZoC3ZqV0iLGFyYWJleHQ6IlvbsC3buV0iLGJhbGk6IlvhrZAt4a2ZXSIsYmVuZzoiW+Cnpi3gp69dIixkZXZhOiJb4KWmLeClr10iLGZ1bGx3aWRlOiJb77yQLe+8mV0iLGd1anI6Ilvgq6Yt4KuvXSIsaGFuaWRlYzoiW+OAh3zkuIB85LqMfOS4iXzlm5t85LqUfOWFrXzkuIN85YWrfOS5nV0iLGtobXI6Ilvhn6At4Z+pXSIsa25kYToiW+Czpi3gs69dIixsYW9vOiJb4LuQLeC7mV0iLGxpbWI6IlvhpYYt4aWPXSIsbWx5bToiW+C1pi3gta9dIixtb25nOiJb4aCQLeGgmV0iLG15bXI6IlvhgYAt4YGJXSIsb3J5YToiW+Ctpi3gra9dIix0YW1sZGVjOiJb4K+mLeCvr10iLHRlbHU6IlvgsaYt4LGvXSIsdGhhaToiW+C5kC3guZldIix0aWJ0OiJb4LygLeC8qV0iLGxhdG46IlxcZCJ9LGlzPXthcmFiOlsxNjMyLDE2NDFdLGFyYWJleHQ6WzE3NzYsMTc4NV0sYmFsaTpbNjk5Miw3MDAxXSxiZW5nOlsyNTM0LDI1NDNdLGRldmE6WzI0MDYsMjQxNV0sZnVsbHdpZGU6WzY1Mjk2LDY1MzAzXSxndWpyOlsyNzkwLDI3OTldLGtobXI6WzYxMTIsNjEyMV0sa25kYTpbMzMwMiwzMzExXSxsYW9vOlszNzkyLDM4MDFdLGxpbWI6WzY0NzAsNjQ3OV0sbWx5bTpbMzQzMCwzNDM5XSxtb25nOls2MTYwLDYxNjldLG15bXI6WzQxNjAsNDE2OV0sb3J5YTpbMjkxOCwyOTI3XSx0YW1sZGVjOlszMDQ2LDMwNTVdLHRlbHU6WzMxNzQsMzE4M10sdGhhaTpbMzY2NCwzNjczXSx0aWJ0OlszODcyLDM4ODFdfSxwbD1ybi5oYW5pZGVjLnJlcGxhY2UoL1tcW3xcXV0vZywiIikuc3BsaXQoIiIpO2Z1bmN0aW9uIHdsKHQpe2xldCBlPXBhcnNlSW50KHQsMTApO2lmKGlzTmFOKGUpKXtlPSIiO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCByPXQuY2hhckNvZGVBdChuKTtpZih0W25dLnNlYXJjaChybi5oYW5pZGVjKSE9PS0xKWUrPXBsLmluZGV4T2YodFtuXSk7ZWxzZSBmb3IoY29uc3QgcyBpbiBpcyl7Y29uc3RbaSxhXT1pc1tzXTtyPj1pJiZyPD1hJiYoZSs9ci1pKX19cmV0dXJuIHBhcnNlSW50KGUsMTApfWVsc2UgcmV0dXJuIGV9ZnVuY3Rpb24gWih7bnVtYmVyaW5nU3lzdGVtOnR9LGU9IiIpe3JldHVybiBuZXcgUmVnRXhwKGAke3JuW3R8fCJsYXRuIl19JHtlfWApfWNvbnN0IHZsPSJtaXNzaW5nIEludGwuRGF0ZVRpbWVGb3JtYXQuZm9ybWF0VG9QYXJ0cyBzdXBwb3J0IjtmdW5jdGlvbiBPKHQsZT1uPT5uKXtyZXR1cm57cmVnZXg6dCxkZXNlcjooW25dKT0+ZSh3bChuKSl9fWNvbnN0IGFzPSJbIMKgXSIsb3M9bmV3IFJlZ0V4cChhcywiZyIpO2Z1bmN0aW9uIE9sKHQpe3JldHVybiB0LnJlcGxhY2UoL1wuL2csIlxcLj8iKS5yZXBsYWNlKG9zLGFzKX1mdW5jdGlvbiB1cyh0KXtyZXR1cm4gdC5yZXBsYWNlKC9cLi9nLCIiKS5yZXBsYWNlKG9zLCIgIikudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBSKHQsZSl7cmV0dXJuIHQ9PT1udWxsP251bGw6e3JlZ2V4OlJlZ0V4cCh0Lm1hcChPbCkuam9pbigifCIpKSxkZXNlcjooW25dKT0+dC5maW5kSW5kZXgocj0+dXMobik9PT11cyhyKSkrZX19ZnVuY3Rpb24gbHModCxlKXtyZXR1cm57cmVnZXg6dCxkZXNlcjooWyxuLHJdKT0+bXQobixyKSxncm91cHM6ZX19ZnVuY3Rpb24gd3QodCl7cmV0dXJue3JlZ2V4OnQsZGVzZXI6KFtlXSk9PmV9fWZ1bmN0aW9uIFRsKHQpe3JldHVybiB0LnJlcGxhY2UoL1tcLVxbXF17fSgpKis/LixcXFxeJHwjXHNdL2csIlxcJCYiKX1mdW5jdGlvbiBTbCh0LGUpe2NvbnN0IG49WihlKSxyPVooZSwiezJ9Iikscz1aKGUsInszfSIpLGk9WihlLCJ7NH0iKSxhPVooZSwiezZ9Iiksbz1aKGUsInsxLDJ9IiksdT1aKGUsInsxLDN9IiksbD1aKGUsInsxLDZ9IiksYz1aKGUsInsxLDl9IiksZD1aKGUsInsyLDR9IikscD1aKGUsIns0LDZ9IiksaD1NPT4oe3JlZ2V4OlJlZ0V4cChUbChNLnZhbCkpLGRlc2VyOihbal0pPT5qLGxpdGVyYWw6ITB9KSxVPShNPT57aWYodC5saXRlcmFsKXJldHVybiBoKE0pO3N3aXRjaChNLnZhbCl7Y2FzZSJHIjpyZXR1cm4gUihlLmVyYXMoInNob3J0IiksMCk7Y2FzZSJHRyI6cmV0dXJuIFIoZS5lcmFzKCJsb25nIiksMCk7Y2FzZSJ5IjpyZXR1cm4gTyhsKTtjYXNlInl5IjpyZXR1cm4gTyhkLFh0KTtjYXNlInl5eXkiOnJldHVybiBPKGkpO2Nhc2UieXl5eXkiOnJldHVybiBPKHApO2Nhc2UieXl5eXl5IjpyZXR1cm4gTyhhKTtjYXNlIk0iOnJldHVybiBPKG8pO2Nhc2UiTU0iOnJldHVybiBPKHIpO2Nhc2UiTU1NIjpyZXR1cm4gUihlLm1vbnRocygic2hvcnQiLCEwKSwxKTtjYXNlIk1NTU0iOnJldHVybiBSKGUubW9udGhzKCJsb25nIiwhMCksMSk7Y2FzZSJMIjpyZXR1cm4gTyhvKTtjYXNlIkxMIjpyZXR1cm4gTyhyKTtjYXNlIkxMTCI6cmV0dXJuIFIoZS5tb250aHMoInNob3J0IiwhMSksMSk7Y2FzZSJMTExMIjpyZXR1cm4gUihlLm1vbnRocygibG9uZyIsITEpLDEpO2Nhc2UiZCI6cmV0dXJuIE8obyk7Y2FzZSJkZCI6cmV0dXJuIE8ocik7Y2FzZSJvIjpyZXR1cm4gTyh1KTtjYXNlIm9vbyI6cmV0dXJuIE8ocyk7Y2FzZSJISCI6cmV0dXJuIE8ocik7Y2FzZSJIIjpyZXR1cm4gTyhvKTtjYXNlImhoIjpyZXR1cm4gTyhyKTtjYXNlImgiOnJldHVybiBPKG8pO2Nhc2UibW0iOnJldHVybiBPKHIpO2Nhc2UibSI6cmV0dXJuIE8obyk7Y2FzZSJxIjpyZXR1cm4gTyhvKTtjYXNlInFxIjpyZXR1cm4gTyhyKTtjYXNlInMiOnJldHVybiBPKG8pO2Nhc2Uic3MiOnJldHVybiBPKHIpO2Nhc2UiUyI6cmV0dXJuIE8odSk7Y2FzZSJTU1MiOnJldHVybiBPKHMpO2Nhc2UidSI6cmV0dXJuIHd0KGMpO2Nhc2UidXUiOnJldHVybiB3dChvKTtjYXNlInV1dSI6cmV0dXJuIE8obik7Y2FzZSJhIjpyZXR1cm4gUihlLm1lcmlkaWVtcygpLDApO2Nhc2Uia2trayI6cmV0dXJuIE8oaSk7Y2FzZSJrayI6cmV0dXJuIE8oZCxYdCk7Y2FzZSJXIjpyZXR1cm4gTyhvKTtjYXNlIldXIjpyZXR1cm4gTyhyKTtjYXNlIkUiOmNhc2UiYyI6cmV0dXJuIE8obik7Y2FzZSJFRUUiOnJldHVybiBSKGUud2Vla2RheXMoInNob3J0IiwhMSksMSk7Y2FzZSJFRUVFIjpyZXR1cm4gUihlLndlZWtkYXlzKCJsb25nIiwhMSksMSk7Y2FzZSJjY2MiOnJldHVybiBSKGUud2Vla2RheXMoInNob3J0IiwhMCksMSk7Y2FzZSJjY2NjIjpyZXR1cm4gUihlLndlZWtkYXlzKCJsb25nIiwhMCksMSk7Y2FzZSJaIjpjYXNlIlpaIjpyZXR1cm4gbHMobmV3IFJlZ0V4cChgKFsrLV0ke28uc291cmNlfSkoPzo6KCR7ci5zb3VyY2V9KSk/YCksMik7Y2FzZSJaWloiOnJldHVybiBscyhuZXcgUmVnRXhwKGAoWystXSR7by5zb3VyY2V9KSgke3Iuc291cmNlfSk/YCksMik7Y2FzZSJ6IjpyZXR1cm4gd3QoL1thLXpfKy0vXXsxLDI1Nn0/L2kpO2Nhc2UiICI6cmV0dXJuIHd0KC9bXlxTXG5ccl0vKTtkZWZhdWx0OnJldHVybiBoKE0pfX0pKHQpfHx7aW52YWxpZFJlYXNvbjp2bH07cmV0dXJuIFUudG9rZW49dCxVfWNvbnN0IGtsPXt5ZWFyOnsiMi1kaWdpdCI6Inl5IixudW1lcmljOiJ5eXl5eSJ9LG1vbnRoOntudW1lcmljOiJNIiwiMi1kaWdpdCI6Ik1NIixzaG9ydDoiTU1NIixsb25nOiJNTU1NIn0sZGF5OntudW1lcmljOiJkIiwiMi1kaWdpdCI6ImRkIn0sd2Vla2RheTp7c2hvcnQ6IkVFRSIsbG9uZzoiRUVFRSJ9LGRheXBlcmlvZDoiYSIsZGF5UGVyaW9kOiJhIixob3VyMTI6e251bWVyaWM6ImgiLCIyLWRpZ2l0IjoiaGgifSxob3VyMjQ6e251bWVyaWM6IkgiLCIyLWRpZ2l0IjoiSEgifSxtaW51dGU6e251bWVyaWM6Im0iLCIyLWRpZ2l0IjoibW0ifSxzZWNvbmQ6e251bWVyaWM6InMiLCIyLWRpZ2l0Ijoic3MifSx0aW1lWm9uZU5hbWU6e2xvbmc6IlpaWlpaIixzaG9ydDoiWlpaIn19O2Z1bmN0aW9uIGJsKHQsZSxuKXtjb25zdHt0eXBlOnIsdmFsdWU6c309dDtpZihyPT09ImxpdGVyYWwiKXtjb25zdCB1PS9eXHMrJC8udGVzdChzKTtyZXR1cm57bGl0ZXJhbDohdSx2YWw6dT8iICI6c319Y29uc3QgaT1lW3JdO2xldCBhPXI7cj09PSJob3VyIiYmKGUuaG91cjEyIT1udWxsP2E9ZS5ob3VyMTI/ImhvdXIxMiI6ImhvdXIyNCI6ZS5ob3VyQ3ljbGUhPW51bGw/ZS5ob3VyQ3ljbGU9PT0iaDExInx8ZS5ob3VyQ3ljbGU9PT0iaDEyIj9hPSJob3VyMTIiOmE9ImhvdXIyNCI6YT1uLmhvdXIxMj8iaG91cjEyIjoiaG91cjI0Iik7bGV0IG89a2xbYV07aWYodHlwZW9mIG89PSJvYmplY3QiJiYobz1vW2ldKSxvKXJldHVybntsaXRlcmFsOiExLHZhbDpvfX1mdW5jdGlvbiBJbCh0KXtyZXR1cm5bYF4ke3QubWFwKG49Pm4ucmVnZXgpLnJlZHVjZSgobixyKT0+YCR7bn0oJHtyLnNvdXJjZX0pYCwiIil9JGAsdF19ZnVuY3Rpb24gRWwodCxlLG4pe2NvbnN0IHI9dC5tYXRjaChlKTtpZihyKXtjb25zdCBzPXt9O2xldCBpPTE7Zm9yKGNvbnN0IGEgaW4gbilpZihrZShuLGEpKXtjb25zdCBvPW5bYV0sdT1vLmdyb3Vwcz9vLmdyb3VwcysxOjE7IW8ubGl0ZXJhbCYmby50b2tlbiYmKHNbby50b2tlbi52YWxbMF1dPW8uZGVzZXIoci5zbGljZShpLGkrdSkpKSxpKz11fXJldHVybltyLHNdfWVsc2UgcmV0dXJuW3Ise31dfWZ1bmN0aW9uIE5sKHQpe2NvbnN0IGU9aT0+e3N3aXRjaChpKXtjYXNlIlMiOnJldHVybiJtaWxsaXNlY29uZCI7Y2FzZSJzIjpyZXR1cm4ic2Vjb25kIjtjYXNlIm0iOnJldHVybiJtaW51dGUiO2Nhc2UiaCI6Y2FzZSJIIjpyZXR1cm4iaG91ciI7Y2FzZSJkIjpyZXR1cm4iZGF5IjtjYXNlIm8iOnJldHVybiJvcmRpbmFsIjtjYXNlIkwiOmNhc2UiTSI6cmV0dXJuIm1vbnRoIjtjYXNlInkiOnJldHVybiJ5ZWFyIjtjYXNlIkUiOmNhc2UiYyI6cmV0dXJuIndlZWtkYXkiO2Nhc2UiVyI6cmV0dXJuIndlZWtOdW1iZXIiO2Nhc2UiayI6cmV0dXJuIndlZWtZZWFyIjtjYXNlInEiOnJldHVybiJxdWFydGVyIjtkZWZhdWx0OnJldHVybiBudWxsfX07bGV0IG49bnVsbCxyO3JldHVybiB5KHQueil8fChuPUouY3JlYXRlKHQueikpLHkodC5aKXx8KG58fChuPW5ldyB4KHQuWikpLHI9dC5aKSx5KHQucSl8fCh0Lk09KHQucS0xKSozKzEpLHkodC5oKXx8KHQuaDwxMiYmdC5hPT09MT90LmgrPTEyOnQuaD09PTEyJiZ0LmE9PT0wJiYodC5oPTApKSx0Lkc9PT0wJiZ0LnkmJih0Lnk9LXQueSkseSh0LnUpfHwodC5TPVF0KHQudSkpLFtPYmplY3Qua2V5cyh0KS5yZWR1Y2UoKGksYSk9Pntjb25zdCBvPWUoYSk7cmV0dXJuIG8mJihpW29dPXRbYV0pLGl9LHt9KSxuLHJdfWxldCBzbj1udWxsO2Z1bmN0aW9uIE1sKCl7cmV0dXJuIHNufHwoc249Zy5mcm9tTWlsbGlzKDE1NTU1NTU1NTU1NTUpKSxzbn1mdW5jdGlvbiB4bCh0LGUpe2lmKHQubGl0ZXJhbClyZXR1cm4gdDtjb25zdCBuPU4ubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0LnZhbCkscj1kcyhuLGUpO3JldHVybiByPT1udWxsfHxyLmluY2x1ZGVzKHZvaWQgMCk/dDpyfWZ1bmN0aW9uIGNzKHQsZSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4udC5tYXAobj0+eGwobixlKSkpfWZ1bmN0aW9uIGZzKHQsZSxuKXtjb25zdCByPWNzKE4ucGFyc2VGb3JtYXQobiksdCkscz1yLm1hcChhPT5TbChhLHQpKSxpPXMuZmluZChhPT5hLmludmFsaWRSZWFzb24pO2lmKGkpcmV0dXJue2lucHV0OmUsdG9rZW5zOnIsaW52YWxpZFJlYXNvbjppLmludmFsaWRSZWFzb259O3tjb25zdFthLG9dPUlsKHMpLHU9UmVnRXhwKGEsImkiKSxbbCxjXT1FbChlLHUsbyksW2QscCxoXT1jP05sKGMpOltudWxsLG51bGwsdm9pZCAwXTtpZihrZShjLCJhIikmJmtlKGMsIkgiKSl0aHJvdyBuZXcgU2UoIkNhbid0IGluY2x1ZGUgbWVyaWRpZW0gd2hlbiBzcGVjaWZ5aW5nIDI0LWhvdXIgZm9ybWF0Iik7cmV0dXJue2lucHV0OmUsdG9rZW5zOnIscmVnZXg6dSxyYXdNYXRjaGVzOmwsbWF0Y2hlczpjLHJlc3VsdDpkLHpvbmU6cCxzcGVjaWZpY09mZnNldDpofX19ZnVuY3Rpb24gRGwodCxlLG4pe2NvbnN0e3Jlc3VsdDpyLHpvbmU6cyxzcGVjaWZpY09mZnNldDppLGludmFsaWRSZWFzb246YX09ZnModCxlLG4pO3JldHVybltyLHMsaSxhXX1mdW5jdGlvbiBkcyh0LGUpe2lmKCF0KXJldHVybiBudWxsO2NvbnN0IHI9Ti5jcmVhdGUoZSx0KS5kdEZvcm1hdHRlcihNbCgpKSxzPXIuZm9ybWF0VG9QYXJ0cygpLGk9ci5yZXNvbHZlZE9wdGlvbnMoKTtyZXR1cm4gcy5tYXAoYT0+YmwoYSx0LGkpKX1jb25zdCBhbj0iSW52YWxpZCBEYXRlVGltZSIsaHM9ODY0ZTEzO2Z1bmN0aW9uIHZ0KHQpe3JldHVybiBuZXcgJCgidW5zdXBwb3J0ZWQgem9uZSIsYHRoZSB6b25lICIke3QubmFtZX0iIGlzIG5vdCBzdXBwb3J0ZWRgKX1mdW5jdGlvbiBvbih0KXtyZXR1cm4gdC53ZWVrRGF0YT09PW51bGwmJih0LndlZWtEYXRhPWN0KHQuYykpLHQud2Vla0RhdGF9ZnVuY3Rpb24gdW4odCl7cmV0dXJuIHQubG9jYWxXZWVrRGF0YT09PW51bGwmJih0LmxvY2FsV2Vla0RhdGE9Y3QodC5jLHQubG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLHQubG9jLmdldFN0YXJ0T2ZXZWVrKCkpKSx0LmxvY2FsV2Vla0RhdGF9ZnVuY3Rpb24geWUodCxlKXtjb25zdCBuPXt0czp0LnRzLHpvbmU6dC56b25lLGM6dC5jLG86dC5vLGxvYzp0LmxvYyxpbnZhbGlkOnQuaW52YWxpZH07cmV0dXJuIG5ldyBnKHsuLi5uLC4uLmUsb2xkOm59KX1mdW5jdGlvbiBtcyh0LGUsbil7bGV0IHI9dC1lKjYwKjFlMztjb25zdCBzPW4ub2Zmc2V0KHIpO2lmKGU9PT1zKXJldHVybltyLGVdO3ItPShzLWUpKjYwKjFlMztjb25zdCBpPW4ub2Zmc2V0KHIpO3JldHVybiBzPT09aT9bcixzXTpbdC1NYXRoLm1pbihzLGkpKjYwKjFlMyxNYXRoLm1heChzLGkpXX1mdW5jdGlvbiBPdCh0LGUpe3QrPWUqNjAqMWUzO2NvbnN0IG49bmV3IERhdGUodCk7cmV0dXJue3llYXI6bi5nZXRVVENGdWxsWWVhcigpLG1vbnRoOm4uZ2V0VVRDTW9udGgoKSsxLGRheTpuLmdldFVUQ0RhdGUoKSxob3VyOm4uZ2V0VVRDSG91cnMoKSxtaW51dGU6bi5nZXRVVENNaW51dGVzKCksc2Vjb25kOm4uZ2V0VVRDU2Vjb25kcygpLG1pbGxpc2Vjb25kOm4uZ2V0VVRDTWlsbGlzZWNvbmRzKCl9fWZ1bmN0aW9uIFR0KHQsZSxuKXtyZXR1cm4gbXMoaHQodCksZSxuKX1mdW5jdGlvbiB5cyh0LGUpe2NvbnN0IG49dC5vLHI9dC5jLnllYXIrTWF0aC50cnVuYyhlLnllYXJzKSxzPXQuYy5tb250aCtNYXRoLnRydW5jKGUubW9udGhzKStNYXRoLnRydW5jKGUucXVhcnRlcnMpKjMsaT17Li4udC5jLHllYXI6cixtb250aDpzLGRheTpNYXRoLm1pbih0LmMuZGF5LGR0KHIscykpK01hdGgudHJ1bmMoZS5kYXlzKStNYXRoLnRydW5jKGUud2Vla3MpKjd9LGE9di5mcm9tT2JqZWN0KHt5ZWFyczplLnllYXJzLU1hdGgudHJ1bmMoZS55ZWFycykscXVhcnRlcnM6ZS5xdWFydGVycy1NYXRoLnRydW5jKGUucXVhcnRlcnMpLG1vbnRoczplLm1vbnRocy1NYXRoLnRydW5jKGUubW9udGhzKSx3ZWVrczplLndlZWtzLU1hdGgudHJ1bmMoZS53ZWVrcyksZGF5czplLmRheXMtTWF0aC50cnVuYyhlLmRheXMpLGhvdXJzOmUuaG91cnMsbWludXRlczplLm1pbnV0ZXMsc2Vjb25kczplLnNlY29uZHMsbWlsbGlzZWNvbmRzOmUubWlsbGlzZWNvbmRzfSkuYXMoIm1pbGxpc2Vjb25kcyIpLG89aHQoaSk7bGV0W3UsbF09bXMobyxuLHQuem9uZSk7cmV0dXJuIGEhPT0wJiYodSs9YSxsPXQuem9uZS5vZmZzZXQodSkpLHt0czp1LG86bH19ZnVuY3Rpb24gcWUodCxlLG4scixzLGkpe2NvbnN0e3NldFpvbmU6YSx6b25lOm99PW47aWYodCYmT2JqZWN0LmtleXModCkubGVuZ3RoIT09MHx8ZSl7Y29uc3QgdT1lfHxvLGw9Zy5mcm9tT2JqZWN0KHQsey4uLm4sem9uZTp1LHNwZWNpZmljT2Zmc2V0Oml9KTtyZXR1cm4gYT9sOmwuc2V0Wm9uZShvKX1lbHNlIHJldHVybiBnLmludmFsaWQobmV3ICQoInVucGFyc2FibGUiLGB0aGUgaW5wdXQgIiR7c30iIGNhbid0IGJlIHBhcnNlZCBhcyAke3J9YCkpfWZ1bmN0aW9uIFN0KHQsZSxuPSEwKXtyZXR1cm4gdC5pc1ZhbGlkP04uY3JlYXRlKFQuY3JlYXRlKCJlbi1VUyIpLHthbGxvd1o6bixmb3JjZVNpbXBsZTohMH0pLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0LGUpOm51bGx9ZnVuY3Rpb24gbG4odCxlKXtjb25zdCBuPXQuYy55ZWFyPjk5OTl8fHQuYy55ZWFyPDA7bGV0IHI9IiI7cmV0dXJuIG4mJnQuYy55ZWFyPj0wJiYocis9IisiKSxyKz1JKHQuYy55ZWFyLG4/Njo0KSxlPyhyKz0iLSIscis9SSh0LmMubW9udGgpLHIrPSItIixyKz1JKHQuYy5kYXkpKToocis9SSh0LmMubW9udGgpLHIrPUkodC5jLmRheSkpLHJ9ZnVuY3Rpb24gZ3ModCxlLG4scixzLGkpe2xldCBhPUkodC5jLmhvdXIpO3JldHVybiBlPyhhKz0iOiIsYSs9SSh0LmMubWludXRlKSwodC5jLm1pbGxpc2Vjb25kIT09MHx8dC5jLnNlY29uZCE9PTB8fCFuKSYmKGErPSI6IikpOmErPUkodC5jLm1pbnV0ZSksKHQuYy5taWxsaXNlY29uZCE9PTB8fHQuYy5zZWNvbmQhPT0wfHwhbikmJihhKz1JKHQuYy5zZWNvbmQpLCh0LmMubWlsbGlzZWNvbmQhPT0wfHwhcikmJihhKz0iLiIsYSs9SSh0LmMubWlsbGlzZWNvbmQsMykpKSxzJiYodC5pc09mZnNldEZpeGVkJiZ0Lm9mZnNldD09PTAmJiFpP2ErPSJaIjp0Lm88MD8oYSs9Ii0iLGErPUkoTWF0aC50cnVuYygtdC5vLzYwKSksYSs9IjoiLGErPUkoTWF0aC50cnVuYygtdC5vJTYwKSkpOihhKz0iKyIsYSs9SShNYXRoLnRydW5jKHQuby82MCkpLGErPSI6IixhKz1JKE1hdGgudHJ1bmModC5vJTYwKSkpKSxpJiYoYSs9IlsiK3Quem9uZS5pYW5hTmFtZSsiXSIpLGF9Y29uc3QgcHM9e21vbnRoOjEsZGF5OjEsaG91cjowLG1pbnV0ZTowLHNlY29uZDowLG1pbGxpc2Vjb25kOjB9LENsPXt3ZWVrTnVtYmVyOjEsd2Vla2RheToxLGhvdXI6MCxtaW51dGU6MCxzZWNvbmQ6MCxtaWxsaXNlY29uZDowfSxGbD17b3JkaW5hbDoxLGhvdXI6MCxtaW51dGU6MCxzZWNvbmQ6MCxtaWxsaXNlY29uZDowfSx3cz1bInllYXIiLCJtb250aCIsImRheSIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdLEFsPVsid2Vla1llYXIiLCJ3ZWVrTnVtYmVyIiwid2Vla2RheSIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdLFZsPVsieWVhciIsIm9yZGluYWwiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwibWlsbGlzZWNvbmQiXTtmdW5jdGlvbiBXbCh0KXtjb25zdCBlPXt5ZWFyOiJ5ZWFyIix5ZWFyczoieWVhciIsbW9udGg6Im1vbnRoIixtb250aHM6Im1vbnRoIixkYXk6ImRheSIsZGF5czoiZGF5Iixob3VyOiJob3VyIixob3VyczoiaG91ciIsbWludXRlOiJtaW51dGUiLG1pbnV0ZXM6Im1pbnV0ZSIscXVhcnRlcjoicXVhcnRlciIscXVhcnRlcnM6InF1YXJ0ZXIiLHNlY29uZDoic2Vjb25kIixzZWNvbmRzOiJzZWNvbmQiLG1pbGxpc2Vjb25kOiJtaWxsaXNlY29uZCIsbWlsbGlzZWNvbmRzOiJtaWxsaXNlY29uZCIsd2Vla2RheToid2Vla2RheSIsd2Vla2RheXM6IndlZWtkYXkiLHdlZWtudW1iZXI6IndlZWtOdW1iZXIiLHdlZWtzbnVtYmVyOiJ3ZWVrTnVtYmVyIix3ZWVrbnVtYmVyczoid2Vla051bWJlciIsd2Vla3llYXI6IndlZWtZZWFyIix3ZWVreWVhcnM6IndlZWtZZWFyIixvcmRpbmFsOiJvcmRpbmFsIn1bdC50b0xvd2VyQ2FzZSgpXTtpZighZSl0aHJvdyBuZXcgR24odCk7cmV0dXJuIGV9ZnVuY3Rpb24gdnModCl7c3dpdGNoKHQudG9Mb3dlckNhc2UoKSl7Y2FzZSJsb2NhbHdlZWtkYXkiOmNhc2UibG9jYWx3ZWVrZGF5cyI6cmV0dXJuImxvY2FsV2Vla2RheSI7Y2FzZSJsb2NhbHdlZWtudW1iZXIiOmNhc2UibG9jYWx3ZWVrbnVtYmVycyI6cmV0dXJuImxvY2FsV2Vla051bWJlciI7Y2FzZSJsb2NhbHdlZWt5ZWFyIjpjYXNlImxvY2Fsd2Vla3llYXJzIjpyZXR1cm4ibG9jYWxXZWVrWWVhciI7ZGVmYXVsdDpyZXR1cm4gV2wodCl9fWZ1bmN0aW9uIE9zKHQsZSl7Y29uc3Qgbj1zZShlLnpvbmUsYi5kZWZhdWx0Wm9uZSkscj1ULmZyb21PYmplY3QoZSkscz1iLm5vdygpO2xldCBpLGE7aWYoeSh0LnllYXIpKWk9cztlbHNle2Zvcihjb25zdCBsIG9mIHdzKXkodFtsXSkmJih0W2xdPXBzW2xdKTtjb25zdCBvPUNyKHQpfHxGcih0KTtpZihvKXJldHVybiBnLmludmFsaWQobyk7Y29uc3QgdT1uLm9mZnNldChzKTtbaSxhXT1UdCh0LHUsbil9cmV0dXJuIG5ldyBnKHt0czppLHpvbmU6bixsb2M6cixvOmF9KX1mdW5jdGlvbiBUcyh0LGUsbil7Y29uc3Qgcj15KG4ucm91bmQpPyEwOm4ucm91bmQscz0oYSxvKT0+KGE9S3QoYSxyfHxuLmNhbGVuZGFyeT8wOjIsITApLGUubG9jLmNsb25lKG4pLnJlbEZvcm1hdHRlcihuKS5mb3JtYXQoYSxvKSksaT1hPT5uLmNhbGVuZGFyeT9lLmhhc1NhbWUodCxhKT8wOmUuc3RhcnRPZihhKS5kaWZmKHQuc3RhcnRPZihhKSxhKS5nZXQoYSk6ZS5kaWZmKHQsYSkuZ2V0KGEpO2lmKG4udW5pdClyZXR1cm4gcyhpKG4udW5pdCksbi51bml0KTtmb3IoY29uc3QgYSBvZiBuLnVuaXRzKXtjb25zdCBvPWkoYSk7aWYoTWF0aC5hYnMobyk+PTEpcmV0dXJuIHMobyxhKX1yZXR1cm4gcyh0PmU/LTA6MCxuLnVuaXRzW24udW5pdHMubGVuZ3RoLTFdKX1mdW5jdGlvbiBTcyh0KXtsZXQgZT17fSxuO3JldHVybiB0Lmxlbmd0aD4wJiZ0eXBlb2YgdFt0Lmxlbmd0aC0xXT09Im9iamVjdCI/KGU9dFt0Lmxlbmd0aC0xXSxuPUFycmF5LmZyb20odCkuc2xpY2UoMCx0Lmxlbmd0aC0xKSk6bj1BcnJheS5mcm9tKHQpLFtlLG5dfWNsYXNzIGd7Y29uc3RydWN0b3IoZSl7Y29uc3Qgbj1lLnpvbmV8fGIuZGVmYXVsdFpvbmU7bGV0IHI9ZS5pbnZhbGlkfHwoTnVtYmVyLmlzTmFOKGUudHMpP25ldyAkKCJpbnZhbGlkIGlucHV0Iik6bnVsbCl8fChuLmlzVmFsaWQ/bnVsbDp2dChuKSk7dGhpcy50cz15KGUudHMpP2Iubm93KCk6ZS50cztsZXQgcz1udWxsLGk9bnVsbDtpZighcilpZihlLm9sZCYmZS5vbGQudHM9PT10aGlzLnRzJiZlLm9sZC56b25lLmVxdWFscyhuKSlbcyxpXT1bZS5vbGQuYyxlLm9sZC5vXTtlbHNle2NvbnN0IG89bi5vZmZzZXQodGhpcy50cyk7cz1PdCh0aGlzLnRzLG8pLHI9TnVtYmVyLmlzTmFOKHMueWVhcik/bmV3ICQoImludmFsaWQgaW5wdXQiKTpudWxsLHM9cj9udWxsOnMsaT1yP251bGw6b310aGlzLl96b25lPW4sdGhpcy5sb2M9ZS5sb2N8fFQuY3JlYXRlKCksdGhpcy5pbnZhbGlkPXIsdGhpcy53ZWVrRGF0YT1udWxsLHRoaXMubG9jYWxXZWVrRGF0YT1udWxsLHRoaXMuYz1zLHRoaXMubz1pLHRoaXMuaXNMdXhvbkRhdGVUaW1lPSEwfXN0YXRpYyBub3coKXtyZXR1cm4gbmV3IGcoe30pfXN0YXRpYyBsb2NhbCgpe2NvbnN0W2Usbl09U3MoYXJndW1lbnRzKSxbcixzLGksYSxvLHUsbF09bjtyZXR1cm4gT3Moe3llYXI6cixtb250aDpzLGRheTppLGhvdXI6YSxtaW51dGU6byxzZWNvbmQ6dSxtaWxsaXNlY29uZDpsfSxlKX1zdGF0aWMgdXRjKCl7Y29uc3RbZSxuXT1Tcyhhcmd1bWVudHMpLFtyLHMsaSxhLG8sdSxsXT1uO3JldHVybiBlLnpvbmU9eC51dGNJbnN0YW5jZSxPcyh7eWVhcjpyLG1vbnRoOnMsZGF5OmksaG91cjphLG1pbnV0ZTpvLHNlY29uZDp1LG1pbGxpc2Vjb25kOmx9LGUpfXN0YXRpYyBmcm9tSlNEYXRlKGUsbj17fSl7Y29uc3Qgcj1mdShlKT9lLnZhbHVlT2YoKTpOYU47aWYoTnVtYmVyLmlzTmFOKHIpKXJldHVybiBnLmludmFsaWQoImludmFsaWQgaW5wdXQiKTtjb25zdCBzPXNlKG4uem9uZSxiLmRlZmF1bHRab25lKTtyZXR1cm4gcy5pc1ZhbGlkP25ldyBnKHt0czpyLHpvbmU6cyxsb2M6VC5mcm9tT2JqZWN0KG4pfSk6Zy5pbnZhbGlkKHZ0KHMpKX1zdGF0aWMgZnJvbU1pbGxpcyhlLG49e30pe2lmKGRlKGUpKXJldHVybiBlPC1oc3x8ZT5ocz9nLmludmFsaWQoIlRpbWVzdGFtcCBvdXQgb2YgcmFuZ2UiKTpuZXcgZyh7dHM6ZSx6b25lOnNlKG4uem9uZSxiLmRlZmF1bHRab25lKSxsb2M6VC5mcm9tT2JqZWN0KG4pfSk7dGhyb3cgbmV3IEQoYGZyb21NaWxsaXMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXQsIGJ1dCByZWNlaXZlZCBhICR7dHlwZW9mIGV9IHdpdGggdmFsdWUgJHtlfWApfXN0YXRpYyBmcm9tU2Vjb25kcyhlLG49e30pe2lmKGRlKGUpKXJldHVybiBuZXcgZyh7dHM6ZSoxZTMsem9uZTpzZShuLnpvbmUsYi5kZWZhdWx0Wm9uZSksbG9jOlQuZnJvbU9iamVjdChuKX0pO3Rocm93IG5ldyBEKCJmcm9tU2Vjb25kcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCIpfXN0YXRpYyBmcm9tT2JqZWN0KGUsbj17fSl7ZT1lfHx7fTtjb25zdCByPXNlKG4uem9uZSxiLmRlZmF1bHRab25lKTtpZighci5pc1ZhbGlkKXJldHVybiBnLmludmFsaWQodnQocikpO2NvbnN0IHM9VC5mcm9tT2JqZWN0KG4pLGk9eXQoZSx2cykse21pbkRheXNJbkZpcnN0V2VlazphLHN0YXJ0T2ZXZWVrOm99PURyKGkscyksdT1iLm5vdygpLGw9eShuLnNwZWNpZmljT2Zmc2V0KT9yLm9mZnNldCh1KTpuLnNwZWNpZmljT2Zmc2V0LGM9IXkoaS5vcmRpbmFsKSxkPSF5KGkueWVhcikscD0heShpLm1vbnRoKXx8IXkoaS5kYXkpLGg9ZHx8cCxTPWkud2Vla1llYXJ8fGkud2Vla051bWJlcjtpZigoaHx8YykmJlMpdGhyb3cgbmV3IFNlKCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzIik7aWYocCYmYyl0aHJvdyBuZXcgU2UoIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5Iik7Y29uc3QgVT1TfHxpLndlZWtkYXkmJiFoO2xldCBNLGosQj1PdCh1LGwpO1U/KE09QWwsaj1DbCxCPWN0KEIsYSxvKSk6Yz8oTT1WbCxqPUZsLEI9SnQoQikpOihNPXdzLGo9cHMpO2xldCBGZT0hMTtmb3IoY29uc3QgSyBvZiBNKXtjb25zdCBidD1pW0tdO3koYnQpP0ZlP2lbS109altLXTppW0tdPUJbS106RmU9ITB9Y29uc3Qga3Q9VT91dShpLGEsbyk6Yz9sdShpKTpDcihpKSxIPWt0fHxGcihpKTtpZihIKXJldHVybiBnLmludmFsaWQoSCk7Y29uc3QgZ2U9VT9NcihpLGEsbyk6Yz94cihpKTppLFtwZSxvZV09VHQoZ2UsbCxyKSxRPW5ldyBnKHt0czpwZSx6b25lOnIsbzpvZSxsb2M6c30pO3JldHVybiBpLndlZWtkYXkmJmgmJmUud2Vla2RheSE9PVEud2Vla2RheT9nLmludmFsaWQoIm1pc21hdGNoZWQgd2Vla2RheSIsYHlvdSBjYW4ndCBzcGVjaWZ5IGJvdGggYSB3ZWVrZGF5IG9mICR7aS53ZWVrZGF5fSBhbmQgYSBkYXRlIG9mICR7US50b0lTTygpfWApOlF9c3RhdGljIGZyb21JU08oZSxuPXt9KXtjb25zdFtyLHNdPWVsKGUpO3JldHVybiBxZShyLHMsbiwiSVNPIDg2MDEiLGUpfXN0YXRpYyBmcm9tUkZDMjgyMihlLG49e30pe2NvbnN0W3Isc109dGwoZSk7cmV0dXJuIHFlKHIscyxuLCJSRkMgMjgyMiIsZSl9c3RhdGljIGZyb21IVFRQKGUsbj17fSl7Y29uc3RbcixzXT1ubChlKTtyZXR1cm4gcWUocixzLG4sIkhUVFAiLG4pfXN0YXRpYyBmcm9tRm9ybWF0KGUsbixyPXt9KXtpZih5KGUpfHx5KG4pKXRocm93IG5ldyBEKCJmcm9tRm9ybWF0IHJlcXVpcmVzIGFuIGlucHV0IHN0cmluZyBhbmQgYSBmb3JtYXQiKTtjb25zdHtsb2NhbGU6cz1udWxsLG51bWJlcmluZ1N5c3RlbTppPW51bGx9PXIsYT1ULmZyb21PcHRzKHtsb2NhbGU6cyxudW1iZXJpbmdTeXN0ZW06aSxkZWZhdWx0VG9FTjohMH0pLFtvLHUsbCxjXT1EbChhLGUsbik7cmV0dXJuIGM/Zy5pbnZhbGlkKGMpOnFlKG8sdSxyLGBmb3JtYXQgJHtufWAsZSxsKX1zdGF0aWMgZnJvbVN0cmluZyhlLG4scj17fSl7cmV0dXJuIGcuZnJvbUZvcm1hdChlLG4scil9c3RhdGljIGZyb21TUUwoZSxuPXt9KXtjb25zdFtyLHNdPWxsKGUpO3JldHVybiBxZShyLHMsbiwiU1FMIixlKX1zdGF0aWMgaW52YWxpZChlLG49bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEQoIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRGF0ZVRpbWUgaXMgaW52YWxpZCIpO2NvbnN0IHI9ZSBpbnN0YW5jZW9mICQ/ZTpuZXcgJChlLG4pO2lmKGIudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IHpvKHIpO3JldHVybiBuZXcgZyh7aW52YWxpZDpyfSl9c3RhdGljIGlzRGF0ZVRpbWUoZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkRhdGVUaW1lfHwhMX1zdGF0aWMgcGFyc2VGb3JtYXRGb3JPcHRzKGUsbj17fSl7Y29uc3Qgcj1kcyhlLFQuZnJvbU9iamVjdChuKSk7cmV0dXJuIHI/ci5tYXAocz0+cz9zLnZhbDpudWxsKS5qb2luKCIiKTpudWxsfXN0YXRpYyBleHBhbmRGb3JtYXQoZSxuPXt9KXtyZXR1cm4gY3MoTi5wYXJzZUZvcm1hdChlKSxULmZyb21PYmplY3QobikpLm1hcChzPT5zLnZhbCkuam9pbigiIil9Z2V0KGUpe3JldHVybiB0aGlzW2VdfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMuaW52YWxpZD09PW51bGx9Z2V0IGludmFsaWRSZWFzb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH1nZXQgaW52YWxpZEV4cGxhbmF0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH1nZXQgbG9jYWxlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5sb2NhbGU6bnVsbH1nZXQgbnVtYmVyaW5nU3lzdGVtKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW06bnVsbH1nZXQgb3V0cHV0Q2FsZW5kYXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLm91dHB1dENhbGVuZGFyOm51bGx9Z2V0IHpvbmUoKXtyZXR1cm4gdGhpcy5fem9uZX1nZXQgem9uZU5hbWUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuem9uZS5uYW1lOm51bGx9Z2V0IHllYXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy55ZWFyOk5hTn1nZXQgcXVhcnRlcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/TWF0aC5jZWlsKHRoaXMuYy5tb250aC8zKTpOYU59Z2V0IG1vbnRoKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubW9udGg6TmFOfWdldCBkYXkoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5kYXk6TmFOfWdldCBob3VyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMuaG91cjpOYU59Z2V0IG1pbnV0ZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLm1pbnV0ZTpOYU59Z2V0IHNlY29uZCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLnNlY29uZDpOYU59Z2V0IG1pbGxpc2Vjb25kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubWlsbGlzZWNvbmQ6TmFOfWdldCB3ZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/b24odGhpcykud2Vla1llYXI6TmFOfWdldCB3ZWVrTnVtYmVyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9vbih0aGlzKS53ZWVrTnVtYmVyOk5hTn1nZXQgd2Vla2RheSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/b24odGhpcykud2Vla2RheTpOYU59Z2V0IGlzV2Vla2VuZCgpe3JldHVybiB0aGlzLmlzVmFsaWQmJnRoaXMubG9jLmdldFdlZWtlbmREYXlzKCkuaW5jbHVkZXModGhpcy53ZWVrZGF5KX1nZXQgbG9jYWxXZWVrZGF5KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD91bih0aGlzKS53ZWVrZGF5Ok5hTn1nZXQgbG9jYWxXZWVrTnVtYmVyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD91bih0aGlzKS53ZWVrTnVtYmVyOk5hTn1nZXQgbG9jYWxXZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dW4odGhpcykud2Vla1llYXI6TmFOfWdldCBvcmRpbmFsKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9KdCh0aGlzLmMpLm9yZGluYWw6TmFOfWdldCBtb250aFNob3J0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9wdC5tb250aHMoInNob3J0Iix7bG9jT2JqOnRoaXMubG9jfSlbdGhpcy5tb250aC0xXTpudWxsfWdldCBtb250aExvbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3B0Lm1vbnRocygibG9uZyIse2xvY09iajp0aGlzLmxvY30pW3RoaXMubW9udGgtMV06bnVsbH1nZXQgd2Vla2RheVNob3J0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9wdC53ZWVrZGF5cygic2hvcnQiLHtsb2NPYmo6dGhpcy5sb2N9KVt0aGlzLndlZWtkYXktMV06bnVsbH1nZXQgd2Vla2RheUxvbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3B0LndlZWtkYXlzKCJsb25nIix7bG9jT2JqOnRoaXMubG9jfSlbdGhpcy53ZWVrZGF5LTFdOm51bGx9Z2V0IG9mZnNldCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/K3RoaXMubzpOYU59Z2V0IG9mZnNldE5hbWVTaG9ydCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cyx7Zm9ybWF0OiJzaG9ydCIsbG9jYWxlOnRoaXMubG9jYWxlfSk6bnVsbH1nZXQgb2Zmc2V0TmFtZUxvbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMse2Zvcm1hdDoibG9uZyIsbG9jYWxlOnRoaXMubG9jYWxlfSk6bnVsbH1nZXQgaXNPZmZzZXRGaXhlZCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLmlzVW5pdmVyc2FsOm51bGx9Z2V0IGlzSW5EU1QoKXtyZXR1cm4gdGhpcy5pc09mZnNldEZpeGVkPyExOnRoaXMub2Zmc2V0PnRoaXMuc2V0KHttb250aDoxLGRheToxfSkub2Zmc2V0fHx0aGlzLm9mZnNldD50aGlzLnNldCh7bW9udGg6NX0pLm9mZnNldH1nZXRQb3NzaWJsZU9mZnNldHMoKXtpZighdGhpcy5pc1ZhbGlkfHx0aGlzLmlzT2Zmc2V0Rml4ZWQpcmV0dXJuW3RoaXNdO2NvbnN0IGU9ODY0ZTUsbj02ZTQscj1odCh0aGlzLmMpLHM9dGhpcy56b25lLm9mZnNldChyLWUpLGk9dGhpcy56b25lLm9mZnNldChyK2UpLGE9dGhpcy56b25lLm9mZnNldChyLXMqbiksbz10aGlzLnpvbmUub2Zmc2V0KHItaSpuKTtpZihhPT09bylyZXR1cm5bdGhpc107Y29uc3QgdT1yLWEqbixsPXItbypuLGM9T3QodSxhKSxkPU90KGwsbyk7cmV0dXJuIGMuaG91cj09PWQuaG91ciYmYy5taW51dGU9PT1kLm1pbnV0ZSYmYy5zZWNvbmQ9PT1kLnNlY29uZCYmYy5taWxsaXNlY29uZD09PWQubWlsbGlzZWNvbmQ/W3llKHRoaXMse3RzOnV9KSx5ZSh0aGlzLHt0czpsfSldOlt0aGlzXX1nZXQgaXNJbkxlYXBZZWFyKCl7cmV0dXJuICRlKHRoaXMueWVhcil9Z2V0IGRheXNJbk1vbnRoKCl7cmV0dXJuIGR0KHRoaXMueWVhcix0aGlzLm1vbnRoKX1nZXQgZGF5c0luWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/YmUodGhpcy55ZWFyKTpOYU59Z2V0IHdlZWtzSW5XZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/WmUodGhpcy53ZWVrWWVhcik6TmFOfWdldCB3ZWVrc0luTG9jYWxXZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/WmUodGhpcy5sb2NhbFdlZWtZZWFyLHRoaXMubG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLHRoaXMubG9jLmdldFN0YXJ0T2ZXZWVrKCkpOk5hTn1yZXNvbHZlZExvY2FsZU9wdGlvbnMoZT17fSl7Y29uc3R7bG9jYWxlOm4sbnVtYmVyaW5nU3lzdGVtOnIsY2FsZW5kYXI6c309Ti5jcmVhdGUodGhpcy5sb2MuY2xvbmUoZSksZSkucmVzb2x2ZWRPcHRpb25zKHRoaXMpO3JldHVybntsb2NhbGU6bixudW1iZXJpbmdTeXN0ZW06cixvdXRwdXRDYWxlbmRhcjpzfX10b1VUQyhlPTAsbj17fSl7cmV0dXJuIHRoaXMuc2V0Wm9uZSh4Lmluc3RhbmNlKGUpLG4pfXRvTG9jYWwoKXtyZXR1cm4gdGhpcy5zZXRab25lKGIuZGVmYXVsdFpvbmUpfXNldFpvbmUoZSx7a2VlcExvY2FsVGltZTpuPSExLGtlZXBDYWxlbmRhclRpbWU6cj0hMX09e30pe2lmKGU9c2UoZSxiLmRlZmF1bHRab25lKSxlLmVxdWFscyh0aGlzLnpvbmUpKXJldHVybiB0aGlzO2lmKGUuaXNWYWxpZCl7bGV0IHM9dGhpcy50cztpZihufHxyKXtjb25zdCBpPWUub2Zmc2V0KHRoaXMudHMpLGE9dGhpcy50b09iamVjdCgpO1tzXT1UdChhLGksZSl9cmV0dXJuIHllKHRoaXMse3RzOnMsem9uZTplfSl9ZWxzZSByZXR1cm4gZy5pbnZhbGlkKHZ0KGUpKX1yZWNvbmZpZ3VyZSh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sb3V0cHV0Q2FsZW5kYXI6cn09e30pe2NvbnN0IHM9dGhpcy5sb2MuY2xvbmUoe2xvY2FsZTplLG51bWJlcmluZ1N5c3RlbTpuLG91dHB1dENhbGVuZGFyOnJ9KTtyZXR1cm4geWUodGhpcyx7bG9jOnN9KX1zZXRMb2NhbGUoZSl7cmV0dXJuIHRoaXMucmVjb25maWd1cmUoe2xvY2FsZTplfSl9c2V0KGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj15dChlLHZzKSx7bWluRGF5c0luRmlyc3RXZWVrOnIsc3RhcnRPZldlZWs6c309RHIobix0aGlzLmxvYyksaT0heShuLndlZWtZZWFyKXx8IXkobi53ZWVrTnVtYmVyKXx8IXkobi53ZWVrZGF5KSxhPSF5KG4ub3JkaW5hbCksbz0heShuLnllYXIpLHU9IXkobi5tb250aCl8fCF5KG4uZGF5KSxsPW98fHUsYz1uLndlZWtZZWFyfHxuLndlZWtOdW1iZXI7aWYoKGx8fGEpJiZjKXRocm93IG5ldyBTZSgiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFscyIpO2lmKHUmJmEpdGhyb3cgbmV3IFNlKCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheSIpO2xldCBkO2k/ZD1Ncih7Li4uY3QodGhpcy5jLHIscyksLi4ubn0scixzKTp5KG4ub3JkaW5hbCk/KGQ9ey4uLnRoaXMudG9PYmplY3QoKSwuLi5ufSx5KG4uZGF5KSYmKGQuZGF5PU1hdGgubWluKGR0KGQueWVhcixkLm1vbnRoKSxkLmRheSkpKTpkPXhyKHsuLi5KdCh0aGlzLmMpLC4uLm59KTtjb25zdFtwLGhdPVR0KGQsdGhpcy5vLHRoaXMuem9uZSk7cmV0dXJuIHllKHRoaXMse3RzOnAsbzpofSl9cGx1cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49di5mcm9tRHVyYXRpb25MaWtlKGUpO3JldHVybiB5ZSh0aGlzLHlzKHRoaXMsbikpfW1pbnVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj12LmZyb21EdXJhdGlvbkxpa2UoZSkubmVnYXRlKCk7cmV0dXJuIHllKHRoaXMseXModGhpcyxuKSl9c3RhcnRPZihlLHt1c2VMb2NhbGVXZWVrczpuPSExfT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCByPXt9LHM9di5ub3JtYWxpemVVbml0KGUpO3N3aXRjaChzKXtjYXNlInllYXJzIjpyLm1vbnRoPTE7Y2FzZSJxdWFydGVycyI6Y2FzZSJtb250aHMiOnIuZGF5PTE7Y2FzZSJ3ZWVrcyI6Y2FzZSJkYXlzIjpyLmhvdXI9MDtjYXNlImhvdXJzIjpyLm1pbnV0ZT0wO2Nhc2UibWludXRlcyI6ci5zZWNvbmQ9MDtjYXNlInNlY29uZHMiOnIubWlsbGlzZWNvbmQ9MDticmVha31pZihzPT09IndlZWtzIilpZihuKXtjb25zdCBpPXRoaXMubG9jLmdldFN0YXJ0T2ZXZWVrKCkse3dlZWtkYXk6YX09dGhpczthPGkmJihyLndlZWtOdW1iZXI9dGhpcy53ZWVrTnVtYmVyLTEpLHIud2Vla2RheT1pfWVsc2Ugci53ZWVrZGF5PTE7aWYocz09PSJxdWFydGVycyIpe2NvbnN0IGk9TWF0aC5jZWlsKHRoaXMubW9udGgvMyk7ci5tb250aD0oaS0xKSozKzF9cmV0dXJuIHRoaXMuc2V0KHIpfWVuZE9mKGUsbil7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnBsdXMoe1tlXToxfSkuc3RhcnRPZihlLG4pLm1pbnVzKDEpOnRoaXN9dG9Gb3JtYXQoZSxuPXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP04uY3JlYXRlKHRoaXMubG9jLnJlZGVmYXVsdFRvRU4obikpLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0aGlzLGUpOmFufXRvTG9jYWxlU3RyaW5nKGU9aXQsbj17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9OLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShuKSxlKS5mb3JtYXREYXRlVGltZSh0aGlzKTphbn10b0xvY2FsZVBhcnRzKGU9e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5sb2MuY2xvbmUoZSksZSkuZm9ybWF0RGF0ZVRpbWVQYXJ0cyh0aGlzKTpbXX10b0lTTyh7Zm9ybWF0OmU9ImV4dGVuZGVkIixzdXBwcmVzc1NlY29uZHM6bj0hMSxzdXBwcmVzc01pbGxpc2Vjb25kczpyPSExLGluY2x1ZGVPZmZzZXQ6cz0hMCxleHRlbmRlZFpvbmU6aT0hMX09e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7Y29uc3QgYT1lPT09ImV4dGVuZGVkIjtsZXQgbz1sbih0aGlzLGEpO3JldHVybiBvKz0iVCIsbys9Z3ModGhpcyxhLG4scixzLGkpLG99dG9JU09EYXRlKHtmb3JtYXQ6ZT0iZXh0ZW5kZWQifT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9sbih0aGlzLGU9PT0iZXh0ZW5kZWQiKTpudWxsfXRvSVNPV2Vla0RhdGUoKXtyZXR1cm4gU3QodGhpcywia2tray0nVydXVy1jIil9dG9JU09UaW1lKHtzdXBwcmVzc01pbGxpc2Vjb25kczplPSExLHN1cHByZXNzU2Vjb25kczpuPSExLGluY2x1ZGVPZmZzZXQ6cj0hMCxpbmNsdWRlUHJlZml4OnM9ITEsZXh0ZW5kZWRab25lOmk9ITEsZm9ybWF0OmE9ImV4dGVuZGVkIn09e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/KHM/IlQiOiIiKStncyh0aGlzLGE9PT0iZXh0ZW5kZWQiLG4sZSxyLGkpOm51bGx9dG9SRkMyODIyKCl7cmV0dXJuIFN0KHRoaXMsIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgWlpaIiwhMSl9dG9IVFRQKCl7cmV0dXJuIFN0KHRoaXMudG9VVEMoKSwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJyIpfXRvU1FMRGF0ZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/bG4odGhpcywhMCk6bnVsbH10b1NRTFRpbWUoe2luY2x1ZGVPZmZzZXQ6ZT0hMCxpbmNsdWRlWm9uZTpuPSExLGluY2x1ZGVPZmZzZXRTcGFjZTpyPSEwfT17fSl7bGV0IHM9IkhIOm1tOnNzLlNTUyI7cmV0dXJuKG58fGUpJiYociYmKHMrPSIgIiksbj9zKz0ieiI6ZSYmKHMrPSJaWiIpKSxTdCh0aGlzLHMsITApfXRvU1FMKGU9e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/YCR7dGhpcy50b1NRTERhdGUoKX0gJHt0aGlzLnRvU1FMVGltZShlKX1gOm51bGx9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudG9JU08oKTphbn1bU3ltYm9sLmZvcigibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20iKV0oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2BEYXRlVGltZSB7IHRzOiAke3RoaXMudG9JU08oKX0sIHpvbmU6ICR7dGhpcy56b25lLm5hbWV9LCBsb2NhbGU6ICR7dGhpcy5sb2NhbGV9IH1gOmBEYXRlVGltZSB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gfXZhbHVlT2YoKXtyZXR1cm4gdGhpcy50b01pbGxpcygpfXRvTWlsbGlzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnRzOk5hTn10b1NlY29uZHMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudHMvMWUzOk5hTn10b1VuaXhJbnRlZ2VyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9NYXRoLmZsb29yKHRoaXMudHMvMWUzKTpOYU59dG9KU09OKCl7cmV0dXJuIHRoaXMudG9JU08oKX10b0JTT04oKXtyZXR1cm4gdGhpcy50b0pTRGF0ZSgpfXRvT2JqZWN0KGU9e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJue307Y29uc3Qgbj17Li4udGhpcy5jfTtyZXR1cm4gZS5pbmNsdWRlQ29uZmlnJiYobi5vdXRwdXRDYWxlbmRhcj10aGlzLm91dHB1dENhbGVuZGFyLG4ubnVtYmVyaW5nU3lzdGVtPXRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSxuLmxvY2FsZT10aGlzLmxvYy5sb2NhbGUpLG59dG9KU0RhdGUoKXtyZXR1cm4gbmV3IERhdGUodGhpcy5pc1ZhbGlkP3RoaXMudHM6TmFOKX1kaWZmKGUsbj0ibWlsbGlzZWNvbmRzIixyPXt9KXtpZighdGhpcy5pc1ZhbGlkfHwhZS5pc1ZhbGlkKXJldHVybiB2LmludmFsaWQoImNyZWF0ZWQgYnkgZGlmZmluZyBhbiBpbnZhbGlkIERhdGVUaW1lIik7Y29uc3Qgcz17bG9jYWxlOnRoaXMubG9jYWxlLG51bWJlcmluZ1N5c3RlbTp0aGlzLm51bWJlcmluZ1N5c3RlbSwuLi5yfSxpPWR1KG4pLm1hcCh2Lm5vcm1hbGl6ZVVuaXQpLGE9ZS52YWx1ZU9mKCk+dGhpcy52YWx1ZU9mKCksbz1hP3RoaXM6ZSx1PWE/ZTp0aGlzLGw9Z2wobyx1LGkscyk7cmV0dXJuIGE/bC5uZWdhdGUoKTpsfWRpZmZOb3coZT0ibWlsbGlzZWNvbmRzIixuPXt9KXtyZXR1cm4gdGhpcy5kaWZmKGcubm93KCksZSxuKX11bnRpbChlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2suZnJvbURhdGVUaW1lcyh0aGlzLGUpOnRoaXN9aGFzU2FtZShlLG4scil7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4hMTtjb25zdCBzPWUudmFsdWVPZigpLGk9dGhpcy5zZXRab25lKGUuem9uZSx7a2VlcExvY2FsVGltZTohMH0pO3JldHVybiBpLnN0YXJ0T2YobixyKTw9cyYmczw9aS5lbmRPZihuLHIpfWVxdWFscyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkJiZlLmlzVmFsaWQmJnRoaXMudmFsdWVPZigpPT09ZS52YWx1ZU9mKCkmJnRoaXMuem9uZS5lcXVhbHMoZS56b25lKSYmdGhpcy5sb2MuZXF1YWxzKGUubG9jKX10b1JlbGF0aXZlKGU9e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7Y29uc3Qgbj1lLmJhc2V8fGcuZnJvbU9iamVjdCh7fSx7em9uZTp0aGlzLnpvbmV9KSxyPWUucGFkZGluZz90aGlzPG4/LWUucGFkZGluZzplLnBhZGRpbmc6MDtsZXQgcz1bInllYXJzIiwibW9udGhzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiXSxpPWUudW5pdDtyZXR1cm4gQXJyYXkuaXNBcnJheShlLnVuaXQpJiYocz1lLnVuaXQsaT12b2lkIDApLFRzKG4sdGhpcy5wbHVzKHIpLHsuLi5lLG51bWVyaWM6ImFsd2F5cyIsdW5pdHM6cyx1bml0Oml9KX10b1JlbGF0aXZlQ2FsZW5kYXIoZT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9UcyhlLmJhc2V8fGcuZnJvbU9iamVjdCh7fSx7em9uZTp0aGlzLnpvbmV9KSx0aGlzLHsuLi5lLG51bWVyaWM6ImF1dG8iLHVuaXRzOlsieWVhcnMiLCJtb250aHMiLCJkYXlzIl0sY2FsZW5kYXJ5OiEwfSk6bnVsbH1zdGF0aWMgbWluKC4uLmUpe2lmKCFlLmV2ZXJ5KGcuaXNEYXRlVGltZSkpdGhyb3cgbmV3IEQoIm1pbiByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lcyIpO3JldHVybiBXcihlLG49Pm4udmFsdWVPZigpLE1hdGgubWluKX1zdGF0aWMgbWF4KC4uLmUpe2lmKCFlLmV2ZXJ5KGcuaXNEYXRlVGltZSkpdGhyb3cgbmV3IEQoIm1heCByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lcyIpO3JldHVybiBXcihlLG49Pm4udmFsdWVPZigpLE1hdGgubWF4KX1zdGF0aWMgZnJvbUZvcm1hdEV4cGxhaW4oZSxuLHI9e30pe2NvbnN0e2xvY2FsZTpzPW51bGwsbnVtYmVyaW5nU3lzdGVtOmk9bnVsbH09cixhPVQuZnJvbU9wdHMoe2xvY2FsZTpzLG51bWJlcmluZ1N5c3RlbTppLGRlZmF1bHRUb0VOOiEwfSk7cmV0dXJuIGZzKGEsZSxuKX1zdGF0aWMgZnJvbVN0cmluZ0V4cGxhaW4oZSxuLHI9e30pe3JldHVybiBnLmZyb21Gb3JtYXRFeHBsYWluKGUsbixyKX1zdGF0aWMgZ2V0IERBVEVfU0hPUlQoKXtyZXR1cm4gaXR9c3RhdGljIGdldCBEQVRFX01FRCgpe3JldHVybiBKbn1zdGF0aWMgZ2V0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSgpe3JldHVybiBSb31zdGF0aWMgZ2V0IERBVEVfRlVMTCgpe3JldHVybiBCbn1zdGF0aWMgZ2V0IERBVEVfSFVHRSgpe3JldHVybiBRbn1zdGF0aWMgZ2V0IFRJTUVfU0lNUExFKCl7cmV0dXJuIEtufXN0YXRpYyBnZXQgVElNRV9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gWG59c3RhdGljIGdldCBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUKCl7cmV0dXJuIGVyfXN0YXRpYyBnZXQgVElNRV9XSVRIX0xPTkdfT0ZGU0VUKCl7cmV0dXJuIHRyfXN0YXRpYyBnZXQgVElNRV8yNF9TSU1QTEUoKXtyZXR1cm4gbnJ9c3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0VDT05EUygpe3JldHVybiBycn1zdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQoKXtyZXR1cm4gc3J9c3RhdGljIGdldCBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQoKXtyZXR1cm4gaXJ9c3RhdGljIGdldCBEQVRFVElNRV9TSE9SVCgpe3JldHVybiBhcn1zdGF0aWMgZ2V0IERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUygpe3JldHVybiBvcn1zdGF0aWMgZ2V0IERBVEVUSU1FX01FRCgpe3JldHVybiB1cn1zdGF0aWMgZ2V0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gbHJ9c3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZKCl7cmV0dXJuIFVvfXN0YXRpYyBnZXQgREFURVRJTUVfRlVMTCgpe3JldHVybiBjcn1zdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIGZyfXN0YXRpYyBnZXQgREFURVRJTUVfSFVHRSgpe3JldHVybiBkcn1zdGF0aWMgZ2V0IERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIGhyfX1mdW5jdGlvbiBqZSh0KXtpZihnLmlzRGF0ZVRpbWUodCkpcmV0dXJuIHQ7aWYodCYmdC52YWx1ZU9mJiZkZSh0LnZhbHVlT2YoKSkpcmV0dXJuIGcuZnJvbUpTRGF0ZSh0KTtpZih0JiZ0eXBlb2YgdD09Im9iamVjdCIpcmV0dXJuIGcuZnJvbU9iamVjdCh0KTt0aHJvdyBuZXcgRChgVW5rbm93biBkYXRldGltZSBhcmd1bWVudDogJHt0fSwgb2YgdHlwZSAke3R5cGVvZiB0fWApfWZ1bmN0aW9uIExsKHtjb2xsZWN0aW9uczp0LGx3dzplfSx7dGFibGVJZHM6bix0YWJsZUNvbHVtbklkczpyLHJlbGF0aW9uc2hpcElkczpzLGluZGV4SWRzOmksaW5kZXhDb2x1bW5JZHM6YSxtZW1vSWRzOm99KXtBKHQpLmNvbGxlY3Rpb24oInRhYmxlRW50aXRpZXMiKS5yZW1vdmVNYW55KG4pLEEodCkuY29sbGVjdGlvbigidGFibGVDb2x1bW5FbnRpdGllcyIpLnJlbW92ZU1hbnkociksQSh0KS5jb2xsZWN0aW9uKCJyZWxhdGlvbnNoaXBFbnRpdGllcyIpLnJlbW92ZU1hbnkocyksQSh0KS5jb2xsZWN0aW9uKCJpbmRleEVudGl0aWVzIikucmVtb3ZlTWFueShpKSxBKHQpLmNvbGxlY3Rpb24oImluZGV4Q29sdW1uRW50aXRpZXMiKS5yZW1vdmVNYW55KGEpLEEodCkuY29sbGVjdGlvbigibWVtb0VudGl0aWVzIikucmVtb3ZlTWFueShvKSxbLi4ubiwuLi5yLC4uLnMsLi4uaSwuLi5hLC4uLm9dLmZvckVhY2godT0+UmVmbGVjdC5kZWxldGVQcm9wZXJ0eShlLHUpKX1jb25zdCBfbD0zLHpsPV8oWyJ0YWJsZUVudGl0aWVzIiwidGFibGVDb2x1bW5FbnRpdGllcyIsInJlbGF0aW9uc2hpcEVudGl0aWVzIiwiaW5kZXhFbnRpdGllcyIsImluZGV4Q29sdW1uRW50aXRpZXMiLCJtZW1vRW50aXRpZXMiXSk7Y2xhc3MgJGx7YXN5bmMgcnVuKGUpe2NvbnN0IG49SlNPTi5wYXJzZShlKSxyPUNvKG4pLHtkb2M6e3RhYmxlSWRzOnMsbWVtb0lkczppLGluZGV4SWRzOmEscmVsYXRpb25zaGlwSWRzOm99LGNvbGxlY3Rpb25zOnUsbHd3Omx9PXIsYz1fKHMpLGQ9XyhpKSxwPV8oYSksaD1fKG8pLFM9WmwoZy5ub3coKSksVT1BKHUpLmNvbGxlY3Rpb24oInRhYmxlRW50aXRpZXMiKSxNPUEodSkuY29sbGVjdGlvbigidGFibGVDb2x1bW5FbnRpdGllcyIpLGo9QSh1KS5jb2xsZWN0aW9uKCJpbmRleEVudGl0aWVzIiksQj1BKHUpLmNvbGxlY3Rpb24oImluZGV4Q29sdW1uRW50aXRpZXMiKSxGZT1BKHUpLmNvbGxlY3Rpb24oInJlbGF0aW9uc2hpcEVudGl0aWVzIiksa3Q9QSh1KS5jb2xsZWN0aW9uKCJtZW1vRW50aXRpZXMiKSxIPW5ldyBTZXQoVS5zZWxlY3RBbGwoKS5maWx0ZXIoUyhjKSkubWFwKCh7aWQ6bX0pPT5tKSksZ2U9bmV3IFNldCxwZT1uZXcgU2V0KEZlLnNlbGVjdEFsbCgpLmZpbHRlcihTKGgpKS5tYXAoKHtpZDptfSk9Pm0pKSxvZT1uZXcgU2V0KGouc2VsZWN0QWxsKCkuZmlsdGVyKFMocCkpLm1hcCgoe2lkOm19KT0+bSkpLFE9bmV3IFNldCxLPW5ldyBTZXQoa3Quc2VsZWN0QWxsKCkuZmlsdGVyKFMoZCkpLm1hcCgoe2lkOm19KT0+bSkpO00uc2VsZWN0QWxsKCkuZmlsdGVyKCh7dGFibGVJZDptfSk9PkguaGFzKG0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5nZS5hZGQobSkpLEZlLnNlbGVjdEFsbCgpLmZpbHRlcigoe2lkOm0sc3RhcnQ6WSxlbmQ6SGV9KT0+IXBlLmhhcyhtKSYmKEguaGFzKFkudGFibGVJZCl8fEguaGFzKEhlLnRhYmxlSWQpKSkuZm9yRWFjaCgoe2lkOm19KT0+cGUuYWRkKG0pKSxqLnNlbGVjdEFsbCgpLmZpbHRlcigoe2lkOm0sdGFibGVJZDpZfSk9PiFvZS5oYXMobSkmJkguaGFzKFkpKS5mb3JFYWNoKCh7aWQ6bX0pPT5vZS5hZGQobSkpLEIuc2VsZWN0QWxsKCkuZmlsdGVyKCh7aW5kZXhJZDptfSk9Pm9lLmhhcyhtKSkuZm9yRWFjaCgoe2lkOm19KT0+US5hZGQobSkpLExsKHIse3RhYmxlSWRzOlsuLi5IXSx0YWJsZUNvbHVtbklkczpbLi4uZ2VdLHJlbGF0aW9uc2hpcElkczpbLi4ucGVdLGluZGV4SWRzOlsuLi5vZV0saW5kZXhDb2x1bW5JZHM6Wy4uLlFdLG1lbW9JZHM6Wy4uLktdfSk7Y29uc3QgYnQ9XyhVLnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpLFVsPV8oTS5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKSxrcz1fKGouc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksUGw9XyhCLnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpLHFsPV8oRmUuc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksamw9XyhrdC5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKTtyZXR1cm4gTS5zZWxlY3RBbGwoKS5maWx0ZXIoKHt0YWJsZUlkOm0saWQ6WSxtZXRhOkhlfSk9PiFidChtKSYmUygoKT0+ITEpKHtpZDpZLG1ldGE6SGV9KSkuZm9yRWFjaCgoe2lkOm19KT0+Z2UuYWRkKG0pKSxCLnNlbGVjdEFsbCgpLmZpbHRlcigoe2luZGV4SWQ6bSxpZDpZLG1ldGE6SGV9KT0+IWtzKG0pJiZTKCgpPT4hMSkoe2lkOlksbWV0YTpIZX0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5RLmFkZChtKSksT2JqZWN0LmVudHJpZXMobCkuZm9yRWFjaCgoW20sW1ldXSk9PntpZih6bChZKSlzd2l0Y2goWSl7Y2FzZSJ0YWJsZUVudGl0aWVzIjohYnQobSkmJkguYWRkKG0pO2JyZWFrO2Nhc2UidGFibGVDb2x1bW5FbnRpdGllcyI6IVVsKG0pJiZnZS5hZGQobSk7YnJlYWs7Y2FzZSJyZWxhdGlvbnNoaXBFbnRpdGllcyI6IXFsKG0pJiZwZS5hZGQobSk7YnJlYWs7Y2FzZSJpbmRleEVudGl0aWVzIjoha3MobSkmJm9lLmFkZChtKTticmVhaztjYXNlImluZGV4Q29sdW1uRW50aXRpZXMiOiFQbChtKSYmUS5hZGQobSk7YnJlYWs7Y2FzZSJtZW1vRW50aXRpZXMiOiFqbChtKSYmSy5hZGQobSk7YnJlYWt9fSkse3RhYmxlSWRzOlsuLi5IXSx0YWJsZUNvbHVtbklkczpbLi4uZ2VdLHJlbGF0aW9uc2hpcElkczpbLi4ucGVdLGluZGV4SWRzOlsuLi5vZV0saW5kZXhDb2x1bW5JZHM6Wy4uLlFdLG1lbW9JZHM6Wy4uLktdfX19Y29uc3QgWmw9dD0+ZT0+KHtpZDpuLG1ldGE6cn0pPT57aWYoZShuKSlyZXR1cm4hMTtjb25zdCBzPU1hdGguZmxvb3IodC5kaWZmKGcuZnJvbU1pbGxpcyhyLnVwZGF0ZUF0KSwiZGF5cyIpLnRvT2JqZWN0KCkuZGF5cz8/MCk7cmV0dXJuIF9sPHN9LFJsPW5ldyAkbDtzZWxmLm9uY29ubmVjdD10PT57Y29uc3QgZT10LnBvcnRzWzBdO0V0KFJsLGUpfX0pKCk7Cg==";function uB(e){return new SharedWorker("data:application/javascript;base64,"+cB,{name:null==e?void 0:e.name})}const dB="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiOy8qKgogKiBAbGljZW5zZQogKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDCiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wCiAqL2NvbnN0IGNuPVN5bWJvbCgiQ29tbGluay5wcm94eSIpLGJzPVN5bWJvbCgiQ29tbGluay5lbmRwb2ludCIpLElzPVN5bWJvbCgiQ29tbGluay5yZWxlYXNlUHJveHkiKSxJdD1TeW1ib2woIkNvbWxpbmsuZmluYWxpemVyIiksWWU9U3ltYm9sKCJDb21saW5rLnRocm93biIpLGZuPXQ9PnR5cGVvZiB0PT0ib2JqZWN0IiYmdCE9PW51bGx8fHR5cGVvZiB0PT0iZnVuY3Rpb24iLEVzPXtjYW5IYW5kbGU6dD0+Zm4odCkmJnRbY25dLHNlcmlhbGl6ZSh0KXtjb25zdHtwb3J0MTplLHBvcnQyOm59PW5ldyBNZXNzYWdlQ2hhbm5lbDtyZXR1cm4gRXQodCxlKSxbbixbbl1dfSxkZXNlcmlhbGl6ZSh0KXtyZXR1cm4gdC5zdGFydCgpLERzKHQpfX0sTnM9e2NhbkhhbmRsZTp0PT5mbih0KSYmWWUgaW4gdCxzZXJpYWxpemUoe3ZhbHVlOnR9KXtsZXQgZTtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP2U9e2lzRXJyb3I6ITAsdmFsdWU6e21lc3NhZ2U6dC5tZXNzYWdlLG5hbWU6dC5uYW1lLHN0YWNrOnQuc3RhY2t9fTplPXtpc0Vycm9yOiExLHZhbHVlOnR9LFtlLFtdXX0sZGVzZXJpYWxpemUodCl7dGhyb3cgdC5pc0Vycm9yP09iamVjdC5hc3NpZ24obmV3IEVycm9yKHQudmFsdWUubWVzc2FnZSksdC52YWx1ZSk6dC52YWx1ZX19LGRuPW5ldyBNYXAoW1sicHJveHkiLEVzXSxbInRocm93IixOc11dKTtmdW5jdGlvbiBNcyh0LGUpe2Zvcihjb25zdCBuIG9mIHQpaWYoZT09PW58fG49PT0iKiJ8fG4gaW5zdGFuY2VvZiBSZWdFeHAmJm4udGVzdChlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBFdCh0LGU9Z2xvYmFsVGhpcyxuPVsiKiJdKXtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIHIocyl7aWYoIXN8fCFzLmRhdGEpcmV0dXJuO2lmKCFNcyhuLHMub3JpZ2luKSl7Y29uc29sZS53YXJuKGBJbnZhbGlkIG9yaWdpbiAnJHtzLm9yaWdpbn0nIGZvciBjb21saW5rIHByb3h5YCk7cmV0dXJufWNvbnN0e2lkOmksdHlwZTphLHBhdGg6b309T2JqZWN0LmFzc2lnbih7cGF0aDpbXX0scy5kYXRhKSx1PShzLmRhdGEuYXJndW1lbnRMaXN0fHxbXSkubWFwKHVlKTtsZXQgbDt0cnl7Y29uc3QgYz1vLnNsaWNlKDAsLTEpLnJlZHVjZSgocCxoKT0+cFtoXSx0KSxkPW8ucmVkdWNlKChwLGgpPT5wW2hdLHQpO3N3aXRjaChhKXtjYXNlIkdFVCI6bD1kO2JyZWFrO2Nhc2UiU0VUIjpjW28uc2xpY2UoLTEpWzBdXT11ZShzLmRhdGEudmFsdWUpLGw9ITA7YnJlYWs7Y2FzZSJBUFBMWSI6bD1kLmFwcGx5KGMsdSk7YnJlYWs7Y2FzZSJDT05TVFJVQ1QiOntjb25zdCBwPW5ldyBkKC4uLnUpO2w9V3MocCl9YnJlYWs7Y2FzZSJFTkRQT0lOVCI6e2NvbnN0e3BvcnQxOnAscG9ydDI6aH09bmV3IE1lc3NhZ2VDaGFubmVsO0V0KHQsaCksbD1WcyhwLFtwXSl9YnJlYWs7Y2FzZSJSRUxFQVNFIjpsPXZvaWQgMDticmVhaztkZWZhdWx0OnJldHVybn19Y2F0Y2goYyl7bD17dmFsdWU6YyxbWWVdOjB9fVByb21pc2UucmVzb2x2ZShsKS5jYXRjaChjPT4oe3ZhbHVlOmMsW1llXTowfSkpLnRoZW4oYz0+e2NvbnN0W2QscF09UWUoYyk7ZS5wb3N0TWVzc2FnZShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZCkse2lkOml9KSxwKSxhPT09IlJFTEVBU0UiJiYoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixyKSxobihlKSxJdCBpbiB0JiZ0eXBlb2YgdFtJdF09PSJmdW5jdGlvbiImJnRbSXRdKCkpfSkuY2F0Y2goYz0+e2NvbnN0W2QscF09UWUoe3ZhbHVlOm5ldyBUeXBlRXJyb3IoIlVuc2VyaWFsaXphYmxlIHJldHVybiB2YWx1ZSIpLFtZZV06MH0pO2UucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGQpLHtpZDppfSkscCl9KX0pLGUuc3RhcnQmJmUuc3RhcnQoKX1mdW5jdGlvbiB4cyh0KXtyZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lPT09Ik1lc3NhZ2VQb3J0In1mdW5jdGlvbiBobih0KXt4cyh0KSYmdC5jbG9zZSgpfWZ1bmN0aW9uIERzKHQsZSl7cmV0dXJuIE50KHQsW10sZSl9ZnVuY3Rpb24gR2UodCl7aWYodCl0aHJvdyBuZXcgRXJyb3IoIlByb3h5IGhhcyBiZWVuIHJlbGVhc2VkIGFuZCBpcyBub3QgdXNlYWJsZSIpfWZ1bmN0aW9uIG1uKHQpe3JldHVybiB3ZSh0LHt0eXBlOiJSRUxFQVNFIn0pLnRoZW4oKCk9Pntobih0KX0pfWNvbnN0IEplPW5ldyBXZWFrTWFwLEJlPSJGaW5hbGl6YXRpb25SZWdpc3RyeSJpbiBnbG9iYWxUaGlzJiZuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkodD0+e2NvbnN0IGU9KEplLmdldCh0KXx8MCktMTtKZS5zZXQodCxlKSxlPT09MCYmbW4odCl9KTtmdW5jdGlvbiBDcyh0LGUpe2NvbnN0IG49KEplLmdldChlKXx8MCkrMTtKZS5zZXQoZSxuKSxCZSYmQmUucmVnaXN0ZXIodCxlLHQpfWZ1bmN0aW9uIEZzKHQpe0JlJiZCZS51bnJlZ2lzdGVyKHQpfWZ1bmN0aW9uIE50KHQsZT1bXSxuPWZ1bmN0aW9uKCl7fSl7bGV0IHI9ITE7Y29uc3Qgcz1uZXcgUHJveHkobix7Z2V0KGksYSl7aWYoR2UociksYT09PUlzKXJldHVybigpPT57RnMocyksbW4odCkscj0hMH07aWYoYT09PSJ0aGVuIil7aWYoZS5sZW5ndGg9PT0wKXJldHVybnt0aGVuOigpPT5zfTtjb25zdCBvPXdlKHQse3R5cGU6IkdFVCIscGF0aDplLm1hcCh1PT51LnRvU3RyaW5nKCkpfSkudGhlbih1ZSk7cmV0dXJuIG8udGhlbi5iaW5kKG8pfXJldHVybiBOdCh0LFsuLi5lLGFdKX0sc2V0KGksYSxvKXtHZShyKTtjb25zdFt1LGxdPVFlKG8pO3JldHVybiB3ZSh0LHt0eXBlOiJTRVQiLHBhdGg6Wy4uLmUsYV0ubWFwKGM9PmMudG9TdHJpbmcoKSksdmFsdWU6dX0sbCkudGhlbih1ZSl9LGFwcGx5KGksYSxvKXtHZShyKTtjb25zdCB1PWVbZS5sZW5ndGgtMV07aWYodT09PWJzKXJldHVybiB3ZSh0LHt0eXBlOiJFTkRQT0lOVCJ9KS50aGVuKHVlKTtpZih1PT09ImJpbmQiKXJldHVybiBOdCh0LGUuc2xpY2UoMCwtMSkpO2NvbnN0W2wsY109eW4obyk7cmV0dXJuIHdlKHQse3R5cGU6IkFQUExZIixwYXRoOmUubWFwKGQ9PmQudG9TdHJpbmcoKSksYXJndW1lbnRMaXN0Omx9LGMpLnRoZW4odWUpfSxjb25zdHJ1Y3QoaSxhKXtHZShyKTtjb25zdFtvLHVdPXluKGEpO3JldHVybiB3ZSh0LHt0eXBlOiJDT05TVFJVQ1QiLHBhdGg6ZS5tYXAobD0+bC50b1N0cmluZygpKSxhcmd1bWVudExpc3Q6b30sdSkudGhlbih1ZSl9fSk7cmV0dXJuIENzKHMsdCksc31mdW5jdGlvbiBBcyh0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KX1mdW5jdGlvbiB5bih0KXtjb25zdCBlPXQubWFwKFFlKTtyZXR1cm5bZS5tYXAobj0+blswXSksQXMoZS5tYXAobj0+blsxXSkpXX1jb25zdCBnbj1uZXcgV2Vha01hcDtmdW5jdGlvbiBWcyh0LGUpe3JldHVybiBnbi5zZXQodCxlKSx0fWZ1bmN0aW9uIFdzKHQpe3JldHVybiBPYmplY3QuYXNzaWduKHQse1tjbl06ITB9KX1mdW5jdGlvbiBRZSh0KXtmb3IoY29uc3RbZSxuXW9mIGRuKWlmKG4uY2FuSGFuZGxlKHQpKXtjb25zdFtyLHNdPW4uc2VyaWFsaXplKHQpO3JldHVyblt7dHlwZToiSEFORExFUiIsbmFtZTplLHZhbHVlOnJ9LHNdfXJldHVyblt7dHlwZToiUkFXIix2YWx1ZTp0fSxnbi5nZXQodCl8fFtdXX1mdW5jdGlvbiB1ZSh0KXtzd2l0Y2godC50eXBlKXtjYXNlIkhBTkRMRVIiOnJldHVybiBkbi5nZXQodC5uYW1lKS5kZXNlcmlhbGl6ZSh0LnZhbHVlKTtjYXNlIlJBVyI6cmV0dXJuIHQudmFsdWV9fWZ1bmN0aW9uIHdlKHQsZSxuKXtyZXR1cm4gbmV3IFByb21pc2Uocj0+e2NvbnN0IHM9THMoKTt0LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uIGkoYSl7IWEuZGF0YXx8IWEuZGF0YS5pZHx8YS5kYXRhLmlkIT09c3x8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaSkscihhLmRhdGEpKX0pLHQuc3RhcnQmJnQuc3RhcnQoKSx0LnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oe2lkOnN9LGUpLG4pfSl9ZnVuY3Rpb24gTHMoKXtyZXR1cm4gbmV3IEFycmF5KDQpLmZpbGwoMCkubWFwKCgpPT5NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpLnRvU3RyaW5nKDE2KSkuam9pbigiLSIpfS8qIQogKiBAZGluZXVnL2VyZC1lZGl0b3Itc2NoZW1hCiAqIEB2ZXJzaW9uIDAuMS4wIHwgU2F0IEFwciAxMyAyMDI0CiAqIEBhdXRob3IgU2V1bmdId2FuLUxlZSA8ZGluZXVnMkBnbWFpbC5jb20+CiAqIEBsaWNlbnNlIE1JVAogKi92YXIgX3M9dHlwZW9mIGdsb2JhbD09Im9iamVjdCImJmdsb2JhbCYmZ2xvYmFsLk9iamVjdD09PU9iamVjdCYmZ2xvYmFsO2NvbnN0IHpzPV9zO3ZhciAkcz10eXBlb2Ygc2VsZj09Im9iamVjdCImJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLFpzPXpzfHwkc3x8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTtjb25zdCBNdD1aczt2YXIgUnM9TXQuU3ltYm9sO2NvbnN0IFg9UnM7dmFyIHBuPU9iamVjdC5wcm90b3R5cGUsVXM9cG4uaGFzT3duUHJvcGVydHksUHM9cG4udG9TdHJpbmcsQWU9WD9YLnRvU3RyaW5nVGFnOnZvaWQgMDtmdW5jdGlvbiBxcyh0KXt2YXIgZT1Vcy5jYWxsKHQsQWUpLG49dFtBZV07dHJ5e3RbQWVdPXZvaWQgMDt2YXIgcj0hMH1jYXRjaHt9dmFyIHM9UHMuY2FsbCh0KTtyZXR1cm4gciYmKGU/dFtBZV09bjpkZWxldGUgdFtBZV0pLHN9dmFyIGpzPU9iamVjdC5wcm90b3R5cGUsSHM9anMudG9TdHJpbmc7ZnVuY3Rpb24gWXModCl7cmV0dXJuIEhzLmNhbGwodCl9dmFyIEdzPSJbb2JqZWN0IE51bGxdIixKcz0iW29iamVjdCBVbmRlZmluZWRdIix3bj1YP1gudG9TdHJpbmdUYWc6dm9pZCAwO2Z1bmN0aW9uIHh0KHQpe3JldHVybiB0PT1udWxsP3Q9PT12b2lkIDA/SnM6R3M6d24mJnduIGluIE9iamVjdCh0KT9xcyh0KTpZcyh0KX1mdW5jdGlvbiBLZSh0KXtyZXR1cm4gdCE9bnVsbCYmdHlwZW9mIHQ9PSJvYmplY3QifXZhciBCcz0iW29iamVjdCBTeW1ib2xdIjtmdW5jdGlvbiBEdCh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJzeW1ib2wifHxLZSh0KSYmeHQodCk9PUJzfWZ1bmN0aW9uIHZuKHQsZSl7Zm9yKHZhciBuPS0xLHI9dD09bnVsbD8wOnQubGVuZ3RoLHM9QXJyYXkocik7KytuPHI7KXNbbl09ZSh0W25dLG4sdCk7cmV0dXJuIHN9dmFyIFFzPUFycmF5LmlzQXJyYXk7Y29uc3QgVmU9UXM7dmFyIEtzPTEvMCxPbj1YP1gucHJvdG90eXBlOnZvaWQgMCxUbj1Pbj9Pbi50b1N0cmluZzp2b2lkIDA7ZnVuY3Rpb24gU24odCl7aWYodHlwZW9mIHQ9PSJzdHJpbmciKXJldHVybiB0O2lmKFZlKHQpKXJldHVybiB2bih0LFNuKSsiIjtpZihEdCh0KSlyZXR1cm4gVG4/VG4uY2FsbCh0KToiIjt2YXIgZT10KyIiO3JldHVybiBlPT0iMCImJjEvdD09LUtzPyItMCI6ZX1mdW5jdGlvbiBYZSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gdCE9bnVsbCYmKGU9PSJvYmplY3QifHxlPT0iZnVuY3Rpb24iKX1mdW5jdGlvbiBrbih0KXtyZXR1cm4gdH12YXIgWHM9IltvYmplY3QgQXN5bmNGdW5jdGlvbl0iLGVpPSJbb2JqZWN0IEZ1bmN0aW9uXSIsdGk9IltvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dIixuaT0iW29iamVjdCBQcm94eV0iO2Z1bmN0aW9uIGJuKHQpe2lmKCFYZSh0KSlyZXR1cm4hMTt2YXIgZT14dCh0KTtyZXR1cm4gZT09ZWl8fGU9PXRpfHxlPT1Yc3x8ZT09bml9dmFyIHJpPU10WyJfX2NvcmUtanNfc2hhcmVkX18iXTtjb25zdCBDdD1yaTt2YXIgSW49ZnVuY3Rpb24oKXt2YXIgdD0vW14uXSskLy5leGVjKEN0JiZDdC5rZXlzJiZDdC5rZXlzLklFX1BST1RPfHwiIik7cmV0dXJuIHQ/IlN5bWJvbChzcmMpXzEuIit0OiIifSgpO2Z1bmN0aW9uIHNpKHQpe3JldHVybiEhSW4mJkluIGluIHR9dmFyIGlpPUZ1bmN0aW9uLnByb3RvdHlwZSxhaT1paS50b1N0cmluZztmdW5jdGlvbiBvaSh0KXtpZih0IT1udWxsKXt0cnl7cmV0dXJuIGFpLmNhbGwodCl9Y2F0Y2h7fXRyeXtyZXR1cm4gdCsiIn1jYXRjaHt9fXJldHVybiIifXZhciB1aT0vW1xcXiQuKis/KClbXF17fXxdL2csbGk9L15cW29iamVjdCAuKz9Db25zdHJ1Y3RvclxdJC8sY2k9RnVuY3Rpb24ucHJvdG90eXBlLGZpPU9iamVjdC5wcm90b3R5cGUsZGk9Y2kudG9TdHJpbmcsaGk9ZmkuaGFzT3duUHJvcGVydHksbWk9UmVnRXhwKCJeIitkaS5jYWxsKGhpKS5yZXBsYWNlKHVpLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpO2Z1bmN0aW9uIHlpKHQpe2lmKCFYZSh0KXx8c2kodCkpcmV0dXJuITE7dmFyIGU9Ym4odCk/bWk6bGk7cmV0dXJuIGUudGVzdChvaSh0KSl9ZnVuY3Rpb24gZ2kodCxlKXtyZXR1cm4gdD09bnVsbD92b2lkIDA6dFtlXX1mdW5jdGlvbiBGdCh0LGUpe3ZhciBuPWdpKHQsZSk7cmV0dXJuIHlpKG4pP246dm9pZCAwfWZ1bmN0aW9uIHBpKHQsZSxuKXtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdC5jYWxsKGUpO2Nhc2UgMTpyZXR1cm4gdC5jYWxsKGUsblswXSk7Y2FzZSAyOnJldHVybiB0LmNhbGwoZSxuWzBdLG5bMV0pO2Nhc2UgMzpyZXR1cm4gdC5jYWxsKGUsblswXSxuWzFdLG5bMl0pfXJldHVybiB0LmFwcGx5KGUsbil9dmFyIHdpPTgwMCx2aT0xNixPaT1EYXRlLm5vdztmdW5jdGlvbiBUaSh0KXt2YXIgZT0wLG49MDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1PaSgpLHM9dmktKHItbik7aWYobj1yLHM+MCl7aWYoKytlPj13aSlyZXR1cm4gYXJndW1lbnRzWzBdfWVsc2UgZT0wO3JldHVybiB0LmFwcGx5KHZvaWQgMCxhcmd1bWVudHMpfX1mdW5jdGlvbiBTaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdH19dmFyIGtpPWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PUZ0KE9iamVjdCwiZGVmaW5lUHJvcGVydHkiKTtyZXR1cm4gdCh7fSwiIix7fSksdH1jYXRjaHt9fSgpO2NvbnN0IGV0PWtpO3ZhciBiaT1ldD9mdW5jdGlvbih0LGUpe3JldHVybiBldCh0LCJ0b1N0cmluZyIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiExLHZhbHVlOlNpKGUpLHdyaXRhYmxlOiEwfSl9OmtuLElpPVRpKGJpKTtjb25zdCBFbj1JaTtmdW5jdGlvbiBFaSh0LGUsbixyKXtmb3IodmFyIHM9dC5sZW5ndGgsaT1uKyhyPzE6LTEpO3I/aS0tOisraTxzOylpZihlKHRbaV0saSx0KSlyZXR1cm4gaTtyZXR1cm4tMX1mdW5jdGlvbiBOaSh0KXtyZXR1cm4gdCE9PXR9ZnVuY3Rpb24gTWkodCxlLG4pe2Zvcih2YXIgcj1uLTEscz10Lmxlbmd0aDsrK3I8czspaWYodFtyXT09PWUpcmV0dXJuIHI7cmV0dXJuLTF9ZnVuY3Rpb24geGkodCxlLG4pe3JldHVybiBlPT09ZT9NaSh0LGUsbik6RWkodCxOaSxuKX1mdW5jdGlvbiBEaSh0LGUpe3ZhciBuPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4hIW4mJnhpKHQsZSwwKT4tMX12YXIgQ2k9OTAwNzE5OTI1NDc0MDk5MSxGaT0vXig/OjB8WzEtOV1cZCopJC87ZnVuY3Rpb24gTm4odCxlKXt2YXIgbj10eXBlb2YgdDtyZXR1cm4gZT1lPz9DaSwhIWUmJihuPT0ibnVtYmVyInx8biE9InN5bWJvbCImJkZpLnRlc3QodCkpJiZ0Pi0xJiZ0JTE9PTAmJnQ8ZX1mdW5jdGlvbiBBaSh0LGUsbil7ZT09Il9fcHJvdG9fXyImJmV0P2V0KHQsZSx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6bix3cml0YWJsZTohMH0pOnRbZV09bn1mdW5jdGlvbiBNbih0LGUpe3JldHVybiB0PT09ZXx8dCE9PXQmJmUhPT1lfXZhciBWaT1PYmplY3QucHJvdG90eXBlLFdpPVZpLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIExpKHQsZSxuKXt2YXIgcj10W2VdOyghKFdpLmNhbGwodCxlKSYmTW4ocixuKSl8fG49PT12b2lkIDAmJiEoZSBpbiB0KSkmJkFpKHQsZSxuKX12YXIgeG49TWF0aC5tYXg7ZnVuY3Rpb24gRG4odCxlLG4pe3JldHVybiBlPXhuKGU9PT12b2lkIDA/dC5sZW5ndGgtMTplLDApLGZ1bmN0aW9uKCl7Zm9yKHZhciByPWFyZ3VtZW50cyxzPS0xLGk9eG4oci5sZW5ndGgtZSwwKSxhPUFycmF5KGkpOysrczxpOylhW3NdPXJbZStzXTtzPS0xO2Zvcih2YXIgbz1BcnJheShlKzEpOysrczxlOylvW3NdPXJbc107cmV0dXJuIG9bZV09bihhKSxwaSh0LHRoaXMsbyl9fWZ1bmN0aW9uIF9pKHQsZSl7cmV0dXJuIEVuKERuKHQsZSxrbiksdCsiIil9dmFyIHppPTkwMDcxOTkyNTQ3NDA5OTE7ZnVuY3Rpb24gQ24odCl7cmV0dXJuIHR5cGVvZiB0PT0ibnVtYmVyIiYmdD4tMSYmdCUxPT0wJiZ0PD16aX1mdW5jdGlvbiAkaSh0KXtyZXR1cm4gdCE9bnVsbCYmQ24odC5sZW5ndGgpJiYhYm4odCl9dmFyIFppPSJbb2JqZWN0IEFyZ3VtZW50c10iO2Z1bmN0aW9uIEZuKHQpe3JldHVybiBLZSh0KSYmeHQodCk9PVppfXZhciBBbj1PYmplY3QucHJvdG90eXBlLFJpPUFuLmhhc093blByb3BlcnR5LFVpPUFuLnByb3BlcnR5SXNFbnVtZXJhYmxlLFBpPUZuKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk/Rm46ZnVuY3Rpb24odCl7cmV0dXJuIEtlKHQpJiZSaS5jYWxsKHQsImNhbGxlZSIpJiYhVWkuY2FsbCh0LCJjYWxsZWUiKX07Y29uc3QgVm49UGk7ZnVuY3Rpb24gcWkodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfX12YXIgamk9L1wufFxbKD86W15bXF1dKnwoWyInXSkoPzooPyFcMSlbXlxcXXxcXC4pKj9cMSlcXS8sSGk9L15cdyokLztmdW5jdGlvbiBZaSh0LGUpe2lmKFZlKHQpKXJldHVybiExO3ZhciBuPXR5cGVvZiB0O3JldHVybiBuPT0ibnVtYmVyInx8bj09InN5bWJvbCJ8fG49PSJib29sZWFuInx8dD09bnVsbHx8RHQodCk/ITA6SGkudGVzdCh0KXx8IWppLnRlc3QodCl8fGUhPW51bGwmJnQgaW4gT2JqZWN0KGUpfXZhciBHaT1GdChPYmplY3QsImNyZWF0ZSIpO2NvbnN0IFdlPUdpO2Z1bmN0aW9uIEppKCl7dGhpcy5fX2RhdGFfXz1XZT9XZShudWxsKTp7fSx0aGlzLnNpemU9MH1mdW5jdGlvbiBCaSh0KXt2YXIgZT10aGlzLmhhcyh0KSYmZGVsZXRlIHRoaXMuX19kYXRhX19bdF07cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX12YXIgUWk9Il9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iLEtpPU9iamVjdC5wcm90b3R5cGUsWGk9S2kuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gZWEodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztpZihXZSl7dmFyIG49ZVt0XTtyZXR1cm4gbj09PVFpP3ZvaWQgMDpufXJldHVybiBYaS5jYWxsKGUsdCk/ZVt0XTp2b2lkIDB9dmFyIHRhPU9iamVjdC5wcm90b3R5cGUsbmE9dGEuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gcmEodCl7dmFyIGU9dGhpcy5fX2RhdGFfXztyZXR1cm4gV2U/ZVt0XSE9PXZvaWQgMDpuYS5jYWxsKGUsdCl9dmFyIHNhPSJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjtmdW5jdGlvbiBpYSh0LGUpe3ZhciBuPXRoaXMuX19kYXRhX187cmV0dXJuIHRoaXMuc2l6ZSs9dGhpcy5oYXModCk/MDoxLG5bdF09V2UmJmU9PT12b2lkIDA/c2E6ZSx0aGlzfWZ1bmN0aW9uIGxlKHQpe3ZhciBlPS0xLG49dD09bnVsbD8wOnQubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7KytlPG47KXt2YXIgcj10W2VdO3RoaXMuc2V0KHJbMF0sclsxXSl9fWxlLnByb3RvdHlwZS5jbGVhcj1KaSxsZS5wcm90b3R5cGUuZGVsZXRlPUJpLGxlLnByb3RvdHlwZS5nZXQ9ZWEsbGUucHJvdG90eXBlLmhhcz1yYSxsZS5wcm90b3R5cGUuc2V0PWlhO2Z1bmN0aW9uIGFhKCl7dGhpcy5fX2RhdGFfXz1bXSx0aGlzLnNpemU9MH1mdW5jdGlvbiB0dCh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aDtuLS07KWlmKE1uKHRbbl1bMF0sZSkpcmV0dXJuIG47cmV0dXJuLTF9dmFyIG9hPUFycmF5LnByb3RvdHlwZSx1YT1vYS5zcGxpY2U7ZnVuY3Rpb24gbGEodCl7dmFyIGU9dGhpcy5fX2RhdGFfXyxuPXR0KGUsdCk7aWYobjwwKXJldHVybiExO3ZhciByPWUubGVuZ3RoLTE7cmV0dXJuIG49PXI/ZS5wb3AoKTp1YS5jYWxsKGUsbiwxKSwtLXRoaXMuc2l6ZSwhMH1mdW5jdGlvbiBjYSh0KXt2YXIgZT10aGlzLl9fZGF0YV9fLG49dHQoZSx0KTtyZXR1cm4gbjwwP3ZvaWQgMDplW25dWzFdfWZ1bmN0aW9uIGZhKHQpe3JldHVybiB0dCh0aGlzLl9fZGF0YV9fLHQpPi0xfWZ1bmN0aW9uIGRhKHQsZSl7dmFyIG49dGhpcy5fX2RhdGFfXyxyPXR0KG4sdCk7cmV0dXJuIHI8MD8oKyt0aGlzLnNpemUsbi5wdXNoKFt0LGVdKSk6bltyXVsxXT1lLHRoaXN9ZnVuY3Rpb24gdmUodCl7dmFyIGU9LTEsbj10PT1udWxsPzA6dC5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK2U8bjspe3ZhciByPXRbZV07dGhpcy5zZXQoclswXSxyWzFdKX19dmUucHJvdG90eXBlLmNsZWFyPWFhLHZlLnByb3RvdHlwZS5kZWxldGU9bGEsdmUucHJvdG90eXBlLmdldD1jYSx2ZS5wcm90b3R5cGUuaGFzPWZhLHZlLnByb3RvdHlwZS5zZXQ9ZGE7dmFyIGhhPUZ0KE10LCJNYXAiKTtjb25zdCBtYT1oYTtmdW5jdGlvbiB5YSgpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IGxlLG1hcDpuZXcobWF8fHZlKSxzdHJpbmc6bmV3IGxlfX1mdW5jdGlvbiBnYSh0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4gZT09InN0cmluZyJ8fGU9PSJudW1iZXIifHxlPT0ic3ltYm9sInx8ZT09ImJvb2xlYW4iP3QhPT0iX19wcm90b19fIjp0PT09bnVsbH1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPXQuX19kYXRhX187cmV0dXJuIGdhKGUpP25bdHlwZW9mIGU9PSJzdHJpbmciPyJzdHJpbmciOiJoYXNoIl06bi5tYXB9ZnVuY3Rpb24gcGEodCl7dmFyIGU9bnQodGhpcyx0KS5kZWxldGUodCk7cmV0dXJuIHRoaXMuc2l6ZS09ZT8xOjAsZX1mdW5jdGlvbiB3YSh0KXtyZXR1cm4gbnQodGhpcyx0KS5nZXQodCl9ZnVuY3Rpb24gdmEodCl7cmV0dXJuIG50KHRoaXMsdCkuaGFzKHQpfWZ1bmN0aW9uIE9hKHQsZSl7dmFyIG49bnQodGhpcyx0KSxyPW4uc2l6ZTtyZXR1cm4gbi5zZXQodCxlKSx0aGlzLnNpemUrPW4uc2l6ZT09cj8wOjEsdGhpc31mdW5jdGlvbiBlZSh0KXt2YXIgZT0tMSxuPXQ9PW51bGw/MDp0Lmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrZTxuOyl7dmFyIHI9dFtlXTt0aGlzLnNldChyWzBdLHJbMV0pfX1lZS5wcm90b3R5cGUuY2xlYXI9eWEsZWUucHJvdG90eXBlLmRlbGV0ZT1wYSxlZS5wcm90b3R5cGUuZ2V0PXdhLGVlLnByb3RvdHlwZS5oYXM9dmEsZWUucHJvdG90eXBlLnNldD1PYTt2YXIgVGE9IkV4cGVjdGVkIGEgZnVuY3Rpb24iO2Z1bmN0aW9uIEF0KHQsZSl7aWYodHlwZW9mIHQhPSJmdW5jdGlvbiJ8fGUhPW51bGwmJnR5cGVvZiBlIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoVGEpO3ZhciBuPWZ1bmN0aW9uKCl7dmFyIHI9YXJndW1lbnRzLHM9ZT9lLmFwcGx5KHRoaXMscik6clswXSxpPW4uY2FjaGU7aWYoaS5oYXMocykpcmV0dXJuIGkuZ2V0KHMpO3ZhciBhPXQuYXBwbHkodGhpcyxyKTtyZXR1cm4gbi5jYWNoZT1pLnNldChzLGEpfHxpLGF9O3JldHVybiBuLmNhY2hlPW5ldyhBdC5DYWNoZXx8ZWUpLG59QXQuQ2FjaGU9ZWU7dmFyIFNhPTUwMDtmdW5jdGlvbiBrYSh0KXt2YXIgZT1BdCh0LGZ1bmN0aW9uKHIpe3JldHVybiBuLnNpemU9PT1TYSYmbi5jbGVhcigpLHJ9KSxuPWUuY2FjaGU7cmV0dXJuIGV9dmFyIGJhPS9bXi5bXF1dK3xcWyg/OigtP1xkKyg/OlwuXGQrKT8pfChbIiddKSgoPzooPyFcMilbXlxcXXxcXC4pKj8pXDIpXF18KD89KD86XC58XFtcXSkoPzpcLnxcW1xdfCQpKS9nLElhPS9cXChcXCk/L2csRWE9a2EoZnVuY3Rpb24odCl7dmFyIGU9W107cmV0dXJuIHQuY2hhckNvZGVBdCgwKT09PTQ2JiZlLnB1c2goIiIpLHQucmVwbGFjZShiYSxmdW5jdGlvbihuLHIscyxpKXtlLnB1c2gocz9pLnJlcGxhY2UoSWEsIiQxIik6cnx8bil9KSxlfSk7Y29uc3QgTmE9RWE7ZnVuY3Rpb24gTWEodCl7cmV0dXJuIHQ9PW51bGw/IiI6U24odCl9ZnVuY3Rpb24gcnQodCxlKXtyZXR1cm4gVmUodCk/dDpZaSh0LGUpP1t0XTpOYShNYSh0KSl9dmFyIHhhPTEvMDtmdW5jdGlvbiBWdCh0KXtpZih0eXBlb2YgdD09InN0cmluZyJ8fER0KHQpKXJldHVybiB0O3ZhciBlPXQrIiI7cmV0dXJuIGU9PSIwIiYmMS90PT0teGE/Ii0wIjplfWZ1bmN0aW9uIERhKHQsZSl7ZT1ydChlLHQpO2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7dCE9bnVsbCYmbjxyOyl0PXRbVnQoZVtuKytdKV07cmV0dXJuIG4mJm49PXI/dDp2b2lkIDB9ZnVuY3Rpb24gQ2EodCxlKXtmb3IodmFyIG49LTEscj1lLmxlbmd0aCxzPXQubGVuZ3RoOysrbjxyOyl0W3Mrbl09ZVtuXTtyZXR1cm4gdH12YXIgV249WD9YLmlzQ29uY2F0U3ByZWFkYWJsZTp2b2lkIDA7ZnVuY3Rpb24gRmEodCl7cmV0dXJuIFZlKHQpfHxWbih0KXx8ISEoV24mJnQmJnRbV25dKX1mdW5jdGlvbiBXdCh0LGUsbixyLHMpe3ZhciBpPS0xLGE9dC5sZW5ndGg7Zm9yKG58fChuPUZhKSxzfHwocz1bXSk7KytpPGE7KXt2YXIgbz10W2ldO2U+MCYmbihvKT9lPjE/V3QobyxlLTEsbixyLHMpOkNhKHMsbyk6cnx8KHNbcy5sZW5ndGhdPW8pfXJldHVybiBzfWZ1bmN0aW9uIEFhKHQpe3ZhciBlPXQ9PW51bGw/MDp0Lmxlbmd0aDtyZXR1cm4gZT9XdCh0LDEpOltdfWZ1bmN0aW9uIFZhKHQpe3JldHVybiBFbihEbih0LHZvaWQgMCxBYSksdCsiIil9dmFyIFdhPSJfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fIjtmdW5jdGlvbiBMYSh0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQodCxXYSksdGhpc31mdW5jdGlvbiBfYSh0KXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModCl9ZnVuY3Rpb24gc3QodCl7dmFyIGU9LTEsbj10PT1udWxsPzA6dC5sZW5ndGg7Zm9yKHRoaXMuX19kYXRhX189bmV3IGVlOysrZTxuOyl0aGlzLmFkZCh0W2VdKX1zdC5wcm90b3R5cGUuYWRkPXN0LnByb3RvdHlwZS5wdXNoPUxhLHN0LnByb3RvdHlwZS5oYXM9X2E7ZnVuY3Rpb24gemEodCxlKXtyZXR1cm4gdC5oYXMoZSl9ZnVuY3Rpb24gJGEodCxlKXtyZXR1cm4gdCE9bnVsbCYmZSBpbiBPYmplY3QodCl9ZnVuY3Rpb24gWmEodCxlLG4pe2U9cnQoZSx0KTtmb3IodmFyIHI9LTEscz1lLmxlbmd0aCxpPSExOysrcjxzOyl7dmFyIGE9VnQoZVtyXSk7aWYoIShpPXQhPW51bGwmJm4odCxhKSkpYnJlYWs7dD10W2FdfXJldHVybiBpfHwrK3IhPXM/aToocz10PT1udWxsPzA6dC5sZW5ndGgsISFzJiZDbihzKSYmTm4oYSxzKSYmKFZlKHQpfHxWbih0KSkpfWZ1bmN0aW9uIFJhKHQsZSl7cmV0dXJuIHQhPW51bGwmJlphKHQsZSwkYSl9ZnVuY3Rpb24gTG4odCl7cmV0dXJuIEtlKHQpJiYkaSh0KX1mdW5jdGlvbiBVYSh0LGUsbil7Zm9yKHZhciByPS0xLHM9dD09bnVsbD8wOnQubGVuZ3RoOysrcjxzOylpZihuKGUsdFtyXSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIFBhPTIwMDtmdW5jdGlvbiBxYSh0LGUsbixyKXt2YXIgcz0tMSxpPURpLGE9ITAsbz10Lmxlbmd0aCx1PVtdLGw9ZS5sZW5ndGg7aWYoIW8pcmV0dXJuIHU7biYmKGU9dm4oZSxxaShuKSkpLHI/KGk9VWEsYT0hMSk6ZS5sZW5ndGg+PVBhJiYoaT16YSxhPSExLGU9bmV3IHN0KGUpKTtlOmZvcig7KytzPG87KXt2YXIgYz10W3NdLGQ9bj09bnVsbD9jOm4oYyk7aWYoYz1yfHxjIT09MD9jOjAsYSYmZD09PWQpe2Zvcih2YXIgcD1sO3AtLTspaWYoZVtwXT09PWQpY29udGludWUgZTt1LnB1c2goYyl9ZWxzZSBpKGUsZCxyKXx8dS5wdXNoKGMpfXJldHVybiB1fXZhciBqYT1faShmdW5jdGlvbih0LGUpe3JldHVybiBMbih0KT9xYSh0LFd0KGUsMSxMbiwhMCkpOltdfSk7Y29uc3QgSGE9amE7ZnVuY3Rpb24gWWEodCxlLG4scil7aWYoIVhlKHQpKXJldHVybiB0O2U9cnQoZSx0KTtmb3IodmFyIHM9LTEsaT1lLmxlbmd0aCxhPWktMSxvPXQ7byE9bnVsbCYmKytzPGk7KXt2YXIgdT1WdChlW3NdKSxsPW47aWYodT09PSJfX3Byb3RvX18ifHx1PT09ImNvbnN0cnVjdG9yInx8dT09PSJwcm90b3R5cGUiKXJldHVybiB0O2lmKHMhPWEpe3ZhciBjPW9bdV07bD1yP3IoYyx1LG8pOnZvaWQgMCxsPT09dm9pZCAwJiYobD1YZShjKT9jOk5uKGVbcysxXSk/W106e30pfUxpKG8sdSxsKSxvPW9bdV19cmV0dXJuIHR9ZnVuY3Rpb24gR2EodCxlLG4pe2Zvcih2YXIgcj0tMSxzPWUubGVuZ3RoLGk9e307KytyPHM7KXt2YXIgYT1lW3JdLG89RGEodCxhKTtuKG8sYSkmJllhKGkscnQoYSx0KSxvKX1yZXR1cm4gaX1mdW5jdGlvbiBKYSh0LGUpe3JldHVybiBHYSh0LGUsZnVuY3Rpb24obixyKXtyZXR1cm4gUmEodCxyKX0pfVZhKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PW51bGw/e306SmEodCxlKX0pO2NvbnN0IExlPXQ9PmU9PnR5cGVvZiBlPT09dCxCYT1MZSgib2JqZWN0IiksTHQ9TGUoImJvb2xlYW4iKSxFPUxlKCJudW1iZXIiKSxGPUxlKCJzdHJpbmciKSxRYT1MZSgidW5kZWZpbmVkIiksX249dD0+dD09PW51bGwsRz10PT5fbih0KXx8UWEodCkse2lzQXJyYXk6dGV9PUFycmF5LFA9dD0+QmEodCkmJiFfbih0KSYmIXRlKHQpOygodCxlLG4pPT57bGV0IHI9KDI8PE1hdGgubG9nKHQubGVuZ3RoLTEpL01hdGguTE4yKS0xLHM9LX4oMS42KnIqZS90Lmxlbmd0aCk7cmV0dXJuKGk9ZSk9PntsZXQgYT0iIjtmb3IoOzspe2xldCBvPW4ocyksdT1zO2Zvcig7dS0tOylpZihhKz10W29bdV0mcl18fCIiLGEubGVuZ3RoPT09aSlyZXR1cm4gYX19fSkoInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QiLDIxLHQ9PntsZXQgZT1nbG9iYWxUaGlzLmNyeXB0bztyZXR1cm4gZT09PXZvaWQgMCYmKGU9cmVxdWlyZSgibm9kZTpjcnlwdG8iKS53ZWJjcnlwdG8pLGUuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKX0pO2NvbnN0IF90PSh0LGUpPT5uPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpO2Z1bmN0aW9uIHcodCxlLG4pe3JldHVybiByPT57aWYoIW4pcmV0dXJuO2NvbnN0IHM9bltyXTt0KHMpJiYoZVtyXT1zKX19ZnVuY3Rpb24gcSh0KXtyZXR1cm4gZT0+RShlKSYmdC5pbmNsdWRlcyhlKX1mdW5jdGlvbiBPZSgpe2NvbnN0IHQ9RGF0ZS5ub3coKTtyZXR1cm57dXBkYXRlQXQ6dCxjcmVhdGVBdDp0fX1mdW5jdGlvbiBUZSh0LGUpe2NvbnN0IG49dyhFLHQsZSk7bigidXBkYXRlQXQiKSxuKCJjcmVhdGVBdCIpfWNvbnN0IEthPSgpPT4oe3RhYmxlSWRzOltdLHJlbGF0aW9uc2hpcElkczpbXSxpbmRleElkczpbXSxtZW1vSWRzOltdfSk7ZnVuY3Rpb24gWGEodCl7Y29uc3QgZT1LYSgpO2lmKCFQKHQpfHxHKHQpKXJldHVybiBlO2NvbnN0IG49dyh0ZSxlLHQpO3JldHVybiBuKCJ0YWJsZUlkcyIpLG4oInJlbGF0aW9uc2hpcElkcyIpLG4oImluZGV4SWRzIiksbigibWVtb0lkcyIpLGV9Y29uc3QgZW89KCk9Pih7aWQ6IiIsbmFtZToiIix0YWJsZUlkOiIiLGluZGV4Q29sdW1uSWRzOltdLHNlcUluZGV4Q29sdW1uSWRzOltdLHVuaXF1ZTohMSxtZXRhOk9lKCl9KTtmdW5jdGlvbiB0byh0KXtjb25zdCBlPXt9O2lmKCFQKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9ZW8oKSxzPXcoRixyLG4pLGk9dyhMdCxyLG4pLGE9dyh0ZSxyLG4pO3MoImlkIikscygibmFtZSIpLHMoInRhYmxlSWQiKSxpKCJ1bmlxdWUiKSxhKCJpbmRleENvbHVtbklkcyIpLGEoInNlcUluZGV4Q29sdW1uSWRzIiksVGUoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3Qgem49e0FTQzoxLERFU0M6Mn0sbm89T2JqZWN0LnZhbHVlcyh6bikscm89KCk9Pih7aWQ6IiIsaW5kZXhJZDoiIixjb2x1bW5JZDoiIixvcmRlclR5cGU6em4uQVNDLG1ldGE6T2UoKX0pO2Z1bmN0aW9uIHNvKHQpe2NvbnN0IGU9e307aWYoIVAodCl8fEcodCkpcmV0dXJuIGU7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LnZhbHVlcyh0KSl7aWYoIW4pY29udGludWU7Y29uc3Qgcj1ybygpLHM9dyhGLHIsbik7cygiaWQiKSxzKCJpbmRleElkIikscygiY29sdW1uSWQiKSx3KHEobm8pLHIsbikoIm9yZGVyVHlwZSIpLFRlKHIubWV0YSxuLm1ldGEpLHIuaWQmJihlW3IuaWRdPXIpfXJldHVybiBlfWNvbnN0IGlvPSgpPT4oe30pO2Z1bmN0aW9uIGFvKHQpe2NvbnN0IGU9aW8oKTtpZighUCh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3RbbixyXW9mIE9iamVjdC5lbnRyaWVzKHQpKXtpZighdGUocil8fHIubGVuZ3RoIT09NCljb250aW51ZTtjb25zdFtzLGksYSxvXT1yO2lmKEYocykmJkUoaSkmJkUoYSkmJlAobykpe2NvbnN0IHU9e30sbD13KEUsdSxvKTtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGwpLGVbbl09W3MsaSxhLHVdfX1yZXR1cm4gZX1jb25zdCBvbz0oKT0+KHtpZDoiIix2YWx1ZToiIix1aTp7eDoyMDAseToxMDAsekluZGV4OjIsd2lkdGg6MTE2LGhlaWdodDoxMDAsY29sb3I6IiJ9LG1ldGE6T2UoKX0pO2Z1bmN0aW9uIHVvKHQpe2NvbnN0IGU9e307aWYoIVAodCl8fEcodCkpcmV0dXJuIGU7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LnZhbHVlcyh0KSl7aWYoIW4pY29udGludWU7Y29uc3Qgcj1vbygpLHM9dyhGLHIsbiksaT13KEUsci51aSxuLnVpKSxhPXcoRixyLnVpLG4udWkpO3MoImlkIikscygidmFsdWUiKSxhKCJjb2xvciIpLGkoIngiKSxpKCJ5IiksaSgiekluZGV4IiksaSgid2lkdGgiKSxpKCJoZWlnaHQiKSxUZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1jb25zdCAkbj17WmVyb09uZToyLFplcm9OOjQsT25lT25seTo4LE9uZU46MTZ9LGxvPU9iamVjdC52YWx1ZXMoJG4pLFpuPXtyaW5nOjEsZGFzaDoyfSxjbz1PYmplY3QudmFsdWVzKFpuKSx6dD17bGVmdDoxLHJpZ2h0OjIsdG9wOjQsYm90dG9tOjh9LFJuPU9iamVjdC52YWx1ZXMoenQpLGZvPSgpPT4oe2lkOiIiLGlkZW50aWZpY2F0aW9uOiExLHJlbGF0aW9uc2hpcFR5cGU6JG4uWmVyb04sc3RhcnRSZWxhdGlvbnNoaXBUeXBlOlpuLmRhc2gsc3RhcnQ6e3RhYmxlSWQ6IiIsY29sdW1uSWRzOltdLHg6MCx5OjAsZGlyZWN0aW9uOnp0LmJvdHRvbX0sZW5kOnt0YWJsZUlkOiIiLGNvbHVtbklkczpbXSx4OjAseTowLGRpcmVjdGlvbjp6dC5ib3R0b219LG1ldGE6T2UoKX0pO2Z1bmN0aW9uIGhvKHQpe2NvbnN0IGU9e307aWYoIVAodCl8fEcodCkpcmV0dXJuIGU7Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LnZhbHVlcyh0KSl7aWYoIW4pY29udGludWU7Y29uc3Qgcj1mbygpLHM9dyhGLHIsbiksaT13KEx0LHIsbiksYT13KEUsci5zdGFydCxuLnN0YXJ0KSxvPXcoRixyLnN0YXJ0LG4uc3RhcnQpLHU9dyhFLHIuZW5kLG4uZW5kKSxsPXcoRixyLmVuZCxuLmVuZCk7cygiaWQiKSxpKCJpZGVudGlmaWNhdGlvbiIpLHcocShsbykscixuKSgicmVsYXRpb25zaGlwVHlwZSIpLHcocShjbykscixuKSgic3RhcnRSZWxhdGlvbnNoaXBUeXBlIiksbygidGFibGVJZCIpLGEoIngiKSxhKCJ5IiksdyhxKFJuKSxyLnN0YXJ0LG4uc3RhcnQpKCJkaXJlY3Rpb24iKSx3KHRlLHIuc3RhcnQsbi5zdGFydCkoImNvbHVtbklkcyIpLGwoInRhYmxlSWQiKSx1KCJ4IiksdSgieSIpLHcocShSbiksci5lbmQsbi5lbmQpKCJkaXJlY3Rpb24iKSx3KHRlLHIuZW5kLG4uZW5kKSgiY29sdW1uSWRzIiksVGUoci5tZXRhLG4ubWV0YSksci5pZCYmKGVbci5pZF09cil9cmV0dXJuIGV9Y29uc3QgbW89e0VSRDoiRVJEIix2aXN1YWxpemF0aW9uOiJAZGluZXVnL2VyZC1lZGl0b3IvYnVpbHRpbi12aXN1YWxpemF0aW9uIixzY2hlbWFTUUw6IkBkaW5ldWcvZXJkLWVkaXRvci9idWlsdGluLXNjaGVtYS1zcWwiLGdlbmVyYXRvckNvZGU6IkBkaW5ldWcvZXJkLWVkaXRvci9idWlsdGluLWdlbmVyYXRvci1jb2RlIixzZXR0aW5nczoic2V0dGluZ3MifSxjZT17dGFibGVDb21tZW50OjEsY29sdW1uQ29tbWVudDoyLGNvbHVtbkRhdGFUeXBlOjQsY29sdW1uRGVmYXVsdDo4LGNvbHVtbkF1dG9JbmNyZW1lbnQ6MTYsY29sdW1uUHJpbWFyeUtleTozMixjb2x1bW5VbmlxdWU6NjQsY29sdW1uTm90TnVsbDoxMjgscmVsYXRpb25zaGlwOjI1Nn0sbmU9e2NvbHVtbk5hbWU6MSxjb2x1bW5EYXRhVHlwZToyLGNvbHVtbk5vdE51bGw6NCxjb2x1bW5VbmlxdWU6OCxjb2x1bW5BdXRvSW5jcmVtZW50OjE2LGNvbHVtbkRlZmF1bHQ6MzIsY29sdW1uQ29tbWVudDo2NH0sVW49T2JqZWN0LnZhbHVlcyhuZSksUG49e01hcmlhREI6MSxNU1NRTDoyLE15U1FMOjQsT3JhY2xlOjgsUG9zdGdyZVNRTDoxNixTUUxpdGU6MzJ9LHlvPU9iamVjdC52YWx1ZXMoUG4pLHFuPXtHcmFwaFFMOjEsY3NoYXJwOjIsSmF2YTo0LEtvdGxpbjo4LFR5cGVTY3JpcHQ6MTYsSlBBOjMyLFNjYWxhOjY0fSxnbz1PYmplY3QudmFsdWVzKHFuKSwkdD17bm9uZToxLGNhbWVsQ2FzZToyLHBhc2NhbENhc2U6NCxzbmFrZUNhc2U6OH0sam49T2JqZWN0LnZhbHVlcygkdCksSG49e25vbmU6MSxkb3VibGVRdW90ZToyLHNpbmdsZVF1b3RlOjQsYmFja3RpY2s6OH0scG89T2JqZWN0LnZhbHVlcyhIbiksd289LjEsdm89MSxPbz0yZTMsVG89MmU0LFNvPWNlLnRhYmxlQ29tbWVudHxjZS5jb2x1bW5Db21tZW50fGNlLmNvbHVtbkRhdGFUeXBlfGNlLmNvbHVtbkRlZmF1bHR8Y2UuY29sdW1uUHJpbWFyeUtleXxjZS5jb2x1bW5Ob3ROdWxsfGNlLnJlbGF0aW9uc2hpcCxrbz0oKT0+KHt3aWR0aDoyZTMsaGVpZ2h0OjJlMyxzY3JvbGxUb3A6MCxzY3JvbGxMZWZ0OjAsem9vbUxldmVsOjEsc2hvdzpTbyxkYXRhYmFzZTpQbi5NeVNRTCxkYXRhYmFzZU5hbWU6IiIsY2FudmFzVHlwZTptby5FUkQsbGFuZ3VhZ2U6cW4uR3JhcGhRTCx0YWJsZU5hbWVDYXNlOiR0LnBhc2NhbENhc2UsY29sdW1uTmFtZUNhc2U6JHQuY2FtZWxDYXNlLGJyYWNrZXRUeXBlOkhuLm5vbmUscmVsYXRpb25zaGlwRGF0YVR5cGVTeW5jOiEwLHJlbGF0aW9uc2hpcE9wdGltaXphdGlvbjohMSxjb2x1bW5PcmRlcjpbbmUuY29sdW1uTmFtZSxuZS5jb2x1bW5EYXRhVHlwZSxuZS5jb2x1bW5Ob3ROdWxsLG5lLmNvbHVtblVuaXF1ZSxuZS5jb2x1bW5BdXRvSW5jcmVtZW50LG5lLmNvbHVtbkRlZmF1bHQsbmUuY29sdW1uQ29tbWVudF0sbWF4V2lkdGhDb21tZW50Oi0xLGlnbm9yZVNhdmVTZXR0aW5nczowfSksWW49X3QoT28sVG8pLGJvPV90KHdvLHZvKSxJbz1fdCg2MCwyMDApO2Z1bmN0aW9uIEVvKHQpe2NvbnN0IGU9a28oKTtpZighUCh0KXx8Ryh0KSlyZXR1cm4gZTtjb25zdCBuPXcoRSxlLHQpLHI9dyhGLGUsdCkscz13KEx0LGUsdCk7cmV0dXJuIEUodC53aWR0aCkmJihlLndpZHRoPVluKHQud2lkdGgpKSxFKHQuaGVpZ2h0KSYmKGUuaGVpZ2h0PVluKHQuaGVpZ2h0KSksRSh0Lnpvb21MZXZlbCkmJihlLnpvb21MZXZlbD1ibyh0Lnpvb21MZXZlbCkpLEUodC5tYXhXaWR0aENvbW1lbnQpJiZ0Lm1heFdpZHRoQ29tbWVudCE9PS0xJiYoZS5tYXhXaWR0aENvbW1lbnQ9SW8odC5tYXhXaWR0aENvbW1lbnQpKSxuKCJzY3JvbGxUb3AiKSxuKCJzY3JvbGxMZWZ0Iiksbigic2hvdyIpLG4oImlnbm9yZVNhdmVTZXR0aW5ncyIpLHIoImRhdGFiYXNlTmFtZSIpLHIoImNhbnZhc1R5cGUiKSxzKCJyZWxhdGlvbnNoaXBEYXRhVHlwZVN5bmMiKSxzKCJyZWxhdGlvbnNoaXBPcHRpbWl6YXRpb24iKSx3KHEoeW8pLGUsdCkoImRhdGFiYXNlIiksdyhxKGdvKSxlLHQpKCJsYW5ndWFnZSIpLHcocShqbiksZSx0KSgidGFibGVOYW1lQ2FzZSIpLHcocShqbiksZSx0KSgiY29sdW1uTmFtZUNhc2UiKSx3KHEocG8pLGUsdCkoImJyYWNrZXRUeXBlIiksdGUodC5jb2x1bW5PcmRlcikmJlVuLmxlbmd0aD09PXQuY29sdW1uT3JkZXIubGVuZ3RoJiZIYShVbix0LmNvbHVtbk9yZGVyKS5sZW5ndGg9PT0wJiYoZS5jb2x1bW5PcmRlcj10LmNvbHVtbk9yZGVyKSxlfWNvbnN0IE5vPSgpPT4oe2lkOiIiLG5hbWU6IiIsY29tbWVudDoiIixjb2x1bW5JZHM6W10sc2VxQ29sdW1uSWRzOltdLHVpOnt4OjIwMCx5OjEwMCx6SW5kZXg6Mix3aWR0aE5hbWU6NjAsd2lkdGhDb21tZW50OjYwLGNvbG9yOiIifSxtZXRhOk9lKCl9KTtmdW5jdGlvbiBNbyh0KXtjb25zdCBlPXt9O2lmKCFQKHQpfHxHKHQpKXJldHVybiBlO2Zvcihjb25zdCBuIG9mIE9iamVjdC52YWx1ZXModCkpe2lmKCFuKWNvbnRpbnVlO2NvbnN0IHI9Tm8oKSxzPXcoRixyLG4pLGk9dyh0ZSxyLG4pLGE9dyhFLHIudWksbi51aSksbz13KEYsci51aSxuLnVpKTtzKCJpZCIpLHMoIm5hbWUiKSxzKCJjb21tZW50IiksaSgiY29sdW1uSWRzIiksaSgic2VxQ29sdW1uSWRzIiksbygiY29sb3IiKSxhKCJ4IiksYSgieSIpLGEoInpJbmRleCIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLFRlKHIubWV0YSxuLm1ldGEpLHIuaWQmJihlW3IuaWRdPXIpfXJldHVybiBlfWNvbnN0IHhvPSgpPT4oe2lkOiIiLHRhYmxlSWQ6IiIsbmFtZToiIixjb21tZW50OiIiLGRhdGFUeXBlOiIiLGRlZmF1bHQ6IiIsb3B0aW9uczowLHVpOntrZXlzOjAsd2lkdGhOYW1lOjYwLHdpZHRoQ29tbWVudDo2MCx3aWR0aERhdGFUeXBlOjYwLHdpZHRoRGVmYXVsdDo2MH0sbWV0YTpPZSgpfSk7ZnVuY3Rpb24gRG8odCl7Y29uc3QgZT17fTtpZighUCh0KXx8Ryh0KSlyZXR1cm4gZTtmb3IoY29uc3QgbiBvZiBPYmplY3QudmFsdWVzKHQpKXtpZighbiljb250aW51ZTtjb25zdCByPXhvKCkscz13KEYscixuKSxpPXcoRSxyLG4pLGE9dyhFLHIudWksbi51aSk7cygiaWQiKSxzKCJ0YWJsZUlkIikscygibmFtZSIpLHMoImNvbW1lbnQiKSxzKCJkYXRhVHlwZSIpLHMoImRlZmF1bHQiKSxpKCJvcHRpb25zIiksYSgia2V5cyIpLGEoIndpZHRoTmFtZSIpLGEoIndpZHRoQ29tbWVudCIpLGEoIndpZHRoRGF0YVR5cGUiKSxhKCJ3aWR0aERlZmF1bHQiKSxUZShyLm1ldGEsbi5tZXRhKSxyLmlkJiYoZVtyLmlkXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBDbyh0KXt2YXIgZSxuLHIscyxpLGE7Y29uc3Qgbz10LHU9RW8oby5zZXR0aW5ncyksbD1YYShvLmRvYyksYz1hbyhvLmx3dyksZD1NbygoZT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6ZS50YWJsZUVudGl0aWVzKSxwPURvKChuPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDpuLnRhYmxlQ29sdW1uRW50aXRpZXMpLGg9aG8oKHI9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnIucmVsYXRpb25zaGlwRW50aXRpZXMpLFM9dG8oKHM9by5jb2xsZWN0aW9ucyk9PW51bGw/dm9pZCAwOnMuaW5kZXhFbnRpdGllcyksVT1zbygoaT1vLmNvbGxlY3Rpb25zKT09bnVsbD92b2lkIDA6aS5pbmRleENvbHVtbkVudGl0aWVzKSxNPXVvKChhPW8uY29sbGVjdGlvbnMpPT1udWxsP3ZvaWQgMDphLm1lbW9FbnRpdGllcyk7cmV0dXJueyRzY2hlbWE6Imh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kaW5ldWcvZXJkLWVkaXRvci9tYWluL2pzb24tc2NoZW1hL3NjaGVtYS5qc29uIix2ZXJzaW9uOiIzLjAuMCIsc2V0dGluZ3M6dSxkb2M6bCxjb2xsZWN0aW9uczp7dGFibGVFbnRpdGllczpkLHRhYmxlQ29sdW1uRW50aXRpZXM6cCxyZWxhdGlvbnNoaXBFbnRpdGllczpoLGluZGV4RW50aXRpZXM6UyxpbmRleENvbHVtbkVudGl0aWVzOlUsbWVtb0VudGl0aWVzOk19LGx3dzpjfX1mdW5jdGlvbiBGbyh0KXtyZXR1cm5bdCwtMSwtMSx7fV19ZnVuY3Rpb24gWnQodCxlLG4pe3JldHVybiB0W2VdfHwodFtlXT1GbyhuKSx0W2VdKX1mdW5jdGlvbiBBbyh0LGUsbixyLHMpe2NvbnN0IGk9WnQodCxuLHIpLGE9aVsxXSxvPWlbMl07YTxlJiYoaVsxXT1lKSxvPGUmJnMoKX1mdW5jdGlvbiBWbyh0LGUsbixyLHMpe2NvbnN0IGk9WnQodCxuLHIpLGE9aVsyXSxvPWlbMV07YTxlJiYoaVsyXT1lKSxvPD1lJiZzKCl9ZnVuY3Rpb24gV28odCxlLG4scixzLGkpe2NvbnN0IGE9WnQodCxuLHIpOyhhWzNdW3NdPz8tMSk8PWUmJihhWzNdW3NdPWUsaSgpKX1jbGFzcyBMb3tjb25zdHJ1Y3RvcihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywiY29sbGVjdGlvbnMiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSl9Y29sbGVjdGlvbihlKXtyZXR1cm4gbmV3IF9vKHRoaXMuY29sbGVjdGlvbnNbZV0sZSl9fWNsYXNzIF9ve2NvbnN0cnVjdG9yKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb24iLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImNvbGxlY3Rpb25LZXkiLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSl9c2VsZWN0QnlJZChlKXtyZXR1cm4gdGhpcy5jb2xsZWN0aW9uW2VdfXNlbGVjdEJ5SWRzKGUpe3JldHVybiBlLmxlbmd0aCxlLm1hcChuPT50aGlzLnNlbGVjdEJ5SWQobikpLmZpbHRlcihCb29sZWFuKX1zZWxlY3RFbnRpdGllcygpe3JldHVybiB0aGlzLmNvbGxlY3Rpb259c2VsZWN0QWxsKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5jb2xsZWN0aW9uKX1zZXRPbmUoZSl7cmV0dXJuIHRoaXMuY29sbGVjdGlvbltlLmlkXT1lLHRoaXN9c2V0TWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMuc2V0T25lKG4pKSx0aGlzfXNldEFsbChlKXtyZXR1cm4gdGhpcy5yZW1vdmVBbGwoKSx0aGlzLnNldE1hbnkoZSksdGhpc31hZGRPbmUoZSl7cmV0dXJuIHRoaXMuc2VsZWN0QnlJZChlLmlkKT90aGlzOih0aGlzLnNldE9uZShlKSx0aGlzKX1hZGRNYW55KGUpe3JldHVybiBlLmZvckVhY2gobj0+dGhpcy5hZGRPbmUobikpLHRoaXN9cmVtb3ZlT25lKGUpe3JldHVybiB0aGlzLnNlbGVjdEJ5SWQoZSkmJlJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGhpcy5jb2xsZWN0aW9uLGUpLHRoaXN9cmVtb3ZlTWFueShlKXtyZXR1cm4gZS5mb3JFYWNoKG49PnRoaXMucmVtb3ZlT25lKG4pKSx0aGlzfXJlbW92ZUFsbCgpe3JldHVybiB0aGlzLmNvbGxlY3Rpb249e30sdGhpc311cGRhdGVPbmUoZSxuKXtjb25zdCByPXRoaXMuc2VsZWN0QnlJZChlKTtyZXR1cm4gciYmKG4ociksci5tZXRhLnVwZGF0ZUF0PURhdGUubm93KCkpLHRoaXN9dXBkYXRlTWFueShlLG4pe3JldHVybiBlLmZvckVhY2gocj0+dGhpcy51cGRhdGVPbmUocixuKSksdGhpc31nZXRPckNyZWF0ZShlLG4pe2NvbnN0IHI9dGhpcy5zZWxlY3RCeUlkKGUpO2lmKHIpcmV0dXJuIHI7Y29uc3Qgcz1uKGUpO3JldHVybiB0aGlzLnNldE9uZShzKSx0aGlzLnNlbGVjdEJ5SWQoZSl9YWRkT3BlcmF0b3IoZSxuLHIscyl7cmV0dXJuIEFvKGUsbixyLHRoaXMuY29sbGVjdGlvbktleSxzKSx0aGlzfXJlbW92ZU9wZXJhdG9yKGUsbixyLHMpe3JldHVybiBWbyhlLG4scix0aGlzLmNvbGxlY3Rpb25LZXkscyksdGhpc31yZXBsYWNlT3BlcmF0b3IoZSxuLHIscyxpKXtyZXR1cm4gV28oZSxuLHIsdGhpcy5jb2xsZWN0aW9uS2V5LHMsaSksdGhpc319Y29uc3QgQT10PT5uZXcgTG8odCk7ZnVuY3Rpb24gXyh0KXtjb25zdCBlPW5ldyBTZXQodCk7cmV0dXJuIG49PmUuaGFzKG4pfSgodCxlLG4pPT57bGV0IHI9KDI8PE1hdGgubG9nKHQubGVuZ3RoLTEpL01hdGguTE4yKS0xLHM9LX4oMS42KnIqZS90Lmxlbmd0aCk7cmV0dXJuKGk9ZSk9PntsZXQgYT0iIjtmb3IoOzspe2xldCBvPW4ocyksdT1zO2Zvcig7dS0tOylpZihhKz10W29bdV0mcl18fCIiLGEubGVuZ3RoPT09aSlyZXR1cm4gYX19fSkoInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QiLDIxLHQ9PntsZXQgZT1nbG9iYWxUaGlzLmNyeXB0bztyZXR1cm4gZT09PXZvaWQgMCYmKGU9cmVxdWlyZSgibm9kZTpjcnlwdG8iKS53ZWJjcnlwdG8pLGUuZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKX0pO2NsYXNzIGZlIGV4dGVuZHMgRXJyb3J7fWNsYXNzIHpvIGV4dGVuZHMgZmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoYEludmFsaWQgRGF0ZVRpbWU6ICR7ZS50b01lc3NhZ2UoKX1gKX19Y2xhc3MgJG8gZXh0ZW5kcyBmZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihgSW52YWxpZCBJbnRlcnZhbDogJHtlLnRvTWVzc2FnZSgpfWApfX1jbGFzcyBabyBleHRlbmRzIGZle2NvbnN0cnVjdG9yKGUpe3N1cGVyKGBJbnZhbGlkIER1cmF0aW9uOiAke2UudG9NZXNzYWdlKCl9YCl9fWNsYXNzIFNlIGV4dGVuZHMgZmV7fWNsYXNzIEduIGV4dGVuZHMgZmV7Y29uc3RydWN0b3IoZSl7c3VwZXIoYEludmFsaWQgdW5pdCAke2V9YCl9fWNsYXNzIEQgZXh0ZW5kcyBmZXt9Y2xhc3MgcmUgZXh0ZW5kcyBmZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKCJab25lIGlzIGFuIGFic3RyYWN0IGNsYXNzIil9fWNvbnN0IGY9Im51bWVyaWMiLHo9InNob3J0IixDPSJsb25nIixpdD17eWVhcjpmLG1vbnRoOmYsZGF5OmZ9LEpuPXt5ZWFyOmYsbW9udGg6eixkYXk6Zn0sUm89e3llYXI6Zixtb250aDp6LGRheTpmLHdlZWtkYXk6en0sQm49e3llYXI6Zixtb250aDpDLGRheTpmfSxRbj17eWVhcjpmLG1vbnRoOkMsZGF5OmYsd2Vla2RheTpDfSxLbj17aG91cjpmLG1pbnV0ZTpmfSxYbj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmfSxlcj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLHRpbWVab25lTmFtZTp6fSx0cj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLHRpbWVab25lTmFtZTpDfSxucj17aG91cjpmLG1pbnV0ZTpmLGhvdXJDeWNsZToiaDIzIn0scnI9e2hvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zixob3VyQ3ljbGU6ImgyMyJ9LHNyPXtob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsaG91ckN5Y2xlOiJoMjMiLHRpbWVab25lTmFtZTp6fSxpcj17aG91cjpmLG1pbnV0ZTpmLHNlY29uZDpmLGhvdXJDeWNsZToiaDIzIix0aW1lWm9uZU5hbWU6Q30sYXI9e3llYXI6Zixtb250aDpmLGRheTpmLGhvdXI6ZixtaW51dGU6Zn0sb3I9e3llYXI6Zixtb250aDpmLGRheTpmLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zn0sdXI9e3llYXI6Zixtb250aDp6LGRheTpmLGhvdXI6ZixtaW51dGU6Zn0sbHI9e3llYXI6Zixtb250aDp6LGRheTpmLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zn0sVW89e3llYXI6Zixtb250aDp6LGRheTpmLHdlZWtkYXk6eixob3VyOmYsbWludXRlOmZ9LGNyPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zixob3VyOmYsbWludXRlOmYsdGltZVpvbmVOYW1lOnp9LGZyPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zixob3VyOmYsbWludXRlOmYsc2Vjb25kOmYsdGltZVpvbmVOYW1lOnp9LGRyPXt5ZWFyOmYsbW9udGg6QyxkYXk6Zix3ZWVrZGF5OkMsaG91cjpmLG1pbnV0ZTpmLHRpbWVab25lTmFtZTpDfSxocj17eWVhcjpmLG1vbnRoOkMsZGF5OmYsd2Vla2RheTpDLGhvdXI6ZixtaW51dGU6ZixzZWNvbmQ6Zix0aW1lWm9uZU5hbWU6Q307Y2xhc3MgX2V7Z2V0IHR5cGUoKXt0aHJvdyBuZXcgcmV9Z2V0IG5hbWUoKXt0aHJvdyBuZXcgcmV9Z2V0IGlhbmFOYW1lKCl7cmV0dXJuIHRoaXMubmFtZX1nZXQgaXNVbml2ZXJzYWwoKXt0aHJvdyBuZXcgcmV9b2Zmc2V0TmFtZShlLG4pe3Rocm93IG5ldyByZX1mb3JtYXRPZmZzZXQoZSxuKXt0aHJvdyBuZXcgcmV9b2Zmc2V0KGUpe3Rocm93IG5ldyByZX1lcXVhbHMoZSl7dGhyb3cgbmV3IHJlfWdldCBpc1ZhbGlkKCl7dGhyb3cgbmV3IHJlfX1sZXQgUnQ9bnVsbDtjbGFzcyBhdCBleHRlbmRzIF9le3N0YXRpYyBnZXQgaW5zdGFuY2UoKXtyZXR1cm4gUnQ9PT1udWxsJiYoUnQ9bmV3IGF0KSxSdH1nZXQgdHlwZSgpe3JldHVybiJzeXN0ZW0ifWdldCBuYW1lKCl7cmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmV9Z2V0IGlzVW5pdmVyc2FsKCl7cmV0dXJuITF9b2Zmc2V0TmFtZShlLHtmb3JtYXQ6bixsb2NhbGU6cn0pe3JldHVybiBfcihlLG4scil9Zm9ybWF0T2Zmc2V0KGUsbil7cmV0dXJuIFJlKHRoaXMub2Zmc2V0KGUpLG4pfW9mZnNldChlKXtyZXR1cm4tbmV3IERhdGUoZSkuZ2V0VGltZXpvbmVPZmZzZXQoKX1lcXVhbHMoZSl7cmV0dXJuIGUudHlwZT09PSJzeXN0ZW0ifWdldCBpc1ZhbGlkKCl7cmV0dXJuITB9fWxldCBvdD17fTtmdW5jdGlvbiBQbyh0KXtyZXR1cm4gb3RbdF18fChvdFt0XT1uZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLHtob3VyMTI6ITEsdGltZVpvbmU6dCx5ZWFyOiJudW1lcmljIixtb250aDoiMi1kaWdpdCIsZGF5OiIyLWRpZ2l0Iixob3VyOiIyLWRpZ2l0IixtaW51dGU6IjItZGlnaXQiLHNlY29uZDoiMi1kaWdpdCIsZXJhOiJzaG9ydCJ9KSksb3RbdF19Y29uc3QgcW89e3llYXI6MCxtb250aDoxLGRheToyLGVyYTozLGhvdXI6NCxtaW51dGU6NSxzZWNvbmQ6Nn07ZnVuY3Rpb24gam8odCxlKXtjb25zdCBuPXQuZm9ybWF0KGUpLnJlcGxhY2UoL1x1MjAwRS9nLCIiKSxyPS8oXGQrKVwvKFxkKylcLyhcZCspIChBRHxCQyksPyAoXGQrKTooXGQrKTooXGQrKS8uZXhlYyhuKSxbLHMsaSxhLG8sdSxsLGNdPXI7cmV0dXJuW2EscyxpLG8sdSxsLGNdfWZ1bmN0aW9uIEhvKHQsZSl7Y29uc3Qgbj10LmZvcm1hdFRvUGFydHMoZSkscj1bXTtmb3IobGV0IHM9MDtzPG4ubGVuZ3RoO3MrKyl7Y29uc3R7dHlwZTppLHZhbHVlOmF9PW5bc10sbz1xb1tpXTtpPT09ImVyYSI/cltvXT1hOnkobyl8fChyW29dPXBhcnNlSW50KGEsMTApKX1yZXR1cm4gcn1sZXQgdXQ9e307Y2xhc3MgSiBleHRlbmRzIF9le3N0YXRpYyBjcmVhdGUoZSl7cmV0dXJuIHV0W2VdfHwodXRbZV09bmV3IEooZSkpLHV0W2VdfXN0YXRpYyByZXNldENhY2hlKCl7dXQ9e30sb3Q9e319c3RhdGljIGlzVmFsaWRTcGVjaWZpZXIoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZFpvbmUoZSl9c3RhdGljIGlzVmFsaWRab25lKGUpe2lmKCFlKXJldHVybiExO3RyeXtyZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoImVuLVVTIix7dGltZVpvbmU6ZX0pLmZvcm1hdCgpLCEwfWNhdGNoe3JldHVybiExfX1jb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuem9uZU5hbWU9ZSx0aGlzLnZhbGlkPUouaXNWYWxpZFpvbmUoZSl9Z2V0IHR5cGUoKXtyZXR1cm4iaWFuYSJ9Z2V0IG5hbWUoKXtyZXR1cm4gdGhpcy56b25lTmFtZX1nZXQgaXNVbml2ZXJzYWwoKXtyZXR1cm4hMX1vZmZzZXROYW1lKGUse2Zvcm1hdDpuLGxvY2FsZTpyfSl7cmV0dXJuIF9yKGUsbixyLHRoaXMubmFtZSl9Zm9ybWF0T2Zmc2V0KGUsbil7cmV0dXJuIFJlKHRoaXMub2Zmc2V0KGUpLG4pfW9mZnNldChlKXtjb25zdCBuPW5ldyBEYXRlKGUpO2lmKGlzTmFOKG4pKXJldHVybiBOYU47Y29uc3Qgcj1Qbyh0aGlzLm5hbWUpO2xldFtzLGksYSxvLHUsbCxjXT1yLmZvcm1hdFRvUGFydHM/SG8ocixuKTpqbyhyLG4pO289PT0iQkMiJiYocz0tTWF0aC5hYnMocykrMSk7Y29uc3QgcD1odCh7eWVhcjpzLG1vbnRoOmksZGF5OmEsaG91cjp1PT09MjQ/MDp1LG1pbnV0ZTpsLHNlY29uZDpjLG1pbGxpc2Vjb25kOjB9KTtsZXQgaD0rbjtjb25zdCBTPWglMWUzO3JldHVybiBoLT1TPj0wP1M6MWUzK1MsKHAtaCkvKDYwKjFlMyl9ZXF1YWxzKGUpe3JldHVybiBlLnR5cGU9PT0iaWFuYSImJmUubmFtZT09PXRoaXMubmFtZX1nZXQgaXNWYWxpZCgpe3JldHVybiB0aGlzLnZhbGlkfX1sZXQgbXI9e307ZnVuY3Rpb24gWW8odCxlPXt9KXtjb25zdCBuPUpTT04uc3RyaW5naWZ5KFt0LGVdKTtsZXQgcj1tcltuXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuTGlzdEZvcm1hdCh0LGUpLG1yW25dPXIpLHJ9bGV0IFV0PXt9O2Z1bmN0aW9uIFB0KHQsZT17fSl7Y29uc3Qgbj1KU09OLnN0cmluZ2lmeShbdCxlXSk7bGV0IHI9VXRbbl07cmV0dXJuIHJ8fChyPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHQsZSksVXRbbl09cikscn1sZXQgcXQ9e307ZnVuY3Rpb24gR28odCxlPXt9KXtjb25zdCBuPUpTT04uc3RyaW5naWZ5KFt0LGVdKTtsZXQgcj1xdFtuXTtyZXR1cm4gcnx8KHI9bmV3IEludGwuTnVtYmVyRm9ybWF0KHQsZSkscXRbbl09cikscn1sZXQganQ9e307ZnVuY3Rpb24gSm8odCxlPXt9KXtjb25zdHtiYXNlOm4sLi4ucn09ZSxzPUpTT04uc3RyaW5naWZ5KFt0LHJdKTtsZXQgaT1qdFtzXTtyZXR1cm4gaXx8KGk9bmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KHQsZSksanRbc109aSksaX1sZXQgemU9bnVsbDtmdW5jdGlvbiBCbygpe3JldHVybiB6ZXx8KHplPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlLHplKX1sZXQgeXI9e307ZnVuY3Rpb24gUW8odCl7bGV0IGU9eXJbdF07aWYoIWUpe2NvbnN0IG49bmV3IEludGwuTG9jYWxlKHQpO2U9ImdldFdlZWtJbmZvImluIG4/bi5nZXRXZWVrSW5mbygpOm4ud2Vla0luZm8seXJbdF09ZX1yZXR1cm4gZX1mdW5jdGlvbiBLbyh0KXtjb25zdCBlPXQuaW5kZXhPZigiLXgtIik7ZSE9PS0xJiYodD10LnN1YnN0cmluZygwLGUpKTtjb25zdCBuPXQuaW5kZXhPZigiLXUtIik7aWYobj09PS0xKXJldHVyblt0XTt7bGV0IHIsczt0cnl7cj1QdCh0KS5yZXNvbHZlZE9wdGlvbnMoKSxzPXR9Y2F0Y2h7Y29uc3QgdT10LnN1YnN0cmluZygwLG4pO3I9UHQodSkucmVzb2x2ZWRPcHRpb25zKCkscz11fWNvbnN0e251bWJlcmluZ1N5c3RlbTppLGNhbGVuZGFyOmF9PXI7cmV0dXJuW3MsaSxhXX19ZnVuY3Rpb24gWG8odCxlLG4pe3JldHVybihufHxlKSYmKHQuaW5jbHVkZXMoIi11LSIpfHwodCs9Ii11IiksbiYmKHQrPWAtY2EtJHtufWApLGUmJih0Kz1gLW51LSR7ZX1gKSksdH1mdW5jdGlvbiBldSh0KXtjb25zdCBlPVtdO2ZvcihsZXQgbj0xO248PTEyO24rKyl7Y29uc3Qgcj1nLnV0YygyMDA5LG4sMSk7ZS5wdXNoKHQocikpfXJldHVybiBlfWZ1bmN0aW9uIHR1KHQpe2NvbnN0IGU9W107Zm9yKGxldCBuPTE7bjw9NztuKyspe2NvbnN0IHI9Zy51dGMoMjAxNiwxMSwxMytuKTtlLnB1c2godChyKSl9cmV0dXJuIGV9ZnVuY3Rpb24gbHQodCxlLG4scil7Y29uc3Qgcz10Lmxpc3RpbmdNb2RlKCk7cmV0dXJuIHM9PT0iZXJyb3IiP251bGw6cz09PSJlbiI/bihlKTpyKGUpfWZ1bmN0aW9uIG51KHQpe3JldHVybiB0Lm51bWJlcmluZ1N5c3RlbSYmdC5udW1iZXJpbmdTeXN0ZW0hPT0ibGF0biI/ITE6dC5udW1iZXJpbmdTeXN0ZW09PT0ibGF0biJ8fCF0LmxvY2FsZXx8dC5sb2NhbGUuc3RhcnRzV2l0aCgiZW4iKXx8bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodC5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5udW1iZXJpbmdTeXN0ZW09PT0ibGF0biJ9Y2xhc3MgcnV7Y29uc3RydWN0b3IoZSxuLHIpe3RoaXMucGFkVG89ci5wYWRUb3x8MCx0aGlzLmZsb29yPXIuZmxvb3J8fCExO2NvbnN0e3BhZFRvOnMsZmxvb3I6aSwuLi5hfT1yO2lmKCFufHxPYmplY3Qua2V5cyhhKS5sZW5ndGg+MCl7Y29uc3Qgbz17dXNlR3JvdXBpbmc6ITEsLi4ucn07ci5wYWRUbz4wJiYoby5taW5pbXVtSW50ZWdlckRpZ2l0cz1yLnBhZFRvKSx0aGlzLmluZj1HbyhlLG8pfX1mb3JtYXQoZSl7aWYodGhpcy5pbmYpe2NvbnN0IG49dGhpcy5mbG9vcj9NYXRoLmZsb29yKGUpOmU7cmV0dXJuIHRoaXMuaW5mLmZvcm1hdChuKX1lbHNle2NvbnN0IG49dGhpcy5mbG9vcj9NYXRoLmZsb29yKGUpOkt0KGUsMyk7cmV0dXJuIEkobix0aGlzLnBhZFRvKX19fWNsYXNzIHN1e2NvbnN0cnVjdG9yKGUsbixyKXt0aGlzLm9wdHM9cix0aGlzLm9yaWdpbmFsWm9uZT12b2lkIDA7bGV0IHM7aWYodGhpcy5vcHRzLnRpbWVab25lKXRoaXMuZHQ9ZTtlbHNlIGlmKGUuem9uZS50eXBlPT09ImZpeGVkIil7Y29uc3QgYT0tMSooZS5vZmZzZXQvNjApLG89YT49MD9gRXRjL0dNVCske2F9YDpgRXRjL0dNVCR7YX1gO2Uub2Zmc2V0IT09MCYmSi5jcmVhdGUobykudmFsaWQ/KHM9byx0aGlzLmR0PWUpOihzPSJVVEMiLHRoaXMuZHQ9ZS5vZmZzZXQ9PT0wP2U6ZS5zZXRab25lKCJVVEMiKS5wbHVzKHttaW51dGVzOmUub2Zmc2V0fSksdGhpcy5vcmlnaW5hbFpvbmU9ZS56b25lKX1lbHNlIGUuem9uZS50eXBlPT09InN5c3RlbSI/dGhpcy5kdD1lOmUuem9uZS50eXBlPT09ImlhbmEiPyh0aGlzLmR0PWUscz1lLnpvbmUubmFtZSk6KHM9IlVUQyIsdGhpcy5kdD1lLnNldFpvbmUoIlVUQyIpLnBsdXMoe21pbnV0ZXM6ZS5vZmZzZXR9KSx0aGlzLm9yaWdpbmFsWm9uZT1lLnpvbmUpO2NvbnN0IGk9ey4uLnRoaXMub3B0c307aS50aW1lWm9uZT1pLnRpbWVab25lfHxzLHRoaXMuZHRmPVB0KG4saSl9Zm9ybWF0KCl7cmV0dXJuIHRoaXMub3JpZ2luYWxab25lP3RoaXMuZm9ybWF0VG9QYXJ0cygpLm1hcCgoe3ZhbHVlOmV9KT0+ZSkuam9pbigiIik6dGhpcy5kdGYuZm9ybWF0KHRoaXMuZHQudG9KU0RhdGUoKSl9Zm9ybWF0VG9QYXJ0cygpe2NvbnN0IGU9dGhpcy5kdGYuZm9ybWF0VG9QYXJ0cyh0aGlzLmR0LnRvSlNEYXRlKCkpO3JldHVybiB0aGlzLm9yaWdpbmFsWm9uZT9lLm1hcChuPT57aWYobi50eXBlPT09InRpbWVab25lTmFtZSIpe2NvbnN0IHI9dGhpcy5vcmlnaW5hbFpvbmUub2Zmc2V0TmFtZSh0aGlzLmR0LnRzLHtsb2NhbGU6dGhpcy5kdC5sb2NhbGUsZm9ybWF0OnRoaXMub3B0cy50aW1lWm9uZU5hbWV9KTtyZXR1cm57Li4ubix2YWx1ZTpyfX1lbHNlIHJldHVybiBufSk6ZX1yZXNvbHZlZE9wdGlvbnMoKXtyZXR1cm4gdGhpcy5kdGYucmVzb2x2ZWRPcHRpb25zKCl9fWNsYXNzIGl1e2NvbnN0cnVjdG9yKGUsbixyKXt0aGlzLm9wdHM9e3N0eWxlOiJsb25nIiwuLi5yfSwhbiYmQXIoKSYmKHRoaXMucnRmPUpvKGUscikpfWZvcm1hdChlLG4pe3JldHVybiB0aGlzLnJ0Zj90aGlzLnJ0Zi5mb3JtYXQoZSxuKTpJdShuLGUsdGhpcy5vcHRzLm51bWVyaWMsdGhpcy5vcHRzLnN0eWxlIT09ImxvbmciKX1mb3JtYXRUb1BhcnRzKGUsbil7cmV0dXJuIHRoaXMucnRmP3RoaXMucnRmLmZvcm1hdFRvUGFydHMoZSxuKTpbXX19Y29uc3QgYXU9e2ZpcnN0RGF5OjEsbWluaW1hbERheXM6NCx3ZWVrZW5kOls2LDddfTtjbGFzcyBUe3N0YXRpYyBmcm9tT3B0cyhlKXtyZXR1cm4gVC5jcmVhdGUoZS5sb2NhbGUsZS5udW1iZXJpbmdTeXN0ZW0sZS5vdXRwdXRDYWxlbmRhcixlLndlZWtTZXR0aW5ncyxlLmRlZmF1bHRUb0VOKX1zdGF0aWMgY3JlYXRlKGUsbixyLHMsaT0hMSl7Y29uc3QgYT1lfHxiLmRlZmF1bHRMb2NhbGUsbz1hfHwoaT8iZW4tVVMiOkJvKCkpLHU9bnx8Yi5kZWZhdWx0TnVtYmVyaW5nU3lzdGVtLGw9cnx8Yi5kZWZhdWx0T3V0cHV0Q2FsZW5kYXIsYz1CdChzKXx8Yi5kZWZhdWx0V2Vla1NldHRpbmdzO3JldHVybiBuZXcgVChvLHUsbCxjLGEpfXN0YXRpYyByZXNldENhY2hlKCl7emU9bnVsbCxVdD17fSxxdD17fSxqdD17fX1zdGF0aWMgZnJvbU9iamVjdCh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sb3V0cHV0Q2FsZW5kYXI6cix3ZWVrU2V0dGluZ3M6c309e30pe3JldHVybiBULmNyZWF0ZShlLG4scixzKX1jb25zdHJ1Y3RvcihlLG4scixzLGkpe2NvbnN0W2Esbyx1XT1LbyhlKTt0aGlzLmxvY2FsZT1hLHRoaXMubnVtYmVyaW5nU3lzdGVtPW58fG98fG51bGwsdGhpcy5vdXRwdXRDYWxlbmRhcj1yfHx1fHxudWxsLHRoaXMud2Vla1NldHRpbmdzPXMsdGhpcy5pbnRsPVhvKHRoaXMubG9jYWxlLHRoaXMubnVtYmVyaW5nU3lzdGVtLHRoaXMub3V0cHV0Q2FsZW5kYXIpLHRoaXMud2Vla2RheXNDYWNoZT17Zm9ybWF0Ont9LHN0YW5kYWxvbmU6e319LHRoaXMubW9udGhzQ2FjaGU9e2Zvcm1hdDp7fSxzdGFuZGFsb25lOnt9fSx0aGlzLm1lcmlkaWVtQ2FjaGU9bnVsbCx0aGlzLmVyYUNhY2hlPXt9LHRoaXMuc3BlY2lmaWVkTG9jYWxlPWksdGhpcy5mYXN0TnVtYmVyc0NhY2hlZD1udWxsfWdldCBmYXN0TnVtYmVycygpe3JldHVybiB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkPT1udWxsJiYodGhpcy5mYXN0TnVtYmVyc0NhY2hlZD1udSh0aGlzKSksdGhpcy5mYXN0TnVtYmVyc0NhY2hlZH1saXN0aW5nTW9kZSgpe2NvbnN0IGU9dGhpcy5pc0VuZ2xpc2goKSxuPSh0aGlzLm51bWJlcmluZ1N5c3RlbT09PW51bGx8fHRoaXMubnVtYmVyaW5nU3lzdGVtPT09ImxhdG4iKSYmKHRoaXMub3V0cHV0Q2FsZW5kYXI9PT1udWxsfHx0aGlzLm91dHB1dENhbGVuZGFyPT09ImdyZWdvcnkiKTtyZXR1cm4gZSYmbj8iZW4iOiJpbnRsIn1jbG9uZShlKXtyZXR1cm4hZXx8T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkubGVuZ3RoPT09MD90aGlzOlQuY3JlYXRlKGUubG9jYWxlfHx0aGlzLnNwZWNpZmllZExvY2FsZSxlLm51bWJlcmluZ1N5c3RlbXx8dGhpcy5udW1iZXJpbmdTeXN0ZW0sZS5vdXRwdXRDYWxlbmRhcnx8dGhpcy5vdXRwdXRDYWxlbmRhcixCdChlLndlZWtTZXR0aW5ncyl8fHRoaXMud2Vla1NldHRpbmdzLGUuZGVmYXVsdFRvRU58fCExKX1yZWRlZmF1bHRUb0VOKGU9e30pe3JldHVybiB0aGlzLmNsb25lKHsuLi5lLGRlZmF1bHRUb0VOOiEwfSl9cmVkZWZhdWx0VG9TeXN0ZW0oZT17fSl7cmV0dXJuIHRoaXMuY2xvbmUoey4uLmUsZGVmYXVsdFRvRU46ITF9KX1tb250aHMoZSxuPSExKXtyZXR1cm4gbHQodGhpcyxlLFpyLCgpPT57Y29uc3Qgcj1uP3ttb250aDplLGRheToibnVtZXJpYyJ9Onttb250aDplfSxzPW4/ImZvcm1hdCI6InN0YW5kYWxvbmUiO3JldHVybiB0aGlzLm1vbnRoc0NhY2hlW3NdW2VdfHwodGhpcy5tb250aHNDYWNoZVtzXVtlXT1ldShpPT50aGlzLmV4dHJhY3QoaSxyLCJtb250aCIpKSksdGhpcy5tb250aHNDYWNoZVtzXVtlXX0pfXdlZWtkYXlzKGUsbj0hMSl7cmV0dXJuIGx0KHRoaXMsZSxQciwoKT0+e2NvbnN0IHI9bj97d2Vla2RheTplLHllYXI6Im51bWVyaWMiLG1vbnRoOiJsb25nIixkYXk6Im51bWVyaWMifTp7d2Vla2RheTplfSxzPW4/ImZvcm1hdCI6InN0YW5kYWxvbmUiO3JldHVybiB0aGlzLndlZWtkYXlzQ2FjaGVbc11bZV18fCh0aGlzLndlZWtkYXlzQ2FjaGVbc11bZV09dHUoaT0+dGhpcy5leHRyYWN0KGksciwid2Vla2RheSIpKSksdGhpcy53ZWVrZGF5c0NhY2hlW3NdW2VdfSl9bWVyaWRpZW1zKCl7cmV0dXJuIGx0KHRoaXMsdm9pZCAwLCgpPT5xciwoKT0+e2lmKCF0aGlzLm1lcmlkaWVtQ2FjaGUpe2NvbnN0IGU9e2hvdXI6Im51bWVyaWMiLGhvdXJDeWNsZToiaDEyIn07dGhpcy5tZXJpZGllbUNhY2hlPVtnLnV0YygyMDE2LDExLDEzLDkpLGcudXRjKDIwMTYsMTEsMTMsMTkpXS5tYXAobj0+dGhpcy5leHRyYWN0KG4sZSwiZGF5cGVyaW9kIikpfXJldHVybiB0aGlzLm1lcmlkaWVtQ2FjaGV9KX1lcmFzKGUpe3JldHVybiBsdCh0aGlzLGUsanIsKCk9Pntjb25zdCBuPXtlcmE6ZX07cmV0dXJuIHRoaXMuZXJhQ2FjaGVbZV18fCh0aGlzLmVyYUNhY2hlW2VdPVtnLnV0YygtNDAsMSwxKSxnLnV0YygyMDE3LDEsMSldLm1hcChyPT50aGlzLmV4dHJhY3QocixuLCJlcmEiKSkpLHRoaXMuZXJhQ2FjaGVbZV19KX1leHRyYWN0KGUsbixyKXtjb25zdCBzPXRoaXMuZHRGb3JtYXR0ZXIoZSxuKSxpPXMuZm9ybWF0VG9QYXJ0cygpLGE9aS5maW5kKG89Pm8udHlwZS50b0xvd2VyQ2FzZSgpPT09cik7cmV0dXJuIGE/YS52YWx1ZTpudWxsfW51bWJlckZvcm1hdHRlcihlPXt9KXtyZXR1cm4gbmV3IHJ1KHRoaXMuaW50bCxlLmZvcmNlU2ltcGxlfHx0aGlzLmZhc3ROdW1iZXJzLGUpfWR0Rm9ybWF0dGVyKGUsbj17fSl7cmV0dXJuIG5ldyBzdShlLHRoaXMuaW50bCxuKX1yZWxGb3JtYXR0ZXIoZT17fSl7cmV0dXJuIG5ldyBpdSh0aGlzLmludGwsdGhpcy5pc0VuZ2xpc2goKSxlKX1saXN0Rm9ybWF0dGVyKGU9e30pe3JldHVybiBZbyh0aGlzLmludGwsZSl9aXNFbmdsaXNoKCl7cmV0dXJuIHRoaXMubG9jYWxlPT09ImVuInx8dGhpcy5sb2NhbGUudG9Mb3dlckNhc2UoKT09PSJlbi11cyJ8fG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHRoaXMuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlLnN0YXJ0c1dpdGgoImVuLXVzIil9Z2V0V2Vla1NldHRpbmdzKCl7cmV0dXJuIHRoaXMud2Vla1NldHRpbmdzP3RoaXMud2Vla1NldHRpbmdzOlZyKCk/UW8odGhpcy5sb2NhbGUpOmF1fWdldFN0YXJ0T2ZXZWVrKCl7cmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkuZmlyc3REYXl9Z2V0TWluRGF5c0luRmlyc3RXZWVrKCl7cmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkubWluaW1hbERheXN9Z2V0V2Vla2VuZERheXMoKXtyZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS53ZWVrZW5kfWVxdWFscyhlKXtyZXR1cm4gdGhpcy5sb2NhbGU9PT1lLmxvY2FsZSYmdGhpcy5udW1iZXJpbmdTeXN0ZW09PT1lLm51bWJlcmluZ1N5c3RlbSYmdGhpcy5vdXRwdXRDYWxlbmRhcj09PWUub3V0cHV0Q2FsZW5kYXJ9fWxldCBIdD1udWxsO2NsYXNzIHggZXh0ZW5kcyBfZXtzdGF0aWMgZ2V0IHV0Y0luc3RhbmNlKCl7cmV0dXJuIEh0PT09bnVsbCYmKEh0PW5ldyB4KDApKSxIdH1zdGF0aWMgaW5zdGFuY2UoZSl7cmV0dXJuIGU9PT0wP3gudXRjSW5zdGFuY2U6bmV3IHgoZSl9c3RhdGljIHBhcnNlU3BlY2lmaWVyKGUpe2lmKGUpe2NvbnN0IG49ZS5tYXRjaCgvXnV0Yyg/OihbKy1dXGR7MSwyfSkoPzo6KFxkezJ9KSk/KT8kL2kpO2lmKG4pcmV0dXJuIG5ldyB4KG10KG5bMV0sblsyXSkpfXJldHVybiBudWxsfWNvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5maXhlZD1lfWdldCB0eXBlKCl7cmV0dXJuImZpeGVkIn1nZXQgbmFtZSgpe3JldHVybiB0aGlzLmZpeGVkPT09MD8iVVRDIjpgVVRDJHtSZSh0aGlzLmZpeGVkLCJuYXJyb3ciKX1gfWdldCBpYW5hTmFtZSgpe3JldHVybiB0aGlzLmZpeGVkPT09MD8iRXRjL1VUQyI6YEV0Yy9HTVQke1JlKC10aGlzLmZpeGVkLCJuYXJyb3ciKX1gfW9mZnNldE5hbWUoKXtyZXR1cm4gdGhpcy5uYW1lfWZvcm1hdE9mZnNldChlLG4pe3JldHVybiBSZSh0aGlzLmZpeGVkLG4pfWdldCBpc1VuaXZlcnNhbCgpe3JldHVybiEwfW9mZnNldCgpe3JldHVybiB0aGlzLmZpeGVkfWVxdWFscyhlKXtyZXR1cm4gZS50eXBlPT09ImZpeGVkIiYmZS5maXhlZD09PXRoaXMuZml4ZWR9Z2V0IGlzVmFsaWQoKXtyZXR1cm4hMH19Y2xhc3Mgb3UgZXh0ZW5kcyBfZXtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuem9uZU5hbWU9ZX1nZXQgdHlwZSgpe3JldHVybiJpbnZhbGlkIn1nZXQgbmFtZSgpe3JldHVybiB0aGlzLnpvbmVOYW1lfWdldCBpc1VuaXZlcnNhbCgpe3JldHVybiExfW9mZnNldE5hbWUoKXtyZXR1cm4gbnVsbH1mb3JtYXRPZmZzZXQoKXtyZXR1cm4iIn1vZmZzZXQoKXtyZXR1cm4gTmFOfWVxdWFscygpe3JldHVybiExfWdldCBpc1ZhbGlkKCl7cmV0dXJuITF9fWZ1bmN0aW9uIHNlKHQsZSl7aWYoeSh0KXx8dD09PW51bGwpcmV0dXJuIGU7aWYodCBpbnN0YW5jZW9mIF9lKXJldHVybiB0O2lmKGN1KHQpKXtjb25zdCBuPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gbj09PSJkZWZhdWx0Ij9lOm49PT0ibG9jYWwifHxuPT09InN5c3RlbSI/YXQuaW5zdGFuY2U6bj09PSJ1dGMifHxuPT09ImdtdCI/eC51dGNJbnN0YW5jZTp4LnBhcnNlU3BlY2lmaWVyKG4pfHxKLmNyZWF0ZSh0KX1lbHNlIHJldHVybiBkZSh0KT94Lmluc3RhbmNlKHQpOnR5cGVvZiB0PT0ib2JqZWN0IiYmIm9mZnNldCJpbiB0JiZ0eXBlb2YgdC5vZmZzZXQ9PSJmdW5jdGlvbiI/dDpuZXcgb3UodCl9bGV0IGdyPSgpPT5EYXRlLm5vdygpLHByPSJzeXN0ZW0iLHdyPW51bGwsdnI9bnVsbCxPcj1udWxsLFRyPTYwLFNyLGtyPW51bGw7Y2xhc3MgYntzdGF0aWMgZ2V0IG5vdygpe3JldHVybiBncn1zdGF0aWMgc2V0IG5vdyhlKXtncj1lfXN0YXRpYyBzZXQgZGVmYXVsdFpvbmUoZSl7cHI9ZX1zdGF0aWMgZ2V0IGRlZmF1bHRab25lKCl7cmV0dXJuIHNlKHByLGF0Lmluc3RhbmNlKX1zdGF0aWMgZ2V0IGRlZmF1bHRMb2NhbGUoKXtyZXR1cm4gd3J9c3RhdGljIHNldCBkZWZhdWx0TG9jYWxlKGUpe3dyPWV9c3RhdGljIGdldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKCl7cmV0dXJuIHZyfXN0YXRpYyBzZXQgZGVmYXVsdE51bWJlcmluZ1N5c3RlbShlKXt2cj1lfXN0YXRpYyBnZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKCl7cmV0dXJuIE9yfXN0YXRpYyBzZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKGUpe09yPWV9c3RhdGljIGdldCBkZWZhdWx0V2Vla1NldHRpbmdzKCl7cmV0dXJuIGtyfXN0YXRpYyBzZXQgZGVmYXVsdFdlZWtTZXR0aW5ncyhlKXtrcj1CdChlKX1zdGF0aWMgZ2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcigpe3JldHVybiBUcn1zdGF0aWMgc2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcihlKXtUcj1lJTEwMH1zdGF0aWMgZ2V0IHRocm93T25JbnZhbGlkKCl7cmV0dXJuIFNyfXN0YXRpYyBzZXQgdGhyb3dPbkludmFsaWQoZSl7U3I9ZX1zdGF0aWMgcmVzZXRDYWNoZXMoKXtULnJlc2V0Q2FjaGUoKSxKLnJlc2V0Q2FjaGUoKX19Y2xhc3MgJHtjb25zdHJ1Y3RvcihlLG4pe3RoaXMucmVhc29uPWUsdGhpcy5leHBsYW5hdGlvbj1ufXRvTWVzc2FnZSgpe3JldHVybiB0aGlzLmV4cGxhbmF0aW9uP2Ake3RoaXMucmVhc29ufTogJHt0aGlzLmV4cGxhbmF0aW9ufWA6dGhpcy5yZWFzb259fWNvbnN0IGJyPVswLDMxLDU5LDkwLDEyMCwxNTEsMTgxLDIxMiwyNDMsMjczLDMwNCwzMzRdLElyPVswLDMxLDYwLDkxLDEyMSwxNTIsMTgyLDIxMywyNDQsMjc0LDMwNSwzMzVdO2Z1bmN0aW9uIFYodCxlKXtyZXR1cm4gbmV3ICQoInVuaXQgb3V0IG9mIHJhbmdlIixgeW91IHNwZWNpZmllZCAke2V9IChvZiB0eXBlICR7dHlwZW9mIGV9KSBhcyBhICR7dH0sIHdoaWNoIGlzIGludmFsaWRgKX1mdW5jdGlvbiBZdCh0LGUsbil7Y29uc3Qgcj1uZXcgRGF0ZShEYXRlLlVUQyh0LGUtMSxuKSk7dDwxMDAmJnQ+PTAmJnIuc2V0VVRDRnVsbFllYXIoci5nZXRVVENGdWxsWWVhcigpLTE5MDApO2NvbnN0IHM9ci5nZXRVVENEYXkoKTtyZXR1cm4gcz09PTA/NzpzfWZ1bmN0aW9uIEVyKHQsZSxuKXtyZXR1cm4gbisoJGUodCk/SXI6YnIpW2UtMV19ZnVuY3Rpb24gTnIodCxlKXtjb25zdCBuPSRlKHQpP0lyOmJyLHI9bi5maW5kSW5kZXgoaT0+aTxlKSxzPWUtbltyXTtyZXR1cm57bW9udGg6cisxLGRheTpzfX1mdW5jdGlvbiBHdCh0LGUpe3JldHVybih0LWUrNyklNysxfWZ1bmN0aW9uIGN0KHQsZT00LG49MSl7Y29uc3R7eWVhcjpyLG1vbnRoOnMsZGF5Oml9PXQsYT1FcihyLHMsaSksbz1HdChZdChyLHMsaSksbik7bGV0IHU9TWF0aC5mbG9vcigoYS1vKzE0LWUpLzcpLGw7cmV0dXJuIHU8MT8obD1yLTEsdT1aZShsLGUsbikpOnU+WmUocixlLG4pPyhsPXIrMSx1PTEpOmw9cix7d2Vla1llYXI6bCx3ZWVrTnVtYmVyOnUsd2Vla2RheTpvLC4uLmd0KHQpfX1mdW5jdGlvbiBNcih0LGU9NCxuPTEpe2NvbnN0e3dlZWtZZWFyOnIsd2Vla051bWJlcjpzLHdlZWtkYXk6aX09dCxhPUd0KFl0KHIsMSxlKSxuKSxvPWJlKHIpO2xldCB1PXMqNytpLWEtNytlLGw7dTwxPyhsPXItMSx1Kz1iZShsKSk6dT5vPyhsPXIrMSx1LT1iZShyKSk6bD1yO2NvbnN0e21vbnRoOmMsZGF5OmR9PU5yKGwsdSk7cmV0dXJue3llYXI6bCxtb250aDpjLGRheTpkLC4uLmd0KHQpfX1mdW5jdGlvbiBKdCh0KXtjb25zdHt5ZWFyOmUsbW9udGg6bixkYXk6cn09dCxzPUVyKGUsbixyKTtyZXR1cm57eWVhcjplLG9yZGluYWw6cywuLi5ndCh0KX19ZnVuY3Rpb24geHIodCl7Y29uc3R7eWVhcjplLG9yZGluYWw6bn09dCx7bW9udGg6cixkYXk6c309TnIoZSxuKTtyZXR1cm57eWVhcjplLG1vbnRoOnIsZGF5OnMsLi4uZ3QodCl9fWZ1bmN0aW9uIERyKHQsZSl7aWYoIXkodC5sb2NhbFdlZWtkYXkpfHwheSh0LmxvY2FsV2Vla051bWJlcil8fCF5KHQubG9jYWxXZWVrWWVhcikpe2lmKCF5KHQud2Vla2RheSl8fCF5KHQud2Vla051bWJlcil8fCF5KHQud2Vla1llYXIpKXRocm93IG5ldyBTZSgiQ2Fubm90IG1peCBsb2NhbGUtYmFzZWQgd2VlayBmaWVsZHMgd2l0aCBJU08tYmFzZWQgd2VlayBmaWVsZHMiKTtyZXR1cm4geSh0LmxvY2FsV2Vla2RheSl8fCh0LndlZWtkYXk9dC5sb2NhbFdlZWtkYXkpLHkodC5sb2NhbFdlZWtOdW1iZXIpfHwodC53ZWVrTnVtYmVyPXQubG9jYWxXZWVrTnVtYmVyKSx5KHQubG9jYWxXZWVrWWVhcil8fCh0LndlZWtZZWFyPXQubG9jYWxXZWVrWWVhciksZGVsZXRlIHQubG9jYWxXZWVrZGF5LGRlbGV0ZSB0LmxvY2FsV2Vla051bWJlcixkZWxldGUgdC5sb2NhbFdlZWtZZWFyLHttaW5EYXlzSW5GaXJzdFdlZWs6ZS5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxzdGFydE9mV2VlazplLmdldFN0YXJ0T2ZXZWVrKCl9fWVsc2UgcmV0dXJue21pbkRheXNJbkZpcnN0V2Vlazo0LHN0YXJ0T2ZXZWVrOjF9fWZ1bmN0aW9uIHV1KHQsZT00LG49MSl7Y29uc3Qgcj1mdCh0LndlZWtZZWFyKSxzPVcodC53ZWVrTnVtYmVyLDEsWmUodC53ZWVrWWVhcixlLG4pKSxpPVcodC53ZWVrZGF5LDEsNyk7cmV0dXJuIHI/cz9pPyExOlYoIndlZWtkYXkiLHQud2Vla2RheSk6Vigid2VlayIsdC53ZWVrTnVtYmVyKTpWKCJ3ZWVrWWVhciIsdC53ZWVrWWVhcil9ZnVuY3Rpb24gbHUodCl7Y29uc3QgZT1mdCh0LnllYXIpLG49Vyh0Lm9yZGluYWwsMSxiZSh0LnllYXIpKTtyZXR1cm4gZT9uPyExOlYoIm9yZGluYWwiLHQub3JkaW5hbCk6VigieWVhciIsdC55ZWFyKX1mdW5jdGlvbiBDcih0KXtjb25zdCBlPWZ0KHQueWVhciksbj1XKHQubW9udGgsMSwxMikscj1XKHQuZGF5LDEsZHQodC55ZWFyLHQubW9udGgpKTtyZXR1cm4gZT9uP3I/ITE6VigiZGF5Iix0LmRheSk6VigibW9udGgiLHQubW9udGgpOlYoInllYXIiLHQueWVhcil9ZnVuY3Rpb24gRnIodCl7Y29uc3R7aG91cjplLG1pbnV0ZTpuLHNlY29uZDpyLG1pbGxpc2Vjb25kOnN9PXQsaT1XKGUsMCwyMyl8fGU9PT0yNCYmbj09PTAmJnI9PT0wJiZzPT09MCxhPVcobiwwLDU5KSxvPVcociwwLDU5KSx1PVcocywwLDk5OSk7cmV0dXJuIGk/YT9vP3U/ITE6VigibWlsbGlzZWNvbmQiLHMpOlYoInNlY29uZCIscik6VigibWludXRlIixuKTpWKCJob3VyIixlKX1mdW5jdGlvbiB5KHQpe3JldHVybiB0eXBlb2YgdD4idSJ9ZnVuY3Rpb24gZGUodCl7cmV0dXJuIHR5cGVvZiB0PT0ibnVtYmVyIn1mdW5jdGlvbiBmdCh0KXtyZXR1cm4gdHlwZW9mIHQ9PSJudW1iZXIiJiZ0JTE9PT0wfWZ1bmN0aW9uIGN1KHQpe3JldHVybiB0eXBlb2YgdD09InN0cmluZyJ9ZnVuY3Rpb24gZnUodCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KT09PSJbb2JqZWN0IERhdGVdIn1mdW5jdGlvbiBBcigpe3RyeXtyZXR1cm4gdHlwZW9mIEludGw8InUiJiYhIUludGwuUmVsYXRpdmVUaW1lRm9ybWF0fWNhdGNoe3JldHVybiExfX1mdW5jdGlvbiBWcigpe3RyeXtyZXR1cm4gdHlwZW9mIEludGw8InUiJiYhIUludGwuTG9jYWxlJiYoIndlZWtJbmZvImluIEludGwuTG9jYWxlLnByb3RvdHlwZXx8ImdldFdlZWtJbmZvImluIEludGwuTG9jYWxlLnByb3RvdHlwZSl9Y2F0Y2h7cmV0dXJuITF9fWZ1bmN0aW9uIGR1KHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP3Q6W3RdfWZ1bmN0aW9uIFdyKHQsZSxuKXtpZih0Lmxlbmd0aCE9PTApcmV0dXJuIHQucmVkdWNlKChyLHMpPT57Y29uc3QgaT1bZShzKSxzXTtyZXR1cm4gciYmbihyWzBdLGlbMF0pPT09clswXT9yOml9LG51bGwpWzFdfWZ1bmN0aW9uIGh1KHQsZSl7cmV0dXJuIGUucmVkdWNlKChuLHIpPT4obltyXT10W3JdLG4pLHt9KX1mdW5jdGlvbiBrZSh0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX1mdW5jdGlvbiBCdCh0KXtpZih0PT1udWxsKXJldHVybiBudWxsO2lmKHR5cGVvZiB0IT0ib2JqZWN0Iil0aHJvdyBuZXcgRCgiV2VlayBzZXR0aW5ncyBtdXN0IGJlIGFuIG9iamVjdCIpO2lmKCFXKHQuZmlyc3REYXksMSw3KXx8IVcodC5taW5pbWFsRGF5cywxLDcpfHwhQXJyYXkuaXNBcnJheSh0LndlZWtlbmQpfHx0LndlZWtlbmQuc29tZShlPT4hVyhlLDEsNykpKXRocm93IG5ldyBEKCJJbnZhbGlkIHdlZWsgc2V0dGluZ3MiKTtyZXR1cm57Zmlyc3REYXk6dC5maXJzdERheSxtaW5pbWFsRGF5czp0Lm1pbmltYWxEYXlzLHdlZWtlbmQ6QXJyYXkuZnJvbSh0LndlZWtlbmQpfX1mdW5jdGlvbiBXKHQsZSxuKXtyZXR1cm4gZnQodCkmJnQ+PWUmJnQ8PW59ZnVuY3Rpb24gbXUodCxlKXtyZXR1cm4gdC1lKk1hdGguZmxvb3IodC9lKX1mdW5jdGlvbiBJKHQsZT0yKXtjb25zdCBuPXQ8MDtsZXQgcjtyZXR1cm4gbj9yPSItIisoIiIrLXQpLnBhZFN0YXJ0KGUsIjAiKTpyPSgiIit0KS5wYWRTdGFydChlLCIwIikscn1mdW5jdGlvbiBpZSh0KXtpZighKHkodCl8fHQ9PT1udWxsfHx0PT09IiIpKXJldHVybiBwYXJzZUludCh0LDEwKX1mdW5jdGlvbiBoZSh0KXtpZighKHkodCl8fHQ9PT1udWxsfHx0PT09IiIpKXJldHVybiBwYXJzZUZsb2F0KHQpfWZ1bmN0aW9uIFF0KHQpe2lmKCEoeSh0KXx8dD09PW51bGx8fHQ9PT0iIikpe2NvbnN0IGU9cGFyc2VGbG9hdCgiMC4iK3QpKjFlMztyZXR1cm4gTWF0aC5mbG9vcihlKX19ZnVuY3Rpb24gS3QodCxlLG49ITEpe2NvbnN0IHI9MTAqKmU7cmV0dXJuKG4/TWF0aC50cnVuYzpNYXRoLnJvdW5kKSh0KnIpL3J9ZnVuY3Rpb24gJGUodCl7cmV0dXJuIHQlND09PTAmJih0JTEwMCE9PTB8fHQlNDAwPT09MCl9ZnVuY3Rpb24gYmUodCl7cmV0dXJuICRlKHQpPzM2NjozNjV9ZnVuY3Rpb24gZHQodCxlKXtjb25zdCBuPW11KGUtMSwxMikrMSxyPXQrKGUtbikvMTI7cmV0dXJuIG49PT0yPyRlKHIpPzI5OjI4OlszMSxudWxsLDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXVtuLTFdfWZ1bmN0aW9uIGh0KHQpe2xldCBlPURhdGUuVVRDKHQueWVhcix0Lm1vbnRoLTEsdC5kYXksdC5ob3VyLHQubWludXRlLHQuc2Vjb25kLHQubWlsbGlzZWNvbmQpO3JldHVybiB0LnllYXI8MTAwJiZ0LnllYXI+PTAmJihlPW5ldyBEYXRlKGUpLGUuc2V0VVRDRnVsbFllYXIodC55ZWFyLHQubW9udGgtMSx0LmRheSkpLCtlfWZ1bmN0aW9uIExyKHQsZSxuKXtyZXR1cm4tR3QoWXQodCwxLGUpLG4pK2UtMX1mdW5jdGlvbiBaZSh0LGU9NCxuPTEpe2NvbnN0IHI9THIodCxlLG4pLHM9THIodCsxLGUsbik7cmV0dXJuKGJlKHQpLXIrcykvN31mdW5jdGlvbiBYdCh0KXtyZXR1cm4gdD45OT90OnQ+Yi50d29EaWdpdEN1dG9mZlllYXI/MTkwMCt0OjJlMyt0fWZ1bmN0aW9uIF9yKHQsZSxuLHI9bnVsbCl7Y29uc3Qgcz1uZXcgRGF0ZSh0KSxpPXtob3VyQ3ljbGU6ImgyMyIseWVhcjoibnVtZXJpYyIsbW9udGg6IjItZGlnaXQiLGRheToiMi1kaWdpdCIsaG91cjoiMi1kaWdpdCIsbWludXRlOiIyLWRpZ2l0In07ciYmKGkudGltZVpvbmU9cik7Y29uc3QgYT17dGltZVpvbmVOYW1lOmUsLi4uaX0sbz1uZXcgSW50bC5EYXRlVGltZUZvcm1hdChuLGEpLmZvcm1hdFRvUGFydHMocykuZmluZCh1PT51LnR5cGUudG9Mb3dlckNhc2UoKT09PSJ0aW1lem9uZW5hbWUiKTtyZXR1cm4gbz9vLnZhbHVlOm51bGx9ZnVuY3Rpb24gbXQodCxlKXtsZXQgbj1wYXJzZUludCh0LDEwKTtOdW1iZXIuaXNOYU4obikmJihuPTApO2NvbnN0IHI9cGFyc2VJbnQoZSwxMCl8fDAscz1uPDB8fE9iamVjdC5pcyhuLC0wKT8tcjpyO3JldHVybiBuKjYwK3N9ZnVuY3Rpb24genIodCl7Y29uc3QgZT1OdW1iZXIodCk7aWYodHlwZW9mIHQ9PSJib29sZWFuInx8dD09PSIifHxOdW1iZXIuaXNOYU4oZSkpdGhyb3cgbmV3IEQoYEludmFsaWQgdW5pdCB2YWx1ZSAke3R9YCk7cmV0dXJuIGV9ZnVuY3Rpb24geXQodCxlKXtjb25zdCBuPXt9O2Zvcihjb25zdCByIGluIHQpaWYoa2UodCxyKSl7Y29uc3Qgcz10W3JdO2lmKHM9PW51bGwpY29udGludWU7bltlKHIpXT16cihzKX1yZXR1cm4gbn1mdW5jdGlvbiBSZSh0LGUpe2NvbnN0IG49TWF0aC50cnVuYyhNYXRoLmFicyh0LzYwKSkscj1NYXRoLnRydW5jKE1hdGguYWJzKHQlNjApKSxzPXQ+PTA/IisiOiItIjtzd2l0Y2goZSl7Y2FzZSJzaG9ydCI6cmV0dXJuYCR7c30ke0kobiwyKX06JHtJKHIsMil9YDtjYXNlIm5hcnJvdyI6cmV0dXJuYCR7c30ke259JHtyPjA/YDoke3J9YDoiIn1gO2Nhc2UidGVjaGllIjpyZXR1cm5gJHtzfSR7SShuLDIpfSR7SShyLDIpfWA7ZGVmYXVsdDp0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVmFsdWUgZm9ybWF0ICR7ZX0gaXMgb3V0IG9mIHJhbmdlIGZvciBwcm9wZXJ0eSBmb3JtYXRgKX19ZnVuY3Rpb24gZ3QodCl7cmV0dXJuIGh1KHQsWyJob3VyIiwibWludXRlIiwic2Vjb25kIiwibWlsbGlzZWNvbmQiXSl9Y29uc3QgeXU9WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLCRyPVsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIl0sZ3U9WyJKIiwiRiIsIk0iLCJBIiwiTSIsIkoiLCJKIiwiQSIsIlMiLCJPIiwiTiIsIkQiXTtmdW5jdGlvbiBacih0KXtzd2l0Y2godCl7Y2FzZSJuYXJyb3ciOnJldHVyblsuLi5ndV07Y2FzZSJzaG9ydCI6cmV0dXJuWy4uLiRyXTtjYXNlImxvbmciOnJldHVyblsuLi55dV07Y2FzZSJudW1lcmljIjpyZXR1cm5bIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCIxMiJdO2Nhc2UiMi1kaWdpdCI6cmV0dXJuWyIwMSIsIjAyIiwiMDMiLCIwNCIsIjA1IiwiMDYiLCIwNyIsIjA4IiwiMDkiLCIxMCIsIjExIiwiMTIiXTtkZWZhdWx0OnJldHVybiBudWxsfX1jb25zdCBScj1bIk1vbmRheSIsIlR1ZXNkYXkiLCJXZWRuZXNkYXkiLCJUaHVyc2RheSIsIkZyaWRheSIsIlNhdHVyZGF5IiwiU3VuZGF5Il0sVXI9WyJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiLCJTdW4iXSxwdT1bIk0iLCJUIiwiVyIsIlQiLCJGIiwiUyIsIlMiXTtmdW5jdGlvbiBQcih0KXtzd2l0Y2godCl7Y2FzZSJuYXJyb3ciOnJldHVyblsuLi5wdV07Y2FzZSJzaG9ydCI6cmV0dXJuWy4uLlVyXTtjYXNlImxvbmciOnJldHVyblsuLi5Scl07Y2FzZSJudW1lcmljIjpyZXR1cm5bIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciXTtkZWZhdWx0OnJldHVybiBudWxsfX1jb25zdCBxcj1bIkFNIiwiUE0iXSx3dT1bIkJlZm9yZSBDaHJpc3QiLCJBbm5vIERvbWluaSJdLHZ1PVsiQkMiLCJBRCJdLE91PVsiQiIsIkEiXTtmdW5jdGlvbiBqcih0KXtzd2l0Y2godCl7Y2FzZSJuYXJyb3ciOnJldHVyblsuLi5PdV07Y2FzZSJzaG9ydCI6cmV0dXJuWy4uLnZ1XTtjYXNlImxvbmciOnJldHVyblsuLi53dV07ZGVmYXVsdDpyZXR1cm4gbnVsbH19ZnVuY3Rpb24gVHUodCl7cmV0dXJuIHFyW3QuaG91cjwxMj8wOjFdfWZ1bmN0aW9uIFN1KHQsZSl7cmV0dXJuIFByKGUpW3Qud2Vla2RheS0xXX1mdW5jdGlvbiBrdSh0LGUpe3JldHVybiBacihlKVt0Lm1vbnRoLTFdfWZ1bmN0aW9uIGJ1KHQsZSl7cmV0dXJuIGpyKGUpW3QueWVhcjwwPzA6MV19ZnVuY3Rpb24gSXUodCxlLG49ImFsd2F5cyIscj0hMSl7Y29uc3Qgcz17eWVhcnM6WyJ5ZWFyIiwieXIuIl0scXVhcnRlcnM6WyJxdWFydGVyIiwicXRyLiJdLG1vbnRoczpbIm1vbnRoIiwibW8uIl0sd2Vla3M6WyJ3ZWVrIiwid2suIl0sZGF5czpbImRheSIsImRheSIsImRheXMiXSxob3VyczpbImhvdXIiLCJoci4iXSxtaW51dGVzOlsibWludXRlIiwibWluLiJdLHNlY29uZHM6WyJzZWNvbmQiLCJzZWMuIl19LGk9WyJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIl0uaW5kZXhPZih0KT09PS0xO2lmKG49PT0iYXV0byImJmkpe2NvbnN0IGQ9dD09PSJkYXlzIjtzd2l0Y2goZSl7Y2FzZSAxOnJldHVybiBkPyJ0b21vcnJvdyI6YG5leHQgJHtzW3RdWzBdfWA7Y2FzZS0xOnJldHVybiBkPyJ5ZXN0ZXJkYXkiOmBsYXN0ICR7c1t0XVswXX1gO2Nhc2UgMDpyZXR1cm4gZD8idG9kYXkiOmB0aGlzICR7c1t0XVswXX1gfX1jb25zdCBhPU9iamVjdC5pcyhlLC0wKXx8ZTwwLG89TWF0aC5hYnMoZSksdT1vPT09MSxsPXNbdF0sYz1yP3U/bFsxXTpsWzJdfHxsWzFdOnU/c1t0XVswXTp0O3JldHVybiBhP2Ake299ICR7Y30gYWdvYDpgaW4gJHtvfSAke2N9YH1mdW5jdGlvbiBIcih0LGUpe2xldCBuPSIiO2Zvcihjb25zdCByIG9mIHQpci5saXRlcmFsP24rPXIudmFsOm4rPWUoci52YWwpO3JldHVybiBufWNvbnN0IEV1PXtEOml0LEREOkpuLERERDpCbixEREREOlFuLHQ6S24sdHQ6WG4sdHR0OmVyLHR0dHQ6dHIsVDpucixUVDpycixUVFQ6c3IsVFRUVDppcixmOmFyLGZmOnVyLGZmZjpjcixmZmZmOmRyLEY6b3IsRkY6bHIsRkZGOmZyLEZGRkY6aHJ9O2NsYXNzIE57c3RhdGljIGNyZWF0ZShlLG49e30pe3JldHVybiBuZXcgTihlLG4pfXN0YXRpYyBwYXJzZUZvcm1hdChlKXtsZXQgbj1udWxsLHI9IiIscz0hMTtjb25zdCBpPVtdO2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKXtjb25zdCBvPWUuY2hhckF0KGEpO289PT0iJyI/KHIubGVuZ3RoPjAmJmkucHVzaCh7bGl0ZXJhbDpzfHwvXlxzKyQvLnRlc3QociksdmFsOnJ9KSxuPW51bGwscj0iIixzPSFzKTpzfHxvPT09bj9yKz1vOihyLmxlbmd0aD4wJiZpLnB1c2goe2xpdGVyYWw6L15ccyskLy50ZXN0KHIpLHZhbDpyfSkscj1vLG49byl9cmV0dXJuIHIubGVuZ3RoPjAmJmkucHVzaCh7bGl0ZXJhbDpzfHwvXlxzKyQvLnRlc3QociksdmFsOnJ9KSxpfXN0YXRpYyBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKGUpe3JldHVybiBFdVtlXX1jb25zdHJ1Y3RvcihlLG4pe3RoaXMub3B0cz1uLHRoaXMubG9jPWUsdGhpcy5zeXN0ZW1Mb2M9bnVsbH1mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChlLG4pe3JldHVybiB0aGlzLnN5c3RlbUxvYz09PW51bGwmJih0aGlzLnN5c3RlbUxvYz10aGlzLmxvYy5yZWRlZmF1bHRUb1N5c3RlbSgpKSx0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihlLHsuLi50aGlzLm9wdHMsLi4ubn0pLmZvcm1hdCgpfWR0Rm9ybWF0dGVyKGUsbj17fSl7cmV0dXJuIHRoaXMubG9jLmR0Rm9ybWF0dGVyKGUsey4uLnRoaXMub3B0cywuLi5ufSl9Zm9ybWF0RGF0ZVRpbWUoZSxuKXtyZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihlLG4pLmZvcm1hdCgpfWZvcm1hdERhdGVUaW1lUGFydHMoZSxuKXtyZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihlLG4pLmZvcm1hdFRvUGFydHMoKX1mb3JtYXRJbnRlcnZhbChlLG4pe3JldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGUuc3RhcnQsbikuZHRmLmZvcm1hdFJhbmdlKGUuc3RhcnQudG9KU0RhdGUoKSxlLmVuZC50b0pTRGF0ZSgpKX1yZXNvbHZlZE9wdGlvbnMoZSxuKXtyZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihlLG4pLnJlc29sdmVkT3B0aW9ucygpfW51bShlLG49MCl7aWYodGhpcy5vcHRzLmZvcmNlU2ltcGxlKXJldHVybiBJKGUsbik7Y29uc3Qgcj17Li4udGhpcy5vcHRzfTtyZXR1cm4gbj4wJiYoci5wYWRUbz1uKSx0aGlzLmxvYy5udW1iZXJGb3JtYXR0ZXIocikuZm9ybWF0KGUpfWZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhlLG4pe2NvbnN0IHI9dGhpcy5sb2MubGlzdGluZ01vZGUoKT09PSJlbiIscz10aGlzLmxvYy5vdXRwdXRDYWxlbmRhciYmdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIhPT0iZ3JlZ29yeSIsaT0oaCxTKT0+dGhpcy5sb2MuZXh0cmFjdChlLGgsUyksYT1oPT5lLmlzT2Zmc2V0Rml4ZWQmJmUub2Zmc2V0PT09MCYmaC5hbGxvd1o/IloiOmUuaXNWYWxpZD9lLnpvbmUuZm9ybWF0T2Zmc2V0KGUudHMsaC5mb3JtYXQpOiIiLG89KCk9PnI/VHUoZSk6aSh7aG91cjoibnVtZXJpYyIsaG91ckN5Y2xlOiJoMTIifSwiZGF5cGVyaW9kIiksdT0oaCxTKT0+cj9rdShlLGgpOmkoUz97bW9udGg6aH06e21vbnRoOmgsZGF5OiJudW1lcmljIn0sIm1vbnRoIiksbD0oaCxTKT0+cj9TdShlLGgpOmkoUz97d2Vla2RheTpofTp7d2Vla2RheTpoLG1vbnRoOiJsb25nIixkYXk6Im51bWVyaWMifSwid2Vla2RheSIpLGM9aD0+e2NvbnN0IFM9Ti5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKGgpO3JldHVybiBTP3RoaXMuZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZSxTKTpofSxkPWg9PnI/YnUoZSxoKTppKHtlcmE6aH0sImVyYSIpLHA9aD0+e3N3aXRjaChoKXtjYXNlIlMiOnJldHVybiB0aGlzLm51bShlLm1pbGxpc2Vjb25kKTtjYXNlInUiOmNhc2UiU1NTIjpyZXR1cm4gdGhpcy5udW0oZS5taWxsaXNlY29uZCwzKTtjYXNlInMiOnJldHVybiB0aGlzLm51bShlLnNlY29uZCk7Y2FzZSJzcyI6cmV0dXJuIHRoaXMubnVtKGUuc2Vjb25kLDIpO2Nhc2UidXUiOnJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGUubWlsbGlzZWNvbmQvMTApLDIpO2Nhc2UidXV1IjpyZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihlLm1pbGxpc2Vjb25kLzEwMCkpO2Nhc2UibSI6cmV0dXJuIHRoaXMubnVtKGUubWludXRlKTtjYXNlIm1tIjpyZXR1cm4gdGhpcy5udW0oZS5taW51dGUsMik7Y2FzZSJoIjpyZXR1cm4gdGhpcy5udW0oZS5ob3VyJTEyPT09MD8xMjplLmhvdXIlMTIpO2Nhc2UiaGgiOnJldHVybiB0aGlzLm51bShlLmhvdXIlMTI9PT0wPzEyOmUuaG91ciUxMiwyKTtjYXNlIkgiOnJldHVybiB0aGlzLm51bShlLmhvdXIpO2Nhc2UiSEgiOnJldHVybiB0aGlzLm51bShlLmhvdXIsMik7Y2FzZSJaIjpyZXR1cm4gYSh7Zm9ybWF0OiJuYXJyb3ciLGFsbG93Wjp0aGlzLm9wdHMuYWxsb3dafSk7Y2FzZSJaWiI6cmV0dXJuIGEoe2Zvcm1hdDoic2hvcnQiLGFsbG93Wjp0aGlzLm9wdHMuYWxsb3dafSk7Y2FzZSJaWloiOnJldHVybiBhKHtmb3JtYXQ6InRlY2hpZSIsYWxsb3daOnRoaXMub3B0cy5hbGxvd1p9KTtjYXNlIlpaWloiOnJldHVybiBlLnpvbmUub2Zmc2V0TmFtZShlLnRzLHtmb3JtYXQ6InNob3J0Iixsb2NhbGU6dGhpcy5sb2MubG9jYWxlfSk7Y2FzZSJaWlpaWiI6cmV0dXJuIGUuem9uZS5vZmZzZXROYW1lKGUudHMse2Zvcm1hdDoibG9uZyIsbG9jYWxlOnRoaXMubG9jLmxvY2FsZX0pO2Nhc2UieiI6cmV0dXJuIGUuem9uZU5hbWU7Y2FzZSJhIjpyZXR1cm4gbygpO2Nhc2UiZCI6cmV0dXJuIHM/aSh7ZGF5OiJudW1lcmljIn0sImRheSIpOnRoaXMubnVtKGUuZGF5KTtjYXNlImRkIjpyZXR1cm4gcz9pKHtkYXk6IjItZGlnaXQifSwiZGF5Iik6dGhpcy5udW0oZS5kYXksMik7Y2FzZSJjIjpyZXR1cm4gdGhpcy5udW0oZS53ZWVrZGF5KTtjYXNlImNjYyI6cmV0dXJuIGwoInNob3J0IiwhMCk7Y2FzZSJjY2NjIjpyZXR1cm4gbCgibG9uZyIsITApO2Nhc2UiY2NjY2MiOnJldHVybiBsKCJuYXJyb3ciLCEwKTtjYXNlIkUiOnJldHVybiB0aGlzLm51bShlLndlZWtkYXkpO2Nhc2UiRUVFIjpyZXR1cm4gbCgic2hvcnQiLCExKTtjYXNlIkVFRUUiOnJldHVybiBsKCJsb25nIiwhMSk7Y2FzZSJFRUVFRSI6cmV0dXJuIGwoIm5hcnJvdyIsITEpO2Nhc2UiTCI6cmV0dXJuIHM/aSh7bW9udGg6Im51bWVyaWMiLGRheToibnVtZXJpYyJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgpO2Nhc2UiTEwiOnJldHVybiBzP2koe21vbnRoOiIyLWRpZ2l0IixkYXk6Im51bWVyaWMifSwibW9udGgiKTp0aGlzLm51bShlLm1vbnRoLDIpO2Nhc2UiTExMIjpyZXR1cm4gdSgic2hvcnQiLCEwKTtjYXNlIkxMTEwiOnJldHVybiB1KCJsb25nIiwhMCk7Y2FzZSJMTExMTCI6cmV0dXJuIHUoIm5hcnJvdyIsITApO2Nhc2UiTSI6cmV0dXJuIHM/aSh7bW9udGg6Im51bWVyaWMifSwibW9udGgiKTp0aGlzLm51bShlLm1vbnRoKTtjYXNlIk1NIjpyZXR1cm4gcz9pKHttb250aDoiMi1kaWdpdCJ9LCJtb250aCIpOnRoaXMubnVtKGUubW9udGgsMik7Y2FzZSJNTU0iOnJldHVybiB1KCJzaG9ydCIsITEpO2Nhc2UiTU1NTSI6cmV0dXJuIHUoImxvbmciLCExKTtjYXNlIk1NTU1NIjpyZXR1cm4gdSgibmFycm93IiwhMSk7Y2FzZSJ5IjpyZXR1cm4gcz9pKHt5ZWFyOiJudW1lcmljIn0sInllYXIiKTp0aGlzLm51bShlLnllYXIpO2Nhc2UieXkiOnJldHVybiBzP2koe3llYXI6IjItZGlnaXQifSwieWVhciIpOnRoaXMubnVtKGUueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwyKTtjYXNlInl5eXkiOnJldHVybiBzP2koe3llYXI6Im51bWVyaWMifSwieWVhciIpOnRoaXMubnVtKGUueWVhciw0KTtjYXNlInl5eXl5eSI6cmV0dXJuIHM/aSh7eWVhcjoibnVtZXJpYyJ9LCJ5ZWFyIik6dGhpcy5udW0oZS55ZWFyLDYpO2Nhc2UiRyI6cmV0dXJuIGQoInNob3J0Iik7Y2FzZSJHRyI6cmV0dXJuIGQoImxvbmciKTtjYXNlIkdHR0dHIjpyZXR1cm4gZCgibmFycm93Iik7Y2FzZSJrayI6cmV0dXJuIHRoaXMubnVtKGUud2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksMik7Y2FzZSJra2trIjpyZXR1cm4gdGhpcy5udW0oZS53ZWVrWWVhciw0KTtjYXNlIlciOnJldHVybiB0aGlzLm51bShlLndlZWtOdW1iZXIpO2Nhc2UiV1ciOnJldHVybiB0aGlzLm51bShlLndlZWtOdW1iZXIsMik7Y2FzZSJuIjpyZXR1cm4gdGhpcy5udW0oZS5sb2NhbFdlZWtOdW1iZXIpO2Nhc2Uibm4iOnJldHVybiB0aGlzLm51bShlLmxvY2FsV2Vla051bWJlciwyKTtjYXNlImlpIjpyZXR1cm4gdGhpcy5udW0oZS5sb2NhbFdlZWtZZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLDIpO2Nhc2UiaWlpaSI6cmV0dXJuIHRoaXMubnVtKGUubG9jYWxXZWVrWWVhciw0KTtjYXNlIm8iOnJldHVybiB0aGlzLm51bShlLm9yZGluYWwpO2Nhc2Uib29vIjpyZXR1cm4gdGhpcy5udW0oZS5vcmRpbmFsLDMpO2Nhc2UicSI6cmV0dXJuIHRoaXMubnVtKGUucXVhcnRlcik7Y2FzZSJxcSI6cmV0dXJuIHRoaXMubnVtKGUucXVhcnRlciwyKTtjYXNlIlgiOnJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGUudHMvMWUzKSk7Y2FzZSJ4IjpyZXR1cm4gdGhpcy5udW0oZS50cyk7ZGVmYXVsdDpyZXR1cm4gYyhoKX19O3JldHVybiBIcihOLnBhcnNlRm9ybWF0KG4pLHApfWZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyhlLG4pe2NvbnN0IHI9dT0+e3N3aXRjaCh1WzBdKXtjYXNlIlMiOnJldHVybiJtaWxsaXNlY29uZCI7Y2FzZSJzIjpyZXR1cm4ic2Vjb25kIjtjYXNlIm0iOnJldHVybiJtaW51dGUiO2Nhc2UiaCI6cmV0dXJuImhvdXIiO2Nhc2UiZCI6cmV0dXJuImRheSI7Y2FzZSJ3IjpyZXR1cm4id2VlayI7Y2FzZSJNIjpyZXR1cm4ibW9udGgiO2Nhc2UieSI6cmV0dXJuInllYXIiO2RlZmF1bHQ6cmV0dXJuIG51bGx9fSxzPXU9Pmw9Pntjb25zdCBjPXIobCk7cmV0dXJuIGM/dGhpcy5udW0odS5nZXQoYyksbC5sZW5ndGgpOmx9LGk9Ti5wYXJzZUZvcm1hdChuKSxhPWkucmVkdWNlKCh1LHtsaXRlcmFsOmwsdmFsOmN9KT0+bD91OnUuY29uY2F0KGMpLFtdKSxvPWUuc2hpZnRUbyguLi5hLm1hcChyKS5maWx0ZXIodT0+dSkpO3JldHVybiBIcihpLHMobykpfX1jb25zdCBZcj0vW0EtWmEtel8rLV17MSwyNTZ9KD86Oj9cL1tBLVphLXowLTlfKy1dezEsMjU2fSg/OlwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87ZnVuY3Rpb24gSWUoLi4udCl7Y29uc3QgZT10LnJlZHVjZSgobixyKT0+bityLnNvdXJjZSwiIik7cmV0dXJuIFJlZ0V4cChgXiR7ZX0kYCl9ZnVuY3Rpb24gRWUoLi4udCl7cmV0dXJuIGU9PnQucmVkdWNlKChbbixyLHNdLGkpPT57Y29uc3RbYSxvLHVdPWkoZSxzKTtyZXR1cm5bey4uLm4sLi4uYX0sb3x8cix1XX0sW3t9LG51bGwsMV0pLnNsaWNlKDAsMil9ZnVuY3Rpb24gTmUodCwuLi5lKXtpZih0PT1udWxsKXJldHVybltudWxsLG51bGxdO2Zvcihjb25zdFtuLHJdb2YgZSl7Y29uc3Qgcz1uLmV4ZWModCk7aWYocylyZXR1cm4gcihzKX1yZXR1cm5bbnVsbCxudWxsXX1mdW5jdGlvbiBHciguLi50KXtyZXR1cm4oZSxuKT0+e2NvbnN0IHI9e307bGV0IHM7Zm9yKHM9MDtzPHQubGVuZ3RoO3MrKylyW3Rbc11dPWllKGVbbitzXSk7cmV0dXJuW3IsbnVsbCxuK3NdfX1jb25zdCBKcj0vKD86KFopfChbKy1dXGRcZCkoPzo6PyhcZFxkKSk/KS8sTnU9YCg/OiR7SnIuc291cmNlfT8oPzpcXFsoJHtZci5zb3VyY2V9KVxcXSk/KT9gLGVuPS8oXGRcZCkoPzo6PyhcZFxkKSg/Ojo/KFxkXGQpKD86Wy4sXShcZHsxLDMwfSkpPyk/KT8vLEJyPVJlZ0V4cChgJHtlbi5zb3VyY2V9JHtOdX1gKSx0bj1SZWdFeHAoYCg/OlQke0JyLnNvdXJjZX0pP2ApLE11PS8oWystXVxkezZ9fFxkezR9KSg/Oi0/KFxkXGQpKD86LT8oXGRcZCkpPyk/Lyx4dT0vKFxkezR9KS0/VyhcZFxkKSg/Oi0/KFxkKSk/LyxEdT0vKFxkezR9KS0/KFxkezN9KS8sQ3U9R3IoIndlZWtZZWFyIiwid2Vla051bWJlciIsIndlZWtEYXkiKSxGdT1HcigieWVhciIsIm9yZGluYWwiKSxBdT0vKFxkezR9KS0oXGRcZCktKFxkXGQpLyxRcj1SZWdFeHAoYCR7ZW4uc291cmNlfSA/KD86JHtKci5zb3VyY2V9fCgke1lyLnNvdXJjZX0pKT9gKSxWdT1SZWdFeHAoYCg/OiAke1FyLnNvdXJjZX0pP2ApO2Z1bmN0aW9uIE1lKHQsZSxuKXtjb25zdCByPXRbZV07cmV0dXJuIHkocik/bjppZShyKX1mdW5jdGlvbiBXdSh0LGUpe3JldHVyblt7eWVhcjpNZSh0LGUpLG1vbnRoOk1lKHQsZSsxLDEpLGRheTpNZSh0LGUrMiwxKX0sbnVsbCxlKzNdfWZ1bmN0aW9uIHhlKHQsZSl7cmV0dXJuW3tob3VyczpNZSh0LGUsMCksbWludXRlczpNZSh0LGUrMSwwKSxzZWNvbmRzOk1lKHQsZSsyLDApLG1pbGxpc2Vjb25kczpRdCh0W2UrM10pfSxudWxsLGUrNF19ZnVuY3Rpb24gVWUodCxlKXtjb25zdCBuPSF0W2VdJiYhdFtlKzFdLHI9bXQodFtlKzFdLHRbZSsyXSkscz1uP251bGw6eC5pbnN0YW5jZShyKTtyZXR1cm5be30scyxlKzNdfWZ1bmN0aW9uIFBlKHQsZSl7Y29uc3Qgbj10W2VdP0ouY3JlYXRlKHRbZV0pOm51bGw7cmV0dXJuW3t9LG4sZSsxXX1jb25zdCBMdT1SZWdFeHAoYF5UPyR7ZW4uc291cmNlfSRgKSxfdT0vXi0/UCg/Oig/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KVkpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KU0pPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KVcpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KUQpPyg/OlQoPzooLT9cZHsxLDIwfSg/OlwuXGR7MSwyMH0pPylIKT8oPzooLT9cZHsxLDIwfSg/OlwuXGR7MSwyMH0pPylNKT8oPzooLT9cZHsxLDIwfSkoPzpbLixdKC0/XGR7MSwyMH0pKT9TKT8pPykkLztmdW5jdGlvbiB6dSh0KXtjb25zdFtlLG4scixzLGksYSxvLHUsbF09dCxjPWVbMF09PT0iLSIsZD11JiZ1WzBdPT09Ii0iLHA9KGgsUz0hMSk9PmghPT12b2lkIDAmJihTfHxoJiZjKT8taDpoO3JldHVyblt7eWVhcnM6cChoZShuKSksbW9udGhzOnAoaGUocikpLHdlZWtzOnAoaGUocykpLGRheXM6cChoZShpKSksaG91cnM6cChoZShhKSksbWludXRlczpwKGhlKG8pKSxzZWNvbmRzOnAoaGUodSksdT09PSItMCIpLG1pbGxpc2Vjb25kczpwKFF0KGwpLGQpfV19Y29uc3QgJHU9e0dNVDowLEVEVDotNCo2MCxFU1Q6LTUqNjAsQ0RUOi01KjYwLENTVDotNio2MCxNRFQ6LTYqNjAsTVNUOi03KjYwLFBEVDotNyo2MCxQU1Q6LTgqNjB9O2Z1bmN0aW9uIG5uKHQsZSxuLHIscyxpLGEpe2NvbnN0IG89e3llYXI6ZS5sZW5ndGg9PT0yP1h0KGllKGUpKTppZShlKSxtb250aDokci5pbmRleE9mKG4pKzEsZGF5OmllKHIpLGhvdXI6aWUocyksbWludXRlOmllKGkpfTtyZXR1cm4gYSYmKG8uc2Vjb25kPWllKGEpKSx0JiYoby53ZWVrZGF5PXQubGVuZ3RoPjM/UnIuaW5kZXhPZih0KSsxOlVyLmluZGV4T2YodCkrMSksb31jb25zdCBadT0vXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLFxzKT8oXGR7MSwyfSlccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylccyhcZHsyLDR9KVxzKFxkXGQpOihcZFxkKSg/OjooXGRcZCkpP1xzKD86KFVUfEdNVHxbRUNNUF1bU0RdVCl8KFtael0pfCg/OihbKy1dXGRcZCkoXGRcZCkpKSQvO2Z1bmN0aW9uIFJ1KHQpe2NvbnN0WyxlLG4scixzLGksYSxvLHUsbCxjLGRdPXQscD1ubihlLHMscixuLGksYSxvKTtsZXQgaDtyZXR1cm4gdT9oPSR1W3VdOmw/aD0wOmg9bXQoYyxkKSxbcCxuZXcgeChoKV19ZnVuY3Rpb24gVXUodCl7cmV0dXJuIHQucmVwbGFjZSgvXChbXigpXSpcKXxbXG5cdF0vZywiICIpLnJlcGxhY2UoLyhcc1xzKykvZywiICIpLnRyaW0oKX1jb25zdCBQdT0vXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoXGRcZCkgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoXGR7NH0pIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLHF1PS9eKE1vbmRheXxUdWVzZGF5fFdlZG5lc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxkXGQpLShKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYyktKFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLGp1PS9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1bikgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoIFxkfFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQpIChcZHs0fSkkLztmdW5jdGlvbiBLcih0KXtjb25zdFssZSxuLHIscyxpLGEsb109dDtyZXR1cm5bbm4oZSxzLHIsbixpLGEsbykseC51dGNJbnN0YW5jZV19ZnVuY3Rpb24gSHUodCl7Y29uc3RbLGUsbixyLHMsaSxhLG9dPXQ7cmV0dXJuW25uKGUsbyxuLHIscyxpLGEpLHgudXRjSW5zdGFuY2VdfWNvbnN0IFl1PUllKE11LHRuKSxHdT1JZSh4dSx0biksSnU9SWUoRHUsdG4pLEJ1PUllKEJyKSxYcj1FZShXdSx4ZSxVZSxQZSksUXU9RWUoQ3UseGUsVWUsUGUpLEt1PUVlKEZ1LHhlLFVlLFBlKSxYdT1FZSh4ZSxVZSxQZSk7ZnVuY3Rpb24gZWwodCl7cmV0dXJuIE5lKHQsW1l1LFhyXSxbR3UsUXVdLFtKdSxLdV0sW0J1LFh1XSl9ZnVuY3Rpb24gdGwodCl7cmV0dXJuIE5lKFV1KHQpLFtadSxSdV0pfWZ1bmN0aW9uIG5sKHQpe3JldHVybiBOZSh0LFtQdSxLcl0sW3F1LEtyXSxbanUsSHVdKX1mdW5jdGlvbiBybCh0KXtyZXR1cm4gTmUodCxbX3UsenVdKX1jb25zdCBzbD1FZSh4ZSk7ZnVuY3Rpb24gaWwodCl7cmV0dXJuIE5lKHQsW0x1LHNsXSl9Y29uc3QgYWw9SWUoQXUsVnUpLG9sPUllKFFyKSx1bD1FZSh4ZSxVZSxQZSk7ZnVuY3Rpb24gbGwodCl7cmV0dXJuIE5lKHQsW2FsLFhyXSxbb2wsdWxdKX1jb25zdCBlcz0iSW52YWxpZCBEdXJhdGlvbiIsdHM9e3dlZWtzOntkYXlzOjcsaG91cnM6NyoyNCxtaW51dGVzOjcqMjQqNjAsc2Vjb25kczo3KjI0KjYwKjYwLG1pbGxpc2Vjb25kczo3KjI0KjYwKjYwKjFlM30sZGF5czp7aG91cnM6MjQsbWludXRlczoyNCo2MCxzZWNvbmRzOjI0KjYwKjYwLG1pbGxpc2Vjb25kczoyNCo2MCo2MCoxZTN9LGhvdXJzOnttaW51dGVzOjYwLHNlY29uZHM6NjAqNjAsbWlsbGlzZWNvbmRzOjYwKjYwKjFlM30sbWludXRlczp7c2Vjb25kczo2MCxtaWxsaXNlY29uZHM6NjAqMWUzfSxzZWNvbmRzOnttaWxsaXNlY29uZHM6MWUzfX0sY2w9e3llYXJzOntxdWFydGVyczo0LG1vbnRoczoxMix3ZWVrczo1MixkYXlzOjM2NSxob3VyczozNjUqMjQsbWludXRlczozNjUqMjQqNjAsc2Vjb25kczozNjUqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOjM2NSoyNCo2MCo2MCoxZTN9LHF1YXJ0ZXJzOnttb250aHM6Myx3ZWVrczoxMyxkYXlzOjkxLGhvdXJzOjkxKjI0LG1pbnV0ZXM6OTEqMjQqNjAsc2Vjb25kczo5MSoyNCo2MCo2MCxtaWxsaXNlY29uZHM6OTEqMjQqNjAqNjAqMWUzfSxtb250aHM6e3dlZWtzOjQsZGF5czozMCxob3VyczozMCoyNCxtaW51dGVzOjMwKjI0KjYwLHNlY29uZHM6MzAqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOjMwKjI0KjYwKjYwKjFlM30sLi4udHN9LEw9MTQ2MDk3LzQwMCxEZT0xNDYwOTcvNDgwMCxmbD17eWVhcnM6e3F1YXJ0ZXJzOjQsbW9udGhzOjEyLHdlZWtzOkwvNyxkYXlzOkwsaG91cnM6TCoyNCxtaW51dGVzOkwqMjQqNjAsc2Vjb25kczpMKjI0KjYwKjYwLG1pbGxpc2Vjb25kczpMKjI0KjYwKjYwKjFlM30scXVhcnRlcnM6e21vbnRoczozLHdlZWtzOkwvMjgsZGF5czpMLzQsaG91cnM6TCoyNC80LG1pbnV0ZXM6TCoyNCo2MC80LHNlY29uZHM6TCoyNCo2MCo2MC80LG1pbGxpc2Vjb25kczpMKjI0KjYwKjYwKjFlMy80fSxtb250aHM6e3dlZWtzOkRlLzcsZGF5czpEZSxob3VyczpEZSoyNCxtaW51dGVzOkRlKjI0KjYwLHNlY29uZHM6RGUqMjQqNjAqNjAsbWlsbGlzZWNvbmRzOkRlKjI0KjYwKjYwKjFlM30sLi4udHN9LG1lPVsieWVhcnMiLCJxdWFydGVycyIsIm1vbnRocyIsIndlZWtzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiXSxkbD1tZS5zbGljZSgwKS5yZXZlcnNlKCk7ZnVuY3Rpb24gYWUodCxlLG49ITEpe2NvbnN0IHI9e3ZhbHVlczpuP2UudmFsdWVzOnsuLi50LnZhbHVlcywuLi5lLnZhbHVlc3x8e319LGxvYzp0LmxvYy5jbG9uZShlLmxvYyksY29udmVyc2lvbkFjY3VyYWN5OmUuY29udmVyc2lvbkFjY3VyYWN5fHx0LmNvbnZlcnNpb25BY2N1cmFjeSxtYXRyaXg6ZS5tYXRyaXh8fHQubWF0cml4fTtyZXR1cm4gbmV3IHYocil9ZnVuY3Rpb24gbnModCxlKXtsZXQgbj1lLm1pbGxpc2Vjb25kcz8/MDtmb3IoY29uc3QgciBvZiBkbC5zbGljZSgxKSllW3JdJiYobis9ZVtyXSp0W3JdLm1pbGxpc2Vjb25kcyk7cmV0dXJuIG59ZnVuY3Rpb24gcnModCxlKXtjb25zdCBuPW5zKHQsZSk8MD8tMToxO21lLnJlZHVjZVJpZ2h0KChyLHMpPT57aWYoeShlW3NdKSlyZXR1cm4gcjtpZihyKXtjb25zdCBpPWVbcl0qbixhPXRbc11bcl0sbz1NYXRoLmZsb29yKGkvYSk7ZVtzXSs9bypuLGVbcl0tPW8qYSpufXJldHVybiBzfSxudWxsKSxtZS5yZWR1Y2UoKHIscyk9PntpZih5KGVbc10pKXJldHVybiByO2lmKHIpe2NvbnN0IGk9ZVtyXSUxO2Vbcl0tPWksZVtzXSs9aSp0W3JdW3NdfXJldHVybiBzfSxudWxsKX1mdW5jdGlvbiBobCh0KXtjb25zdCBlPXt9O2Zvcihjb25zdFtuLHJdb2YgT2JqZWN0LmVudHJpZXModCkpciE9PTAmJihlW25dPXIpO3JldHVybiBlfWNsYXNzIHZ7Y29uc3RydWN0b3IoZSl7Y29uc3Qgbj1lLmNvbnZlcnNpb25BY2N1cmFjeT09PSJsb25ndGVybSJ8fCExO2xldCByPW4/Zmw6Y2w7ZS5tYXRyaXgmJihyPWUubWF0cml4KSx0aGlzLnZhbHVlcz1lLnZhbHVlcyx0aGlzLmxvYz1lLmxvY3x8VC5jcmVhdGUoKSx0aGlzLmNvbnZlcnNpb25BY2N1cmFjeT1uPyJsb25ndGVybSI6ImNhc3VhbCIsdGhpcy5pbnZhbGlkPWUuaW52YWxpZHx8bnVsbCx0aGlzLm1hdHJpeD1yLHRoaXMuaXNMdXhvbkR1cmF0aW9uPSEwfXN0YXRpYyBmcm9tTWlsbGlzKGUsbil7cmV0dXJuIHYuZnJvbU9iamVjdCh7bWlsbGlzZWNvbmRzOmV9LG4pfXN0YXRpYyBmcm9tT2JqZWN0KGUsbj17fSl7aWYoZT09bnVsbHx8dHlwZW9mIGUhPSJvYmplY3QiKXRocm93IG5ldyBEKGBEdXJhdGlvbi5mcm9tT2JqZWN0OiBhcmd1bWVudCBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGdvdCAke2U9PT1udWxsPyJudWxsIjp0eXBlb2YgZX1gKTtyZXR1cm4gbmV3IHYoe3ZhbHVlczp5dChlLHYubm9ybWFsaXplVW5pdCksbG9jOlQuZnJvbU9iamVjdChuKSxjb252ZXJzaW9uQWNjdXJhY3k6bi5jb252ZXJzaW9uQWNjdXJhY3ksbWF0cml4Om4ubWF0cml4fSl9c3RhdGljIGZyb21EdXJhdGlvbkxpa2UoZSl7aWYoZGUoZSkpcmV0dXJuIHYuZnJvbU1pbGxpcyhlKTtpZih2LmlzRHVyYXRpb24oZSkpcmV0dXJuIGU7aWYodHlwZW9mIGU9PSJvYmplY3QiKXJldHVybiB2LmZyb21PYmplY3QoZSk7dGhyb3cgbmV3IEQoYFVua25vd24gZHVyYXRpb24gYXJndW1lbnQgJHtlfSBvZiB0eXBlICR7dHlwZW9mIGV9YCl9c3RhdGljIGZyb21JU08oZSxuKXtjb25zdFtyXT1ybChlKTtyZXR1cm4gcj92LmZyb21PYmplY3QocixuKTp2LmludmFsaWQoInVucGFyc2FibGUiLGB0aGUgaW5wdXQgIiR7ZX0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApfXN0YXRpYyBmcm9tSVNPVGltZShlLG4pe2NvbnN0W3JdPWlsKGUpO3JldHVybiByP3YuZnJvbU9iamVjdChyLG4pOnYuaW52YWxpZCgidW5wYXJzYWJsZSIsYHRoZSBpbnB1dCAiJHtlfSIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCl9c3RhdGljIGludmFsaWQoZSxuPW51bGwpe2lmKCFlKXRocm93IG5ldyBEKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIER1cmF0aW9uIGlzIGludmFsaWQiKTtjb25zdCByPWUgaW5zdGFuY2VvZiAkP2U6bmV3ICQoZSxuKTtpZihiLnRocm93T25JbnZhbGlkKXRocm93IG5ldyBabyhyKTtyZXR1cm4gbmV3IHYoe2ludmFsaWQ6cn0pfXN0YXRpYyBub3JtYWxpemVVbml0KGUpe2NvbnN0IG49e3llYXI6InllYXJzIix5ZWFyczoieWVhcnMiLHF1YXJ0ZXI6InF1YXJ0ZXJzIixxdWFydGVyczoicXVhcnRlcnMiLG1vbnRoOiJtb250aHMiLG1vbnRoczoibW9udGhzIix3ZWVrOiJ3ZWVrcyIsd2Vla3M6IndlZWtzIixkYXk6ImRheXMiLGRheXM6ImRheXMiLGhvdXI6ImhvdXJzIixob3VyczoiaG91cnMiLG1pbnV0ZToibWludXRlcyIsbWludXRlczoibWludXRlcyIsc2Vjb25kOiJzZWNvbmRzIixzZWNvbmRzOiJzZWNvbmRzIixtaWxsaXNlY29uZDoibWlsbGlzZWNvbmRzIixtaWxsaXNlY29uZHM6Im1pbGxpc2Vjb25kcyJ9W2UmJmUudG9Mb3dlckNhc2UoKV07aWYoIW4pdGhyb3cgbmV3IEduKGUpO3JldHVybiBufXN0YXRpYyBpc0R1cmF0aW9uKGUpe3JldHVybiBlJiZlLmlzTHV4b25EdXJhdGlvbnx8ITF9Z2V0IGxvY2FsZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5sb2MubG9jYWxlOm51bGx9Z2V0IG51bWJlcmluZ1N5c3RlbSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtOm51bGx9dG9Gb3JtYXQoZSxuPXt9KXtjb25zdCByPXsuLi5uLGZsb29yOm4ucm91bmQhPT0hMSYmbi5mbG9vciE9PSExfTtyZXR1cm4gdGhpcy5pc1ZhbGlkP04uY3JlYXRlKHRoaXMubG9jLHIpLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyh0aGlzLGUpOmVzfXRvSHVtYW4oZT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gZXM7Y29uc3Qgbj1tZS5tYXAocj0+e2NvbnN0IHM9dGhpcy52YWx1ZXNbcl07cmV0dXJuIHkocyk/bnVsbDp0aGlzLmxvYy5udW1iZXJGb3JtYXR0ZXIoe3N0eWxlOiJ1bml0Iix1bml0RGlzcGxheToibG9uZyIsLi4uZSx1bml0OnIuc2xpY2UoMCwtMSl9KS5mb3JtYXQocyl9KS5maWx0ZXIocj0+cik7cmV0dXJuIHRoaXMubG9jLmxpc3RGb3JtYXR0ZXIoe3R5cGU6ImNvbmp1bmN0aW9uIixzdHlsZTplLmxpc3RTdHlsZXx8Im5hcnJvdyIsLi4uZX0pLmZvcm1hdChuKX10b09iamVjdCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/ey4uLnRoaXMudmFsdWVzfTp7fX10b0lTTygpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7bGV0IGU9IlAiO3JldHVybiB0aGlzLnllYXJzIT09MCYmKGUrPXRoaXMueWVhcnMrIlkiKSwodGhpcy5tb250aHMhPT0wfHx0aGlzLnF1YXJ0ZXJzIT09MCkmJihlKz10aGlzLm1vbnRocyt0aGlzLnF1YXJ0ZXJzKjMrIk0iKSx0aGlzLndlZWtzIT09MCYmKGUrPXRoaXMud2Vla3MrIlciKSx0aGlzLmRheXMhPT0wJiYoZSs9dGhpcy5kYXlzKyJEIiksKHRoaXMuaG91cnMhPT0wfHx0aGlzLm1pbnV0ZXMhPT0wfHx0aGlzLnNlY29uZHMhPT0wfHx0aGlzLm1pbGxpc2Vjb25kcyE9PTApJiYoZSs9IlQiKSx0aGlzLmhvdXJzIT09MCYmKGUrPXRoaXMuaG91cnMrIkgiKSx0aGlzLm1pbnV0ZXMhPT0wJiYoZSs9dGhpcy5taW51dGVzKyJNIiksKHRoaXMuc2Vjb25kcyE9PTB8fHRoaXMubWlsbGlzZWNvbmRzIT09MCkmJihlKz1LdCh0aGlzLnNlY29uZHMrdGhpcy5taWxsaXNlY29uZHMvMWUzLDMpKyJTIiksZT09PSJQIiYmKGUrPSJUMFMiKSxlfXRvSVNPVGltZShlPXt9KXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiBudWxsO2NvbnN0IG49dGhpcy50b01pbGxpcygpO3JldHVybiBuPDB8fG4+PTg2NGU1P251bGw6KGU9e3N1cHByZXNzTWlsbGlzZWNvbmRzOiExLHN1cHByZXNzU2Vjb25kczohMSxpbmNsdWRlUHJlZml4OiExLGZvcm1hdDoiZXh0ZW5kZWQiLC4uLmUsaW5jbHVkZU9mZnNldDohMX0sZy5mcm9tTWlsbGlzKG4se3pvbmU6IlVUQyJ9KS50b0lTT1RpbWUoZSkpfXRvSlNPTigpe3JldHVybiB0aGlzLnRvSVNPKCl9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy50b0lTTygpfVtTeW1ib2wuZm9yKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpXSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/YER1cmF0aW9uIHsgdmFsdWVzOiAke0pTT04uc3RyaW5naWZ5KHRoaXMudmFsdWVzKX0gfWA6YER1cmF0aW9uIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWB9dG9NaWxsaXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP25zKHRoaXMubWF0cml4LHRoaXMudmFsdWVzKTpOYU59dmFsdWVPZigpe3JldHVybiB0aGlzLnRvTWlsbGlzKCl9cGx1cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49di5mcm9tRHVyYXRpb25MaWtlKGUpLHI9e307Zm9yKGNvbnN0IHMgb2YgbWUpKGtlKG4udmFsdWVzLHMpfHxrZSh0aGlzLnZhbHVlcyxzKSkmJihyW3NdPW4uZ2V0KHMpK3RoaXMuZ2V0KHMpKTtyZXR1cm4gYWUodGhpcyx7dmFsdWVzOnJ9LCEwKX1taW51cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49di5mcm9tRHVyYXRpb25MaWtlKGUpO3JldHVybiB0aGlzLnBsdXMobi5uZWdhdGUoKSl9bWFwVW5pdHMoZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPXt9O2Zvcihjb25zdCByIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSluW3JdPXpyKGUodGhpcy52YWx1ZXNbcl0scikpO3JldHVybiBhZSh0aGlzLHt2YWx1ZXM6bn0sITApfWdldChlKXtyZXR1cm4gdGhpc1t2Lm5vcm1hbGl6ZVVuaXQoZSldfXNldChlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49ey4uLnRoaXMudmFsdWVzLC4uLnl0KGUsdi5ub3JtYWxpemVVbml0KX07cmV0dXJuIGFlKHRoaXMse3ZhbHVlczpufSl9cmVjb25maWd1cmUoe2xvY2FsZTplLG51bWJlcmluZ1N5c3RlbTpuLGNvbnZlcnNpb25BY2N1cmFjeTpyLG1hdHJpeDpzfT17fSl7Y29uc3QgYT17bG9jOnRoaXMubG9jLmNsb25lKHtsb2NhbGU6ZSxudW1iZXJpbmdTeXN0ZW06bn0pLG1hdHJpeDpzLGNvbnZlcnNpb25BY2N1cmFjeTpyfTtyZXR1cm4gYWUodGhpcyxhKX1hcyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc2hpZnRUbyhlKS5nZXQoZSk6TmFOfW5vcm1hbGl6ZSgpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3QgZT10aGlzLnRvT2JqZWN0KCk7cmV0dXJuIHJzKHRoaXMubWF0cml4LGUpLGFlKHRoaXMse3ZhbHVlczplfSwhMCl9cmVzY2FsZSgpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3QgZT1obCh0aGlzLm5vcm1hbGl6ZSgpLnNoaWZ0VG9BbGwoKS50b09iamVjdCgpKTtyZXR1cm4gYWUodGhpcyx7dmFsdWVzOmV9LCEwKX1zaGlmdFRvKC4uLmUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7aWYoZS5sZW5ndGg9PT0wKXJldHVybiB0aGlzO2U9ZS5tYXAoYT0+di5ub3JtYWxpemVVbml0KGEpKTtjb25zdCBuPXt9LHI9e30scz10aGlzLnRvT2JqZWN0KCk7bGV0IGk7Zm9yKGNvbnN0IGEgb2YgbWUpaWYoZS5pbmRleE9mKGEpPj0wKXtpPWE7bGV0IG89MDtmb3IoY29uc3QgbCBpbiByKW8rPXRoaXMubWF0cml4W2xdW2FdKnJbbF0scltsXT0wO2RlKHNbYV0pJiYobys9c1thXSk7Y29uc3QgdT1NYXRoLnRydW5jKG8pO25bYV09dSxyW2FdPShvKjFlMy11KjFlMykvMWUzfWVsc2UgZGUoc1thXSkmJihyW2FdPXNbYV0pO2Zvcihjb25zdCBhIGluIHIpclthXSE9PTAmJihuW2ldKz1hPT09aT9yW2FdOnJbYV0vdGhpcy5tYXRyaXhbaV1bYV0pO3JldHVybiBycyh0aGlzLm1hdHJpeCxuKSxhZSh0aGlzLHt2YWx1ZXM6bn0sITApfXNoaWZ0VG9BbGwoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuc2hpZnRUbygieWVhcnMiLCJtb250aHMiLCJ3ZWVrcyIsImRheXMiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIik6dGhpc31uZWdhdGUoKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IGU9e307Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKWVbbl09dGhpcy52YWx1ZXNbbl09PT0wPzA6LXRoaXMudmFsdWVzW25dO3JldHVybiBhZSh0aGlzLHt2YWx1ZXM6ZX0sITApfWdldCB5ZWFycygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMueWVhcnN8fDA6TmFOfWdldCBxdWFydGVycygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMucXVhcnRlcnN8fDA6TmFOfWdldCBtb250aHMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLm1vbnRoc3x8MDpOYU59Z2V0IHdlZWtzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy53ZWVrc3x8MDpOYU59Z2V0IGRheXMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudmFsdWVzLmRheXN8fDA6TmFOfWdldCBob3Vycygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuaG91cnN8fDA6TmFOfWdldCBtaW51dGVzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnZhbHVlcy5taW51dGVzfHwwOk5hTn1nZXQgc2Vjb25kcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMuc2Vjb25kc3x8MDpOYU59Z2V0IG1pbGxpc2Vjb25kcygpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzfHwwOk5hTn1nZXQgaXNWYWxpZCgpe3JldHVybiB0aGlzLmludmFsaWQ9PT1udWxsfWdldCBpbnZhbGlkUmVhc29uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQucmVhc29uOm51bGx9Z2V0IGludmFsaWRFeHBsYW5hdGlvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uOm51bGx9ZXF1YWxzKGUpe2lmKCF0aGlzLmlzVmFsaWR8fCFlLmlzVmFsaWR8fCF0aGlzLmxvYy5lcXVhbHMoZS5sb2MpKXJldHVybiExO2Z1bmN0aW9uIG4ocixzKXtyZXR1cm4gcj09PXZvaWQgMHx8cj09PTA/cz09PXZvaWQgMHx8cz09PTA6cj09PXN9Zm9yKGNvbnN0IHIgb2YgbWUpaWYoIW4odGhpcy52YWx1ZXNbcl0sZS52YWx1ZXNbcl0pKXJldHVybiExO3JldHVybiEwfX1jb25zdCBDZT0iSW52YWxpZCBJbnRlcnZhbCI7ZnVuY3Rpb24gbWwodCxlKXtyZXR1cm4hdHx8IXQuaXNWYWxpZD9rLmludmFsaWQoIm1pc3Npbmcgb3IgaW52YWxpZCBzdGFydCIpOiFlfHwhZS5pc1ZhbGlkP2suaW52YWxpZCgibWlzc2luZyBvciBpbnZhbGlkIGVuZCIpOmU8dD9rLmludmFsaWQoImVuZCBiZWZvcmUgc3RhcnQiLGBUaGUgZW5kIG9mIGFuIGludGVydmFsIG11c3QgYmUgYWZ0ZXIgaXRzIHN0YXJ0LCBidXQgeW91IGhhZCBzdGFydD0ke3QudG9JU08oKX0gYW5kIGVuZD0ke2UudG9JU08oKX1gKTpudWxsfWNsYXNzIGt7Y29uc3RydWN0b3IoZSl7dGhpcy5zPWUuc3RhcnQsdGhpcy5lPWUuZW5kLHRoaXMuaW52YWxpZD1lLmludmFsaWR8fG51bGwsdGhpcy5pc0x1eG9uSW50ZXJ2YWw9ITB9c3RhdGljIGludmFsaWQoZSxuPW51bGwpe2lmKCFlKXRocm93IG5ldyBEKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIEludGVydmFsIGlzIGludmFsaWQiKTtjb25zdCByPWUgaW5zdGFuY2VvZiAkP2U6bmV3ICQoZSxuKTtpZihiLnRocm93T25JbnZhbGlkKXRocm93IG5ldyAkbyhyKTtyZXR1cm4gbmV3IGsoe2ludmFsaWQ6cn0pfXN0YXRpYyBmcm9tRGF0ZVRpbWVzKGUsbil7Y29uc3Qgcj1qZShlKSxzPWplKG4pLGk9bWwocixzKTtyZXR1cm4gaT8/bmV3IGsoe3N0YXJ0OnIsZW5kOnN9KX1zdGF0aWMgYWZ0ZXIoZSxuKXtjb25zdCByPXYuZnJvbUR1cmF0aW9uTGlrZShuKSxzPWplKGUpO3JldHVybiBrLmZyb21EYXRlVGltZXMocyxzLnBsdXMocikpfXN0YXRpYyBiZWZvcmUoZSxuKXtjb25zdCByPXYuZnJvbUR1cmF0aW9uTGlrZShuKSxzPWplKGUpO3JldHVybiBrLmZyb21EYXRlVGltZXMocy5taW51cyhyKSxzKX1zdGF0aWMgZnJvbUlTTyhlLG4pe2NvbnN0W3Isc109KGV8fCIiKS5zcGxpdCgiLyIsMik7aWYociYmcyl7bGV0IGksYTt0cnl7aT1nLmZyb21JU08ocixuKSxhPWkuaXNWYWxpZH1jYXRjaHthPSExfWxldCBvLHU7dHJ5e289Zy5mcm9tSVNPKHMsbiksdT1vLmlzVmFsaWR9Y2F0Y2h7dT0hMX1pZihhJiZ1KXJldHVybiBrLmZyb21EYXRlVGltZXMoaSxvKTtpZihhKXtjb25zdCBsPXYuZnJvbUlTTyhzLG4pO2lmKGwuaXNWYWxpZClyZXR1cm4gay5hZnRlcihpLGwpfWVsc2UgaWYodSl7Y29uc3QgbD12LmZyb21JU08ocixuKTtpZihsLmlzVmFsaWQpcmV0dXJuIGsuYmVmb3JlKG8sbCl9fXJldHVybiBrLmludmFsaWQoInVucGFyc2FibGUiLGB0aGUgaW5wdXQgIiR7ZX0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApfXN0YXRpYyBpc0ludGVydmFsKGUpe3JldHVybiBlJiZlLmlzTHV4b25JbnRlcnZhbHx8ITF9Z2V0IHN0YXJ0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM6bnVsbH1nZXQgZW5kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmU6bnVsbH1nZXQgaXNWYWxpZCgpe3JldHVybiB0aGlzLmludmFsaWRSZWFzb249PT1udWxsfWdldCBpbnZhbGlkUmVhc29uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQucmVhc29uOm51bGx9Z2V0IGludmFsaWRFeHBsYW5hdGlvbigpe3JldHVybiB0aGlzLmludmFsaWQ/dGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uOm51bGx9bGVuZ3RoKGU9Im1pbGxpc2Vjb25kcyIpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy50b0R1cmF0aW9uKGUpLmdldChlKTpOYU59Y291bnQoZT0ibWlsbGlzZWNvbmRzIixuKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiBOYU47Y29uc3Qgcj10aGlzLnN0YXJ0LnN0YXJ0T2YoZSxuKTtsZXQgcztyZXR1cm4gbiE9bnVsbCYmbi51c2VMb2NhbGVXZWVrcz9zPXRoaXMuZW5kLnJlY29uZmlndXJlKHtsb2NhbGU6ci5sb2NhbGV9KTpzPXRoaXMuZW5kLHM9cy5zdGFydE9mKGUsbiksTWF0aC5mbG9vcihzLmRpZmYocixlKS5nZXQoZSkpKyhzLnZhbHVlT2YoKSE9PXRoaXMuZW5kLnZhbHVlT2YoKSl9aGFzU2FtZShlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuaXNFbXB0eSgpfHx0aGlzLmUubWludXMoMSkuaGFzU2FtZSh0aGlzLnMsZSk6ITF9aXNFbXB0eSgpe3JldHVybiB0aGlzLnMudmFsdWVPZigpPT09dGhpcy5lLnZhbHVlT2YoKX1pc0FmdGVyKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zPmU6ITF9aXNCZWZvcmUoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmU8PWU6ITF9Y29udGFpbnMoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnM8PWUmJnRoaXMuZT5lOiExfXNldCh7c3RhcnQ6ZSxlbmQ6bn09e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/ay5mcm9tRGF0ZVRpbWVzKGV8fHRoaXMucyxufHx0aGlzLmUpOnRoaXN9c3BsaXRBdCguLi5lKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybltdO2NvbnN0IG49ZS5tYXAoamUpLmZpbHRlcihhPT50aGlzLmNvbnRhaW5zKGEpKS5zb3J0KChhLG8pPT5hLnRvTWlsbGlzKCktby50b01pbGxpcygpKSxyPVtdO2xldHtzfT10aGlzLGk9MDtmb3IoO3M8dGhpcy5lOyl7Y29uc3QgYT1uW2ldfHx0aGlzLmUsbz0rYT4rdGhpcy5lP3RoaXMuZTphO3IucHVzaChrLmZyb21EYXRlVGltZXMocyxvKSkscz1vLGkrPTF9cmV0dXJuIHJ9c3BsaXRCeShlKXtjb25zdCBuPXYuZnJvbUR1cmF0aW9uTGlrZShlKTtpZighdGhpcy5pc1ZhbGlkfHwhbi5pc1ZhbGlkfHxuLmFzKCJtaWxsaXNlY29uZHMiKT09PTApcmV0dXJuW107bGV0e3M6cn09dGhpcyxzPTEsaTtjb25zdCBhPVtdO2Zvcig7cjx0aGlzLmU7KXtjb25zdCBvPXRoaXMuc3RhcnQucGx1cyhuLm1hcFVuaXRzKHU9PnUqcykpO2k9K28+K3RoaXMuZT90aGlzLmU6byxhLnB1c2goay5mcm9tRGF0ZVRpbWVzKHIsaSkpLHI9aSxzKz0xfXJldHVybiBhfWRpdmlkZUVxdWFsbHkoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnNwbGl0QnkodGhpcy5sZW5ndGgoKS9lKS5zbGljZSgwLGUpOltdfW92ZXJsYXBzKGUpe3JldHVybiB0aGlzLmU+ZS5zJiZ0aGlzLnM8ZS5lfWFidXRzU3RhcnQoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD8rdGhpcy5lPT0rZS5zOiExfWFidXRzRW5kKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/K2UuZT09K3RoaXMuczohMX1lbmd1bGZzKGUpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5zPD1lLnMmJnRoaXMuZT49ZS5lOiExfWVxdWFscyhlKXtyZXR1cm4hdGhpcy5pc1ZhbGlkfHwhZS5pc1ZhbGlkPyExOnRoaXMucy5lcXVhbHMoZS5zKSYmdGhpcy5lLmVxdWFscyhlLmUpfWludGVyc2VjdGlvbihlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49dGhpcy5zPmUucz90aGlzLnM6ZS5zLHI9dGhpcy5lPGUuZT90aGlzLmU6ZS5lO3JldHVybiBuPj1yP251bGw6ay5mcm9tRGF0ZVRpbWVzKG4scil9dW5pb24oZSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCBuPXRoaXMuczxlLnM/dGhpcy5zOmUucyxyPXRoaXMuZT5lLmU/dGhpcy5lOmUuZTtyZXR1cm4gay5mcm9tRGF0ZVRpbWVzKG4scil9c3RhdGljIG1lcmdlKGUpe2NvbnN0W24scl09ZS5zb3J0KChzLGkpPT5zLnMtaS5zKS5yZWR1Y2UoKFtzLGldLGEpPT5pP2kub3ZlcmxhcHMoYSl8fGkuYWJ1dHNTdGFydChhKT9bcyxpLnVuaW9uKGEpXTpbcy5jb25jYXQoW2ldKSxhXTpbcyxhXSxbW10sbnVsbF0pO3JldHVybiByJiZuLnB1c2gociksbn1zdGF0aWMgeG9yKGUpe2xldCBuPW51bGwscj0wO2NvbnN0IHM9W10saT1lLm1hcCh1PT5be3RpbWU6dS5zLHR5cGU6InMifSx7dGltZTp1LmUsdHlwZToiZSJ9XSksYT1BcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmkpLG89YS5zb3J0KCh1LGwpPT51LnRpbWUtbC50aW1lKTtmb3IoY29uc3QgdSBvZiBvKXIrPXUudHlwZT09PSJzIj8xOi0xLHI9PT0xP249dS50aW1lOihuJiYrbiE9K3UudGltZSYmcy5wdXNoKGsuZnJvbURhdGVUaW1lcyhuLHUudGltZSkpLG49bnVsbCk7cmV0dXJuIGsubWVyZ2Uocyl9ZGlmZmVyZW5jZSguLi5lKXtyZXR1cm4gay54b3IoW3RoaXNdLmNvbmNhdChlKSkubWFwKG49PnRoaXMuaW50ZXJzZWN0aW9uKG4pKS5maWx0ZXIobj0+biYmIW4uaXNFbXB0eSgpKX10b1N0cmluZygpe3JldHVybiB0aGlzLmlzVmFsaWQ/YFske3RoaXMucy50b0lTTygpfSDigJMgJHt0aGlzLmUudG9JU08oKX0pYDpDZX1bU3ltYm9sLmZvcigibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20iKV0oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2BJbnRlcnZhbCB7IHN0YXJ0OiAke3RoaXMucy50b0lTTygpfSwgZW5kOiAke3RoaXMuZS50b0lTTygpfSB9YDpgSW50ZXJ2YWwgeyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YH10b0xvY2FsZVN0cmluZyhlPWl0LG49e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5zLmxvYy5jbG9uZShuKSxlKS5mb3JtYXRJbnRlcnZhbCh0aGlzKTpDZX10b0lTTyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0lTTyhlKX0vJHt0aGlzLmUudG9JU08oZSl9YDpDZX10b0lTT0RhdGUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2Ake3RoaXMucy50b0lTT0RhdGUoKX0vJHt0aGlzLmUudG9JU09EYXRlKCl9YDpDZX10b0lTT1RpbWUoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gJHt0aGlzLnMudG9JU09UaW1lKGUpfS8ke3RoaXMuZS50b0lTT1RpbWUoZSl9YDpDZX10b0Zvcm1hdChlLHtzZXBhcmF0b3I6bj0iIOKAkyAifT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9gJHt0aGlzLnMudG9Gb3JtYXQoZSl9JHtufSR7dGhpcy5lLnRvRm9ybWF0KGUpfWA6Q2V9dG9EdXJhdGlvbihlLG4pe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5lLmRpZmYodGhpcy5zLGUsbik6di5pbnZhbGlkKHRoaXMuaW52YWxpZFJlYXNvbil9bWFwRW5kcG9pbnRzKGUpe3JldHVybiBrLmZyb21EYXRlVGltZXMoZSh0aGlzLnMpLGUodGhpcy5lKSl9fWNsYXNzIHB0e3N0YXRpYyBoYXNEU1QoZT1iLmRlZmF1bHRab25lKXtjb25zdCBuPWcubm93KCkuc2V0Wm9uZShlKS5zZXQoe21vbnRoOjEyfSk7cmV0dXJuIWUuaXNVbml2ZXJzYWwmJm4ub2Zmc2V0IT09bi5zZXQoe21vbnRoOjZ9KS5vZmZzZXR9c3RhdGljIGlzVmFsaWRJQU5BWm9uZShlKXtyZXR1cm4gSi5pc1ZhbGlkWm9uZShlKX1zdGF0aWMgbm9ybWFsaXplWm9uZShlKXtyZXR1cm4gc2UoZSxiLmRlZmF1bHRab25lKX1zdGF0aWMgZ2V0U3RhcnRPZldlZWsoe2xvY2FsZTplPW51bGwsbG9jT2JqOm49bnVsbH09e30pe3JldHVybihufHxULmNyZWF0ZShlKSkuZ2V0U3RhcnRPZldlZWsoKX1zdGF0aWMgZ2V0TWluaW11bURheXNJbkZpcnN0V2Vlayh7bG9jYWxlOmU9bnVsbCxsb2NPYmo6bj1udWxsfT17fSl7cmV0dXJuKG58fFQuY3JlYXRlKGUpKS5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKX1zdGF0aWMgZ2V0V2Vla2VuZFdlZWtkYXlzKHtsb2NhbGU6ZT1udWxsLGxvY09iajpuPW51bGx9PXt9KXtyZXR1cm4obnx8VC5jcmVhdGUoZSkpLmdldFdlZWtlbmREYXlzKCkuc2xpY2UoKX1zdGF0aWMgbW9udGhzKGU9ImxvbmciLHtsb2NhbGU6bj1udWxsLG51bWJlcmluZ1N5c3RlbTpyPW51bGwsbG9jT2JqOnM9bnVsbCxvdXRwdXRDYWxlbmRhcjppPSJncmVnb3J5In09e30pe3JldHVybihzfHxULmNyZWF0ZShuLHIsaSkpLm1vbnRocyhlKX1zdGF0aWMgbW9udGhzRm9ybWF0KGU9ImxvbmciLHtsb2NhbGU6bj1udWxsLG51bWJlcmluZ1N5c3RlbTpyPW51bGwsbG9jT2JqOnM9bnVsbCxvdXRwdXRDYWxlbmRhcjppPSJncmVnb3J5In09e30pe3JldHVybihzfHxULmNyZWF0ZShuLHIsaSkpLm1vbnRocyhlLCEwKX1zdGF0aWMgd2Vla2RheXMoZT0ibG9uZyIse2xvY2FsZTpuPW51bGwsbnVtYmVyaW5nU3lzdGVtOnI9bnVsbCxsb2NPYmo6cz1udWxsfT17fSl7cmV0dXJuKHN8fFQuY3JlYXRlKG4scixudWxsKSkud2Vla2RheXMoZSl9c3RhdGljIHdlZWtkYXlzRm9ybWF0KGU9ImxvbmciLHtsb2NhbGU6bj1udWxsLG51bWJlcmluZ1N5c3RlbTpyPW51bGwsbG9jT2JqOnM9bnVsbH09e30pe3JldHVybihzfHxULmNyZWF0ZShuLHIsbnVsbCkpLndlZWtkYXlzKGUsITApfXN0YXRpYyBtZXJpZGllbXMoe2xvY2FsZTplPW51bGx9PXt9KXtyZXR1cm4gVC5jcmVhdGUoZSkubWVyaWRpZW1zKCl9c3RhdGljIGVyYXMoZT0ic2hvcnQiLHtsb2NhbGU6bj1udWxsfT17fSl7cmV0dXJuIFQuY3JlYXRlKG4sbnVsbCwiZ3JlZ29yeSIpLmVyYXMoZSl9c3RhdGljIGZlYXR1cmVzKCl7cmV0dXJue3JlbGF0aXZlOkFyKCksbG9jYWxlV2VlazpWcigpfX19ZnVuY3Rpb24gc3ModCxlKXtjb25zdCBuPXM9PnMudG9VVEMoMCx7a2VlcExvY2FsVGltZTohMH0pLnN0YXJ0T2YoImRheSIpLnZhbHVlT2YoKSxyPW4oZSktbih0KTtyZXR1cm4gTWF0aC5mbG9vcih2LmZyb21NaWxsaXMocikuYXMoImRheXMiKSl9ZnVuY3Rpb24geWwodCxlLG4pe2NvbnN0IHI9W1sieWVhcnMiLCh1LGwpPT5sLnllYXItdS55ZWFyXSxbInF1YXJ0ZXJzIiwodSxsKT0+bC5xdWFydGVyLXUucXVhcnRlcisobC55ZWFyLXUueWVhcikqNF0sWyJtb250aHMiLCh1LGwpPT5sLm1vbnRoLXUubW9udGgrKGwueWVhci11LnllYXIpKjEyXSxbIndlZWtzIiwodSxsKT0+e2NvbnN0IGM9c3ModSxsKTtyZXR1cm4oYy1jJTcpLzd9XSxbImRheXMiLHNzXV0scz17fSxpPXQ7bGV0IGEsbztmb3IoY29uc3RbdSxsXW9mIHIpbi5pbmRleE9mKHUpPj0wJiYoYT11LHNbdV09bCh0LGUpLG89aS5wbHVzKHMpLG8+ZT8oc1t1XS0tLHQ9aS5wbHVzKHMpLHQ+ZSYmKG89dCxzW3VdLS0sdD1pLnBsdXMocykpKTp0PW8pO3JldHVyblt0LHMsbyxhXX1mdW5jdGlvbiBnbCh0LGUsbixyKXtsZXRbcyxpLGEsb109eWwodCxlLG4pO2NvbnN0IHU9ZS1zLGw9bi5maWx0ZXIoZD0+WyJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwibWlsbGlzZWNvbmRzIl0uaW5kZXhPZihkKT49MCk7bC5sZW5ndGg9PT0wJiYoYTxlJiYoYT1zLnBsdXMoe1tvXToxfSkpLGEhPT1zJiYoaVtvXT0oaVtvXXx8MCkrdS8oYS1zKSkpO2NvbnN0IGM9di5mcm9tT2JqZWN0KGkscik7cmV0dXJuIGwubGVuZ3RoPjA/di5mcm9tTWlsbGlzKHUscikuc2hpZnRUbyguLi5sKS5wbHVzKGMpOmN9Y29uc3Qgcm49e2FyYWI6IlvZoC3ZqV0iLGFyYWJleHQ6IlvbsC3buV0iLGJhbGk6IlvhrZAt4a2ZXSIsYmVuZzoiW+Cnpi3gp69dIixkZXZhOiJb4KWmLeClr10iLGZ1bGx3aWRlOiJb77yQLe+8mV0iLGd1anI6Ilvgq6Yt4KuvXSIsaGFuaWRlYzoiW+OAh3zkuIB85LqMfOS4iXzlm5t85LqUfOWFrXzkuIN85YWrfOS5nV0iLGtobXI6Ilvhn6At4Z+pXSIsa25kYToiW+Czpi3gs69dIixsYW9vOiJb4LuQLeC7mV0iLGxpbWI6IlvhpYYt4aWPXSIsbWx5bToiW+C1pi3gta9dIixtb25nOiJb4aCQLeGgmV0iLG15bXI6IlvhgYAt4YGJXSIsb3J5YToiW+Ctpi3gra9dIix0YW1sZGVjOiJb4K+mLeCvr10iLHRlbHU6IlvgsaYt4LGvXSIsdGhhaToiW+C5kC3guZldIix0aWJ0OiJb4LygLeC8qV0iLGxhdG46IlxcZCJ9LGlzPXthcmFiOlsxNjMyLDE2NDFdLGFyYWJleHQ6WzE3NzYsMTc4NV0sYmFsaTpbNjk5Miw3MDAxXSxiZW5nOlsyNTM0LDI1NDNdLGRldmE6WzI0MDYsMjQxNV0sZnVsbHdpZGU6WzY1Mjk2LDY1MzAzXSxndWpyOlsyNzkwLDI3OTldLGtobXI6WzYxMTIsNjEyMV0sa25kYTpbMzMwMiwzMzExXSxsYW9vOlszNzkyLDM4MDFdLGxpbWI6WzY0NzAsNjQ3OV0sbWx5bTpbMzQzMCwzNDM5XSxtb25nOls2MTYwLDYxNjldLG15bXI6WzQxNjAsNDE2OV0sb3J5YTpbMjkxOCwyOTI3XSx0YW1sZGVjOlszMDQ2LDMwNTVdLHRlbHU6WzMxNzQsMzE4M10sdGhhaTpbMzY2NCwzNjczXSx0aWJ0OlszODcyLDM4ODFdfSxwbD1ybi5oYW5pZGVjLnJlcGxhY2UoL1tcW3xcXV0vZywiIikuc3BsaXQoIiIpO2Z1bmN0aW9uIHdsKHQpe2xldCBlPXBhcnNlSW50KHQsMTApO2lmKGlzTmFOKGUpKXtlPSIiO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKXtjb25zdCByPXQuY2hhckNvZGVBdChuKTtpZih0W25dLnNlYXJjaChybi5oYW5pZGVjKSE9PS0xKWUrPXBsLmluZGV4T2YodFtuXSk7ZWxzZSBmb3IoY29uc3QgcyBpbiBpcyl7Y29uc3RbaSxhXT1pc1tzXTtyPj1pJiZyPD1hJiYoZSs9ci1pKX19cmV0dXJuIHBhcnNlSW50KGUsMTApfWVsc2UgcmV0dXJuIGV9ZnVuY3Rpb24gWih7bnVtYmVyaW5nU3lzdGVtOnR9LGU9IiIpe3JldHVybiBuZXcgUmVnRXhwKGAke3JuW3R8fCJsYXRuIl19JHtlfWApfWNvbnN0IHZsPSJtaXNzaW5nIEludGwuRGF0ZVRpbWVGb3JtYXQuZm9ybWF0VG9QYXJ0cyBzdXBwb3J0IjtmdW5jdGlvbiBPKHQsZT1uPT5uKXtyZXR1cm57cmVnZXg6dCxkZXNlcjooW25dKT0+ZSh3bChuKSl9fWNvbnN0IGFzPSJbIMKgXSIsb3M9bmV3IFJlZ0V4cChhcywiZyIpO2Z1bmN0aW9uIE9sKHQpe3JldHVybiB0LnJlcGxhY2UoL1wuL2csIlxcLj8iKS5yZXBsYWNlKG9zLGFzKX1mdW5jdGlvbiB1cyh0KXtyZXR1cm4gdC5yZXBsYWNlKC9cLi9nLCIiKS5yZXBsYWNlKG9zLCIgIikudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBSKHQsZSl7cmV0dXJuIHQ9PT1udWxsP251bGw6e3JlZ2V4OlJlZ0V4cCh0Lm1hcChPbCkuam9pbigifCIpKSxkZXNlcjooW25dKT0+dC5maW5kSW5kZXgocj0+dXMobik9PT11cyhyKSkrZX19ZnVuY3Rpb24gbHModCxlKXtyZXR1cm57cmVnZXg6dCxkZXNlcjooWyxuLHJdKT0+bXQobixyKSxncm91cHM6ZX19ZnVuY3Rpb24gd3QodCl7cmV0dXJue3JlZ2V4OnQsZGVzZXI6KFtlXSk9PmV9fWZ1bmN0aW9uIFRsKHQpe3JldHVybiB0LnJlcGxhY2UoL1tcLVxbXF17fSgpKis/LixcXFxeJHwjXHNdL2csIlxcJCYiKX1mdW5jdGlvbiBTbCh0LGUpe2NvbnN0IG49WihlKSxyPVooZSwiezJ9Iikscz1aKGUsInszfSIpLGk9WihlLCJ7NH0iKSxhPVooZSwiezZ9Iiksbz1aKGUsInsxLDJ9IiksdT1aKGUsInsxLDN9IiksbD1aKGUsInsxLDZ9IiksYz1aKGUsInsxLDl9IiksZD1aKGUsInsyLDR9IikscD1aKGUsIns0LDZ9IiksaD1NPT4oe3JlZ2V4OlJlZ0V4cChUbChNLnZhbCkpLGRlc2VyOihbal0pPT5qLGxpdGVyYWw6ITB9KSxVPShNPT57aWYodC5saXRlcmFsKXJldHVybiBoKE0pO3N3aXRjaChNLnZhbCl7Y2FzZSJHIjpyZXR1cm4gUihlLmVyYXMoInNob3J0IiksMCk7Y2FzZSJHRyI6cmV0dXJuIFIoZS5lcmFzKCJsb25nIiksMCk7Y2FzZSJ5IjpyZXR1cm4gTyhsKTtjYXNlInl5IjpyZXR1cm4gTyhkLFh0KTtjYXNlInl5eXkiOnJldHVybiBPKGkpO2Nhc2UieXl5eXkiOnJldHVybiBPKHApO2Nhc2UieXl5eXl5IjpyZXR1cm4gTyhhKTtjYXNlIk0iOnJldHVybiBPKG8pO2Nhc2UiTU0iOnJldHVybiBPKHIpO2Nhc2UiTU1NIjpyZXR1cm4gUihlLm1vbnRocygic2hvcnQiLCEwKSwxKTtjYXNlIk1NTU0iOnJldHVybiBSKGUubW9udGhzKCJsb25nIiwhMCksMSk7Y2FzZSJMIjpyZXR1cm4gTyhvKTtjYXNlIkxMIjpyZXR1cm4gTyhyKTtjYXNlIkxMTCI6cmV0dXJuIFIoZS5tb250aHMoInNob3J0IiwhMSksMSk7Y2FzZSJMTExMIjpyZXR1cm4gUihlLm1vbnRocygibG9uZyIsITEpLDEpO2Nhc2UiZCI6cmV0dXJuIE8obyk7Y2FzZSJkZCI6cmV0dXJuIE8ocik7Y2FzZSJvIjpyZXR1cm4gTyh1KTtjYXNlIm9vbyI6cmV0dXJuIE8ocyk7Y2FzZSJISCI6cmV0dXJuIE8ocik7Y2FzZSJIIjpyZXR1cm4gTyhvKTtjYXNlImhoIjpyZXR1cm4gTyhyKTtjYXNlImgiOnJldHVybiBPKG8pO2Nhc2UibW0iOnJldHVybiBPKHIpO2Nhc2UibSI6cmV0dXJuIE8obyk7Y2FzZSJxIjpyZXR1cm4gTyhvKTtjYXNlInFxIjpyZXR1cm4gTyhyKTtjYXNlInMiOnJldHVybiBPKG8pO2Nhc2Uic3MiOnJldHVybiBPKHIpO2Nhc2UiUyI6cmV0dXJuIE8odSk7Y2FzZSJTU1MiOnJldHVybiBPKHMpO2Nhc2UidSI6cmV0dXJuIHd0KGMpO2Nhc2UidXUiOnJldHVybiB3dChvKTtjYXNlInV1dSI6cmV0dXJuIE8obik7Y2FzZSJhIjpyZXR1cm4gUihlLm1lcmlkaWVtcygpLDApO2Nhc2Uia2trayI6cmV0dXJuIE8oaSk7Y2FzZSJrayI6cmV0dXJuIE8oZCxYdCk7Y2FzZSJXIjpyZXR1cm4gTyhvKTtjYXNlIldXIjpyZXR1cm4gTyhyKTtjYXNlIkUiOmNhc2UiYyI6cmV0dXJuIE8obik7Y2FzZSJFRUUiOnJldHVybiBSKGUud2Vla2RheXMoInNob3J0IiwhMSksMSk7Y2FzZSJFRUVFIjpyZXR1cm4gUihlLndlZWtkYXlzKCJsb25nIiwhMSksMSk7Y2FzZSJjY2MiOnJldHVybiBSKGUud2Vla2RheXMoInNob3J0IiwhMCksMSk7Y2FzZSJjY2NjIjpyZXR1cm4gUihlLndlZWtkYXlzKCJsb25nIiwhMCksMSk7Y2FzZSJaIjpjYXNlIlpaIjpyZXR1cm4gbHMobmV3IFJlZ0V4cChgKFsrLV0ke28uc291cmNlfSkoPzo6KCR7ci5zb3VyY2V9KSk/YCksMik7Y2FzZSJaWloiOnJldHVybiBscyhuZXcgUmVnRXhwKGAoWystXSR7by5zb3VyY2V9KSgke3Iuc291cmNlfSk/YCksMik7Y2FzZSJ6IjpyZXR1cm4gd3QoL1thLXpfKy0vXXsxLDI1Nn0/L2kpO2Nhc2UiICI6cmV0dXJuIHd0KC9bXlxTXG5ccl0vKTtkZWZhdWx0OnJldHVybiBoKE0pfX0pKHQpfHx7aW52YWxpZFJlYXNvbjp2bH07cmV0dXJuIFUudG9rZW49dCxVfWNvbnN0IGtsPXt5ZWFyOnsiMi1kaWdpdCI6Inl5IixudW1lcmljOiJ5eXl5eSJ9LG1vbnRoOntudW1lcmljOiJNIiwiMi1kaWdpdCI6Ik1NIixzaG9ydDoiTU1NIixsb25nOiJNTU1NIn0sZGF5OntudW1lcmljOiJkIiwiMi1kaWdpdCI6ImRkIn0sd2Vla2RheTp7c2hvcnQ6IkVFRSIsbG9uZzoiRUVFRSJ9LGRheXBlcmlvZDoiYSIsZGF5UGVyaW9kOiJhIixob3VyMTI6e251bWVyaWM6ImgiLCIyLWRpZ2l0IjoiaGgifSxob3VyMjQ6e251bWVyaWM6IkgiLCIyLWRpZ2l0IjoiSEgifSxtaW51dGU6e251bWVyaWM6Im0iLCIyLWRpZ2l0IjoibW0ifSxzZWNvbmQ6e251bWVyaWM6InMiLCIyLWRpZ2l0Ijoic3MifSx0aW1lWm9uZU5hbWU6e2xvbmc6IlpaWlpaIixzaG9ydDoiWlpaIn19O2Z1bmN0aW9uIGJsKHQsZSxuKXtjb25zdHt0eXBlOnIsdmFsdWU6c309dDtpZihyPT09ImxpdGVyYWwiKXtjb25zdCB1PS9eXHMrJC8udGVzdChzKTtyZXR1cm57bGl0ZXJhbDohdSx2YWw6dT8iICI6c319Y29uc3QgaT1lW3JdO2xldCBhPXI7cj09PSJob3VyIiYmKGUuaG91cjEyIT1udWxsP2E9ZS5ob3VyMTI/ImhvdXIxMiI6ImhvdXIyNCI6ZS5ob3VyQ3ljbGUhPW51bGw/ZS5ob3VyQ3ljbGU9PT0iaDExInx8ZS5ob3VyQ3ljbGU9PT0iaDEyIj9hPSJob3VyMTIiOmE9ImhvdXIyNCI6YT1uLmhvdXIxMj8iaG91cjEyIjoiaG91cjI0Iik7bGV0IG89a2xbYV07aWYodHlwZW9mIG89PSJvYmplY3QiJiYobz1vW2ldKSxvKXJldHVybntsaXRlcmFsOiExLHZhbDpvfX1mdW5jdGlvbiBJbCh0KXtyZXR1cm5bYF4ke3QubWFwKG49Pm4ucmVnZXgpLnJlZHVjZSgobixyKT0+YCR7bn0oJHtyLnNvdXJjZX0pYCwiIil9JGAsdF19ZnVuY3Rpb24gRWwodCxlLG4pe2NvbnN0IHI9dC5tYXRjaChlKTtpZihyKXtjb25zdCBzPXt9O2xldCBpPTE7Zm9yKGNvbnN0IGEgaW4gbilpZihrZShuLGEpKXtjb25zdCBvPW5bYV0sdT1vLmdyb3Vwcz9vLmdyb3VwcysxOjE7IW8ubGl0ZXJhbCYmby50b2tlbiYmKHNbby50b2tlbi52YWxbMF1dPW8uZGVzZXIoci5zbGljZShpLGkrdSkpKSxpKz11fXJldHVybltyLHNdfWVsc2UgcmV0dXJuW3Ise31dfWZ1bmN0aW9uIE5sKHQpe2NvbnN0IGU9aT0+e3N3aXRjaChpKXtjYXNlIlMiOnJldHVybiJtaWxsaXNlY29uZCI7Y2FzZSJzIjpyZXR1cm4ic2Vjb25kIjtjYXNlIm0iOnJldHVybiJtaW51dGUiO2Nhc2UiaCI6Y2FzZSJIIjpyZXR1cm4iaG91ciI7Y2FzZSJkIjpyZXR1cm4iZGF5IjtjYXNlIm8iOnJldHVybiJvcmRpbmFsIjtjYXNlIkwiOmNhc2UiTSI6cmV0dXJuIm1vbnRoIjtjYXNlInkiOnJldHVybiJ5ZWFyIjtjYXNlIkUiOmNhc2UiYyI6cmV0dXJuIndlZWtkYXkiO2Nhc2UiVyI6cmV0dXJuIndlZWtOdW1iZXIiO2Nhc2UiayI6cmV0dXJuIndlZWtZZWFyIjtjYXNlInEiOnJldHVybiJxdWFydGVyIjtkZWZhdWx0OnJldHVybiBudWxsfX07bGV0IG49bnVsbCxyO3JldHVybiB5KHQueil8fChuPUouY3JlYXRlKHQueikpLHkodC5aKXx8KG58fChuPW5ldyB4KHQuWikpLHI9dC5aKSx5KHQucSl8fCh0Lk09KHQucS0xKSozKzEpLHkodC5oKXx8KHQuaDwxMiYmdC5hPT09MT90LmgrPTEyOnQuaD09PTEyJiZ0LmE9PT0wJiYodC5oPTApKSx0Lkc9PT0wJiZ0LnkmJih0Lnk9LXQueSkseSh0LnUpfHwodC5TPVF0KHQudSkpLFtPYmplY3Qua2V5cyh0KS5yZWR1Y2UoKGksYSk9Pntjb25zdCBvPWUoYSk7cmV0dXJuIG8mJihpW29dPXRbYV0pLGl9LHt9KSxuLHJdfWxldCBzbj1udWxsO2Z1bmN0aW9uIE1sKCl7cmV0dXJuIHNufHwoc249Zy5mcm9tTWlsbGlzKDE1NTU1NTU1NTU1NTUpKSxzbn1mdW5jdGlvbiB4bCh0LGUpe2lmKHQubGl0ZXJhbClyZXR1cm4gdDtjb25zdCBuPU4ubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0LnZhbCkscj1kcyhuLGUpO3JldHVybiByPT1udWxsfHxyLmluY2x1ZGVzKHZvaWQgMCk/dDpyfWZ1bmN0aW9uIGNzKHQsZSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4udC5tYXAobj0+eGwobixlKSkpfWZ1bmN0aW9uIGZzKHQsZSxuKXtjb25zdCByPWNzKE4ucGFyc2VGb3JtYXQobiksdCkscz1yLm1hcChhPT5TbChhLHQpKSxpPXMuZmluZChhPT5hLmludmFsaWRSZWFzb24pO2lmKGkpcmV0dXJue2lucHV0OmUsdG9rZW5zOnIsaW52YWxpZFJlYXNvbjppLmludmFsaWRSZWFzb259O3tjb25zdFthLG9dPUlsKHMpLHU9UmVnRXhwKGEsImkiKSxbbCxjXT1FbChlLHUsbyksW2QscCxoXT1jP05sKGMpOltudWxsLG51bGwsdm9pZCAwXTtpZihrZShjLCJhIikmJmtlKGMsIkgiKSl0aHJvdyBuZXcgU2UoIkNhbid0IGluY2x1ZGUgbWVyaWRpZW0gd2hlbiBzcGVjaWZ5aW5nIDI0LWhvdXIgZm9ybWF0Iik7cmV0dXJue2lucHV0OmUsdG9rZW5zOnIscmVnZXg6dSxyYXdNYXRjaGVzOmwsbWF0Y2hlczpjLHJlc3VsdDpkLHpvbmU6cCxzcGVjaWZpY09mZnNldDpofX19ZnVuY3Rpb24gRGwodCxlLG4pe2NvbnN0e3Jlc3VsdDpyLHpvbmU6cyxzcGVjaWZpY09mZnNldDppLGludmFsaWRSZWFzb246YX09ZnModCxlLG4pO3JldHVybltyLHMsaSxhXX1mdW5jdGlvbiBkcyh0LGUpe2lmKCF0KXJldHVybiBudWxsO2NvbnN0IHI9Ti5jcmVhdGUoZSx0KS5kdEZvcm1hdHRlcihNbCgpKSxzPXIuZm9ybWF0VG9QYXJ0cygpLGk9ci5yZXNvbHZlZE9wdGlvbnMoKTtyZXR1cm4gcy5tYXAoYT0+YmwoYSx0LGkpKX1jb25zdCBhbj0iSW52YWxpZCBEYXRlVGltZSIsaHM9ODY0ZTEzO2Z1bmN0aW9uIHZ0KHQpe3JldHVybiBuZXcgJCgidW5zdXBwb3J0ZWQgem9uZSIsYHRoZSB6b25lICIke3QubmFtZX0iIGlzIG5vdCBzdXBwb3J0ZWRgKX1mdW5jdGlvbiBvbih0KXtyZXR1cm4gdC53ZWVrRGF0YT09PW51bGwmJih0LndlZWtEYXRhPWN0KHQuYykpLHQud2Vla0RhdGF9ZnVuY3Rpb24gdW4odCl7cmV0dXJuIHQubG9jYWxXZWVrRGF0YT09PW51bGwmJih0LmxvY2FsV2Vla0RhdGE9Y3QodC5jLHQubG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLHQubG9jLmdldFN0YXJ0T2ZXZWVrKCkpKSx0LmxvY2FsV2Vla0RhdGF9ZnVuY3Rpb24geWUodCxlKXtjb25zdCBuPXt0czp0LnRzLHpvbmU6dC56b25lLGM6dC5jLG86dC5vLGxvYzp0LmxvYyxpbnZhbGlkOnQuaW52YWxpZH07cmV0dXJuIG5ldyBnKHsuLi5uLC4uLmUsb2xkOm59KX1mdW5jdGlvbiBtcyh0LGUsbil7bGV0IHI9dC1lKjYwKjFlMztjb25zdCBzPW4ub2Zmc2V0KHIpO2lmKGU9PT1zKXJldHVybltyLGVdO3ItPShzLWUpKjYwKjFlMztjb25zdCBpPW4ub2Zmc2V0KHIpO3JldHVybiBzPT09aT9bcixzXTpbdC1NYXRoLm1pbihzLGkpKjYwKjFlMyxNYXRoLm1heChzLGkpXX1mdW5jdGlvbiBPdCh0LGUpe3QrPWUqNjAqMWUzO2NvbnN0IG49bmV3IERhdGUodCk7cmV0dXJue3llYXI6bi5nZXRVVENGdWxsWWVhcigpLG1vbnRoOm4uZ2V0VVRDTW9udGgoKSsxLGRheTpuLmdldFVUQ0RhdGUoKSxob3VyOm4uZ2V0VVRDSG91cnMoKSxtaW51dGU6bi5nZXRVVENNaW51dGVzKCksc2Vjb25kOm4uZ2V0VVRDU2Vjb25kcygpLG1pbGxpc2Vjb25kOm4uZ2V0VVRDTWlsbGlzZWNvbmRzKCl9fWZ1bmN0aW9uIFR0KHQsZSxuKXtyZXR1cm4gbXMoaHQodCksZSxuKX1mdW5jdGlvbiB5cyh0LGUpe2NvbnN0IG49dC5vLHI9dC5jLnllYXIrTWF0aC50cnVuYyhlLnllYXJzKSxzPXQuYy5tb250aCtNYXRoLnRydW5jKGUubW9udGhzKStNYXRoLnRydW5jKGUucXVhcnRlcnMpKjMsaT17Li4udC5jLHllYXI6cixtb250aDpzLGRheTpNYXRoLm1pbih0LmMuZGF5LGR0KHIscykpK01hdGgudHJ1bmMoZS5kYXlzKStNYXRoLnRydW5jKGUud2Vla3MpKjd9LGE9di5mcm9tT2JqZWN0KHt5ZWFyczplLnllYXJzLU1hdGgudHJ1bmMoZS55ZWFycykscXVhcnRlcnM6ZS5xdWFydGVycy1NYXRoLnRydW5jKGUucXVhcnRlcnMpLG1vbnRoczplLm1vbnRocy1NYXRoLnRydW5jKGUubW9udGhzKSx3ZWVrczplLndlZWtzLU1hdGgudHJ1bmMoZS53ZWVrcyksZGF5czplLmRheXMtTWF0aC50cnVuYyhlLmRheXMpLGhvdXJzOmUuaG91cnMsbWludXRlczplLm1pbnV0ZXMsc2Vjb25kczplLnNlY29uZHMsbWlsbGlzZWNvbmRzOmUubWlsbGlzZWNvbmRzfSkuYXMoIm1pbGxpc2Vjb25kcyIpLG89aHQoaSk7bGV0W3UsbF09bXMobyxuLHQuem9uZSk7cmV0dXJuIGEhPT0wJiYodSs9YSxsPXQuem9uZS5vZmZzZXQodSkpLHt0czp1LG86bH19ZnVuY3Rpb24gcWUodCxlLG4scixzLGkpe2NvbnN0e3NldFpvbmU6YSx6b25lOm99PW47aWYodCYmT2JqZWN0LmtleXModCkubGVuZ3RoIT09MHx8ZSl7Y29uc3QgdT1lfHxvLGw9Zy5mcm9tT2JqZWN0KHQsey4uLm4sem9uZTp1LHNwZWNpZmljT2Zmc2V0Oml9KTtyZXR1cm4gYT9sOmwuc2V0Wm9uZShvKX1lbHNlIHJldHVybiBnLmludmFsaWQobmV3ICQoInVucGFyc2FibGUiLGB0aGUgaW5wdXQgIiR7c30iIGNhbid0IGJlIHBhcnNlZCBhcyAke3J9YCkpfWZ1bmN0aW9uIFN0KHQsZSxuPSEwKXtyZXR1cm4gdC5pc1ZhbGlkP04uY3JlYXRlKFQuY3JlYXRlKCJlbi1VUyIpLHthbGxvd1o6bixmb3JjZVNpbXBsZTohMH0pLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0LGUpOm51bGx9ZnVuY3Rpb24gbG4odCxlKXtjb25zdCBuPXQuYy55ZWFyPjk5OTl8fHQuYy55ZWFyPDA7bGV0IHI9IiI7cmV0dXJuIG4mJnQuYy55ZWFyPj0wJiYocis9IisiKSxyKz1JKHQuYy55ZWFyLG4/Njo0KSxlPyhyKz0iLSIscis9SSh0LmMubW9udGgpLHIrPSItIixyKz1JKHQuYy5kYXkpKToocis9SSh0LmMubW9udGgpLHIrPUkodC5jLmRheSkpLHJ9ZnVuY3Rpb24gZ3ModCxlLG4scixzLGkpe2xldCBhPUkodC5jLmhvdXIpO3JldHVybiBlPyhhKz0iOiIsYSs9SSh0LmMubWludXRlKSwodC5jLm1pbGxpc2Vjb25kIT09MHx8dC5jLnNlY29uZCE9PTB8fCFuKSYmKGErPSI6IikpOmErPUkodC5jLm1pbnV0ZSksKHQuYy5taWxsaXNlY29uZCE9PTB8fHQuYy5zZWNvbmQhPT0wfHwhbikmJihhKz1JKHQuYy5zZWNvbmQpLCh0LmMubWlsbGlzZWNvbmQhPT0wfHwhcikmJihhKz0iLiIsYSs9SSh0LmMubWlsbGlzZWNvbmQsMykpKSxzJiYodC5pc09mZnNldEZpeGVkJiZ0Lm9mZnNldD09PTAmJiFpP2ErPSJaIjp0Lm88MD8oYSs9Ii0iLGErPUkoTWF0aC50cnVuYygtdC5vLzYwKSksYSs9IjoiLGErPUkoTWF0aC50cnVuYygtdC5vJTYwKSkpOihhKz0iKyIsYSs9SShNYXRoLnRydW5jKHQuby82MCkpLGErPSI6IixhKz1JKE1hdGgudHJ1bmModC5vJTYwKSkpKSxpJiYoYSs9IlsiK3Quem9uZS5pYW5hTmFtZSsiXSIpLGF9Y29uc3QgcHM9e21vbnRoOjEsZGF5OjEsaG91cjowLG1pbnV0ZTowLHNlY29uZDowLG1pbGxpc2Vjb25kOjB9LENsPXt3ZWVrTnVtYmVyOjEsd2Vla2RheToxLGhvdXI6MCxtaW51dGU6MCxzZWNvbmQ6MCxtaWxsaXNlY29uZDowfSxGbD17b3JkaW5hbDoxLGhvdXI6MCxtaW51dGU6MCxzZWNvbmQ6MCxtaWxsaXNlY29uZDowfSx3cz1bInllYXIiLCJtb250aCIsImRheSIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdLEFsPVsid2Vla1llYXIiLCJ3ZWVrTnVtYmVyIiwid2Vla2RheSIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJtaWxsaXNlY29uZCJdLFZsPVsieWVhciIsIm9yZGluYWwiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwibWlsbGlzZWNvbmQiXTtmdW5jdGlvbiBXbCh0KXtjb25zdCBlPXt5ZWFyOiJ5ZWFyIix5ZWFyczoieWVhciIsbW9udGg6Im1vbnRoIixtb250aHM6Im1vbnRoIixkYXk6ImRheSIsZGF5czoiZGF5Iixob3VyOiJob3VyIixob3VyczoiaG91ciIsbWludXRlOiJtaW51dGUiLG1pbnV0ZXM6Im1pbnV0ZSIscXVhcnRlcjoicXVhcnRlciIscXVhcnRlcnM6InF1YXJ0ZXIiLHNlY29uZDoic2Vjb25kIixzZWNvbmRzOiJzZWNvbmQiLG1pbGxpc2Vjb25kOiJtaWxsaXNlY29uZCIsbWlsbGlzZWNvbmRzOiJtaWxsaXNlY29uZCIsd2Vla2RheToid2Vla2RheSIsd2Vla2RheXM6IndlZWtkYXkiLHdlZWtudW1iZXI6IndlZWtOdW1iZXIiLHdlZWtzbnVtYmVyOiJ3ZWVrTnVtYmVyIix3ZWVrbnVtYmVyczoid2Vla051bWJlciIsd2Vla3llYXI6IndlZWtZZWFyIix3ZWVreWVhcnM6IndlZWtZZWFyIixvcmRpbmFsOiJvcmRpbmFsIn1bdC50b0xvd2VyQ2FzZSgpXTtpZighZSl0aHJvdyBuZXcgR24odCk7cmV0dXJuIGV9ZnVuY3Rpb24gdnModCl7c3dpdGNoKHQudG9Mb3dlckNhc2UoKSl7Y2FzZSJsb2NhbHdlZWtkYXkiOmNhc2UibG9jYWx3ZWVrZGF5cyI6cmV0dXJuImxvY2FsV2Vla2RheSI7Y2FzZSJsb2NhbHdlZWtudW1iZXIiOmNhc2UibG9jYWx3ZWVrbnVtYmVycyI6cmV0dXJuImxvY2FsV2Vla051bWJlciI7Y2FzZSJsb2NhbHdlZWt5ZWFyIjpjYXNlImxvY2Fsd2Vla3llYXJzIjpyZXR1cm4ibG9jYWxXZWVrWWVhciI7ZGVmYXVsdDpyZXR1cm4gV2wodCl9fWZ1bmN0aW9uIE9zKHQsZSl7Y29uc3Qgbj1zZShlLnpvbmUsYi5kZWZhdWx0Wm9uZSkscj1ULmZyb21PYmplY3QoZSkscz1iLm5vdygpO2xldCBpLGE7aWYoeSh0LnllYXIpKWk9cztlbHNle2Zvcihjb25zdCBsIG9mIHdzKXkodFtsXSkmJih0W2xdPXBzW2xdKTtjb25zdCBvPUNyKHQpfHxGcih0KTtpZihvKXJldHVybiBnLmludmFsaWQobyk7Y29uc3QgdT1uLm9mZnNldChzKTtbaSxhXT1UdCh0LHUsbil9cmV0dXJuIG5ldyBnKHt0czppLHpvbmU6bixsb2M6cixvOmF9KX1mdW5jdGlvbiBUcyh0LGUsbil7Y29uc3Qgcj15KG4ucm91bmQpPyEwOm4ucm91bmQscz0oYSxvKT0+KGE9S3QoYSxyfHxuLmNhbGVuZGFyeT8wOjIsITApLGUubG9jLmNsb25lKG4pLnJlbEZvcm1hdHRlcihuKS5mb3JtYXQoYSxvKSksaT1hPT5uLmNhbGVuZGFyeT9lLmhhc1NhbWUodCxhKT8wOmUuc3RhcnRPZihhKS5kaWZmKHQuc3RhcnRPZihhKSxhKS5nZXQoYSk6ZS5kaWZmKHQsYSkuZ2V0KGEpO2lmKG4udW5pdClyZXR1cm4gcyhpKG4udW5pdCksbi51bml0KTtmb3IoY29uc3QgYSBvZiBuLnVuaXRzKXtjb25zdCBvPWkoYSk7aWYoTWF0aC5hYnMobyk+PTEpcmV0dXJuIHMobyxhKX1yZXR1cm4gcyh0PmU/LTA6MCxuLnVuaXRzW24udW5pdHMubGVuZ3RoLTFdKX1mdW5jdGlvbiBTcyh0KXtsZXQgZT17fSxuO3JldHVybiB0Lmxlbmd0aD4wJiZ0eXBlb2YgdFt0Lmxlbmd0aC0xXT09Im9iamVjdCI/KGU9dFt0Lmxlbmd0aC0xXSxuPUFycmF5LmZyb20odCkuc2xpY2UoMCx0Lmxlbmd0aC0xKSk6bj1BcnJheS5mcm9tKHQpLFtlLG5dfWNsYXNzIGd7Y29uc3RydWN0b3IoZSl7Y29uc3Qgbj1lLnpvbmV8fGIuZGVmYXVsdFpvbmU7bGV0IHI9ZS5pbnZhbGlkfHwoTnVtYmVyLmlzTmFOKGUudHMpP25ldyAkKCJpbnZhbGlkIGlucHV0Iik6bnVsbCl8fChuLmlzVmFsaWQ/bnVsbDp2dChuKSk7dGhpcy50cz15KGUudHMpP2Iubm93KCk6ZS50cztsZXQgcz1udWxsLGk9bnVsbDtpZighcilpZihlLm9sZCYmZS5vbGQudHM9PT10aGlzLnRzJiZlLm9sZC56b25lLmVxdWFscyhuKSlbcyxpXT1bZS5vbGQuYyxlLm9sZC5vXTtlbHNle2NvbnN0IG89bi5vZmZzZXQodGhpcy50cyk7cz1PdCh0aGlzLnRzLG8pLHI9TnVtYmVyLmlzTmFOKHMueWVhcik/bmV3ICQoImludmFsaWQgaW5wdXQiKTpudWxsLHM9cj9udWxsOnMsaT1yP251bGw6b310aGlzLl96b25lPW4sdGhpcy5sb2M9ZS5sb2N8fFQuY3JlYXRlKCksdGhpcy5pbnZhbGlkPXIsdGhpcy53ZWVrRGF0YT1udWxsLHRoaXMubG9jYWxXZWVrRGF0YT1udWxsLHRoaXMuYz1zLHRoaXMubz1pLHRoaXMuaXNMdXhvbkRhdGVUaW1lPSEwfXN0YXRpYyBub3coKXtyZXR1cm4gbmV3IGcoe30pfXN0YXRpYyBsb2NhbCgpe2NvbnN0W2Usbl09U3MoYXJndW1lbnRzKSxbcixzLGksYSxvLHUsbF09bjtyZXR1cm4gT3Moe3llYXI6cixtb250aDpzLGRheTppLGhvdXI6YSxtaW51dGU6byxzZWNvbmQ6dSxtaWxsaXNlY29uZDpsfSxlKX1zdGF0aWMgdXRjKCl7Y29uc3RbZSxuXT1Tcyhhcmd1bWVudHMpLFtyLHMsaSxhLG8sdSxsXT1uO3JldHVybiBlLnpvbmU9eC51dGNJbnN0YW5jZSxPcyh7eWVhcjpyLG1vbnRoOnMsZGF5OmksaG91cjphLG1pbnV0ZTpvLHNlY29uZDp1LG1pbGxpc2Vjb25kOmx9LGUpfXN0YXRpYyBmcm9tSlNEYXRlKGUsbj17fSl7Y29uc3Qgcj1mdShlKT9lLnZhbHVlT2YoKTpOYU47aWYoTnVtYmVyLmlzTmFOKHIpKXJldHVybiBnLmludmFsaWQoImludmFsaWQgaW5wdXQiKTtjb25zdCBzPXNlKG4uem9uZSxiLmRlZmF1bHRab25lKTtyZXR1cm4gcy5pc1ZhbGlkP25ldyBnKHt0czpyLHpvbmU6cyxsb2M6VC5mcm9tT2JqZWN0KG4pfSk6Zy5pbnZhbGlkKHZ0KHMpKX1zdGF0aWMgZnJvbU1pbGxpcyhlLG49e30pe2lmKGRlKGUpKXJldHVybiBlPC1oc3x8ZT5ocz9nLmludmFsaWQoIlRpbWVzdGFtcCBvdXQgb2YgcmFuZ2UiKTpuZXcgZyh7dHM6ZSx6b25lOnNlKG4uem9uZSxiLmRlZmF1bHRab25lKSxsb2M6VC5mcm9tT2JqZWN0KG4pfSk7dGhyb3cgbmV3IEQoYGZyb21NaWxsaXMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXQsIGJ1dCByZWNlaXZlZCBhICR7dHlwZW9mIGV9IHdpdGggdmFsdWUgJHtlfWApfXN0YXRpYyBmcm9tU2Vjb25kcyhlLG49e30pe2lmKGRlKGUpKXJldHVybiBuZXcgZyh7dHM6ZSoxZTMsem9uZTpzZShuLnpvbmUsYi5kZWZhdWx0Wm9uZSksbG9jOlQuZnJvbU9iamVjdChuKX0pO3Rocm93IG5ldyBEKCJmcm9tU2Vjb25kcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCIpfXN0YXRpYyBmcm9tT2JqZWN0KGUsbj17fSl7ZT1lfHx7fTtjb25zdCByPXNlKG4uem9uZSxiLmRlZmF1bHRab25lKTtpZighci5pc1ZhbGlkKXJldHVybiBnLmludmFsaWQodnQocikpO2NvbnN0IHM9VC5mcm9tT2JqZWN0KG4pLGk9eXQoZSx2cykse21pbkRheXNJbkZpcnN0V2VlazphLHN0YXJ0T2ZXZWVrOm99PURyKGkscyksdT1iLm5vdygpLGw9eShuLnNwZWNpZmljT2Zmc2V0KT9yLm9mZnNldCh1KTpuLnNwZWNpZmljT2Zmc2V0LGM9IXkoaS5vcmRpbmFsKSxkPSF5KGkueWVhcikscD0heShpLm1vbnRoKXx8IXkoaS5kYXkpLGg9ZHx8cCxTPWkud2Vla1llYXJ8fGkud2Vla051bWJlcjtpZigoaHx8YykmJlMpdGhyb3cgbmV3IFNlKCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzIik7aWYocCYmYyl0aHJvdyBuZXcgU2UoIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5Iik7Y29uc3QgVT1TfHxpLndlZWtkYXkmJiFoO2xldCBNLGosQj1PdCh1LGwpO1U/KE09QWwsaj1DbCxCPWN0KEIsYSxvKSk6Yz8oTT1WbCxqPUZsLEI9SnQoQikpOihNPXdzLGo9cHMpO2xldCBGZT0hMTtmb3IoY29uc3QgSyBvZiBNKXtjb25zdCBidD1pW0tdO3koYnQpP0ZlP2lbS109altLXTppW0tdPUJbS106RmU9ITB9Y29uc3Qga3Q9VT91dShpLGEsbyk6Yz9sdShpKTpDcihpKSxIPWt0fHxGcihpKTtpZihIKXJldHVybiBnLmludmFsaWQoSCk7Y29uc3QgZ2U9VT9NcihpLGEsbyk6Yz94cihpKTppLFtwZSxvZV09VHQoZ2UsbCxyKSxRPW5ldyBnKHt0czpwZSx6b25lOnIsbzpvZSxsb2M6c30pO3JldHVybiBpLndlZWtkYXkmJmgmJmUud2Vla2RheSE9PVEud2Vla2RheT9nLmludmFsaWQoIm1pc21hdGNoZWQgd2Vla2RheSIsYHlvdSBjYW4ndCBzcGVjaWZ5IGJvdGggYSB3ZWVrZGF5IG9mICR7aS53ZWVrZGF5fSBhbmQgYSBkYXRlIG9mICR7US50b0lTTygpfWApOlF9c3RhdGljIGZyb21JU08oZSxuPXt9KXtjb25zdFtyLHNdPWVsKGUpO3JldHVybiBxZShyLHMsbiwiSVNPIDg2MDEiLGUpfXN0YXRpYyBmcm9tUkZDMjgyMihlLG49e30pe2NvbnN0W3Isc109dGwoZSk7cmV0dXJuIHFlKHIscyxuLCJSRkMgMjgyMiIsZSl9c3RhdGljIGZyb21IVFRQKGUsbj17fSl7Y29uc3RbcixzXT1ubChlKTtyZXR1cm4gcWUocixzLG4sIkhUVFAiLG4pfXN0YXRpYyBmcm9tRm9ybWF0KGUsbixyPXt9KXtpZih5KGUpfHx5KG4pKXRocm93IG5ldyBEKCJmcm9tRm9ybWF0IHJlcXVpcmVzIGFuIGlucHV0IHN0cmluZyBhbmQgYSBmb3JtYXQiKTtjb25zdHtsb2NhbGU6cz1udWxsLG51bWJlcmluZ1N5c3RlbTppPW51bGx9PXIsYT1ULmZyb21PcHRzKHtsb2NhbGU6cyxudW1iZXJpbmdTeXN0ZW06aSxkZWZhdWx0VG9FTjohMH0pLFtvLHUsbCxjXT1EbChhLGUsbik7cmV0dXJuIGM/Zy5pbnZhbGlkKGMpOnFlKG8sdSxyLGBmb3JtYXQgJHtufWAsZSxsKX1zdGF0aWMgZnJvbVN0cmluZyhlLG4scj17fSl7cmV0dXJuIGcuZnJvbUZvcm1hdChlLG4scil9c3RhdGljIGZyb21TUUwoZSxuPXt9KXtjb25zdFtyLHNdPWxsKGUpO3JldHVybiBxZShyLHMsbiwiU1FMIixlKX1zdGF0aWMgaW52YWxpZChlLG49bnVsbCl7aWYoIWUpdGhyb3cgbmV3IEQoIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRGF0ZVRpbWUgaXMgaW52YWxpZCIpO2NvbnN0IHI9ZSBpbnN0YW5jZW9mICQ/ZTpuZXcgJChlLG4pO2lmKGIudGhyb3dPbkludmFsaWQpdGhyb3cgbmV3IHpvKHIpO3JldHVybiBuZXcgZyh7aW52YWxpZDpyfSl9c3RhdGljIGlzRGF0ZVRpbWUoZSl7cmV0dXJuIGUmJmUuaXNMdXhvbkRhdGVUaW1lfHwhMX1zdGF0aWMgcGFyc2VGb3JtYXRGb3JPcHRzKGUsbj17fSl7Y29uc3Qgcj1kcyhlLFQuZnJvbU9iamVjdChuKSk7cmV0dXJuIHI/ci5tYXAocz0+cz9zLnZhbDpudWxsKS5qb2luKCIiKTpudWxsfXN0YXRpYyBleHBhbmRGb3JtYXQoZSxuPXt9KXtyZXR1cm4gY3MoTi5wYXJzZUZvcm1hdChlKSxULmZyb21PYmplY3QobikpLm1hcChzPT5zLnZhbCkuam9pbigiIil9Z2V0KGUpe3JldHVybiB0aGlzW2VdfWdldCBpc1ZhbGlkKCl7cmV0dXJuIHRoaXMuaW52YWxpZD09PW51bGx9Z2V0IGludmFsaWRSZWFzb24oKXtyZXR1cm4gdGhpcy5pbnZhbGlkP3RoaXMuaW52YWxpZC5yZWFzb246bnVsbH1nZXQgaW52YWxpZEV4cGxhbmF0aW9uKCl7cmV0dXJuIHRoaXMuaW52YWxpZD90aGlzLmludmFsaWQuZXhwbGFuYXRpb246bnVsbH1nZXQgbG9jYWxlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5sb2NhbGU6bnVsbH1nZXQgbnVtYmVyaW5nU3lzdGVtKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW06bnVsbH1nZXQgb3V0cHV0Q2FsZW5kYXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMubG9jLm91dHB1dENhbGVuZGFyOm51bGx9Z2V0IHpvbmUoKXtyZXR1cm4gdGhpcy5fem9uZX1nZXQgem9uZU5hbWUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuem9uZS5uYW1lOm51bGx9Z2V0IHllYXIoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy55ZWFyOk5hTn1nZXQgcXVhcnRlcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/TWF0aC5jZWlsKHRoaXMuYy5tb250aC8zKTpOYU59Z2V0IG1vbnRoKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubW9udGg6TmFOfWdldCBkYXkoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuYy5kYXk6TmFOfWdldCBob3VyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMuaG91cjpOYU59Z2V0IG1pbnV0ZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLm1pbnV0ZTpOYU59Z2V0IHNlY29uZCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy5jLnNlY29uZDpOYU59Z2V0IG1pbGxpc2Vjb25kKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLmMubWlsbGlzZWNvbmQ6TmFOfWdldCB3ZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/b24odGhpcykud2Vla1llYXI6TmFOfWdldCB3ZWVrTnVtYmVyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9vbih0aGlzKS53ZWVrTnVtYmVyOk5hTn1nZXQgd2Vla2RheSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/b24odGhpcykud2Vla2RheTpOYU59Z2V0IGlzV2Vla2VuZCgpe3JldHVybiB0aGlzLmlzVmFsaWQmJnRoaXMubG9jLmdldFdlZWtlbmREYXlzKCkuaW5jbHVkZXModGhpcy53ZWVrZGF5KX1nZXQgbG9jYWxXZWVrZGF5KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD91bih0aGlzKS53ZWVrZGF5Ok5hTn1nZXQgbG9jYWxXZWVrTnVtYmVyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD91bih0aGlzKS53ZWVrTnVtYmVyOk5hTn1nZXQgbG9jYWxXZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/dW4odGhpcykud2Vla1llYXI6TmFOfWdldCBvcmRpbmFsKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9KdCh0aGlzLmMpLm9yZGluYWw6TmFOfWdldCBtb250aFNob3J0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9wdC5tb250aHMoInNob3J0Iix7bG9jT2JqOnRoaXMubG9jfSlbdGhpcy5tb250aC0xXTpudWxsfWdldCBtb250aExvbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3B0Lm1vbnRocygibG9uZyIse2xvY09iajp0aGlzLmxvY30pW3RoaXMubW9udGgtMV06bnVsbH1nZXQgd2Vla2RheVNob3J0KCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9wdC53ZWVrZGF5cygic2hvcnQiLHtsb2NPYmo6dGhpcy5sb2N9KVt0aGlzLndlZWtkYXktMV06bnVsbH1nZXQgd2Vla2RheUxvbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3B0LndlZWtkYXlzKCJsb25nIix7bG9jT2JqOnRoaXMubG9jfSlbdGhpcy53ZWVrZGF5LTFdOm51bGx9Z2V0IG9mZnNldCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/K3RoaXMubzpOYU59Z2V0IG9mZnNldE5hbWVTaG9ydCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cyx7Zm9ybWF0OiJzaG9ydCIsbG9jYWxlOnRoaXMubG9jYWxlfSk6bnVsbH1nZXQgb2Zmc2V0TmFtZUxvbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMse2Zvcm1hdDoibG9uZyIsbG9jYWxlOnRoaXMubG9jYWxlfSk6bnVsbH1nZXQgaXNPZmZzZXRGaXhlZCgpe3JldHVybiB0aGlzLmlzVmFsaWQ/dGhpcy56b25lLmlzVW5pdmVyc2FsOm51bGx9Z2V0IGlzSW5EU1QoKXtyZXR1cm4gdGhpcy5pc09mZnNldEZpeGVkPyExOnRoaXMub2Zmc2V0PnRoaXMuc2V0KHttb250aDoxLGRheToxfSkub2Zmc2V0fHx0aGlzLm9mZnNldD50aGlzLnNldCh7bW9udGg6NX0pLm9mZnNldH1nZXRQb3NzaWJsZU9mZnNldHMoKXtpZighdGhpcy5pc1ZhbGlkfHx0aGlzLmlzT2Zmc2V0Rml4ZWQpcmV0dXJuW3RoaXNdO2NvbnN0IGU9ODY0ZTUsbj02ZTQscj1odCh0aGlzLmMpLHM9dGhpcy56b25lLm9mZnNldChyLWUpLGk9dGhpcy56b25lLm9mZnNldChyK2UpLGE9dGhpcy56b25lLm9mZnNldChyLXMqbiksbz10aGlzLnpvbmUub2Zmc2V0KHItaSpuKTtpZihhPT09bylyZXR1cm5bdGhpc107Y29uc3QgdT1yLWEqbixsPXItbypuLGM9T3QodSxhKSxkPU90KGwsbyk7cmV0dXJuIGMuaG91cj09PWQuaG91ciYmYy5taW51dGU9PT1kLm1pbnV0ZSYmYy5zZWNvbmQ9PT1kLnNlY29uZCYmYy5taWxsaXNlY29uZD09PWQubWlsbGlzZWNvbmQ/W3llKHRoaXMse3RzOnV9KSx5ZSh0aGlzLHt0czpsfSldOlt0aGlzXX1nZXQgaXNJbkxlYXBZZWFyKCl7cmV0dXJuICRlKHRoaXMueWVhcil9Z2V0IGRheXNJbk1vbnRoKCl7cmV0dXJuIGR0KHRoaXMueWVhcix0aGlzLm1vbnRoKX1nZXQgZGF5c0luWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/YmUodGhpcy55ZWFyKTpOYU59Z2V0IHdlZWtzSW5XZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/WmUodGhpcy53ZWVrWWVhcik6TmFOfWdldCB3ZWVrc0luTG9jYWxXZWVrWWVhcigpe3JldHVybiB0aGlzLmlzVmFsaWQ/WmUodGhpcy5sb2NhbFdlZWtZZWFyLHRoaXMubG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLHRoaXMubG9jLmdldFN0YXJ0T2ZXZWVrKCkpOk5hTn1yZXNvbHZlZExvY2FsZU9wdGlvbnMoZT17fSl7Y29uc3R7bG9jYWxlOm4sbnVtYmVyaW5nU3lzdGVtOnIsY2FsZW5kYXI6c309Ti5jcmVhdGUodGhpcy5sb2MuY2xvbmUoZSksZSkucmVzb2x2ZWRPcHRpb25zKHRoaXMpO3JldHVybntsb2NhbGU6bixudW1iZXJpbmdTeXN0ZW06cixvdXRwdXRDYWxlbmRhcjpzfX10b1VUQyhlPTAsbj17fSl7cmV0dXJuIHRoaXMuc2V0Wm9uZSh4Lmluc3RhbmNlKGUpLG4pfXRvTG9jYWwoKXtyZXR1cm4gdGhpcy5zZXRab25lKGIuZGVmYXVsdFpvbmUpfXNldFpvbmUoZSx7a2VlcExvY2FsVGltZTpuPSExLGtlZXBDYWxlbmRhclRpbWU6cj0hMX09e30pe2lmKGU9c2UoZSxiLmRlZmF1bHRab25lKSxlLmVxdWFscyh0aGlzLnpvbmUpKXJldHVybiB0aGlzO2lmKGUuaXNWYWxpZCl7bGV0IHM9dGhpcy50cztpZihufHxyKXtjb25zdCBpPWUub2Zmc2V0KHRoaXMudHMpLGE9dGhpcy50b09iamVjdCgpO1tzXT1UdChhLGksZSl9cmV0dXJuIHllKHRoaXMse3RzOnMsem9uZTplfSl9ZWxzZSByZXR1cm4gZy5pbnZhbGlkKHZ0KGUpKX1yZWNvbmZpZ3VyZSh7bG9jYWxlOmUsbnVtYmVyaW5nU3lzdGVtOm4sb3V0cHV0Q2FsZW5kYXI6cn09e30pe2NvbnN0IHM9dGhpcy5sb2MuY2xvbmUoe2xvY2FsZTplLG51bWJlcmluZ1N5c3RlbTpuLG91dHB1dENhbGVuZGFyOnJ9KTtyZXR1cm4geWUodGhpcyx7bG9jOnN9KX1zZXRMb2NhbGUoZSl7cmV0dXJuIHRoaXMucmVjb25maWd1cmUoe2xvY2FsZTplfSl9c2V0KGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj15dChlLHZzKSx7bWluRGF5c0luRmlyc3RXZWVrOnIsc3RhcnRPZldlZWs6c309RHIobix0aGlzLmxvYyksaT0heShuLndlZWtZZWFyKXx8IXkobi53ZWVrTnVtYmVyKXx8IXkobi53ZWVrZGF5KSxhPSF5KG4ub3JkaW5hbCksbz0heShuLnllYXIpLHU9IXkobi5tb250aCl8fCF5KG4uZGF5KSxsPW98fHUsYz1uLndlZWtZZWFyfHxuLndlZWtOdW1iZXI7aWYoKGx8fGEpJiZjKXRocm93IG5ldyBTZSgiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFscyIpO2lmKHUmJmEpdGhyb3cgbmV3IFNlKCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheSIpO2xldCBkO2k/ZD1Ncih7Li4uY3QodGhpcy5jLHIscyksLi4ubn0scixzKTp5KG4ub3JkaW5hbCk/KGQ9ey4uLnRoaXMudG9PYmplY3QoKSwuLi5ufSx5KG4uZGF5KSYmKGQuZGF5PU1hdGgubWluKGR0KGQueWVhcixkLm1vbnRoKSxkLmRheSkpKTpkPXhyKHsuLi5KdCh0aGlzLmMpLC4uLm59KTtjb25zdFtwLGhdPVR0KGQsdGhpcy5vLHRoaXMuem9uZSk7cmV0dXJuIHllKHRoaXMse3RzOnAsbzpofSl9cGx1cyhlKXtpZighdGhpcy5pc1ZhbGlkKXJldHVybiB0aGlzO2NvbnN0IG49di5mcm9tRHVyYXRpb25MaWtlKGUpO3JldHVybiB5ZSh0aGlzLHlzKHRoaXMsbikpfW1pbnVzKGUpe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIHRoaXM7Y29uc3Qgbj12LmZyb21EdXJhdGlvbkxpa2UoZSkubmVnYXRlKCk7cmV0dXJuIHllKHRoaXMseXModGhpcyxuKSl9c3RhcnRPZihlLHt1c2VMb2NhbGVXZWVrczpuPSExfT17fSl7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4gdGhpcztjb25zdCByPXt9LHM9di5ub3JtYWxpemVVbml0KGUpO3N3aXRjaChzKXtjYXNlInllYXJzIjpyLm1vbnRoPTE7Y2FzZSJxdWFydGVycyI6Y2FzZSJtb250aHMiOnIuZGF5PTE7Y2FzZSJ3ZWVrcyI6Y2FzZSJkYXlzIjpyLmhvdXI9MDtjYXNlImhvdXJzIjpyLm1pbnV0ZT0wO2Nhc2UibWludXRlcyI6ci5zZWNvbmQ9MDtjYXNlInNlY29uZHMiOnIubWlsbGlzZWNvbmQ9MDticmVha31pZihzPT09IndlZWtzIilpZihuKXtjb25zdCBpPXRoaXMubG9jLmdldFN0YXJ0T2ZXZWVrKCkse3dlZWtkYXk6YX09dGhpczthPGkmJihyLndlZWtOdW1iZXI9dGhpcy53ZWVrTnVtYmVyLTEpLHIud2Vla2RheT1pfWVsc2Ugci53ZWVrZGF5PTE7aWYocz09PSJxdWFydGVycyIpe2NvbnN0IGk9TWF0aC5jZWlsKHRoaXMubW9udGgvMyk7ci5tb250aD0oaS0xKSozKzF9cmV0dXJuIHRoaXMuc2V0KHIpfWVuZE9mKGUsbil7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnBsdXMoe1tlXToxfSkuc3RhcnRPZihlLG4pLm1pbnVzKDEpOnRoaXN9dG9Gb3JtYXQoZSxuPXt9KXtyZXR1cm4gdGhpcy5pc1ZhbGlkP04uY3JlYXRlKHRoaXMubG9jLnJlZGVmYXVsdFRvRU4obikpLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0aGlzLGUpOmFufXRvTG9jYWxlU3RyaW5nKGU9aXQsbj17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9OLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShuKSxlKS5mb3JtYXREYXRlVGltZSh0aGlzKTphbn10b0xvY2FsZVBhcnRzKGU9e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/Ti5jcmVhdGUodGhpcy5sb2MuY2xvbmUoZSksZSkuZm9ybWF0RGF0ZVRpbWVQYXJ0cyh0aGlzKTpbXX10b0lTTyh7Zm9ybWF0OmU9ImV4dGVuZGVkIixzdXBwcmVzc1NlY29uZHM6bj0hMSxzdXBwcmVzc01pbGxpc2Vjb25kczpyPSExLGluY2x1ZGVPZmZzZXQ6cz0hMCxleHRlbmRlZFpvbmU6aT0hMX09e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7Y29uc3QgYT1lPT09ImV4dGVuZGVkIjtsZXQgbz1sbih0aGlzLGEpO3JldHVybiBvKz0iVCIsbys9Z3ModGhpcyxhLG4scixzLGkpLG99dG9JU09EYXRlKHtmb3JtYXQ6ZT0iZXh0ZW5kZWQifT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9sbih0aGlzLGU9PT0iZXh0ZW5kZWQiKTpudWxsfXRvSVNPV2Vla0RhdGUoKXtyZXR1cm4gU3QodGhpcywia2tray0nVydXVy1jIil9dG9JU09UaW1lKHtzdXBwcmVzc01pbGxpc2Vjb25kczplPSExLHN1cHByZXNzU2Vjb25kczpuPSExLGluY2x1ZGVPZmZzZXQ6cj0hMCxpbmNsdWRlUHJlZml4OnM9ITEsZXh0ZW5kZWRab25lOmk9ITEsZm9ybWF0OmE9ImV4dGVuZGVkIn09e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/KHM/IlQiOiIiKStncyh0aGlzLGE9PT0iZXh0ZW5kZWQiLG4sZSxyLGkpOm51bGx9dG9SRkMyODIyKCl7cmV0dXJuIFN0KHRoaXMsIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgWlpaIiwhMSl9dG9IVFRQKCl7cmV0dXJuIFN0KHRoaXMudG9VVEMoKSwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJyIpfXRvU1FMRGF0ZSgpe3JldHVybiB0aGlzLmlzVmFsaWQ/bG4odGhpcywhMCk6bnVsbH10b1NRTFRpbWUoe2luY2x1ZGVPZmZzZXQ6ZT0hMCxpbmNsdWRlWm9uZTpuPSExLGluY2x1ZGVPZmZzZXRTcGFjZTpyPSEwfT17fSl7bGV0IHM9IkhIOm1tOnNzLlNTUyI7cmV0dXJuKG58fGUpJiYociYmKHMrPSIgIiksbj9zKz0ieiI6ZSYmKHMrPSJaWiIpKSxTdCh0aGlzLHMsITApfXRvU1FMKGU9e30pe3JldHVybiB0aGlzLmlzVmFsaWQ/YCR7dGhpcy50b1NRTERhdGUoKX0gJHt0aGlzLnRvU1FMVGltZShlKX1gOm51bGx9dG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudG9JU08oKTphbn1bU3ltYm9sLmZvcigibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20iKV0oKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2BEYXRlVGltZSB7IHRzOiAke3RoaXMudG9JU08oKX0sIHpvbmU6ICR7dGhpcy56b25lLm5hbWV9LCBsb2NhbGU6ICR7dGhpcy5sb2NhbGV9IH1gOmBEYXRlVGltZSB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gfXZhbHVlT2YoKXtyZXR1cm4gdGhpcy50b01pbGxpcygpfXRvTWlsbGlzKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD90aGlzLnRzOk5hTn10b1NlY29uZHMoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP3RoaXMudHMvMWUzOk5hTn10b1VuaXhJbnRlZ2VyKCl7cmV0dXJuIHRoaXMuaXNWYWxpZD9NYXRoLmZsb29yKHRoaXMudHMvMWUzKTpOYU59dG9KU09OKCl7cmV0dXJuIHRoaXMudG9JU08oKX10b0JTT04oKXtyZXR1cm4gdGhpcy50b0pTRGF0ZSgpfXRvT2JqZWN0KGU9e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJue307Y29uc3Qgbj17Li4udGhpcy5jfTtyZXR1cm4gZS5pbmNsdWRlQ29uZmlnJiYobi5vdXRwdXRDYWxlbmRhcj10aGlzLm91dHB1dENhbGVuZGFyLG4ubnVtYmVyaW5nU3lzdGVtPXRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSxuLmxvY2FsZT10aGlzLmxvYy5sb2NhbGUpLG59dG9KU0RhdGUoKXtyZXR1cm4gbmV3IERhdGUodGhpcy5pc1ZhbGlkP3RoaXMudHM6TmFOKX1kaWZmKGUsbj0ibWlsbGlzZWNvbmRzIixyPXt9KXtpZighdGhpcy5pc1ZhbGlkfHwhZS5pc1ZhbGlkKXJldHVybiB2LmludmFsaWQoImNyZWF0ZWQgYnkgZGlmZmluZyBhbiBpbnZhbGlkIERhdGVUaW1lIik7Y29uc3Qgcz17bG9jYWxlOnRoaXMubG9jYWxlLG51bWJlcmluZ1N5c3RlbTp0aGlzLm51bWJlcmluZ1N5c3RlbSwuLi5yfSxpPWR1KG4pLm1hcCh2Lm5vcm1hbGl6ZVVuaXQpLGE9ZS52YWx1ZU9mKCk+dGhpcy52YWx1ZU9mKCksbz1hP3RoaXM6ZSx1PWE/ZTp0aGlzLGw9Z2wobyx1LGkscyk7cmV0dXJuIGE/bC5uZWdhdGUoKTpsfWRpZmZOb3coZT0ibWlsbGlzZWNvbmRzIixuPXt9KXtyZXR1cm4gdGhpcy5kaWZmKGcubm93KCksZSxuKX11bnRpbChlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkP2suZnJvbURhdGVUaW1lcyh0aGlzLGUpOnRoaXN9aGFzU2FtZShlLG4scil7aWYoIXRoaXMuaXNWYWxpZClyZXR1cm4hMTtjb25zdCBzPWUudmFsdWVPZigpLGk9dGhpcy5zZXRab25lKGUuem9uZSx7a2VlcExvY2FsVGltZTohMH0pO3JldHVybiBpLnN0YXJ0T2YobixyKTw9cyYmczw9aS5lbmRPZihuLHIpfWVxdWFscyhlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkJiZlLmlzVmFsaWQmJnRoaXMudmFsdWVPZigpPT09ZS52YWx1ZU9mKCkmJnRoaXMuem9uZS5lcXVhbHMoZS56b25lKSYmdGhpcy5sb2MuZXF1YWxzKGUubG9jKX10b1JlbGF0aXZlKGU9e30pe2lmKCF0aGlzLmlzVmFsaWQpcmV0dXJuIG51bGw7Y29uc3Qgbj1lLmJhc2V8fGcuZnJvbU9iamVjdCh7fSx7em9uZTp0aGlzLnpvbmV9KSxyPWUucGFkZGluZz90aGlzPG4/LWUucGFkZGluZzplLnBhZGRpbmc6MDtsZXQgcz1bInllYXJzIiwibW9udGhzIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiXSxpPWUudW5pdDtyZXR1cm4gQXJyYXkuaXNBcnJheShlLnVuaXQpJiYocz1lLnVuaXQsaT12b2lkIDApLFRzKG4sdGhpcy5wbHVzKHIpLHsuLi5lLG51bWVyaWM6ImFsd2F5cyIsdW5pdHM6cyx1bml0Oml9KX10b1JlbGF0aXZlQ2FsZW5kYXIoZT17fSl7cmV0dXJuIHRoaXMuaXNWYWxpZD9UcyhlLmJhc2V8fGcuZnJvbU9iamVjdCh7fSx7em9uZTp0aGlzLnpvbmV9KSx0aGlzLHsuLi5lLG51bWVyaWM6ImF1dG8iLHVuaXRzOlsieWVhcnMiLCJtb250aHMiLCJkYXlzIl0sY2FsZW5kYXJ5OiEwfSk6bnVsbH1zdGF0aWMgbWluKC4uLmUpe2lmKCFlLmV2ZXJ5KGcuaXNEYXRlVGltZSkpdGhyb3cgbmV3IEQoIm1pbiByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lcyIpO3JldHVybiBXcihlLG49Pm4udmFsdWVPZigpLE1hdGgubWluKX1zdGF0aWMgbWF4KC4uLmUpe2lmKCFlLmV2ZXJ5KGcuaXNEYXRlVGltZSkpdGhyb3cgbmV3IEQoIm1heCByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lcyIpO3JldHVybiBXcihlLG49Pm4udmFsdWVPZigpLE1hdGgubWF4KX1zdGF0aWMgZnJvbUZvcm1hdEV4cGxhaW4oZSxuLHI9e30pe2NvbnN0e2xvY2FsZTpzPW51bGwsbnVtYmVyaW5nU3lzdGVtOmk9bnVsbH09cixhPVQuZnJvbU9wdHMoe2xvY2FsZTpzLG51bWJlcmluZ1N5c3RlbTppLGRlZmF1bHRUb0VOOiEwfSk7cmV0dXJuIGZzKGEsZSxuKX1zdGF0aWMgZnJvbVN0cmluZ0V4cGxhaW4oZSxuLHI9e30pe3JldHVybiBnLmZyb21Gb3JtYXRFeHBsYWluKGUsbixyKX1zdGF0aWMgZ2V0IERBVEVfU0hPUlQoKXtyZXR1cm4gaXR9c3RhdGljIGdldCBEQVRFX01FRCgpe3JldHVybiBKbn1zdGF0aWMgZ2V0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSgpe3JldHVybiBSb31zdGF0aWMgZ2V0IERBVEVfRlVMTCgpe3JldHVybiBCbn1zdGF0aWMgZ2V0IERBVEVfSFVHRSgpe3JldHVybiBRbn1zdGF0aWMgZ2V0IFRJTUVfU0lNUExFKCl7cmV0dXJuIEtufXN0YXRpYyBnZXQgVElNRV9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gWG59c3RhdGljIGdldCBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUKCl7cmV0dXJuIGVyfXN0YXRpYyBnZXQgVElNRV9XSVRIX0xPTkdfT0ZGU0VUKCl7cmV0dXJuIHRyfXN0YXRpYyBnZXQgVElNRV8yNF9TSU1QTEUoKXtyZXR1cm4gbnJ9c3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0VDT05EUygpe3JldHVybiBycn1zdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQoKXtyZXR1cm4gc3J9c3RhdGljIGdldCBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQoKXtyZXR1cm4gaXJ9c3RhdGljIGdldCBEQVRFVElNRV9TSE9SVCgpe3JldHVybiBhcn1zdGF0aWMgZ2V0IERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUygpe3JldHVybiBvcn1zdGF0aWMgZ2V0IERBVEVUSU1FX01FRCgpe3JldHVybiB1cn1zdGF0aWMgZ2V0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMoKXtyZXR1cm4gbHJ9c3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZKCl7cmV0dXJuIFVvfXN0YXRpYyBnZXQgREFURVRJTUVfRlVMTCgpe3JldHVybiBjcn1zdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIGZyfXN0YXRpYyBnZXQgREFURVRJTUVfSFVHRSgpe3JldHVybiBkcn1zdGF0aWMgZ2V0IERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTKCl7cmV0dXJuIGhyfX1mdW5jdGlvbiBqZSh0KXtpZihnLmlzRGF0ZVRpbWUodCkpcmV0dXJuIHQ7aWYodCYmdC52YWx1ZU9mJiZkZSh0LnZhbHVlT2YoKSkpcmV0dXJuIGcuZnJvbUpTRGF0ZSh0KTtpZih0JiZ0eXBlb2YgdD09Im9iamVjdCIpcmV0dXJuIGcuZnJvbU9iamVjdCh0KTt0aHJvdyBuZXcgRChgVW5rbm93biBkYXRldGltZSBhcmd1bWVudDogJHt0fSwgb2YgdHlwZSAke3R5cGVvZiB0fWApfWZ1bmN0aW9uIExsKHtjb2xsZWN0aW9uczp0LGx3dzplfSx7dGFibGVJZHM6bix0YWJsZUNvbHVtbklkczpyLHJlbGF0aW9uc2hpcElkczpzLGluZGV4SWRzOmksaW5kZXhDb2x1bW5JZHM6YSxtZW1vSWRzOm99KXtBKHQpLmNvbGxlY3Rpb24oInRhYmxlRW50aXRpZXMiKS5yZW1vdmVNYW55KG4pLEEodCkuY29sbGVjdGlvbigidGFibGVDb2x1bW5FbnRpdGllcyIpLnJlbW92ZU1hbnkociksQSh0KS5jb2xsZWN0aW9uKCJyZWxhdGlvbnNoaXBFbnRpdGllcyIpLnJlbW92ZU1hbnkocyksQSh0KS5jb2xsZWN0aW9uKCJpbmRleEVudGl0aWVzIikucmVtb3ZlTWFueShpKSxBKHQpLmNvbGxlY3Rpb24oImluZGV4Q29sdW1uRW50aXRpZXMiKS5yZW1vdmVNYW55KGEpLEEodCkuY29sbGVjdGlvbigibWVtb0VudGl0aWVzIikucmVtb3ZlTWFueShvKSxbLi4ubiwuLi5yLC4uLnMsLi4uaSwuLi5hLC4uLm9dLmZvckVhY2godT0+UmVmbGVjdC5kZWxldGVQcm9wZXJ0eShlLHUpKX1jb25zdCBfbD0zLHpsPV8oWyJ0YWJsZUVudGl0aWVzIiwidGFibGVDb2x1bW5FbnRpdGllcyIsInJlbGF0aW9uc2hpcEVudGl0aWVzIiwiaW5kZXhFbnRpdGllcyIsImluZGV4Q29sdW1uRW50aXRpZXMiLCJtZW1vRW50aXRpZXMiXSk7Y2xhc3MgJGx7YXN5bmMgcnVuKGUpe2NvbnN0IG49SlNPTi5wYXJzZShlKSxyPUNvKG4pLHtkb2M6e3RhYmxlSWRzOnMsbWVtb0lkczppLGluZGV4SWRzOmEscmVsYXRpb25zaGlwSWRzOm99LGNvbGxlY3Rpb25zOnUsbHd3Omx9PXIsYz1fKHMpLGQ9XyhpKSxwPV8oYSksaD1fKG8pLFM9WmwoZy5ub3coKSksVT1BKHUpLmNvbGxlY3Rpb24oInRhYmxlRW50aXRpZXMiKSxNPUEodSkuY29sbGVjdGlvbigidGFibGVDb2x1bW5FbnRpdGllcyIpLGo9QSh1KS5jb2xsZWN0aW9uKCJpbmRleEVudGl0aWVzIiksQj1BKHUpLmNvbGxlY3Rpb24oImluZGV4Q29sdW1uRW50aXRpZXMiKSxGZT1BKHUpLmNvbGxlY3Rpb24oInJlbGF0aW9uc2hpcEVudGl0aWVzIiksa3Q9QSh1KS5jb2xsZWN0aW9uKCJtZW1vRW50aXRpZXMiKSxIPW5ldyBTZXQoVS5zZWxlY3RBbGwoKS5maWx0ZXIoUyhjKSkubWFwKCh7aWQ6bX0pPT5tKSksZ2U9bmV3IFNldCxwZT1uZXcgU2V0KEZlLnNlbGVjdEFsbCgpLmZpbHRlcihTKGgpKS5tYXAoKHtpZDptfSk9Pm0pKSxvZT1uZXcgU2V0KGouc2VsZWN0QWxsKCkuZmlsdGVyKFMocCkpLm1hcCgoe2lkOm19KT0+bSkpLFE9bmV3IFNldCxLPW5ldyBTZXQoa3Quc2VsZWN0QWxsKCkuZmlsdGVyKFMoZCkpLm1hcCgoe2lkOm19KT0+bSkpO00uc2VsZWN0QWxsKCkuZmlsdGVyKCh7dGFibGVJZDptfSk9PkguaGFzKG0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5nZS5hZGQobSkpLEZlLnNlbGVjdEFsbCgpLmZpbHRlcigoe2lkOm0sc3RhcnQ6WSxlbmQ6SGV9KT0+IXBlLmhhcyhtKSYmKEguaGFzKFkudGFibGVJZCl8fEguaGFzKEhlLnRhYmxlSWQpKSkuZm9yRWFjaCgoe2lkOm19KT0+cGUuYWRkKG0pKSxqLnNlbGVjdEFsbCgpLmZpbHRlcigoe2lkOm0sdGFibGVJZDpZfSk9PiFvZS5oYXMobSkmJkguaGFzKFkpKS5mb3JFYWNoKCh7aWQ6bX0pPT5vZS5hZGQobSkpLEIuc2VsZWN0QWxsKCkuZmlsdGVyKCh7aW5kZXhJZDptfSk9Pm9lLmhhcyhtKSkuZm9yRWFjaCgoe2lkOm19KT0+US5hZGQobSkpLExsKHIse3RhYmxlSWRzOlsuLi5IXSx0YWJsZUNvbHVtbklkczpbLi4uZ2VdLHJlbGF0aW9uc2hpcElkczpbLi4ucGVdLGluZGV4SWRzOlsuLi5vZV0saW5kZXhDb2x1bW5JZHM6Wy4uLlFdLG1lbW9JZHM6Wy4uLktdfSk7Y29uc3QgYnQ9XyhVLnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpLFVsPV8oTS5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKSxrcz1fKGouc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksUGw9XyhCLnNlbGVjdEFsbCgpLm1hcCgoe2lkOm19KT0+bSkpLHFsPV8oRmUuc2VsZWN0QWxsKCkubWFwKCh7aWQ6bX0pPT5tKSksamw9XyhrdC5zZWxlY3RBbGwoKS5tYXAoKHtpZDptfSk9Pm0pKTtyZXR1cm4gTS5zZWxlY3RBbGwoKS5maWx0ZXIoKHt0YWJsZUlkOm0saWQ6WSxtZXRhOkhlfSk9PiFidChtKSYmUygoKT0+ITEpKHtpZDpZLG1ldGE6SGV9KSkuZm9yRWFjaCgoe2lkOm19KT0+Z2UuYWRkKG0pKSxCLnNlbGVjdEFsbCgpLmZpbHRlcigoe2luZGV4SWQ6bSxpZDpZLG1ldGE6SGV9KT0+IWtzKG0pJiZTKCgpPT4hMSkoe2lkOlksbWV0YTpIZX0pKS5mb3JFYWNoKCh7aWQ6bX0pPT5RLmFkZChtKSksT2JqZWN0LmVudHJpZXMobCkuZm9yRWFjaCgoW20sW1ldXSk9PntpZih6bChZKSlzd2l0Y2goWSl7Y2FzZSJ0YWJsZUVudGl0aWVzIjohYnQobSkmJkguYWRkKG0pO2JyZWFrO2Nhc2UidGFibGVDb2x1bW5FbnRpdGllcyI6IVVsKG0pJiZnZS5hZGQobSk7YnJlYWs7Y2FzZSJyZWxhdGlvbnNoaXBFbnRpdGllcyI6IXFsKG0pJiZwZS5hZGQobSk7YnJlYWs7Y2FzZSJpbmRleEVudGl0aWVzIjoha3MobSkmJm9lLmFkZChtKTticmVhaztjYXNlImluZGV4Q29sdW1uRW50aXRpZXMiOiFQbChtKSYmUS5hZGQobSk7YnJlYWs7Y2FzZSJtZW1vRW50aXRpZXMiOiFqbChtKSYmSy5hZGQobSk7YnJlYWt9fSkse3RhYmxlSWRzOlsuLi5IXSx0YWJsZUNvbHVtbklkczpbLi4uZ2VdLHJlbGF0aW9uc2hpcElkczpbLi4ucGVdLGluZGV4SWRzOlsuLi5vZV0saW5kZXhDb2x1bW5JZHM6Wy4uLlFdLG1lbW9JZHM6Wy4uLktdfX19Y29uc3QgWmw9dD0+ZT0+KHtpZDpuLG1ldGE6cn0pPT57aWYoZShuKSlyZXR1cm4hMTtjb25zdCBzPU1hdGguZmxvb3IodC5kaWZmKGcuZnJvbU1pbGxpcyhyLnVwZGF0ZUF0KSwiZGF5cyIpLnRvT2JqZWN0KCkuZGF5cz8/MCk7cmV0dXJuIF9sPHN9LFJsPW5ldyAkbDtFdChSbCl9KSgpOwo=",pB=typeof window<"u"&&window.Blob&&new Blob([atob(dB)],{type:"text/javascript;charset=utf-8"});function hB(e){let t;try{if(t=pB&&(window.URL||window.webkitURL).createObjectURL(pB),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),n}catch{return new Worker("data:application/javascript;base64,"+dB,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}const mB="@dineug/erd-editor-schema-gc-worker?v3.2.3";let bB=null;let fB,yB=null;const gB=Cc`
  visibility: hidden;
  position: fixed;
  top: -100px;
  white-space: nowrap;
  font-family: var(--text-font-family);
  ${_w};
`;function vB(){const e=yB||(yB=document.createElement("canvas"),yB);return fB||(fB=e.getContext("2d"),fB&&(fB.font=`400 12px ${o$}`),fB)}const ZB=Cc`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
`,xB=Cc`
  ${ZB};
  background-color: var(--canvas-boundary-background);
  outline: none;

  &.none-focus {
    div[data-focus-border] {
      border-color: var(--placeholder) !important;
    }

    div[data-focus-border-bottom] {
      border-bottom-color: var(--placeholder) !important;
    }

    input[data-focus-border-bottom] {
      border-bottom-color: var(--placeholder) !important;
    }
  }
`,GB=Cc`
  ${ZB};
`,XB=Pu(["settings.changeZoomLevel","settings.streamZoomLevel","settings.scrollTo","settings.streamScrollTo","settings.changeCanvasType"]);const IB=Pu([bw.edit,bw.stop,bw.search,bw.undo,bw.redo,bw.zoomIn,bw.zoomOut]),WB=fw.filter((e=>!IB(e))),kB={grayColor:iP.slate,accentColor:lP.indigo,appearance:tP.dark},VB=Pu(oP),SB=Pu(rP),CB=Pu(nP);function LB({props:e,ctx:t,app:n,root:i}){const{store:o,keyBindingMap:l,emitter:r,shortcut$:a,keydown$:s}=n,c=Vo({options:{...kB},preset:sP(kB),custom:{}}),u=Vo({...c.preset,...c.custom},{shallow:!0}),d=function(){const e=globalThis.matchMedia("(prefers-color-scheme: dark)"),t=Vo({isDark:e.matches},{shallow:!0}),{addUnsubscribe:n}=Hw(),i=e=>{t.isDark=e.matches};return uo((()=>{e.addEventListener("change",i),n((()=>{e.removeEventListener("change",i)}))})),{state:t}}(),{addUnsubscribe:p}=Hw(),h=new Set,m=()=>{e.readonly||t.dispatchEvent(new CustomEvent("change"))},b=new Set([So(e).subscribe((t=>{"systemDarkMode"!==t||!e.systemDarkMode||(c.options.appearance=d.state.isDark?tP.dark:tP.light)})),So(d.state).subscribe((t=>{"isDark"!==t||!e.systemDarkMode||(c.options.appearance=d.state.isDark?tP.dark:tP.light)})),So(c.options).subscribe((()=>{Object.assign(c.preset,sP(c.options))})),So(c.preset).subscribe((()=>{Object.assign(u,c.preset,c.custom)})),So(c).subscribe((e=>{"custom"===e&&Object.assign(u,c.preset,c.custom)}))]);return uo((()=>{p(o.change$.subscribe(m),r.on({setThemeOptions:({payload:e})=>{t.setPresetTheme(e),t.dispatchEvent(new CustomEvent("changePresetTheme",{detail:uf(c.options)}))}}))})),t.focus=()=>{var e;null==(e=i.value)||e.focus()},t.blur=()=>{var e;t.focus(),null==(e=i.value)||e.blur()},t.clear=()=>{o.dispatchSync(aZ())},t.destroy=()=>{Rw(n),Array.from(b).forEach((e=>e())),Array.from(h).forEach((e=>e.destroy())),b.clear(),h.clear()},t.setInitialValue=e=>{const t=Gv(e);o.dispatchSync(LW(by(t)?"{}":t)),r.emit(jY())},t.setPresetTheme=e=>{_u(e.grayColor)&&VB(e.grayColor)&&(c.options.grayColor=e.grayColor),_u(e.accentColor)&&SB(e.accentColor)&&(c.options.accentColor=e.accentColor),_u(e.appearance)&&CB(e.appearance)&&(c.options.appearance=e.appearance)},t.setTheme=e=>{const t={};D$.forEach((n=>{const i=Lh(e,n);_u(i)&&Reflect.set(t,n,i)})),c.custom=t},t.setKeyBindingMap=e=>{WB.forEach((t=>{const n=Lh(e,t);td(n)&&Reflect.set(l,t,n)}))},t.setSchemaSQL=e=>{const t=Gv(e);by(t)||o.dispatchSync(MW(t))},t.getSchemaSQL=e=>{const t=vv(e??"")?Lh(ov,e??""):void 0;return AU(o.state,t)},t.getSharedStore=e=>{const t=(null==e?void 0:e.mouseTracker)??!0,n=function(e,t){const n={editorId:e.state.editor.id},i=new Set,o=new Set,l=new fu,r=new fu,a=new fu;let s=!0;i.add(new uu((t=>e.subscribe((e=>t.next(e))))).pipe(hk(rk),pY([Yg.shared]),gk,dY(r,a),gk,Mu((e=>Tg(Yg.shared,e.map((e=>{var i;const o={...e,meta:Object.assign({},e.meta??{},{...n,nickname:null==(i=null==t?void 0:t.getNickname)?void 0:i.call(t)})};return XB(e.type)?wg(Yg.following,o):o})))))).subscribe((e=>l.next(e))));const c=()=>{const e=0<o.size;s&&e?r.next():a.next()};return Object.freeze({connection:()=>{s=!0,c()},disconnect:()=>{s=!1,c()},dispatch:t=>{e.dispatch(t)},dispatchSync:t=>{e.dispatchSync(t)},subscribe:e=>{const t=l.subscribe((t=>e(t)));return o.add(t),c(),()=>{t.unsubscribe(),o.delete(t),c()}},destroy:()=>{Array.from(i).forEach((e=>e.unsubscribe())),Array.from(o).forEach((e=>e.unsubscribe())),i.clear(),o.clear(),e.destroy(),l.complete(),r.complete(),a.complete()}})}(o,e);return h.add(n),t&&r.emit(EY()),Object.freeze({...n,destroy:()=>{n.destroy(),h.delete(n),0===h.size&&r.emit($Y())}})},t.setDiffValue=e=>{const t=Gv(e);r.emit(PY({value:by(t)?"{}":t}))},Object.defineProperty(t,"value",{get:()=>ai(o.state),set:e=>{const t=Gv(e);o.dispatchSync(CW(by(t)?"{}":t))}}),{theme:u,themeState:c,destroySet:b,hasDarkMode:()=>c.options.appearance===tP.dark}}!function(e,t){var n,i,o,l,r;t.shadow??(t.shadow="open");const a=(e=>Wi(e)?e:Xi(e)?[]:Object.keys(e))(t.observedProps),s=(e=>Xi(e)||Wi(e)?[]:Object.keys(e).filter((t=>{const n=e[t];return vi(n)||ki(n)&&!Xi(n.type)})).map((t=>{const n=e[t];return ki(n)?[t,Reflect.get(n,"type")]:[t,n]})))(t.observedProps),c=(e=>Xi(e)||Wi(e)?[]:Object.keys(e).filter((t=>{const n=e[t];return n===Number||n===String||n===Boolean||ki(n)&&!Xi(n.default)})).map((t=>{const n=e[t];return ki(n)?[t,Reflect.get(n,"default")]:n===Number?[t,0]:n===Boolean?[t,!1]:[t,""]})))(t.observedProps),u=(r=class extends HTMLElement{static get observedAttributes(){return Array.from(new Set([...a,...a.map((e=>(e=>{var t;return(null==(t=e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))?void 0:t.join("-").toLowerCase())??""})(e)))]))}constructor(){super(),Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:Vo({},{shallow:!0})}),n.set(this,null),i.set(this,this),o.set(this,void 0),Object.defineProperty(this,"host",{enumerable:!0,configurable:!0,writable:!0,value:this}),c.forEach((([e,t])=>Reflect.set(this[xc],Oo(e),t))),t.shadow&&Ui(this,i,this.attachShadow({mode:t.shadow}),"f"),ao(this),Ui(this,o,t.render.call(this,this[xc],this),"f"),ao(null)}connectedCallback(){const e=this.getRootNode();e instanceof ShadowRoot&&(this.host=e.host),Fi(this,i,"f")instanceof ShadowRoot&&function(e){const t=gc();t.hostContextMap.has(e)||(t.hostContextMap.set(e,{vSheets:new Set,styleElements:new Set}),Zc())}(Fi(this,i,"f")),bo(this,Qi);let t=!1;Ui(this,n,Io((()=>{bo(this,t?eo:qi),function(e,t){var n;if(!Do(t))return void(wa.has(e)&&(null==(n=wa.get(e))||n.destroy(),wa.delete(e)));const{strings:i,values:o}=t,l=wa.get(e);if(null!=l&&l.equalStrings(i))null==l||l.commit(o);else{const n=new Ya(t);null==l||l.destroy(),wa.set(e,n),n.insert("children",e),n.commit(o)}}(Fi(this,i,"f"),ac`${Fi(this,o,"f").call(this)}`),t?bo(this,no):(bo(this,to),t=!0)})),"f"),bo(this,Di)}disconnectedCallback(){var e;null==(e=Fi(this,n,"f"))||e.call(this),Ui(this,n,null,"f"),bo(this,_i),Fi(this,i,"f")instanceof ShadowRoot&&function(e){const t=gc(),n=t.hostContextMap.get(e);n&&(yc?e.adoptedStyleSheets=[]:n.styleElements.forEach((t=>e.removeChild(t))),t.hostContextMap.delete(e))}(Fi(this,i,"f"))}attributeChangedCallback(e,t,n){const i=s.find((([t])=>Oo(t)===Oo(e)));i?Reflect.set(this[xc],Oo(e),i[1]===Boolean?"true"===n||""===n:i[1](n)):Reflect.set(this[xc],Oo(e),n)}},n=new WeakMap,i=new WeakMap,o=new WeakMap,l=xc,r);a.forEach((e=>{Object.defineProperty(u.prototype,e,{get(){return Reflect.get(this[xc],e)},set(t){Reflect.set(this[xc],e,t)}})})),customElements.define(e,u)}("erd-editor",{shadow:"closed",observedProps:{readonly:Boolean,systemDarkMode:Boolean,enableThemeBuilder:Boolean},render:(e,t)=>{const n=function(){const e=vB(),t=document.createElement("span");return t.className=gB.toString(),{span:t,toWidth:n=>{let i=0;return e?i=e.measureText(n).width:(t.innerText=n,i=t.offsetWidth),Math.round(i)+2}}}(),i=Sw({toWidth:n.toWidth},{getReadonly:()=>e.readonly}),o=Lo(t,Cw,i),l=Ta();!function(e,t){const n=Lw(e),{addUnsubscribe:i}=Hw();let o=()=>{};const l=()=>{const{keyBindingMap:e,shortcut$:i}=n.value,l=t.value;o(),o=MP(l,Object.keys(e).reduce(((t,n)=>{const o=n;return e[o].forEach((e=>{t[e.shortcut]=t=>{e.preventDefault&&t.preventDefault(),e.stopPropagation&&t.stopPropagation(),i.next({type:o,event:t})}})),t}),{}))};uo((()=>{const{keyBindingMap:e}=n.value;l(),i(So(e).subscribe(l),(()=>{o()}))}))}(t,l);const{theme:r,themeState:a,destroySet:s,hasDarkMode:c}=LB({props:e,ctx:t,app:i,root:l}),{store:u,keydown$:d,emitter:p}=i,{addUnsubscribe:h}=Hw(),m=Vo({isFocus:!1,mouseTracking:!1});s.add(o.destroy),s.add(p.on({mouseTrackerStart:()=>{m.mouseTracking=!0},mouseTrackerEnd:()=>{m.mouseTracking=!1}}));const b=()=>{setTimeout((()=>{document.activeElement!==t&&t.focus()}),1)},f=e=>{d.next(e)};let y=!1,g=-1;const v=()=>{y=!0,m.isFocus=!0},Z=()=>{y=!1,clearTimeout(g),g=setTimeout((()=>{m.isFocus=y}),10)},x=e=>{p.emit(MY({event:e}))},G=e=>{p.emit(JY({event:e}))},X=()=>{var e;null==(e=function(){if(bB)return bB;try{const e=new uB({name:mB});bB=DP(e.port)}catch{try{const e=new hB({name:mB});bB=DP(e)}catch{bB=new zR}}return bB}())||e.run(ai(u.state)).then((e=>{(e.tableIds.length||e.tableColumnIds.length||e.relationshipIds.length||e.indexIds.length||e.indexColumnIds.length||e.memoIds.length)&&(NR(u.state,e),u.dispatchSync(VZ()),t.dispatchEvent(new CustomEvent("change")))}))};uo((()=>{t.focus();const e=l.value,n=new ResizeObserver((e=>{for(const t of e){const{width:e,height:n}=t.contentRect;u.dispatch(rZ({width:e,height:n-30}))}}));n.observe(e),h((()=>{n.unobserve(e),n.disconnect()}),eY(t,dT.type).pipe($u(50)).subscribe(b),eY(t,pT.type).subscribe(t.focus),p.on({schemaGC:X}))}));const I=e=>{const t=e.target;if(!t)return;const{store:n}=i;n.state.editor.openMap[dz]&&!t.closest(".toolbar")&&!t.closest(".theme-builder")&&n.dispatch(XZ({[dz]:!1}))};return()=>{const{settings:t}=u.state,i=c();return ac`
      <${l$} />
      <${_$} theme=${r} />
      <div
        ${Na(l)}
        class=${["root",xB,{dark:i,"none-focus":!m.isFocus}]}
        tabindex="-1"
        @keydown=${f}
        @focus=${v}
        @focusin=${v}
        @focusout=${Z}
        @copy=${x}
        @paste=${G}
        @mousedown=${I}
      >
        <${IP}
          enableThemeBuilder=${e.enableThemeBuilder}
          readonly=${e.readonly}
        />
        ${za(t.canvasType===rg.ERD?ac`
                <div class=${GB}>
                  <${i$}
                    isDarkMode=${i}
                    mouseTracking=${m.mouseTracking}
                  />
                </div>
              `:null)}
        ${t.canvasType===rg.visualization?ac`<div class=${GB}><${RP} /></div>`:t.canvasType===rg.schemaSQL?ac`
                <div class=${GB}>
                  <${IE} isDarkMode=${i} />
                </div>
              `:t.canvasType===rg.generatorCode?ac`
                  <div class=${GB}>
                    <${vE} isDarkMode=${i} />
                  </div>
                `:t.canvasType===rg.settings?ac`<div class=${GB}><${Q$} /></div>`:null}
        <${vP} />
        ${e.enableThemeBuilder?ac`<${yP} theme=${a.options} />`:null}
        <${v$} />
        ${n.span}
      </div>
    `}}});export{vU as setExportFileCallback,UO as setGetShikiServiceCallback,kF as setImportFileCallback};export default null;
//# sourceMappingURL=/sm/56a6fff31dfc83157c50a3477603a13de184dd14ef00b8aef0b55766828b52a2.map